/*
	ractive-legacy.min.js v0.6.1
	2014-12-12 - commit 8f304b07 

	http://ractivejs.org
	http://twitter.com/RactiveJS

	Released under the MIT License.
*/

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=b():a.Ractive=b()}("undefined"!=typeof window?window:this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=Yh.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=Yh.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===ai.call(a)}function f(a){return bi.test(ai.call(a))}function g(a){if(!k(a))return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function i(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===ai.call(a)}function j(a){return!isNaN(parseFloat(a))&&isFinite(a)}function k(a){return a&&"[object Object]"===ai.call(a)}function l(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=ji.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(n),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=li.test(a)?a.replace(li,d):a.replace(ii,"").replace(hi,function(a,b){var c,d;return ki.test(b)?a:(c=b.split(",").map(m),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function m(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function n(a){return a.str}function o(a,b,c){var d,e=b.constructor._guid;(d=p(c.css,c,e)||p(a.css,a,e))&&(b.constructor.css=d)}function p(a,b,c){return a?b.noCssTransform?a:mi(a,c):void 0}function q(a,b){return"function"==typeof b&&/_super/.test(a)}function r(a,b,c){var d=c.data||{},e=v(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return w(e,d)}function s(a,b,c){b.data=r(a,b,c)}function t(a,b,c){var d=c.data,e=r(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}}function u(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}function v(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return x(a,b),w(a,b)}function w(a,b){return"function"==typeof b?A(b,a):"function"==typeof a?z(b,a):y(b,a)}function x(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function y(a,b){return a=a||{},b?(x(b,a,!0),a):a}function z(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function A(a,b){var c;return c="function"!=typeof b?function(a){y(a,b)}:function(a){return b=pi(b,function(){},!0),b.call(this,a)||a},pi(a,c)}function B(a){var b,c,d,e;return b=a.pos,d=uj(a),null===d?null:(c=[d],a.matchString(",")?(e=B(a),e?c.concat(e):(a.pos=b,null)):c)}function C(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=C(a),null===f&&a.error(cj),f.forEach(b)),d)}function D(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(qj))return{t:Ri,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(cj),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:Ri,x:d}):null}function E(a){return JSON.stringify(String(a))}function F(a,b){var c,d;if(a.t===Qi&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(k(d))F(d,b);else for(c=d.length;c--;)F(d[c],b);a.x&&F(a.x,b),a.r&&F(a.r,b),a.v&&F(a.v,b)}function G(a,b,c){var d=function(b){return G(a,b,c)};switch(b.t){case Ni:case Oi:case Ji:return b.v;case Ki:return E(b.v);case Li:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Mi:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case Pi:return b.k+":"+G(a,b.v,c);case Ti:return("typeof"===b.s?"typeof ":b.s)+G(a,b.o,c);case Wi:return G(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+G(a,b.o[1],c);case Xi:return G(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case Ui:return"("+G(a,b.x,c)+")";case Si:return G(a,b.x,c)+G(a,b.r,c);case Ri:return b.n?"."+b.n:"["+G(a,b.x,c)+"]";case Vi:return G(a,b.o[0],c)+"?"+G(a,b.o[1],c)+":"+G(a,b.o[2],c);case Qi:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function H(a,b,c){var d;if(b){for(;b.t===Ui&&b.x;)b=b.x;return b.t===Qi?c.r=b.n:b.t===Ji&&_j.test(b.v)?c.r=b.v:(d=I(a,b))?c.rx=d:c.x=a.flattenExpression(b),c}}function I(a,b){for(var c,d=[];b.t===Si&&b.r.t===Ri;)c=b.r,d.unshift(c.x?c.x.t===Qi?c.x:a.flattenExpression(c.x):c.n),b=b.x;return b.t!==Qi?null:{r:b.n,m:d}}function J(a){var b;return a.interpolate[a.inside]===!1?null:(b=Vj.slice().sort(function(b,c){return a[c.delimiters][0].length-a[b.delimiters][0].length}),function c(d){return d?K(a,d)||c(b.shift()):null}(b.shift()))}function K(a,b){var c,d,e,f,g,h,i,j;if(c=a.pos,e=a[b.delimiters],!a.matchString(e[0]))return null;if(d=Uj(a))return a.matchString(e[1])?(a[b.delimiters]=d,kk):null;if(a.allowWhitespace(),d=jk(a,b),null===d)return a.pos=c,null;if(a.allowWhitespace(),a.matchString(e[1])||a.error("Expected closing delimiter '"+e[1]+"' after reference"),d.t===Bi&&(d.exclude=!0),d.t===yi&&(a.sectionDepth-=1,a.sectionDepth<0&&(a.pos=c,a.error("Attempted to close a section that wasn't open"))),d.contextPartialExpression)d.f=d.contextPartialExpression,d.t=wi,d.n="with",delete d.contextPartialExpression;else if(L(d)){for(a.sectionDepth+=1,f=[],i=f,g=d.n;j=a.read();){if(j.t===yi){g&&j.r!==g&&a.error("Expected {{/"+g+"}}");break}if(j.t===ui&&"else"===j.r){if("unless"!==d.n){i=h=[];continue}a.error("{{else}} not allowed in {{#unless}}")}i.push(j)}f.length&&(d.f=f),h&&h.length&&(d.l=h,"with"===d.n&&(d.n="if-with"))}return a.includeLinePositions&&(d.p=a.getLinePos(c)),d.n?d.n=Yj[d.n]:d.t===xi&&(d.t=wi,d.n=Zi),d.n===bj?(d.r&&-1===d.r.indexOf(".")||a.error("Invalid partial name "+d.r+"."),{n:d.r,f:d.f,t:Hi}):d}function L(a){return a.t===wi||a.t===xi}function M(a){return a.replace(fk,function(a,b){var c;return c="#"!==b[0]?dk[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(N(c)):a})}function N(a){return a?10===a?32:128>a?a:159>=a?ek[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function O(a){return a.replace(ik,"&amp;").replace(gk,"&lt;").replace(hk,"&gt;")}function P(a){return a.replace(wk,"\\$&")}function Q(a){var b=a.remaining(),c=a.pos,d=a.matchPattern(zk),e=a.options.delimiters[0],f=a.options.delimiters[1];if(d&&a.matchString(e)){var g=a.matchPattern(Ak);if(!a.matchString(f)||!a.matchPattern(Bk))return a.pos=c,null;var h=new RegExp("<!--\\s*"+xk(e)+"\\s*\\/\\s*"+g+"\\s*"+xk(f)+"\\s*-->");b=a.remaining();var i=h.exec(b);if(!i)throw new Error('Inline partials must have a closing delimiter, and cannot be nested. Expected closing for "'+g+'", but '+(i?'instead found "'+i[1]+'"':" no closing found"));var j={t:Hi,f:new a.StandardParser(b.substr(0,i.index),a.options).result,n:g};return a.pos+=i.index+i[0].length,j}return a.pos=c,null}function R(a){var b,c,d;return a.allowWhitespace(),(c=a.matchPattern(Gk))?(b={name:c},d=S(a),d&&(b.value=d),b):null}function S(a){var b,c,d,e;return b=a.pos,a.allowWhitespace(),a.matchString("=")?(a.allowWhitespace(),c=a.pos,d=a.sectionDepth,e=V(a,"'")||V(a,'"')||U(a),a.sectionDepth!==d&&(a.pos=c,a.error("An attribute value must contain as many opening section tags as closing section tags")),null===e?(a.pos=b,null):e.length?1===e.length&&"string"==typeof e[0]?M(e[0]):e:null):(a.pos=b,null)}function T(a){var b,c,d,e,f;return b=a.pos,(c=a.matchPattern(Hk))?(d=c,e=[a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],-1!==(f=Ck(d,e))&&(c=c.substr(0,f),a.pos=b+c.length),c):null}function U(a){var b,c;for(a.inAttribute=!0,b=[],c=lk(a)||T(a);null!==c;)b.push(c),c=lk(a)||T(a);return b.length?(a.inAttribute=!1,b):null}function V(a,b){var c,d,e;if(c=a.pos,!a.matchString(b))return null;for(a.inAttribute=b,d=[],e=lk(a)||W(a,b);null!==e;)d.push(e),e=lk(a)||W(a,b);return a.matchString(b)?(a.inAttribute=!1,d):(a.pos=c,null)}function W(a,b){var c,d,e,f;return c=a.pos,e=a.remaining(),f=[b,a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],d=Ck(e,f),-1===d&&a.error("Quoted attribute value must have a closing quote"),d?(a.pos+=d,e.substr(0,d)):null}function X(a){var b,c,d;return a.allowWhitespace(),(b=tj(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function Y(a){var b,c,d,e,f,g,h,i,j,k,l;if(b=a.pos,a.inside||a.inAttribute)return null;if(!a.matchString("<"))return null;if("/"===a.nextChar())return null;if(c={},a.includeLinePositions&&(c.p=a.getLinePos(b)),a.matchString("!"))return c.t=Ii,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;if(c.t=zi,c.e=a.matchPattern(Pk),!c.e)return null;for(Qk.test(a.nextChar())||a.error("Illegal tag name"),g=function(b,d){var e=d.n||d;Tk.test(e)&&(a.pos-=e.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),c.v[b]=d},a.allowWhitespace();h=lk(a)||Ik(a);)h.name?(e=Uk[h.name])?c[e]=Ok(h.value):(f=Sk.exec(h.name))?(c.v||(c.v={}),i=Ok(h.value),g(f[1],i)):a.sanitizeEventAttributes&&Rk.test(h.name)||(c.a||(c.a={}),c.a[h.name]=h.value||0):(c.m||(c.m=[]),c.m.push(h)),a.allowWhitespace();if(a.allowWhitespace(),a.matchString("/")&&(j=!0),!a.matchString(">"))return null;if(d=c.e.toLowerCase(),!j&&!ck.test(c.e)){for(("script"===d||"style"===d)&&(a.inside=d),k=[];Z(d,a.remaining())&&(l=a.read(Mk))&&l.t!==yi&&l.t!==Ei;)k.push(l);k.length&&(c.f=k)}return a.inside=null,a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(d)?Vk:c}function Z(a,b){var c,d;return c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b),d=Nk[a],c&&d?!~d.indexOf(c[1].toLowerCase()):!0}function $(a){return"string"==typeof a}function _(a){return a.t===Bi||a.t===Ci}function ab(a){return(a.t===wi||a.t===xi)&&a.f}function bb(a,b,c){for(var d,f,g=c.length;g--;)d=c[g],cb(d)?(b[d.n]=d.f,c.splice(g,1)):e(d.f)&&((f=db(a,d))?(a.push(f),bb(a,d.p={},d.f),a.pop()):e(d.f)&&bb(a,b,d.f))}function cb(a){return a.t===Hi}function db(a,b){var c,d,e=b.e;if(b.e)for(c=0;c<a.length;c++)if(d=(a[c].components||{})[e])return d}function eb(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;for(cl(a),g=a.length;g--;)h=a[g],h.exclude?a.splice(g,1):b&&h.t===Bi&&a.splice(g,1);for(_k(a,d,e),g=a.length;g--;)if(h=a[g],h.f&&(k=c||h.t===zi&&fl.test(h.e),k||(i=a[g-1],j=a[g+1],(!i||"string"==typeof i&&hl.test(i))&&(l=!0),(!j||"string"==typeof j&&gl.test(j))&&(m=!0)),eb(h.f,b,k,l,m,f)),h.l&&(eb(h.l,b,c,l,m,f),f&&(n={t:4,n:Zi,f:h.l},h.r&&(n.r=h.r),h.x&&(n.x=h.x),h.rx&&(n.rx=h.rx),a.splice(g+1,0,n),delete h.l)),h.a)for(o in h.a)h.a.hasOwnProperty(o)&&"string"!=typeof h.a[o]&&eb(h.a[o],b,c,l,m,f);for(g=a.length;g--;)"string"==typeof a[g]&&("string"==typeof a[g+1]&&(a[g]=a[g]+a[g+1],a.splice(g+1,1)),c||(a[g]=a[g].replace(el," ")),""===a[g]&&a.splice(g,1))}function fb(a,b){return void 0===b&&(b=a),function(){b.delimiters=a.delimiters||["{{","}}"],b.tripleDelimiters=a.tripleDelimiters||["{{{","}}}"],b.staticDelimiters=a.staticDelimiters||["[[","]]"],b.staticTripleDelimiters=a.staticTripleDelimiters||["[[[","]]]"]}()}function gb(a,b){var c=a.map(b);return a.forEach(function(a,b){c[a]=c[b]}),c}function hb(a){var b=Uh(nl);return b.parse=function(b,c){return ib(b,c||a)},b}function ib(a,b){if(!kl)throw new Error(si.missingParser);return kl(a,b||this.options)}function jb(a,b){var c;if(!Bh){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(kb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function kb(a){return a&&"#"===a.charAt(0)}function lb(a){return!("string"==typeof a)}function mb(a){return a.defaults&&(a=a.defaults),ml.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function nb(a){var b,c=a._config.template;if(c&&c.fn)return b=ob(a,c.fn),b!==c.result?(c.result=b,b=pb(b,a)):void 0}function ob(a,b){var c=ol.createHelper(ol.getParseOptions(a));return b.call(a,a.data,c)}function pb(a,b){if("string"==typeof a)"#"===a[0]&&(a=ol.fromId(a)),a=kl(a,ol.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function qb(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function rb(a,b){this.name=a,this.useDefaults=b}function sb(a,b){var c;return b.test(a)?b.getValue(a):!a.isolated&&(c=a.parent)?sb(c,b):void 0}function tb(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=ub(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function ub(a,b){var c;return b in a?!function(){var d=a[b];c="function"==typeof d?d:function(){return d}}():c=zl,c}function vb(a,b,c){if(b in a){if(c in a)throw new Error(wb(b,c,!0));gi(wb(b,c)),a[c]=a[b]}}function wb(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function xb(a){vb(a,"eventDefinitions","events")}function yb(a){e(a.adaptors)&&vb(a,"adaptors","adapt")}function zb(a){vb(a,"beforeInit","onconstruct"),vb(a,"init","onrender"),vb(a,"complete","oncomplete"),xb(a),yb(a)}function Ab(a,b,c,d,e){rl[b][a](c,d,e)}function Bb(a){return a in Eh&&!(a in tl.parseOptions)&&!(a in rl)}function Cb(a,b,c,d){Bl(d),Ab(a,"data",b,c,d),tl.parseOptions.forEach(function(a){a in d&&(c[a]=d[a])});for(var e in d)if(Bb(e)){var f=d[e];c[e]="function"==typeof f?Al(b.prototype,e,f):f}tl.registries.forEach(function(e){e[a](b,c,d)}),Ab(a,"template",b,c,d),Ab(a,"css",b,c,d),Db(b.prototype,c,d)}function Db(a,b,c){for(var d in c)if(!(d in ul)&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=Al(a,d,e)),b[d]=e}}function Eb(a){return function(){return a}}function Fb(a){var b=si[a.message]||a.message||"";return Gb(b,a.args)}function Gb(a,b){return a.replace(/{([^{}]*)}/g,function(a,c){return b[c]})}function Hb(a){this.event=a,this.method="on"+a,this.deprecate=Kl[a]}function Ib(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function Jb(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function Kb(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function Lb(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function Mb(a){setTimeout(a,0)}function Nb(a,b){return function(){for(var c;c=a.shift();)c(b)}}function Ob(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Ll)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,Ob(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function Pb(a,b,c,d){var e=a[b];if(e&&!Rb(e,d)&&Rb(e,c))return a[b]=Ub(e,c,d),!0}function Qb(a){var b=a.slice(2);return"i"===a[1]&&j(b)?+b:b}function Rb(a,b){return a===b||Wb(a,b)}function Sb(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c]?a.viewmodel.wrapped[c].get():a.get(c);for(f in d)!d.hasOwnProperty(f)||"_ractive"===f&&e(d)||(g=c?c+"."+f:f,b.push(g));return b}var d,f,g;for(d=b.split("."),g=[""];f=d.shift();)"*"===f?g=g.reduce(c,[]):""===g[0]?g[0]=f:g=g.map(Tb(f));return g}function Tb(a){return function(b){return b?b+"."+a:a}}function Ub(a,b,c){return a===b?void 0!==c?c:null:Wb(a,b)?null===c?c:a.replace(b+".",c+"."):void 0}function Vb(a){return a?a.replace(Rl,".$1"):""}function Wb(a,b){return a&&b&&a.substr(0,b.length+1)===b+"."}function Xb(a,b,c){return b=Vb(b),"~/"===b.substr(0,2)?(b=b.substring(2),$b(a,ac(b),c),b):"."===b[0]?(b=Yb(Sl(c),b),b&&$b(a,ac(b),c),b):Zb(a,b,c)}function Yb(a,b){var c;if("."===b)return a;if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),c.join(".")}return a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,"")}function Zb(a,b,c,d){var e,f,g,h,i;for(f=ac(b);c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e+"."+b;return _b(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,i=Zb(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function $b(a,b){var c;!a.parent||a.isolated||_b(a,b)||(c=Zb(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c})}function _b(a,b){return b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function ac(a){var b=a.indexOf(".");return~b?a.slice(0,b):a}function bc(a){a.teardown()}function cc(a){a.unbind()}function dc(a){a.unrender()}function ec(a){a.detach()}function fc(a){a.detachNodes()}function gc(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function hc(){for(var a,b,c;Vl.viewmodels.length;)b=Vl.viewmodels.pop(),c=b.applyChanges(),c&&Zl.fire(b.ractive,c);for(ic(),a=0;a<Vl.views.length;a+=1)Vl.views[a].update();for(Vl.views.length=0,a=0;a<Vl.tasks.length;a+=1)Vl.tasks[a]();return Vl.tasks.length=0,Vl.viewmodels.length?hc():void 0}function ic(){var a,b,c,d;for(a=Yl.length;a--;)b=Yl[a],b.keypath&&Yl.splice(a,1),(c=Tl(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),Yl.splice(a,1));d&&d.forEach(jc)}function jc(a){a.item.resolve(a.keypath)}function kc(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,am.start(d),d.viewmodel.mark(c),am.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function lc(a,b,c){var d;if("string"!=typeof b||!j(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!j(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function mc(a,b){return gm(this,a,void 0===b?1:+b)}function nc(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;if(d=new Ql(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:qm,h.push(oc(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){k(a,n)}),l&&d.then(function(a){l(a,n)}).then(null,function(a){Jl.consoleError({debug:r.debug,err:a})}),q.complete=e,p=oc(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,function(a){Jl.consoleError({debug:r.debug,err:a})}),c.complete=e,g=oc(this,a,b,c),d.stop=function(){g.stop()},d}function oc(a,b,c,d){var e,f,g,i;return b&&(b=Vb(b)),null!==b&&(i=a.viewmodel.get(b)),nm.abort(b,a),h(i,c)?(d.complete&&d.complete(d.to),rm):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,g=new pm({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),nm.add(g),a._animations.push(g),g)}function pc(){return this.detached?this.detached:(this.el&&Kb(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),tm.fire(this),this.detached)}function qc(a){return this.el?this.fragment.find(a):null}function rc(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function sc(a){var b,c;for(b=[a],c=rc(a);c;)b.push(c),c=rc(c);return b}function tc(a,b,c,d){var e=[];return Wh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:wm}}),c?(Wh(e,{cancel:{value:xm},_root:{value:a},_sort:{value:Am},_makeDirty:{value:Bm},_remove:{value:Cm},_dirty:{value:!1,writable:!0}}),e):e}function uc(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Dm(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function vc(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Dm(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function wc(a){return this.fragment.findComponent(a)}function xc(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function yc(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function zc(a){var b,c,d,e,f,g;for(b=a.split("."),(c=Lm[b.length])||(c=Ac(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function Ac(a){var b,c,d,e,f,g="";if(!Lm[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}Lm[a]=d}return Lm[a]}function Bc(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=Mm(b);Cc(a,d,c.event,c.args,!0)}}function Cc(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(Km.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=Dc(a,f,c,d)&&h);if(Km.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=Mm(i),c&&(c.component=a)}Cc(a.parent,b,c,d)}}function Dc(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function Ec(a){var b={args:Array.prototype.slice.call(arguments,1)};Nm(this,a,b)}function Fc(a){var b;return a=Vb(a),b=this.viewmodel.get(a,Pm),void 0===b&&this.parent&&!this.isolated&&Tl(this,a,this.fragment)&&(b=this.viewmodel.get(a)),b}function Gc(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,Hc(this)}function Hc(a){Rm.fire(a),a.findAllComponents("*").forEach(function(a){Hc(a.instance)})}function Ic(a,b,c){var d,f,g=this;return a=Vb(a),d=this.viewmodel.get(a),e(d)&&e(b)?(f=am.start(this,!0),this.viewmodel.merge(a,d,b,c),am.end(),c&&c.complete&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.merge"}}),f.then(c.complete).then(null,function(a){Jl.consoleError({debug:g.debug,err:a})})),f):this.set(a,b,c&&c.complete)}function Jc(a,b){var c,d;return c=Sb(a,b),d={},c.forEach(function(b){d[b]=a.get(b)}),d}function Kc(a,b,c,d){var e,f,g;return b=Vb(b),d=d||gn,fn.test(b)?(e=new en(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Wm(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function Lc(a,b,c){var d,e,f,g;if(k(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",hn(this,a,b,c);if(f=a.split(" "),1===f.length)return hn(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(hn(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function Mc(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function Nc(a,b){var c,d=this;if(a)c=a.split(" ").map(ln).filter(mn),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function Oc(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(ln).filter(mn),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function Pc(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Qc(a,b,c){var d,e,f,g,h,i,j=[];if(d=Rc(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function Rc(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function Sc(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=am.start(this,!0),am.scheduleTask(function(){return An.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Tc(h),b.innerHTML=""}return this.constructor.css&&zn.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),am.end(),this.transitionsEnabled=f,d.then(function(){return Bn.fire(g)}).then(null,function(a){Jl.consoleError({debug:g.debug,err:a})}),d}function Tc(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Uc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function Vc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function Wc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function Xc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function Yc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function Zc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function $c(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function _c(){return this.items&&this.items[0]?this.items[0].firstNode():null}function ad(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function bd(a){var b=this;return void 0===a&&(a=Mn),function(){var c,d,e,f,g,h,i;return c=a.args,g=c?"argsList":"value",h=c?"dirtyArgs":"dirtyValue",b[h]&&(e=cd(b.items,d={},b.root._guid),f=Kk(c?"["+e+"]":e,d),i=f?f.value:c?[b.toString()]:b.toString(),b[g]=i,b[h]=!1),b[g]}()}function cd(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return cd(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=(f=a.root.viewmodel.wrapped[a.keypath])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function dd(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function ed(){return this.value}function fd(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function gd(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function hd(a,b,c){var d;return"@"===b.charAt(0)?new Xn(a,b,c):(d=$n(a.parentFragment,b))?new Zn(a,d,c):new Un(a,b,c)}function id(a,b){var c,d;if(bo[a])return bo[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),bo[a]=c,c}function jd(a){return a.call()}function kd(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":"@"===d[0]?(e=d.slice(1),j(e)?e:'"'+e+'"'):d})}function ld(a){return"${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"}function md(a){return void 0!==a&&"@"!==a[0]}function nd(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){Vh(a,d,{value:eo.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return Vh(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function od(a){return a.value}function pd(a){return void 0!=a}function qd(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!==c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.key=b.key,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=ao(a,e,c)),b.template.x&&(a.resolver=new fo(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new jo(a,b.template.rx,d)),a.template.n!==Zi||a.hasOwnProperty("value")||a.setValue(void 0)}function rd(a){var b,c,d;return a&&"@"===a[0]?(this.keypath=a,void this.setValue(Qb(a))):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function sd(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)
}),this.resolver&&this.resolver.rebind(a,b)}function td(){this.parentFragment.bubble()}function ud(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function vd(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function wd(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function xd(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function yd(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function zd(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function Ad(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function Bd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===$i){if(this.shuffling=!0,am.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath+"."+b,h=i.keypath+"."+a,d.index=a,(j=d.registeredIndexRefs)&&j.forEach(Cd),d.rebind(g,h),void(f[a]=d)))}),e=this.root.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&am.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function Cd(a){a.rebind("","")}function Dd(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Ed(a){var b,c,d=this;this.updating||(this.updating=!0,(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=Od(d.keypath,a),c.index=a,b=new Jt(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):Gd(this,a)&&(this.bubble(),this.rendered&&am.addView(this)),this.value=a,this.updating=!1)}function Fd(a,b,c){if(b===$i&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function Gd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case Yi:return Ld(a,b,!1,c);case Zi:return Ld(a,b,!0,c);case _i:return Kd(a,c);case aj:return Jd(a,b,c);case $i:if(k(b))return Fd(a,a.subtype,!0),Id(a,b,c)}return a.ordered=!!f(b),a.ordered?(Fd(a,$i,!1),Hd(a,b,c)):k(b)||"function"==typeof b?a.template.i?(Fd(a,$i,!0),Id(a,b,c)):(Fd(a,_i,!1),Kd(a,c)):(Fd(a,Yi,!1),Ld(a,b,!1,c))}function Hd(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(cc);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=Od(a.keypath,d),c.index=d,f=new Jt(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function Id(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(Pd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=Od(a.keypath,d),c.key=d,c.index=e++,g=new Jt(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function Jd(a,b,c){return b?Kd(a,c):Md(a)}function Kd(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Jt(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function Ld(a,b,c,d){var e,g,h,i,j;if(g=f(b)&&0===b.length,h=!1,!f(b)&&k(b)){h=!0;for(j in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(cc),!0):void 0:(d.index=0,i=new Jt(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):Md(a)}function Md(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(Nd),a.fragmentsToUnrender.forEach(cc),a.length=a.fragmentsToRender.length=0,!0):void 0}function Nd(a){return a.rendered}function Od(a,b){return(a?a+".":"")+b}function Pd(a){a.rebind("","")}function Qd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function Rd(){var a=this;this.fragments.forEach(cc),this.fragmentsToRender.forEach(function(b){return Kb(a.fragments,b)}),this.fragmentsToRender=[],Rn.call(this),this.length=0,this.unbound=!0}function Sd(a){this.fragments.forEach(a?Td:Ud),this.renderedFragments=[],this.rendered=!1}function Td(a){a.unrender(!0)}function Ud(a){a.unrender(!1)}function Vd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function Wd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function Xd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(Hh(d,a))return d;if(e=d.querySelector(a))return e}return null}function Yd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(Hh(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function Zd(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function $d(a){return Oo[a]||(Oo[a]=Gh(a))}function _d(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=Lb(a.node.options).filter(ae),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function ae(a){return a.selected}function be(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Po(this.value,this.parentFragment.getNode(),this.docFrag),Qo(this.pElement),this.rendered=!0,this.docFrag}function ce(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&am.addView(this))}function de(){return void 0!=this.value?M(""+this.value):""}function ee(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function fe(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=Po(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Qo(this.pElement)}}function ge(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function he(){return null}function ie(){return this.node}function je(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function ke(){var a=this.fragment.getValue();h(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&am.addView(this))}function le(a){var b=a.fragment.items;if(1===b.length)return b[0].type===ui?b[0]:void 0}function me(a){return this.type=Di,this.element=a.element,this.root=a.root,op(this,a.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Jt({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=pp(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,rp(this,a),void(this.ready=!0)):void(this.value=bk.test(this.name)?!0:a.value||"")}function ne(a,b){this.fragment&&this.fragment.rebind(a,b)}function oe(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==Ph.html||(b=up[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(bk.test(b)||"value"===b)&&(this.useProperty=!0),"value"===b&&(this.useProperty=!0,a._ractive.value=this.value)),this.rendered=!0,this.update()}function pe(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath||e.ref)+"}}":bk.test(b)?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+qe(d)+'"':b)}function qe(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function re(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function se(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function te(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=Ib(f,d)}function ue(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function ve(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return am.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function we(){var a,b,c=this,d=c.element,f=c.node,g=c.value;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(f.checked=!0);f.checked=!1}else f.checked=g==a}function xe(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function ye(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function ze(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function Ae(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function Be(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function Ce(){this.locked||(this.node[this.propertyName]=this.value)}function De(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):bk.test(d)?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function Ee(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=Ep:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?zp:yp:"textarea"===e.name?b=Hp:null!=e.getAttribute("contenteditable")?b=Gp:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?zl:"radio"===a&&e.binding&&"name"===e.binding.name?Bp:Hp):this.twoway&&"name"===d?"radio"===f.type?b=Ap:"checkbox"===f.type&&(b=Cp):"style"===d&&f.style.setAttribute?b=Fp:"class"!==d||f.namespaceURI&&f.namespaceURI!==Ph.html?this.useProperty&&(b=Ip):b=Dp,b||(b=Jp),this.update=b,this.update()}function Fe(a,b){var c=b?"svg":"div";return Mp.innerHTML="<"+c+" "+a+"></"+c+">",Lb(Mp.childNodes[0].attributes)}function Ge(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function He(a){for(;a=a.parent;)if("form"===a.name)return a}function Ie(){this._ractive.binding.handleChange()}function Je(a,b,c){var d=a+b+c;return Yp[d]||(Yp[d]=[])}function Ke(a){return a.isChecked}function Le(a){return a.element.getAttribute("value")}function Me(){var a;Vp.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function Ne(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&Vp.call(b),a._timeout=void 0},a.element.lazy)}function Oe(a){var b,c,d,e,f=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||f.contenteditable&&Pe(f.contenteditable))&&Pe(f.value)?c=Xp:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=Pe(f.name),e=Pe(f.checked),d&&e&&Jl.error({message:"badRadioInputBinding"}),d?c="radio"===b?bq:dq:e&&(c="radio"===b?_p:fq)):"file"===b&&Pe(f.value)?c=lq:Pe(f.value)&&(c="number"===b||"range"===b?nq:mq)):"select"===a.name&&Pe(f.value)?c=a.getAttribute("multiple")?jq:hq:"textarea"===a.name&&Pe(f.value)&&(c=mq),c?new c(a):void 0}function Pe(a){return a&&a.isBindable}function Qe(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function Re(a){Nm(this.root,this.getAction(),{event:a})}function Se(){return this.action.toString().trim()}function Te(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(Jl.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:a.tagName,event:b}}),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=co(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=tq.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(ao(g,a,function(a){return g.resolve(b,a)}))}),this.fire=Ue):(d=c.n||c,"string"!=typeof d&&(d=new Jt({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Jt({template:c.d,root:this.root,owner:this.element}),this.fire=We):c.a&&(this.params=c.a,this.fire=Ve))}function Ue(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Km.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Km.dequeue(b)}function Ve(a){Nm(this.root,this.getAction(),{event:a,args:this.params})}function We(a){var b=this.dynamicParams.getValue(sq);"string"==typeof b&&(b=b.substr(1,b.length-2)),Nm(this.root,this.getAction(),{event:a,args:b})}function Xe(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=$n(c.element.parentFragment))&&(e=$n.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath,context:b.root.get(b.keypath)})}function Ye(){var a,b=this.name;if(!this.invalid){if(a=Dl.registries.events.find(this.root,b))this.custom=a(this.node,Ze(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(xq[b]||Jl.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:b}}));this.node.addEventListener(b,vq,!1)}this.hasListener=!0}}function Ze(a){return wq[a]||(wq[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath,b.context=c.root.get(c.keypath),c.events[a].fire(b)}),wq[a]}function $e(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function _e(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function af(a,b){this.keypaths[a]=b}function bf(){return this.method?void this.refResolvers.forEach(cc):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function cf(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,vq,!1),this.hasListener=!1}function df(){var a=this;this.dirty||(this.dirty=!0,am.scheduleTask(function(){ef(a),a.dirty=!1})),this.parentFragment.bubble()}function ef(a){var b,c,d,e,f;b=a.node,b&&(e=Lb(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?ff(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function ff(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function gf(a,b){a.select=jf(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function hf(a){a.select&&Kb(a.select.options,a)}function jf(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function kf(a){var b,c,d,e,f,g;this.type=zi,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=np(c.e),"option"===this.name&&gf(this,c),"select"===this.name&&(this.options=[],this.bubble=df),"form"===this.name&&(this.formBindings=[]),lp(this,c.a||{}),this.attributes=Op(this,c.a),this.conditionalAttributes=Rp(this,c.m),c.f&&(this.fragment=new Jt({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=oq(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath]||(this.root._twowayBindings[e.keypath]=[]),f.push(e)),c.v&&(this.eventHandlers=Iq(this,c.v)),c.o&&(this.decorator=new Mq(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function lf(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&Pb(e,"keypath",a,b)}function mf(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function nf(a){a.node.addEventListener("reset",pf,!1)}function of(a){a.node.removeEventListener("reset",pf,!1)}function pf(){var a=this._ractive.proxy;am.start(),a.formBindings.forEach(qf),am.end()}function qf(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function rf(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Jt({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Jt({template:b.d,root:d,owner:a}),this.params=f.getValue(Pq),f.unbind()),this._fn=Dl.registries.transitions.find(d,e),this._fn||Jl.error({debug:d.debug,message:"missingPlugin",args:{plugin:"transition",name:e}}))}function sf(a){return a}function tf(){pr.hidden=document[lr]}function uf(){pr.hidden=!0}function vf(){pr.hidden=!1}function wf(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&xf(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function xf(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function yf(){var a,b,c=this,d=this.root;return a=zf(this),b=this.node=Gh(this.name,a),d.constructor.css&&this.parentFragment.getNode()===d.el&&this.node.setAttribute("data-ractive-css",d.constructor._guid),Vh(this.node,"_ractive",{value:{proxy:this,keypath:Sl(this.parentFragment),events:Uh(null),root:d}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=Ar,this.node.text=this.fragment.toString(!1),this.fragment.unrender=zl):"style"===this.name?(this.bubble=zr,this.bubble(),this.fragment.unrender=zl):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=zl:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&Af(this),"img"===this.name?mf(this):"form"===this.name?nf(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&am.scheduleTask(function(){c.decorator.torndown||c.decorator.init()},!0),d.transitionsEnabled&&this.intro&&!function(){var a=new Br(c,c.intro,!0);am.registerTransition(a),am.scheduleTask(function(){return a.start()},!0),c.transition=a}(),this.node.autofocus&&am.scheduleTask(function(){return c.node.focus()},!0),Bf(this),this.node}function zf(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?Ph.svg:(d=a.parent)?"foreignObject"===d.name?Ph.html:d.node.namespaceURI:a.root.el.namespaceURI}function Af(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function Bf(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function Cf(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function Df(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function Ef(a){var b=a.toString();return b?" "+b:""}function Ff(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(cc),"option"===this.name&&hf(this),this.attributes.forEach(cc),this.conditionalAttributes.forEach(cc)}function Gf(a){var b,c,d=this;this.transition&&this.transition.complete(),"option"===this.name?this.detach():a&&am.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(dc),this.decorator&&am.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&!function(){var a=new Br(d,d.outro,!1);am.registerTransition(a),am.scheduleTask(function(){return a.start()})}(),this.liveQueries&&Hf(this),"form"===this.name&&of(this)}function Hf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function If(a,b){var c=Jr.exec(b)[0];return null===a||c.length<a.length?c:a}function Jf(a,b){var c;if(c=Kf(a,b))return c;if(c=ol.fromId(b,{noThrow:!0})){c=Kr(c);var d=ol.parse(c,ol.getParseOptions(a));return a.partials[b]=d.t}}function Kf(a,b){var c=Dl.registries.partials,d=c.findInstance(a,b);if(d){var e,f=d.partials[b];if("function"==typeof f&&(e=f.bind(d),e.isOwner=d.partials.hasOwnProperty(b),f=e(d.data,ol)),!f&&""!==f)return void Jl.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:b}});if(!ol.isParsed(f)){var g=ol.parse(f,ol.getParseOptions(d));g.p&&Jl.warn({debug:a.debug,message:"noNestedPartials",args:{rname:b}});var h=e?d:c.findOwner(d,b);h.partials[b]=f=g.t}return e&&(f._fn=e),f.v?f.t:f}}function Lf(a,b){var c,d=Dl.registries.components.findInstance(a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void Jl.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:b}});"string"==typeof c&&(c=Lf(a,c)),c._fn=e,d.components[b]=c}return c}function Mf(){var a=this.instance.fragment.detach();return Qr.fire(this.instance),a}function Nf(a){return this.instance.fragment.find(a)}function Of(a,b){return this.instance.fragment.findAll(a,b)}function Pf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function Qf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function Rf(){return this.parentFragment.findNextNode(this)}function Sf(){return this.rendered?this.instance.fragment.firstNode():null}function Tf(a){this.hook=new Ml(a),this.inProcess={},this.queue={}}function Uf(a,b){return a[b._guid]||(a[b._guid]=[])}function Vf(a,b){var c=Uf(a.queue,b);for(a.hook.fire(b);c.length;)Vf(a,c.shift());delete a.queue[b._guid]}function Wf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1){if(e=g.adapt[d],"string"==typeof e){var h=Dl.registries.adaptors.find(g,e);if(!h)return Jl.critical({debug:g.debug,message:"missingPlugin",args:{plugin:"adaptor",name:e}});e=g.adapt[d]=h}if(e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,Yf(a)),f.value=b,b}return g.magic?ls.filter(b,a,g)?this.wrapped[a]=ls.wrap(g,b,a):em.filter(b,a,g)&&(this.wrapped[a]=em.wrap(g,b,a)):g.modifyArrays&&ks.filter(b,a,g)&&(this.wrapped[a]=ks.wrap(g,b,a)),b}function Xf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function Yf(a){var b;return ms[a]||(b=a?a+".":"",ms[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?Xf(c,a):c:void 0}),ms[a]}function Zf(a){var b,c,d,e,f=[""];for(b=a.length;b--;)for(c=a[b],d=c.split(".");d.length>1;)d.pop(),e=d.join("."),-1===f.indexOf(e)&&f.push(e);return f}function $f(a){var b,c,d,e;return b=a.split("."),c=_f(b.length),d=function(a,c){return a?"*":b[c]},e=c.map(function(a){return a.map(d).join(".")})}function _f(a){var b,c,d,e,f,g="";if(!ps[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}ps[a]=d}return ps[a]}function ag(a,b,c){var d;cg(a,b),c||(d=qs(b),d.forEach(function(c){bg(a,c,b)}))}function bg(a,b,c){var d,e,f;d=a.depsMap.patternObservers,d&&(e=d[b])&&e.forEach(function(b){var d=rs.exec(b)[0];f=c?c+"."+d:d,cg(a,f),bg(a,b,f)})}function cg(a,b){a.patternObservers.forEach(function(a){a.regex.test(b)&&a.update(b)})}function dg(){function a(c){var d,f;e.noCascade.hasOwnProperty(c)||((f=e.deps.computed[c])&&f.forEach(function(c){c.viewmodel===e?(e.clearCache(c.key),c.invalidate(),b.push(c.key),a(c.key)):c.viewmodel.mark(c.key)}),(d=e.depsMap.computed[c])&&d.forEach(a))}var b,c,d=this,e=this,f={};return b=this.changes,b.length?(b.slice().forEach(a),c=os(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=e.deps.computed[a])&&(d.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return ss(d,a,!0)}),b.forEach(function(a){return ss(d,a)})),this.deps.observers&&(c.forEach(function(a){return eg(d,null,a,"observers")}),gg(this,b,"observers")),this.deps["default"]&&!function(){var a=[];c.forEach(function(b){return eg(d,a,b,"default")}),a.length&&fg(d,a,b),gg(d,b,"default")}(),b.forEach(function(a){f[a]=d.get(a)}),this.implicitChanges={},this.noCascade={},f):void 0}function eg(a,b,c,d){var e,f;(e=hg(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function fg(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function gg(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=hg(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function hg(a,b,c){var d=a.deps[c];return d?d[b]:null}function ig(){this.captureGroups.push([])}function jg(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function kg(a){var b="var __ractive=this;return("+a.replace(ws,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function lg(a,b){var c=b.split(".")[0];return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function mg(a,b){return b=xs(b),this.computations[a]=new Bs(this.ractive,a,b)}function ng(a,b){var c=this;return void 0===b&&(b=Es),function(){var d,e,f,g,h,i=c.ractive,j=c.cache;return b.capture&&(h=c.captureGroups[c.captureGroups.length-1])&&(~h.indexOf(a)||h.push(a)),(d=c.mappings[a.split(".")[0]])?d.get(a,b):"@"===a[0]?Qb(a):(void 0===j[a]?((f=c.computations[a])&&!f.bypass?(e=f.get(),c.adapt(a,e)):(g=c.wrapped[a])?e=g.value:a?e=og(c,a):(c.adapt("",i.data),e=i.data),j[a]=e):e=j[a],!b.noUnwrap&&(g=c.wrapped[a])&&(e=g.get()),e===Ds?void 0:e)}()}function og(a,b){var c,d,e,f,g,h,i;return c=b.split("."),d=c.pop(),e=c.join("."),f=a.get(e),(i=a.wrapped[e])&&(f=i.get()),null!==f&&void 0!==f?((g=a.cacheMap[e])?-1===g.indexOf(b)&&g.push(b):a.cacheMap[e]=[b],"object"!=typeof f||d in f?(h=f[d],a.adapt(b,h,!1),a.cache[b]=h,h):a.cache[b]=Ds):void 0}function pg(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(a,this.ractive.computed[a]),c.push(b),a in this.mappings&&Jl.critical({message:"Cannot map to a computed property ('"+a+"')"});c.forEach(qg)}function qg(a){a.init()}function rg(a,b){this.keypath=a,this.viewmodel=b}function sg(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.trackData=b.trackData,this.resolved=!1}function tg(a,b){var c=new Is(a,b);return c.initViewmodel(this),c}function ug(a,b){var c;am.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[a]=!0),b.noCascade&&(this.noCascade[a]=!0)),(c=this.computations[a])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var d=b?b.dontTeardownWrapper:!1;this.clearCache(a,d)}function vg(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=xg(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;gi("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=Ls(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function wg(a){return JSON.stringify(a)}function xg(a){if(a===!0)return wg;if("string"==typeof a)return Ms[a]||(Ms[a]=function(b){return b[a]}),Ms[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function yg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.register(a,b,c);e=this.deps[c]||(this.deps[c]={}),f=e[a]||(e[a]=[]),f.push(b),a&&zg(this,a,c)}}function zg(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c]||(a.depsMap[c]={}),g=f[e]||(f[e]=[]),void 0===g[b]&&(g[b]=0,g.push(b)),g[b]+=1,b=e}function Ag(){return this.captureGroups.pop()}function Bg(a,b,c){void 0===c&&(c={});var d,e,f,g;if(!c.noMapping&&(d=this.mappings[a.split(".")[0]]))return d.set(a,b);
if(e=this.computations[a]){if(e.setting)return;e.set(b),b=e.get()}h(this.cache[a],b)||(f=this.wrapped[a],f&&f.reset&&(g=f.reset(b)!==!1,g&&(b=f.get())),e||g||Cg(this,a,b),c.silent?this.clearCache(a):this.mark(a))}function Cg(a,b,c){var d,e,f,g,h,i,j;i=function(){g.set?g.set(e,c):(h=g.get(),j())},j=function(){h||(h=cm(e),a.set(f,h,{silent:!0})),h[e]=c},d=b.split("."),e=d.pop(),f=d.join("."),g=a.wrapped[f],g?i():(h=a.get(f),(g=a.wrapped[f])?i():j())}function Dg(a,b,c){var d,e,f=this;if(e=c.length,c.forEach(function(b,c){-1===b&&f.mark(a+"."+c,Ss)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a])&&d.filter(Eg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){this.mark(a+".length",Rs);for(var g=e;g<b.length;g+=1)this.mark(a+"."+g);for(var g=b.length;e>g;g+=1)this.mark(a+"."+g,Ss)}}function Eg(a){return"function"==typeof a.shuffle}function Fg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function Gg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.unregister(a,b,c);if(e=this.deps[c][a],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a&&Hg(this,a,c)}}function Hg(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c],g=f[e],g[b]-=1,g[b]||(Kb(g,b),g[b]=void 0),b=e}function Ig(a){return"string"==typeof a&&(a=[a]),a}function Jg(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;Kg(b,d),$s.fire(Dl.getConstructTarget(b,c),c),Dl.init(b.constructor,b,c),_s.fire(b),at.begin(b),b.viewmodel=new Zs(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Jt({template:b.template,root:b,owner:b})),at.end(b),(e=a(b.el))&&b.render(e,b.append)}function Kg(a,b){a._guid="r-"+bt++,a._subs=Uh(null),a._config={},a._twowayBindings=Uh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function Lg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Jt({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key,this.fragment.getValue())}function Mg(a,b){return b.parameters?fm&&"legacy"!==b.parameters?Og(a,b):Ng(a):a.data}function Ng(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function Og(a,b){var c=Pg(a,b);return new c(a)}function Pg(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=Qg(a,c.defined)),c.Constructor}function Qg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(am.start(),c.setValue(a),am.end()):this._data[b]=a},enumerable:!0},a},b),Wh(e={},d),e.constructor=c,c.prototype=e,c}function Rg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=ao(d,c.r,e):c.x?this.resolver=new fo(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new jo(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function Sg(a,b,c){var d,e,f;return c?(b.parameters&&(f=Tg(b)),d=new Ug(a,c,f),e=ft(d,b),{data:e,mappings:d.mappings}):{data:{}}}function Tg(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function Ug(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=Uh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(a,b[a])})}function Vg(a){return 1===a.length&&a[0].t===ui}function Wg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&Xg(a.instance,a.root,c,b[c])}function Xg(a,b,c,d){"string"!=typeof d&&Jl.error({debug:b.debug,message:"noComponentEventArguments"}),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Nm(b,d,{event:a,args:c}),!1})}function Yg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Fi,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=ht(this,b.prototype,a.template.a),dt(this,b,e,a.template.f,a.template.p),it(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&gi('The "intro", "outro" and "decorator" directives have no effect on components'),jt(this)}function Zg(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function $g(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function _g(){return this.instance.fragment.toString()}function ah(){var a=this.instance;this.resolvers.forEach(cc),bh(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&Kb(a.el.__ractive_instances__,a),ot.fire(a)}function bh(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function ch(a){this.shouldDestroy=a,this.instance.unrender()}function dh(a){if("string"==typeof a.template)return new Qn(a);switch(a.template.t){case ui:return"yield"===a.template.r?new wt(a):new po(a);case wi:return new Jo(a);case vi:return new _o(a);case zi:var b;return(b=Pr(a.parentFragment.root,a.template.e))?new st(a,b):new Hr(a);case Ai:return new Or(a);case Bi:return new ut(a);case Ii:return new yt(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function eh(a){var b,c=this;this.owner=a.owner,b=this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],"string"==typeof a.template?a.template=[a.template]:a.template||(a.template=[]),this.items=a.template.map(function(b,d){return zt({parentFragment:c,pElement:a.pElement,template:b,index:d})}).filter(function(a){return null!==a}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function fh(a,b){Pb(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function gh(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function hh(a){return this.items?this.items.map(function(b){return b.toString(a)}).join(""):""}function ih(){this.bound&&(this.items.forEach(jh),this.bound=!1)}function jh(a){a.unbind&&a.unbind()}function kh(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function lh(a,b){var c,d,e,f,g,h=this;if("function"!=typeof a||b?a=a||{}:(b=a,a={}),"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((d=this.viewmodel.wrapped[""])&&d.reset?d.reset(a)===!1&&(this.data=a):this.data=a,e=Dl.reset(this),f=e.length;f--;)if(Kt.indexOf(e[f])>-1){g=!0;break}if(g){var i;this.viewmodel.mark(""),(i=this.component)&&(i.shouldDestroy=!0),this.unrender(),i&&(i.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Jt({template:this.template,root:this,owner:this})),c=this.render(this.el,this.anchor)}else c=am.start(this,!0),this.viewmodel.mark(""),am.end();return Lt.fire(this,a),b&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.reset"}}),c.then(b).then(null,function(a){Jl.consoleError({debug:h.debug,err:a})})),c}function mh(a){var b,c;Dl.template.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Jt({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function nh(a,b,c){var d,e,f=this;if(e=am.start(this,!0),k(a)){d=a,c=b;for(a in d)d.hasOwnProperty(a)&&(b=d[a],a=Vb(a),this.viewmodel.set(a,b))}else a=Vb(a),Qt.test(a)?Sb(this,a).forEach(function(a){f.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return am.end(),c&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.set"}}),e.then(c.bind(this)).then(null,function(a){Jl.consoleError({debug:f.debug,err:a})})),e}function oh(a,b){return gm(this,a,void 0===b?-1:-b)}function ph(a){var b,c=this;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&Kb(this.el.__ractive_instances__,this),this.shouldDestroy=!0,b=this.fragment.rendered?this.unrender():Ql.resolve(),Wt.fire(this),a&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),b.then(a.bind(this)).then(null,function(a){Jl.consoleError({debug:c.debug,err:a})})),this._boundFunctions.forEach(qh),b}function qh(a){delete a.fn[a.prop]}function rh(a,b){var c;return"string"!=typeof a&&Jl.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:a}}),c=this.get(a),this.set(a,!c,b)}function sh(){return this.fragment.toString(!0)}function th(){var a,b,c=this;if(!this.fragment.rendered)return Jl.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"}),Ql.resolve();for(a=am.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){zn.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),Kb(this.el.__ractive_instances__,this),$t.fire(this),am.end(),a}function uh(a,b){var c,d=this;return"function"==typeof a?(b=a,a=""):a=a||"",c=am.start(this,!0),this.viewmodel.mark(a),am.end(),bu.fire(this,a),b&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),c.then(b.bind(this)).then(null,function(a){Jl.consoleError({debug:d.debug,err:a})})),c}function vh(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||Rb(d,a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=wh(this,e),this.set(c)}function wh(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath]||a.changed()||(d.push(a.keypath),d[a.keypath]=a));b=a.attribute.value,e=a.getValue(),Jb(b,e)||h(b,e)||(c[a.keypath]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a],e=b.attribute.value,f=b.getValue(),Jb(e,f)||(c[a]=f)}),c}function xh(a){if(!(a.prototype instanceof ku))return a;for(var b={};a;)Dl.registries.forEach(function(c){yh(c.useDefaults?a.prototype:a,b,c.name)}),Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=pi(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}}),a=a._Parent!==ku?a._Parent:!1;return b}function yh(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function zh(a){void 0===a&&(a={});var b,c,d,e=this;return a=fu(a),b=function(a,b){ct(this,a,b)},c=Uh(e.prototype),c.constructor=b,d={_guid:{value:gu++},defaults:{value:c},extend:{value:zh,writable:!0,configurable:!0},_Parent:{value:e}},Wh(b,d),Dl.extend(e,c,a),Zs.extend(e,c),b.prototype=c,b}var Ah,Bh,Ch,Dh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1},Eh=Dh,Fh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};Ah="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),Bh="object"==typeof document,Ch="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;var Gh,Hh,Ih,Jh,Kh,Lh,Mh,Nh,Oh,Ph={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qh=["o","ms","moz","webkit"];if(Gh=Ah?function(a,b){return b&&b!==Ph.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==Ph.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},Bh){for(Ih=Gh("div"),Jh=["matches","matchesSelector"],Oh=function(a){return function(b,c){return b[a](c)}},Mh=Jh.length;Mh--&&!Hh;)if(Kh=Jh[Mh],Ih[Kh])Hh=Oh(Kh);else for(Nh=Qh.length;Nh--;)if(Lh=Qh[Mh]+Kh.substr(0,1).toUpperCase()+Kh.substring(1),Ih[Lh]){Hh=Oh(Lh);break}Hh||(Hh=function(a,b){var c,d,e;for(d=a.parentNode,d||(Ih.innerHTML="",d=Ih,a=a.cloneNode(),Ih.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else Hh=null;var Rh,Sh,Th;"undefined"==typeof window?Th=null:(Rh=window,Sh=Rh.document,Th={},Sh||(Th=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;for(void 0===b&&(b=0),0>b&&(b+=this.length),0>b&&(b=0),c=this.length;c>b;b++)if(this.hasOwnProperty(b)&&this[b]===a)return b;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;for(c=0,d=this.length;d>c;c+=1)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e,f=this,g=[];for(f instanceof String&&(f=f.toString(),e=!0),c=0,d=f.length;d>c;c+=1)(f.hasOwnProperty(c)||e)&&(g[c]=a.call(b,f[c],c,f));return g}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){var c,d,e,f;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(e=this.length,f=!1,arguments.length>1&&(d=b,f=!0),c=0;e>c;c+=1)this.hasOwnProperty(c)?f&&(d=a(d,this[c],c,this)):(d=this[c],f=!0);if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c,d,e=[];for(c=0,d=this.length;d>c;c+=1)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)&&(e[e.length]=this[c]);return e}),Array.prototype.every||(Array.prototype.every=function(a,b){var c,d,e;if(null==this)throw new TypeError;if(c=Object(this),d=c.length>>>0,"function"!=typeof a)throw new TypeError;for(e=0;d>e;e+=1)if(e in c&&!a.call(b,c[e],e,c))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b,c,d,e,f=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return b=f.call(arguments,1),c=this,d=function(){},e=function(){var e=this instanceof d&&a?this:a;return c.apply(e,b.concat(f.call(arguments)))},d.prototype=this.prototype,e.prototype=new d,e}),Rh.addEventListener||!function(a,b){var c,d,e,f,g,h;a.appearsToBeIELessEqual8=!0,c=function(a,b){var c,d=this;for(c in a)d[c]=a[c];d.currentTarget=b,d.target=a.srcElement||b,d.timeStamp=+new Date,d.preventDefault=function(){a.returnValue=!1},d.stopPropagation=function(){a.cancelBubble=!0}},d=function(a,b){var d,e,f=this;d=f.listeners||(f.listeners=[]),e=d.length,d[e]=[b,function(a){b.call(f,new c(a,f))}],f.attachEvent("on"+a,d[e][1])},e=function(a,b){var c,d,e=this;if(e.listeners)for(c=e.listeners,d=c.length;d--;)c[d][0]===b&&e.detachEvent("on"+a,c[d][1])},a.addEventListener=b.addEventListener=d,a.removeEventListener=b.removeEventListener=e,"Element"in a?(a.Element.prototype.addEventListener=d,a.Element.prototype.removeEventListener=e):(h=b.createElement,b.createElement=function(a){var b=h(a);return b.addEventListener=d,b.removeEventListener=e,b},f=b.getElementsByTagName("head")[0],g=b.createElement("style"),f.insertBefore(g,f.firstChild))}(Rh,Sh),Rh.getComputedStyle||(Th.getComputedStyle=function(){function a(c,d,e,f){var g,h=d[e],i=parseFloat(h),j=h.split(/\d/)[0];return isNaN(i)&&/^thin|medium|thick$/.test(h)&&(i=b(h),j=""),f=null!=f?f:/%|em/.test(j)&&c.parentElement?a(c.parentElement,c.parentElement.currentStyle,"fontSize",null):16,g="fontSize"==e?f:/width/i.test(e)?c.clientWidth:c.clientHeight,"em"==j?i*f:"in"==j?96*i:"pt"==j?96*i/72:"%"==j?i/100*g:i}function b(a){var b,c;return f[a]||(b=document.createElement("div"),b.style.display="block",b.style.position="fixed",b.style.width=b.style.height="0",b.style.borderRight=a+" solid black",document.getElementsByTagName("body")[0].appendChild(b),c=b.getBoundingClientRect(),f[a]=c.right-c.left),f[a]}function c(a,b){var c="border"==b?"Width":"",d=b+"Top"+c,e=b+"Right"+c,f=b+"Bottom"+c,g=b+"Left"+c;a[b]=(a[d]==a[e]==a[f]==a[g]?[a[d]]:a[d]==a[f]&&a[g]==a[e]?[a[d],a[e]]:a[g]==a[e]?[a[d],a[e],a[f]]:[a[d],a[e],a[f],a[g]]).join(" ")}function d(b){var d,e,f,g;d=b.currentStyle,e=this,f=a(b,d,"fontSize",null);for(g in d)/width|height|margin.|padding.|border.+W/.test(g)?"auto"===d[g]?/^width|height/.test(g)?e[g]=("width"===g?b.clientWidth:b.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(g)&&(e[g]="0px"):e[g]=a(b,d,g,f)+"px":"styleFloat"===g?e["float"]=d[g]:e[g]=d[g];return c(e,"margin"),c(e,"padding"),c(e,"border"),e.fontSize=f+"px",e}function e(a){return new d(a)}var f={};return d.prototype={constructor:d,getPropertyPriority:function(){},getPropertyValue:function(a){return this[a]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},e}()));var Uh,Vh,Wh,Xh=Th,Yh=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),Bh&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Vh=Object.defineProperty}catch(Zh){Vh=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Zh){throw Zh}Bh&&Object.defineProperties(Gh("div"),{test:{value:0}}),Wh=Object.defineProperties}catch(Zh){Wh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&Vh(a,c,b[c])}}try{Object.create(null),Uh=Object.create}catch(Zh){Uh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var $h,_h=Object.prototype.hasOwnProperty,ai=Object.prototype.toString,bi=/^\[object (?:Array|FileList)\]$/,ci={};$h=Ch?function(a,b){if(!b){if(ci[a])return;ci[a]=!0}console.warn("%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);")}:function(){};var di,ei,fi,gi=$h,hi=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,ii=/\/\*.*?\*\//g,ji=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,ki=/^@media/,li=/\[data-ractive-css="[a-z0-9-]+"]/g,mi=l,ni={name:"css",extend:o,init:function(){}},oi=ni,pi=function(a,b,c){return c||q(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},qi={name:"data",extend:s,init:t,reset:u},ri=qi,si={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.',methodDeprecated:'The method "{deprecated}" has been deprecated in favor of "{replacement}" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',usePromise:"{method} now returns a Promise, use {method}(...).then(callback) instead.",noTwowayExpressions:"Two-way binding does not work with expressions. Encountered ( {expression} ) on element {element}.",computedCannotMapTo:'Computed property "{key}" cannot be mapped to "{other}" because {reason}.',notUsed:'prevents forgetting trailing "," in cut and paste of previous line :)'},ti=1,ui=2,vi=3,wi=4,xi=5,yi=6,zi=7,Ai=8,Bi=9,Ci=10,Di=13,Ei=14,Fi=15,Gi=16,Hi=17,Ii=18,Ji=20,Ki=21,Li=22,Mi=23,Ni=24,Oi=26,Pi=27,Qi=30,Ri=31,Si=32,Ti=33,Ui=34,Vi=35,Wi=36,Xi=40,Yi=50,Zi=51,$i=52,_i=53,aj=54,bj=55,cj="Expected a JavaScript expression",dj="Expected closing paren",ej=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,fj=function(a){var b;return(b=a.matchPattern(ej))?{t:Ji,v:b}:null},gj=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Ni,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Ni,v:"false"}):null};di=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,ei=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,fi=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var hj,ij,jj,kj,lj,mj=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(di)||b.matchPattern(ei)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(fi),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},nj=mj('"'),oj=mj("'"),pj=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=oj(a),a.matchString('"')?{t:Ki,v:c}:(a.pos=b,null)):a.matchString("'")?(c=nj(a),a.matchString("'")?{t:Ki,v:c}:(a.pos=b,null)):null},qj=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,rj=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,sj=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,tj=function(a){var b;return(b=pj(a))?sj.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=fj(a))?b.v:(b=a.matchPattern(qj))?b:void 0},uj=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=tj(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:Pi,k:c,v:d}):(a.pos=b,null))},vj=B,wj=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=vj(a),a.allowWhitespace(),a.matchString("}")?{t:Mi,m:c}:(a.pos=b,null)):(a.pos=b,null)},xj=C,yj=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=xj(a),a.matchString("]")?{t:Li,m:c}:(a.pos=b,null)):(a.pos=b,null)},zj=function(a){var b=fj(a)||gj(a)||pj(a)||wj(a)||yj(a);return b};hj=/^\.[a-zA-Z_$0-9]+/,jj=function(a){var b=a.matchPattern(ij);return b?"."+b:null},ij=/^\[(0|[1-9][0-9]*)\]/,kj=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,lj=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Aj,Bj,Cj=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?rj:qj,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&lj.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&kj.test(d))return{t:Oi,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(hj)||jj(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:Qi,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},Dj=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(cj),a.allowWhitespace(),a.matchString(")")||a.error(dj),{t:Ui,x:c}):null},Ej=function(a){return zj(a)||Cj(a)||Dj(a)},Fj=D,Gj=function(a){var b,c,d,e;if(c=Ej(a),!c)return null;for(;c;)if(b=a.pos,d=Fj(a))c={t:Si,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=xj(a),a.allowWhitespace(),a.matchString(")")||a.error(dj),c={t:Xi,x:c},e&&(c.o=e)}return c};Bj=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(cj),{s:a,o:d,t:Ti}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Gj,a=0,b=d.length;b>a;a+=1)c=Bj(d[a],e),e=c;Aj=e}();var Hj,Ij,Jj=Aj;Ij=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:Wi,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Jj,a=0,b=d.length;b>a;a+=1)c=Ij(d[a],e),e=c;Hj=e}();var Kj,Lj,Mj=Hj,Nj=function(a){var b,c,d,e;return(c=Mj(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(cj),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(cj),{t:Vi,o:[c,d,e]}):(a.pos=b,c)):null},Oj=function(a){var b,c=[];return F(a,c),b={r:c,s:G(this,a,c)}},Pj=/^\s+/;Lj=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Lj.prototype=Error.prototype,Kj=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Kj.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return Nj(this)},flattenExpression:Oj,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Lj(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(Pj)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Kj.extend=function(a){var b,c,d=this;b=function(a,b){Kj.call(this,a,b)},b.prototype=Uh(d.prototype);for(c in a)_h.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Kj.extend,b};var Qj,Rj=Kj,Sj=/^[^\s=]+/,Tj=/^\s+/,Uj=function(a){var b,c,d;return a.matchString("=")?(b=a.pos,a.allowWhitespace(),(c=a.matchPattern(Sj))?a.matchPattern(Tj)?(d=a.matchPattern(Sj))?(a.allowWhitespace(),a.matchString("=")?[c,d]:(a.pos=b,null)):(a.pos=b,null):null:(a.pos=b,null)):null},Vj=[{delimiters:"delimiters",isTriple:!1,isStatic:!1},{delimiters:"tripleDelimiters",isTriple:!0,isStatic:!1},{delimiters:"staticDelimiters",isTriple:!1,isStatic:!0},{delimiters:"staticTripleDelimiters",isTriple:!0,isStatic:!0}],Wj={"#":wi,"^":xi,"/":yi,">":Ai,"!":Bi,"&":vi},Xj=function(a){var b=Wj[a.str.charAt(a.pos)];return b?(a.pos+=1,b):null},Yj={each:$i,"if":Yi,"if-with":aj,"with":_i,unless:Zi,partial:bj},Zj=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,$j=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,_j=/^[0-9][1-9]*$/,ak=new RegExp("^("+Object.keys(Yj).join("|")+")\\b");Qj=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/;var bk,ck,dk,ek,fk,gk,hk,ik,jk=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(c=a.pos,e={},l=a[b.delimiters],b.isStatic&&(e.s=!0),b.isTriple)e.t=vi;else{if("!"===a.remaining()[0]){try{h=a.readExpression(),a.allowWhitespace(),a.remaining().indexOf(l[1])?h=null:e.t=ui}catch(n){}if(!h)return k=a.remaining().indexOf(l[1]),~k?a.pos+=k:a.error("Expected closing delimiter ('"+l[1]+"')"),{t:Bi}}if(!h)if(f=Xj(a),e.t=f||ui,f===wi)(g=a.matchPattern(ak))&&(e.n=g),a.allowWhitespace();else if((f===Bi||f===yi)&&(j=a.remaining(),k=j.indexOf(l[1]),-1!==k))return e.r=j.substr(0,k).split(" ")[0],a.pos+=k,e}if(!h){a.allowWhitespace(),f===Ai?(m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=m):e.t===ui&&a.matchString("yield ")?(a.allowWhitespace(),e.r="yield",m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=!1,h&&h.t===Qi?(e.yn=h.n,h=null):h&&a.error("Only names are supported with yield.")):e.t===wi&&"partial"===e.n?(m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=!1):h=a.readExpression();var o;if(e.t===Ai&&h&&(o=a.readExpression())&&(e={contextPartialExpression:h},h=o),j=a.remaining(),j.substr(0,l[1].length)!==l[1]&&":"!==j.charAt(0)){if(d=a.pos,a.pos=c,j=a.remaining(),k=j.indexOf(l[1]),-1!==k)return e.r=j.substr(0,k).trim(),Qj.test(e.r)||a.error("Expected a legal Mustache reference"),a.pos+=k,e;a.pos=d}}if(H(a,h,e),e.contextPartialExpression&&(e.contextPartialExpression=[H(a,e.contextPartialExpression,{t:Ai})]),i=a.matchPattern(Zj)){var p;e.i=(p=a.matchPattern($j))?i+","+p:i}return e},kk={t:Ci,exclude:!0},lk=J,mk="<!--",nk="-->",ok=function(a){var b,c,d,e,f;return b=a.pos,a.matchString(mk)?(d=a.remaining(),e=d.indexOf(nk),-1===e&&a.error("Illegal HTML - expected closing comment sequence ('-->')"),c=d.substr(0,e),a.pos+=e+3,f={t:Bi,c:c},a.includeLinePositions&&(f.p=a.getLinePos(b)),f):null};bk=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,ck=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,dk={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},ek=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],fk=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(dk).join("|")+"));?","g"),gk=/</g,hk=/>/g,ik=/&/g;
var pk,qk,rk,sk,tk,uk,vk,wk=/[-/\\^$*+?.()|[\]{}]/g,xk=P,yk=Q,zk=/^<!--\s*/,Ak=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Bk=/\s*-->/,Ck=function(a,b){var c,d,e;for(c=b.length;c--;){if(d=a.indexOf(b[c]),!d)return 0;-1!==d&&(!e||e>d)&&(e=d)}return e||-1},Dk=function(a){var b,c,d,e;return c=a.remaining(),e=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=c.indexOf(e):(d=[a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],a.inAttribute===!0?d.push('"',"'","=","<",">","`"):d.push(a.inAttribute?a.inAttribute:e),b=Ck(c,d)),b?(-1===b&&(b=c.length),a.pos+=b,a.inside?c.substr(0,b):M(c.substr(0,b))):null},Ek=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Fk=function(a){var b;return a.matchString("</")?(b=a.matchPattern(Ek))?{t:Ei,e:b}:(a.pos-=2,void a.error("Illegal closing tag")):null},Gk=/^[^\s"'>\/=]+/,Hk=/^[^\s"'=<>`]+/,Ik=R;qk={"true":!0,"false":!1,undefined:void 0,"null":null},rk=new RegExp("^(?:"+Object.keys(qk).join("|")+")"),sk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,tk=/\$\{([^\}]+)\}/g,uk=/^\$\{([^\}]+)\}/,vk=/^\s*$/,pk=Rj.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&vk.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(uk),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(rk))?{v:qk[b]}:void 0},function(a){var b;return(b=a.matchPattern(sk))?{v:+b}:void 0},function(a){var b,c=pj(a);return c&&(b=a.values)?{v:c.v.replace(tk,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=X(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var Jk,Kk=function(a,b){var c=new pk(a,{values:b});return c.result},Lk=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/;Jk=Rj.extend({converters:[Nj]});var Mk,Nk,Ok=function(a){var b,c,d,e,f,g,h,i,j;if("string"==typeof a){if(c=Lk.exec(a))return b={m:c[1]},e="["+a.slice(b.m.length+1,-1)+"]",d=new Jk(e),b.a=Oj(d.result[0]),b;if(-1===a.indexOf(":"))return a.trim();a=[a]}if(b={},h=[],i=[],a){for(;a.length;)if(f=a.shift(),"string"==typeof f){if(g=f.indexOf(":"),-1!==g){g&&h.push(f.substr(0,g)),f.length>g+1&&(i[0]=f.substring(g+1));break}h.push(f)}else h.push(f);i=i.concat(a)}return h.length?i.length||"string"!=typeof h?(b={n:1===h.length&&"string"==typeof h[0]?h[0]:h},1===i.length&&"string"==typeof i[0]?(j=Kk("["+i[0]+"]"),b.a=j?j.value:i[0].trim()):b.d=i):b=h:b="",b},Pk=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Qk=/^[\s\n\/>]/,Rk=/^on/,Sk=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Tk=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Uk={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Vk={exclude:!0};Mk=[yk,lk,ok,Y,Dk,Fk],Nk={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Wk,Xk,Yk=Y,Zk=/^[ \t\f\r\n]+/,$k=/[ \t\f\r\n]+$/,_k=function(a,b,c){var d;b&&(d=a[0],"string"==typeof d&&(d=d.replace(Zk,""),d?a[0]=d:a.shift())),c&&(d=a[a.length-1],"string"==typeof d&&(d=d.replace($k,""),d?a[a.length-1]=d:a.pop()))},al=/^\s*\r?\n/,bl=/\r?\n\s*$/,cl=function(a){var b,c,d,e,f;for(b=1;b<a.length;b+=1)c=a[b],d=a[b-1],e=a[b-2],$(c)&&_(d)&&$(e)&&bl.test(e)&&al.test(c)&&(a[b-2]=e.replace(bl,"\n"),a[b]=c.replace(al,"")),ab(c)&&$(d)&&bl.test(d)&&$(c.f[0])&&al.test(c.f[0])&&(a[b-1]=d.replace(bl,"\n"),c.f[0]=c.f[0].replace(al,"")),$(c)&&ab(d)&&(f=d.f[d.f.length-1],$(f)&&bl.test(f)&&al.test(c)&&(d.f[d.f.length-1]=f.replace(bl,"\n"),a[b]=c.replace(al,"")));return a},dl=bb,el=/[ \t\f\r\n]+/g,fl=/^(?:pre|script|style|textarea)$/i,gl=/^\s+/,hl=/\s+$/;Wk=Rj.extend({init:function(a,b){fb(b,this),this.sectionDepth=0,this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1},b.sanitize===!0&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=b.sanitize&&b.sanitize.elements,this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes,this.includeLinePositions=b.includeLinePositions,this.StandardParser=Wk},postProcess:function(a,b){return this.sectionDepth>0&&this.error("A section was left open"),eb(a,b.stripComments!==!1,b.preserveWhitespace,!b.preserveWhitespace,!b.preserveWhitespace,b.rewriteElse!==!1),a},converters:[yk,lk,ok,Yk,Dk]}),Xk=function(a,b){void 0===b&&(b={});var c;fb(b),c={v:2},c.t=new Wk(a,b).result;var d={};return dl(b.ractive?[b.ractive]:[],d,c.t),g(d)||(c.p=d),c};var il,jl,kl=Xk,ll=gb;il=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],jl=ll(il,function(a){return a});var ml=jl,nl={parse:ib,fromId:jb,isHashedId:kb,isParsed:lb,getParseOptions:mb,createHelper:hb},ol=nl,pl={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:pb(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=ob(b,e),b._config.template={fn:e,result:d}),d=pb(d,b),b.template=d.t,d.p&&qb(b.partials,d.p)},reset:function(a){var b,c=nb(a);return c?(b=pb(c,a),a.template=b.t,qb(a.partials,b.p,!0),!0):void 0}},ql=pl;rb.prototype={constructor:rb,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=Uh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c},findOwner:function(a,b){return a[this.name].hasOwnProperty(b)?a:this.findConstructor(a.constructor,b)},findConstructor:function(a,b){return a?a[this.name].hasOwnProperty(b)?a:this.findConstructor(a._Parent,b):void 0},find:function(a,b){var c=this;return sb(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a[c.name][b]}})},findInstance:function(a,b){var c=this;return sb(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a}})}};var rl,sl,tl,ul,vl=rb,wl=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],xl=ll(wl,function(a){return new vl(a,"computed"===a)}),yl=xl,zl=function(){},Al=tb,Bl=zb;rl={data:ri,template:ql,css:oi},sl=Object.keys(Eh).filter(function(a){return!yl[a]&&!rl[a]&&!ml[a]}),tl=[].concat(rl.data,ml,sl,yl,rl.template,rl.css);for(var Cl in rl)tl[Cl]=rl[Cl];tl.keys=Object.keys(Eh).concat(yl.map(function(a){return a.name})).concat(["css"]),ul=tl.keys.reduce(function(a,b){return a[b]=!0,a},{}),tl.parseOptions=ml,tl.registries=yl,tl.extend=function(a,b,c){Cb("extend",a,b,c)},tl.init=function(a,b,c){Cb("init",a,b,c)},tl.reset=function(a){return tl.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},tl.getConstructTarget=function(a,b){return b.onconstruct?{onconstruct:Al(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a};var Dl=tl,El=function(a,b,c,d){if(a===b)return Eb(b);if(d){var e=Dl.registries.interpolators.find(c,d);if(e)return e(a,b)||Eb(b);gi('Missing "'+d+'" interpolator. You may need to download a plugin from [TODO]')}return Hl.number(a,b)||Hl.array(a,b)||Hl.object(a,b)||Eb(b)},Fl=El,Gl={number:function(a,b){var c;return j(a)&&j(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Fl(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!k(a)||!k(b))return null;c=[],f={},e={};for(g in a)_h.call(a,g)&&(_h.call(b,g)?(c.push(g),e[g]=Fl(a[g],b[g])):f[g]=a[g]);for(g in b)_h.call(b,g)&&!_h.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},Hl=Gl,Il={warn:function(a,b){(a.debug||b)&&this.warnAlways(a)},warnAlways:function(a){this.logger(Fb(a),a.allowDuplicates)},error:function(a){this.errorOnly(a),a.debug||this.warn(a,!0)},errorOnly:function(a){a.debug&&this.critical(a)},critical:function(a){var b=a.err||new Error(Fb(a));this.thrower(b)},logger:gi,thrower:function(a){throw a},consoleError:function(a){Ch?console.error(a.err):this.thrower(a.err)}},Jl=Il,Kl={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};Hb.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&Jl.warnAlways({debug:a.debug,message:this.deprecate.message||"methodDeprecated",args:this.deprecate}),b?a.fire(this.event,b):a.fire(this.event)};var Ll,Ml=Hb,Nl={},Ol={},Pl={};"function"==typeof Promise?Ll=Promise:(Ll=function(a){var b,c,d,e,f,g,h=[],i=[],j=Nl;d=function(a){return function(d){j===Nl&&(b=d,j=a,c=Nb(j===Ol?h:i,b),Mb(c))}},e=d(Ol),f=d(Pl);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Ll(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),Ob(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==Nl&&Mb(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Ll.all=function(a){return new Ll(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Ll.resolve=function(a){return new Ll(function(b){b(a)})},Ll.reject=function(a){return new Ll(function(b,c){c(a)})});var Ql=Ll,Rl=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Sl=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return""},Tl=Xb,Ul=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};Ul.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,gc(this)},decrementTotal:function(){this.totalChildren-=1,gc(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;Kb(b,a),gc(this)},init:function(){this.ready=!0,gc(this)},detachNodes:function(){this.decoratorQueue.forEach(bc),this.detachQueue.forEach(ec),this.children.forEach(fc)}};var Vl,Wl,Xl=Ul,Yl=[],Zl=new Ml("change");Wl={start:function(a,b){var c,d;return b&&(c=new Ql(function(a){return d=a})),Vl={previousBatch:Vl,transitionManager:new Xl(d,Vl&&Vl.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&Vl.viewmodels.push(a.viewmodel),c},end:function(){hc(),Vl.transitionManager.init(),!Vl.previousBatch&&Vl.instance&&(Vl.instance.viewmodel.changes=[]),Vl=Vl.previousBatch},addViewmodel:function(a){return Vl?-1===Vl.viewmodels.indexOf(a)?(Vl.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=Vl.transitionManager,Vl.transitionManager.add(a)},registerDecorator:function(a){Vl.transitionManager.addDecorator(a)},addView:function(a){Vl.views.push(a)},addUnresolved:function(a){Yl.push(a)},removeUnresolved:function(a){Kb(Yl,a)},detachWhenReady:function(a){Vl.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(Vl){for(c=Vl;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var $l,_l,am=Wl,bm=/^\s*[0-9]+\s*$/,cm=function(a){return bm.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),$l={filter:function(a,b,c){var d,f,g,h,i;return b?(d=b.split("."),f=d.pop(),g=d.join("."),(h=c.viewmodel.wrapped[g])&&!h.magic?!1:(i=c.get(g),e(i)&&/^[0-9]+$/.test(f)?!1:i&&("object"==typeof i||"function"==typeof i))):!1},wrap:function(a,b,c){return new _l(a,b,c)}},_l=function(a,b,c){var d,e,f,g;return this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,d=c.split("."),this.prop=d.pop(),e=d.join("."),this.obj=e?a.get(e):a.data,f=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),f&&f.set&&(g=f.set._ractiveWrappers)?void(-1===g.indexOf(this)&&g.push(this)):void kc(this,b,f)},_l.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,am.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=cm(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(Zh){$l=!1}var dm,em=$l,fm=!!em,gm=lc,hm=mc;"undefined"==typeof window?dm=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(Qh,0,window),dm=window.requestAnimationFrame);var im,jm=dm;im="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var km=im,lm=[],mm={tick:function(){var a,b,c;for(c=km(),am.start(),a=0;a<lm.length;a+=1)b=lm[a],b.tick(c)||lm.splice(a--,1);am.end(),lm.length?jm(mm.tick):mm.running=!1},add:function(a){lm.push(a),mm.running||(mm.running=!0,jm(mm.tick))},abort:function(a,b){for(var c,d=lm.length;d--;)c=lm[d],c.root===b&&c.keypath===a&&c.stop()}},nm=mm,om=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Fl(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};om.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(am.start(this.root),this.root.viewmodel.set(f,this.to),am.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&gi("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),am.start(this.root),this.root.viewmodel.set(f,c),am.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&gi("Animation was not found"),this.root._animations.splice(a,1)}};var pm=om,qm=function(){},rm={stop:qm},sm=nc,tm=new Ml("detach"),um=pc,vm=qc,wm=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?Hh(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},xm=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},ym=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=sc(a.component||a._ractive.proxy),d=sc(b.component||b._ractive.proxy),e=c[c.length-1],f=d[d.length-1];e&&e===f;)c.pop(),d.pop(),g=e,e=c[c.length-1],f=d[d.length-1];if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},zm=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):ym(a,b)},Am=function(){this.sort(this._isComponentQuery?ym:zm),this._dirty=!1},Bm=function(){var a=this;this._dirty||(this._dirty=!0,am.scheduleTask(function(){a._sort()}))},Cm=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},Dm=tc,Em=uc,Fm=vc,Gm=wc,Hm=xc,Im=yc,Jm={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Km=Jm,Lm={},Mm=zc,Nm=Bc,Om=Ec,Pm={capture:!0,noUnwrap:!0},Qm=Fc,Rm=new Ml("insert"),Sm=Gc,Tm=Ic,Um=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Um.prototype={init:function(a){this.value=this.root.get(this.keypath),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;h(a,this.value)||(this.value=a,this.defer&&this.ready?am.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1)}};var Vm,Wm=Um,Xm=Jc,Ym=/\*/,Zm=Array.prototype.slice;Vm=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Vm.prototype={init:function(a){var b,c;if(b=Xm(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(c);else this.values=b},update:function(a){var b,c=this;if(Ym.test(a)){b=Xm(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(a)}else if(!this.root.viewmodel.implicitChanges[a])return this.defer&&this.ready?void am.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d;return b=this.root.viewmodel.get(a),this.updating?void(this.values[a]=b):(this.updating=!0,h(b,this.values[a])&&this.ready||(c=Zm.call(this.regex.exec(a),1),d=[b,this.values[a],a].concat(c),this.values[a]=b,this.callback.apply(this.context,d)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a]||(this.proxies[a]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a]}};var $m,_m,an,bn,cn,dn,en=Vm,fn=/\*/,gn={},hn=Kc,jn=Lc,kn=Mc,ln=function(a){return a.trim()},mn=function(a){return""!==a},nn=Nc,on=Oc,pn=Pc,qn=Qc,rn=Array.prototype.slice,sn=Array.prototype,tn=function(a){return function(b){var c,d,f,g,h=rn.call(arguments,1),i=[];if(c=this.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=qn(c,a,h),g=sn[a].apply(c,h),f=am.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),am.end(),f}},un=tn("pop"),vn=tn("push"),wn="/* Ractive.js component styles */\n",xn={},yn=[];Bh?(an=document.createElement("style"),an.type="text/css",bn=document.getElementsByTagName("head")[0],dn=!1,cn=an.styleSheet,_m=function(){var a;yn.length?(a=wn+yn.join(" "),cn?cn.cssText=a:an.innerHTML=a,dn||(bn.appendChild(an),dn=!0)):dn&&(bn.removeChild(an),dn=!1)},$m={add:function(a){a.css&&(xn[a._guid]||(xn[a._guid]=0,yn.push(a.css),_m()),xn[a._guid]+=1)},remove:function(a){a.css&&(xn[a._guid]-=1,xn[a._guid]||(Kb(yn,a.css),am.scheduleTask(_m)))}}):$m=null;var zn=$m,An=new Ml("render"),Bn=new Ml("complete"),Cn=Sc,Dn=Uc,En=Vc,Fn=Wc,Gn=Xc,Hn=Yc,In=Zc,Jn=$c,Kn=_c,Ln=ad,Mn={},Nn=bd,On=function(){return b(this.node)},Pn=function(a){this.type=ti,this.text=a.template};Pn.prototype={detach:On,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?O(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var Qn=Pn,Rn=dd,Sn=ed,Tn=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=Tl(a.root,b,a.parentFragment),void 0!==d?this.resolve(d):am.addUnresolved(this)};Tn.prototype={resolve:function(a){this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(this.ref)},rebind:function(a,b){var c;void 0!==this.keypath&&(c=Ub(this.keypath,a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||am.removeUnresolved(this)}};var Un=Tn,Vn=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},Wn={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Vn.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=Wn[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback("@"+d.prefix+fd(this.cached,d));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===$i&&void 0!==(a=fd(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback("@"+d.prefix+a);c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=fd(c,d)))return this.callback("@"+d.prefix+a);c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Xn=Vn,Yn=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};Yn.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback("@"+a)},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Zn=Yn,$n=gd;gd.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var _n,ao=hd,bo={},co=id,eo=Function.prototype.bind;_n=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return ao(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},_n.prototype={bubble:function(){this.ready&&(this.uniqueString=kd(this.str,this.keypaths),this.keypath=ld(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e=this;a=this.root.viewmodel.computations[this.keypath],a?this.root.viewmodel.mark(this.keypath):(d=co(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:"@"===a[0]?(b=Qb(a),function(){return b}):function(){var b=e.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=nd(b,e.root)),b}}),c={deps:this.keypaths.filter(md),get:function(){var a=b.map(jd);return d.apply(null,a)}},a=this.root.viewmodel.compute(this.keypath,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var fo=_n,go=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===Qi?this.refResolver=ao(this,a.n,function(a){d.resolve(a)}):new fo(b,c,a,function(a){d.resolve(a)})};go.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var ho=go,io=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=Tl(d,e,g))?this.base=f:this.baseResolver=new Un(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new ho(a,h,g)}),this.ready=!0,this.bubble()};io.prototype={getKeypath:function(){var a=this.members.map(od);return!a.every(pd)||this.baseResolver?null:this.base+"."+a.join(".")},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(cc)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(function(a){return a.forceResolution()}),this.bubble()}};var jo=io,ko=qd,lo=rd,mo=sd,no={getValue:Sn,init:ko,resolve:lo,rebind:mo},oo=function(a){this.type=ui,no.init(this,a)};oo.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:no.resolve,rebind:no.rebind,detach:On,unbind:Rn,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:no.getValue,setValue:function(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),h(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&am.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?O(b):b}};var po=oo,qo=td,ro=ud,so=vd,to=wd,uo=xd,vo=yd,wo=zd,xo=Ad,yo=Bd,zo=function(a,b){no.rebind.call(this,a,b)},Ao=Dd,Bo=Ed,Co=Qd,Do=Rd,Eo=Sd,Fo=Vd,Go=function(a){this.type=wi,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===Zi,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,no.init(this,a)};Go.prototype={bubble:qo,detach:ro,find:so,findAll:to,findAllComponents:uo,findComponent:vo,findNextNode:wo,firstNode:xo,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:no.getValue,shuffle:yo,rebind:zo,render:Ao,resolve:no.resolve,setValue:Bo,toString:Co,unbind:Do,unrender:Eo,update:Fo};var Ho,Io,Jo=Go,Ko=Wd,Lo=Xd,Mo=Yd,No=Zd,Oo={};try{Gh("table").innerHTML="foo"}catch(Zh){Ho=!0,Io={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Po=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(Ho&&(e=Io[b.tagName])?(d=$d("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===Ph.svg?(d=$d("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=$d(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},Qo=_d,Ro=be,So=ce,To=de,Uo=ee,Vo=fe,Wo=function(a){this.type=vi,no.init(this,a)};Wo.prototype={detach:Ko,find:Lo,findAll:Mo,firstNode:No,getValue:no.getValue,rebind:no.rebind,render:Ro,resolve:no.resolve,setValue:So,toString:To,unbind:Rn,unrender:Uo,update:Vo};var Xo,Yo,Zo,$o,_o=Wo,ap=function(){this.parentFragment.bubble()},bp=ge,cp=function(a){return this.node?Hh(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},dp=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},ep=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},fp=function(a){return this.fragment?this.fragment.findComponent(a):void 0},gp=he,hp=ie,ip=je,jp=/^true|on|yes|1$/i,kp=/^[0-9]+$/,lp=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||jp.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&kp.test(c)?parseInt(c):0===c||jp.test(c),delete b.lazy)},mp=ke;Xo="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Yo="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Zo=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},$o=Zo(Xo.concat(Yo));var np=function(a){var b=a.toLowerCase();return $o[b]||b},op=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==Ph.html?np(b):b;else if(b=b.substring(c+1),a.name=np(b),a.namespace=Ph[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},pp=le,qp={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},rp=function(a,b){var c;!a.pNode||a.namespace||b.pNode.namespaceURI&&b.pNode.namespaceURI!==Ph.html||(c=qp[a.name]||a.name,void 0!==b.pNode[c]&&(a.propertyName=c),(bk.test(c)||"value"===c)&&(a.useProperty=!0))
},sp=me,tp=ne,up={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},vp=oe,wp=pe,xp=re,yp=se,zp=te,Ap=ue,Bp=ve,Cp=we,Dp=xe,Ep=ye,Fp=ze,Gp=Ae,Hp=Be,Ip=Ce,Jp=De,Kp=Ee,Lp=function(a){this.init(a)};Lp.prototype={bubble:mp,init:sp,rebind:tp,render:vp,toString:wp,unbind:xp,update:Kp};var Mp,Np=Lp,Op=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new Np({element:a,name:c,value:b[c],root:a.root}),e.push(e[c]=d));return e};"undefined"!=typeof document&&(Mp=Gh("div"));var Pp=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Jt({root:a.root,owner:this,template:[b]})};Pp.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===Ph.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=Fe(a,this.isSvg),this.attributes.filter(function(a){return Ge(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var Qp=Pp,Rp=function(a,b){return b?b.map(function(b){return new Qp(a,b)}):[]},Sp=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c[c.length-1])return Jl.error({debug:this.root.debug,message:"noTwowayExpressions",args:{expression:c.slice(2,-1).replace("-","."),element:a.tagName}}),!1}else b.resolver.forceResolution(),c=b.keypath;this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=He(a))&&(this.resetValue=d,e.formBindings.push(this))};Sp.prototype={handleChange:function(){var a=this;am.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),am.scheduleTask(function(){return a.attribute.locked=!1}),am.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(Kb(this.root._twowayBindings[b],this),this.keypath=c,a=this.root._twowayBindings[c]||(this.root._twowayBindings[c]=[]),a.push(this))},unbind:function(){}},Sp.extend=function(a){var b,d=this;return b=function(a){Sp.call(this,a),this.init&&this.init()},b.prototype=Uh(d.prototype),c(b.prototype,a),b.extend=Sp.extend,b};var Tp,Up=Sp,Vp=Ie,Wp=Up.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",Vp,!1),this.root.lazy||(a.addEventListener("input",Vp,!1),a.attachEvent&&a.addEventListener("keyup",Vp,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",Vp,!1),a.removeEventListener("input",Vp,!1),a.removeEventListener("keyup",Vp,!1)},getValue:function(){return this.element.node.innerHTML}}),Xp=Wp,Yp={},Zp=Je,$p=Up.extend({name:"checked",init:function(){this.siblings=Zp(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",Vp,!1),a.attachEvent&&a.addEventListener("click",Vp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Vp,!1),a.removeEventListener("click",Vp,!1)},handleChange:function(){am.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),am.end()},getValue:function(){return this.element.node.checked},unbind:function(){Kb(this.siblings,this)}}),_p=$p,aq=Up.extend({name:"name",init:function(){this.siblings=Zp(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",Vp,!1),a.attachEvent&&a.addEventListener("click",Vp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Vp,!1),a.removeEventListener("click",Vp,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&Up.prototype.handleChange.call(this)},rebound:function(a,b){var c;Up.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath+"}}")},unbind:function(){Kb(this.siblings,this)}}),bq=aq,cq=Up.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.attribute.twoway=!0,this.siblings=Zp(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){Kb(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?Ib(a,b):a==b,c.name="{{"+this.keypath+"}}",c.checked=this.isChecked,c.addEventListener("change",Vp,!1),c.attachEvent&&c.addEventListener("click",Vp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Vp,!1),a.removeEventListener("click",Vp,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,Up.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(Ke).map(Le)}}),dq=cq,eq=Up.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",Vp,!1),a.attachEvent&&a.addEventListener("click",Vp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Vp,!1),a.removeEventListener("click",Vp,!1)},getValue:function(){return this.element.node.checked}}),fq=eq,gq=Up.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",Vp,!1)},unrender:function(){this.element.node.removeEventListener("change",Vp,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,am.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),hq=gq,iq=hq.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",Vp,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Vp,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&Jb(c,b)||hq.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,am.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),jq=iq,kq=Up.extend({render:function(){this.element.node.addEventListener("change",Vp,!1)},unrender:function(){this.element.node.removeEventListener("change",Vp,!1)},getValue:function(){return this.element.node.files}}),lq=kq;Tp=Up.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:i(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",Vp,!1),a||(b.addEventListener("input",c?Ne:Vp,!1),b.attachEvent&&b.addEventListener("keyup",c?Ne:Vp,!1)),b.addEventListener("blur",Me,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",Vp,!1),a.removeEventListener("input",Vp,!1),a.removeEventListener("keyup",Vp,!1),a.removeEventListener("blur",Me,!1)}});var mq=Tp,nq=mq.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),oq=Oe,pq=Qe,qq=Re,rq=Se,sq={args:!0},tq=/^event(?:\.(.+))?/,uq=Te,vq=Xe,wq={},xq={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},yq=Ye,zq=$e,Aq=_e,Bq=af,Cq=bf,Dq=cf,Eq=function(a,b,c){this.init(a,b,c)};Eq.prototype={bubble:pq,fire:qq,getAction:rq,init:uq,listen:yq,rebind:zq,render:Aq,resolve:Bq,unbind:Cq,unrender:Dq};var Fq,Gq,Hq=Eq,Iq=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new Hq(a,e[c],b[d]),g.push(f);return g};Fq={args:!0},Gq=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Jt({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Jt({template:b.d,root:c,owner:a}),this.params=this.fragment.getValue(Fq),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getValue(Fq),f.ready&&f.update()}),this.fn=Dl.registries.decorators.find(c,d),this.fn||Jl.error({debug:c.debug,message:"missingPlugin",args:{plugin:"decorator",name:d}}))},Gq.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var Jq,Kq,Lq,Mq=Gq,Nq=kf,Oq=lf,Pq={},Qq=rf,Rq=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};Bh?(Kq={},Lq=Gh("div").style,Jq=function(a){var b,c,d;if(a=Rq(a),!Kq[a])if(void 0!==Lq[a])Kq[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=Qh.length;b--;)if(c=Qh[b],void 0!==Lq[c+d]){Kq[a]=c+d;break}return Kq[a]}):Jq=null;var Sq,Tq,Uq=Jq;Bh?(Tq=window.getComputedStyle||Xh.getComputedStyle,Sq=function(a){var b,c,d,f,g;if(b=Tq(this.node),"string"==typeof a)return g=b[Uq(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[Uq(f)],"0px"===g&&(g=0),c[f]=g;return c}):Sq=null;var Vq=Sq,Wq=function(a,b){var c;if("string"==typeof a)this.node.style[Uq(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[Uq(c)]=a[c]);return this},Xq=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(gi('Missing easing function ("'+a.easing+'"). You may need to download a plugin from [TODO]'),b=sf)):b="function"==typeof a.easing?a.easing:sf,this.easing=b,this.start=km(),this.end=this.start+this.duration,this.running=!0,nm.add(this)};Xq.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Yq,Zq,$q,_q,ar,br,cr,dr,er=Xq,fr=new RegExp("^-(?:"+Qh.join("|")+")-"),gr=function(a){return a.replace(fr,"")},hr=new RegExp("^(?:"+Qh.join("|")+")([A-Z])"),ir=function(a){var b;return a?(hr.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},jr={},kr={};Bh?(Zq=Gh("div").style,function(){void 0!==Zq.transition?($q="transition",_q="transitionend",ar=!0):void 0!==Zq.webkitTransition?($q="webkitTransition",_q="webkitTransitionEnd",ar=!0):ar=!1}(),$q&&(br=$q+"Duration",cr=$q+"Property",dr=$q+"TimingFunction"),Yq=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[cr]=d.map(Uq).map(ir).join(","),a.node.style[dr]=ir(c.easing||"linear"),a.node.style[br]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(Rq(gr(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(_q,j,!1),h=!0,i())},a.node.addEventListener(_q,j,!1),setTimeout(function(){for(var e,k,l,m,n,o=d.length,p=[];o--;)m=d[o],e=f+m,ar&&!kr[e]&&(a.node.style[Uq(m)]=b[m],jr[e]||(k=a.getStyle(m),jr[e]=a.getStyle(m)!=b[m],kr[e]=!jr[e],kr[e]&&(a.node.style[Uq(m)]=k))),(!ar||kr[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?gi("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],p.push({name:Uq(m),interpolator:Fl(parseFloat(k),parseFloat(b[m])),suffix:n}));p.length?new er({root:a.root,duration:c.duration,easing:Rq(c.easing||""),step:function(b){var c,d;for(d=p.length;d--;)c=p[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(_q,j,!1),h=!0,i())},0)},c.delay||0)}):Yq=null;var lr,mr,nr,or,pr,qr=Yq;if("undefined"!=typeof document){if(lr="hidden",pr={},lr in document)nr="";else for(or=Qh.length;or--;)mr=Qh[or],lr=mr+"Hidden",lr in document&&(nr=mr);void 0!==nr?(document.addEventListener(nr+"visibilitychange",tf),tf()):("onfocusout"in document?(document.addEventListener("focusout",uf),document.addEventListener("focusin",vf)):(window.addEventListener("pagehide",uf),window.addEventListener("blur",uf),window.addEventListener("pageshow",vf),window.addEventListener("focus",vf)),pr.hidden=!1)}var rr,sr,tr,ur=pr;Bh?(sr=window.getComputedStyle||Xh.getComputedStyle,rr=function(a,b,c,d){var e,f=this;if(ur.hidden)return this.setStyle(a,b),tr||(tr=Ql.resolve());"string"==typeof a?(e={},e[a]=b):(e=a,d=c,c=b),c||(gi('The "'+this.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),c=this,d=this.complete);var g=new Ql(function(a){var b,d,g,h,i,j,k;if(!c.duration)return f.setStyle(e),void a();for(b=Object.keys(e),d=[],g=sr(f.node),i={},j=b.length;j--;)k=b[j],h=g[Uq(k)],"0px"===h&&(h=0),h!=e[k]&&(d.push(k),f.node.style[Uq(k)]=h);return d.length?void qr(f,e,c,d,a):void a()});return d&&(Jl.warn({debug:!0,message:"usePromise",args:{method:"t.animateStyle"}}),g.then(d).then(null,function(a){Jl.consoleError({debug:!0,err:a})})),g}):rr=null;var vr=rr,wr=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},xr=wf,yr=function(a,b,c){this.init(a,b,c)};yr.prototype={init:Qq,start:xr,getStyle:Vq,setStyle:Wq,animateStyle:vr,processParams:wr};var zr,Ar,Br=yr;zr=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},Ar=function(){this.node.type&&"text/javascript"!==this.node.type||gi("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var Cr=yf,Dr=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(Ef).join("")+this.conditionalAttributes.map(Ef).join(""),"option"===this.name&&Cf(this)&&(a+=" selected"),"input"===this.name&&Df(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=O(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),ck.test(this.template.e)||(a+="</"+this.template.e+">"),a)},Er=Ff,Fr=Gf,Gr=function(a){this.init(a)};Gr.prototype={bubble:ap,detach:bp,find:cp,findAll:dp,findAllComponents:ep,findComponent:fp,findNextNode:gp,firstNode:hp,getAttribute:ip,init:Nq,rebind:Oq,render:Cr,toString:Dr,unbind:Er,unrender:Fr};var Hr=Gr,Ir=/^\s*$/,Jr=/^\s*/,Kr=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&Ir.test(c)&&b.shift(),d=b[b.length-1],void 0!==d&&Ir.test(d)&&b.pop(),e=b.reduce(If,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},Lr=Jf,Mr=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},Nr=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=Ai,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,no.init(this,a),!this.keypath&&(c=Lr(this.root,this.name))&&(Rn.call(this),this.isNamed=!0,this.setTemplate(c))};Nr.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||mo.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:no.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=Lr(this.root,""+a)),!b&&this.name&&(b=Lr(this.root,this.name))&&(Rn.call(this),this.isNamed=!0),b||Jl.error({debug:this.root.debug,message:"noTemplateForPartial",args:{name:this.name}}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&am.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Jt({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===ti?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?Mr(b,e[0]):b):b},unbind:function(){this.isNamed||Rn.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var Or=Nr,Pr=Lf,Qr=new Ml("detach"),Rr=Mf,Sr=Nf,Tr=Of,Ur=Pf,Vr=Qf,Wr=Rf,Xr=Sf;Tf.prototype={constructor:Tf,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?Uf(this.queue,b).push(a):Vf(this,a),delete this.inProcess[a._guid]}};var Yr,Zr,$r,_r=Tf,as=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},bs=Array.prototype.slice,cs=[],ds=["pop","push","reverse","shift","sort","splice","unshift"];ds.forEach(function(a){var b=function(){var b,c,d,e,f=bs.call(arguments);for(b=qn(this,a,f),c=Array.prototype[a].apply(this,arguments),am.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],am.addViewmodel(d.root.viewmodel),as(d,this,a,b);return am.end(),this._ractive.setting=!1,c};Vh(cs,a,{value:b})}),Yr={},Yr.__proto__?(Zr=function(a){a.__proto__=cs},$r=function(a){a.__proto__=Array.prototype}):(Zr=function(a){var b,c;for(b=ds.length;b--;)c=ds[b],Vh(a,c,{value:cs[c],configurable:!0})},$r=function(a){var b;for(b=ds.length;b--;)delete a[ds[b]]}),Zr.unpatch=$r;var es,fs,gs,hs=Zr;es={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new fs(a,b,c)}},fs=function(a,b,c){this.root=a,this.value=b,this.keypath=c,b._ractive||(Vh(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),hs(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},fs.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(gs);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(gs);d.splice(e,1)}}else delete a._ractive,hs.unpatch(this.value)}},gs="Something went wrong in a rather interesting way";var is,js,ks=es;em&&(is={filter:function(a,b,c){return em.filter(a,b,c)&&ks.filter(a)},wrap:function(a,b,c){return new js(a,b,c)}},js=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=em.wrap(a,b,c),this.arrayWrapper=ks.wrap(a,b,c)},js.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var ls=is,ms={},ns=Wf,os=Zf,ps={},qs=$f,rs=/[^\.]+$/,ss=ag,ts=dg,us=ig,vs=jg,ws=/\$\{([^\}]+)\}/g,xs=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:kg(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:kg(a.get),set:a.set}),a)},ys=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};ys.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a]=null,this.viewmodel.register(a,this.computation,"computed")}};var zs=ys,As=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};As.prototype={constructor:As,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,g;if(!e)for(g=b.length;g--;)if(c=b[g],f=a.viewmodel.get(c),!h(f,d.depValues[c]))return d.depValues[c]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){Jl.warn({debug:a.debug,message:"failedComputation",args:{key:this.key,err:f.message||f}}),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,lg(this.viewmodel,d)&&!this.unresolvedDeps[d]?(f=new zs(this,d),a.splice(b,1),this.unresolvedDeps[d]=f,am.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var Bs=As,Cs=mg,Ds={FAILED_LOOKUP:!0},Es={},Fs=ng,Gs=pg,Hs=rg;rg.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})};var Is=sg;sg.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.deps=[],this.local.mappings[this.localKey]=this,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Hs(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var Js=tg,Ks=ug,Ls=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},Ms={},Ns=vg,Os=yg,Ps=Ag,Qs=Bg,Rs={implicit:!0},Ss={noCascade:!0},Ts=Dg,Us=Fg,Vs=Gg,Ws={lookup:function(a,b){var c,d=a.adapt;if(!d||!d.length)return d;if(b&&Object.keys(b).length&&(c=d.length))for(;c--;){var e=d[c];"string"==typeof e&&(d[c]=b[e]||e)}return d},combine:function(a,b){return a=Ig(a),b=Ig(b),a&&a.length?b&&b.length?(a.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}),b):a.slice():b}},Xs=Ws,Ys=function(a,b){var c=this;return void 0===b&&(b=Uh(null)),function(){var d,e;c.ractive=a,Ys.extend(a.constructor,a),c.mappings=b;for(d in b)b[d].initViewmodel(c);if(a.data&&a.parameters!==!0)for(d in a.data)(e=c.mappings[d])&&void 0===e.getValue()&&e.setValue(a.data[d]);c.cache={},c.cacheMap=Uh(null),c.deps={computed:Uh(null),"default":Uh(null)},c.depsMap={computed:Uh(null),"default":Uh(null)},c.patternObservers=[],c.specials=Uh(null),c.wrapped=Uh(null),c.computations=Uh(null),c.captureGroups=[],c.unresolvedImplicitDependencies=[],c.changes=[],c.implicitChanges={},c.noCascade={}}()};Ys.extend=function(a,b){if(b.magic&&!fm)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.adapt=Xs.combine(a.prototype.adapt,b.adapt)||[],b.adapt=Xs.lookup(b,b.adaptors)},Ys.prototype={adapt:ns,applyChanges:ts,capture:us,clearCache:vs,compute:Cs,get:Fs,init:Gs,map:Js,mark:Ks,merge:Ns,register:Os,release:Ps,set:Qs,smartUpdate:Ts,teardown:Us,unregister:Vs};var Zs=Ys,$s=new Ml("construct"),_s=new Ml("config"),at=new _r("init"),bt=0,ct=Jg,dt=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&Jl.warn({debug:i.debug,message:"defaultElSpecified",args:{name:a.name}}),j=h;j;){if(j.owner.type===Gi){k=j.owner.container;break}j=j.parent}return g=Uh(b.prototype),ct(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g},et=Lg;Lg.prototype={bubble:function(){this.dirty||(this.dirty=!0,am.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var ft=Mg,gt=Rg;Rg.prototype={resolve:function(a){this.resolved=!0,this.specialRef="@"===a[0],this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(this.specialRef)this.parameters.addData(this.key,Qb(a));else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;this.specialRef?(this.parameters.addData(this.key,Qb(a)),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key]?b.reversedMappings[this.key].rebind(a):b.mappings[this.key].resolve(a)}};var ht=Sg;Ug.prototype={add:function(a,b){if("string"==typeof b){var c=Kk(b);this.addData(a,c?c.value:b)}else if(0===b)this.addData(a);else{var d;d=Vg(b)?new gt(this,a,b[0]).resolver:new et(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c=this.parentViewmodel.mappings[b];return this.mappings[a]=new Is(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var it=Wg,jt=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},kt=Yg,lt=Zg,mt=$g,nt=_g,ot=new Ml("teardown"),pt=ah,qt=ch,rt=function(a,b){this.init(a,b)};rt.prototype={detach:Rr,find:Sr,findAll:Tr,findAllComponents:Ur,findComponent:Vr,findNextNode:Wr,firstNode:Xr,init:kt,rebind:lt,render:mt,toString:nt,unbind:pt,unrender:qt};var st=rt,tt=function(a){this.type=Bi,this.value=a.template.c};tt.prototype={detach:On,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var ut=tt,vt=function(a){var b,c;this.type=Gi,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";
this.fragment=new Jt({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],am.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};vt.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),Kb(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var wt=vt,xt=function(a){this.declaration=a.template.a};xt.prototype={init:zl,render:zl,unrender:zl,teardown:zl,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var yt=xt,zt=dh,At=eh,Bt=fh,Ct=gh,Dt=hh,Et=ih,Ft=kh,Gt=function(a){this.init(a)};Gt.prototype={bubble:Dn,detach:En,find:Fn,findAll:Gn,findAllComponents:Hn,findComponent:In,findNextNode:Jn,firstNode:Kn,getNode:Ln,getValue:Nn,init:At,rebind:Bt,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Ct,toString:Dt,unbind:Et,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Ft};var Ht,It,Jt=Gt,Kt=["template","partials","components","decorators","events"],Lt=new Ml("reset"),Mt=lh,Nt=function(a,b,c){function d(b,c,f){f&&f.partials[a]||b.forEach(function(b){b.type===Ai&&b.getPartialName()===a&&c.push(b),b.fragment&&d(b.fragment.items,c,f),e(b.fragments)?d(b.fragments,c,f):e(b.items)?d(b.items,c,f):b.type===Fi&&b.instance&&d(b.instance.fragment.items,c,b.instance),b.type===zi&&(e(b.attributes)&&d(b.attributes,c,f),e(b.conditionalAttributes)&&d(b.conditionalAttributes,c,f))})}var f,g=this,h=[];return d(this.fragment.items,h),this.partials[a]=b,f=am.start(this,!0),h.forEach(function(b){b.value=void 0,b.setValue(a)}),am.end(),c&&(Jl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.resetPartial"}}),f.then(c.bind(this)).then(null,function(a){Jl.consoleError({debug:g.debug,err:a})})),f},Ot=mh,Pt=tn("reverse"),Qt=/\*/,Rt=nh,St=tn("shift"),Tt=tn("sort"),Ut=tn("splice"),Vt=oh,Wt=new Ml("teardown"),Xt=ph,Yt=rh,Zt=sh,$t=new Ml("unrender"),_t=th,au=tn("unshift"),bu=new Ml("update"),cu=uh,du=vh,eu={add:hm,animate:sm,detach:um,find:vm,findAll:Em,findAllComponents:Fm,findComponent:Gm,findContainer:Hm,findParent:Im,fire:Om,get:Qm,insert:Sm,merge:Tm,observe:jn,observeOnce:kn,off:nn,on:on,once:pn,pop:un,push:vn,render:Cn,reset:Mt,resetPartial:Nt,resetTemplate:Ot,reverse:Pt,set:Rt,shift:St,sort:Tt,splice:Ut,subtract:Vt,teardown:Xt,toggle:Yt,toHTML:Zt,toHtml:Zt,unrender:_t,unshift:au,update:cu,updateModel:du},fu=xh,gu=1,hu=zh,iu=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath,d.index={},(c=$n(b.proxy.parentFragment))&&(d.index=$n.resolve(c)),d):d};Ht=function(a){ct(this,a)},It={extend:{value:hu},getNodeInfo:{value:iu},parse:{value:kl},Promise:{value:Ql},svg:{value:Ah},magic:{value:fm},VERSION:{value:"0.6.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Fh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Hl},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Wh(Ht,It),Ht.prototype=c(eu,Eh),Ht.prototype.constructor=Ht,Ht.defaults=Ht.prototype;var ju="function";if(typeof Date.now!==ju||typeof String.prototype.trim!==ju||typeof Object.keys!==ju||typeof Array.prototype.indexOf!==ju||typeof Array.prototype.forEach!==ju||typeof Array.prototype.map!==ju||typeof Array.prototype.filter!==ju||"undefined"!=typeof window&&typeof window.addEventListener!==ju)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var ku=Ht;return ku});