/*
	ractive.min.js v0.6.1
	2014-12-12 - commit 8f304b07 

	http://ractivejs.org
	http://twitter.com/RactiveJS

	Released under the MIT License.
*/

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=b():a.Ractive=b()}("undefined"!=typeof window?window:this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=Uh.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=Uh.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===Yh.call(a)}function f(a){return Zh.test(Yh.call(a))}function g(a){if(!k(a))return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function i(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===Yh.call(a)}function j(a){return!isNaN(parseFloat(a))&&isFinite(a)}function k(a){return a&&"[object Object]"===Yh.call(a)}function l(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=fi.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(n),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=hi.test(a)?a.replace(hi,d):a.replace(ei,"").replace(di,function(a,b){var c,d;return gi.test(b)?a:(c=b.split(",").map(m),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function m(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function n(a){return a.str}function o(a,b,c){var d,e=b.constructor._guid;(d=p(c.css,c,e)||p(a.css,a,e))&&(b.constructor.css=d)}function p(a,b,c){return a?b.noCssTransform?a:ii(a,c):void 0}function q(a,b){return"function"==typeof b&&/_super/.test(a)}function r(a,b,c){var d=c.data||{},e=v(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return w(e,d)}function s(a,b,c){b.data=r(a,b,c)}function t(a,b,c){var d=c.data,e=r(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}}function u(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}function v(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return x(a,b),w(a,b)}function w(a,b){return"function"==typeof b?A(b,a):"function"==typeof a?z(b,a):y(b,a)}function x(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function y(a,b){return a=a||{},b?(x(b,a,!0),a):a}function z(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function A(a,b){var c;return c="function"!=typeof b?function(a){y(a,b)}:function(a){return b=li(b,function(){},!0),b.call(this,a)||a},li(a,c)}function B(a){var b,c,d,e;return b=a.pos,d=qj(a),null===d?null:(c=[d],a.matchString(",")?(e=B(a),e?c.concat(e):(a.pos=b,null)):c)}function C(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=C(a),null===f&&a.error($i),f.forEach(b)),d)}function D(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(mj))return{t:Ni,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error($i),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:Ni,x:d}):null}function E(a){return JSON.stringify(String(a))}function F(a,b){var c,d;if(a.t===Mi&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(k(d))F(d,b);else for(c=d.length;c--;)F(d[c],b);a.x&&F(a.x,b),a.r&&F(a.r,b),a.v&&F(a.v,b)}function G(a,b,c){var d=function(b){return G(a,b,c)};switch(b.t){case Ji:case Ki:case Fi:return b.v;case Gi:return E(b.v);case Hi:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Ii:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case Li:return b.k+":"+G(a,b.v,c);case Pi:return("typeof"===b.s?"typeof ":b.s)+G(a,b.o,c);case Si:return G(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+G(a,b.o[1],c);case Ti:return G(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case Qi:return"("+G(a,b.x,c)+")";case Oi:return G(a,b.x,c)+G(a,b.r,c);case Ni:return b.n?"."+b.n:"["+G(a,b.x,c)+"]";case Ri:return G(a,b.o[0],c)+"?"+G(a,b.o[1],c)+":"+G(a,b.o[2],c);case Mi:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function H(a,b,c){var d;if(b){for(;b.t===Qi&&b.x;)b=b.x;return b.t===Mi?c.r=b.n:b.t===Fi&&Xj.test(b.v)?c.r=b.v:(d=I(a,b))?c.rx=d:c.x=a.flattenExpression(b),c}}function I(a,b){for(var c,d=[];b.t===Oi&&b.r.t===Ni;)c=b.r,d.unshift(c.x?c.x.t===Mi?c.x:a.flattenExpression(c.x):c.n),b=b.x;return b.t!==Mi?null:{r:b.n,m:d}}function J(a){var b;return a.interpolate[a.inside]===!1?null:(b=Rj.slice().sort(function(b,c){return a[c.delimiters][0].length-a[b.delimiters][0].length}),function c(d){return d?K(a,d)||c(b.shift()):null}(b.shift()))}function K(a,b){var c,d,e,f,g,h,i,j;if(c=a.pos,e=a[b.delimiters],!a.matchString(e[0]))return null;if(d=Qj(a))return a.matchString(e[1])?(a[b.delimiters]=d,gk):null;if(a.allowWhitespace(),d=fk(a,b),null===d)return a.pos=c,null;if(a.allowWhitespace(),a.matchString(e[1])||a.error("Expected closing delimiter '"+e[1]+"' after reference"),d.t===xi&&(d.exclude=!0),d.t===ui&&(a.sectionDepth-=1,a.sectionDepth<0&&(a.pos=c,a.error("Attempted to close a section that wasn't open"))),d.contextPartialExpression)d.f=d.contextPartialExpression,d.t=si,d.n="with",delete d.contextPartialExpression;else if(L(d)){for(a.sectionDepth+=1,f=[],i=f,g=d.n;j=a.read();){if(j.t===ui){g&&j.r!==g&&a.error("Expected {{/"+g+"}}");break}if(j.t===qi&&"else"===j.r){if("unless"!==d.n){i=h=[];continue}a.error("{{else}} not allowed in {{#unless}}")}i.push(j)}f.length&&(d.f=f),h&&h.length&&(d.l=h,"with"===d.n&&(d.n="if-with"))}return a.includeLinePositions&&(d.p=a.getLinePos(c)),d.n?d.n=Uj[d.n]:d.t===ti&&(d.t=si,d.n=Vi),d.n===Zi?(d.r&&-1===d.r.indexOf(".")||a.error("Invalid partial name "+d.r+"."),{n:d.r,f:d.f,t:Di}):d}function L(a){return a.t===si||a.t===ti}function M(a){return a.replace(bk,function(a,b){var c;return c="#"!==b[0]?_j[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(N(c)):a})}function N(a){return a?10===a?32:128>a?a:159>=a?ak[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function O(a){return a.replace(ek,"&amp;").replace(ck,"&lt;").replace(dk,"&gt;")}function P(a){return a.replace(sk,"\\$&")}function Q(a){var b=a.remaining(),c=a.pos,d=a.matchPattern(vk),e=a.options.delimiters[0],f=a.options.delimiters[1];if(d&&a.matchString(e)){var g=a.matchPattern(wk);if(!a.matchString(f)||!a.matchPattern(xk))return a.pos=c,null;var h=new RegExp("<!--\\s*"+tk(e)+"\\s*\\/\\s*"+g+"\\s*"+tk(f)+"\\s*-->");b=a.remaining();var i=h.exec(b);if(!i)throw new Error('Inline partials must have a closing delimiter, and cannot be nested. Expected closing for "'+g+'", but '+(i?'instead found "'+i[1]+'"':" no closing found"));var j={t:Di,f:new a.StandardParser(b.substr(0,i.index),a.options).result,n:g};return a.pos+=i.index+i[0].length,j}return a.pos=c,null}function R(a){var b,c,d;return a.allowWhitespace(),(c=a.matchPattern(Ck))?(b={name:c},d=S(a),d&&(b.value=d),b):null}function S(a){var b,c,d,e;return b=a.pos,a.allowWhitespace(),a.matchString("=")?(a.allowWhitespace(),c=a.pos,d=a.sectionDepth,e=V(a,"'")||V(a,'"')||U(a),a.sectionDepth!==d&&(a.pos=c,a.error("An attribute value must contain as many opening section tags as closing section tags")),null===e?(a.pos=b,null):e.length?1===e.length&&"string"==typeof e[0]?M(e[0]):e:null):(a.pos=b,null)}function T(a){var b,c,d,e,f;return b=a.pos,(c=a.matchPattern(Dk))?(d=c,e=[a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],-1!==(f=yk(d,e))&&(c=c.substr(0,f),a.pos=b+c.length),c):null}function U(a){var b,c;for(a.inAttribute=!0,b=[],c=hk(a)||T(a);null!==c;)b.push(c),c=hk(a)||T(a);return b.length?(a.inAttribute=!1,b):null}function V(a,b){var c,d,e;if(c=a.pos,!a.matchString(b))return null;for(a.inAttribute=b,d=[],e=hk(a)||W(a,b);null!==e;)d.push(e),e=hk(a)||W(a,b);return a.matchString(b)?(a.inAttribute=!1,d):(a.pos=c,null)}function W(a,b){var c,d,e,f;return c=a.pos,e=a.remaining(),f=[b,a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],d=yk(e,f),-1===d&&a.error("Quoted attribute value must have a closing quote"),d?(a.pos+=d,e.substr(0,d)):null}function X(a){var b,c,d;return a.allowWhitespace(),(b=pj(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function Y(a){var b,c,d,e,f,g,h,i,j,k,l;if(b=a.pos,a.inside||a.inAttribute)return null;if(!a.matchString("<"))return null;if("/"===a.nextChar())return null;if(c={},a.includeLinePositions&&(c.p=a.getLinePos(b)),a.matchString("!"))return c.t=Ei,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;if(c.t=vi,c.e=a.matchPattern(Lk),!c.e)return null;for(Mk.test(a.nextChar())||a.error("Illegal tag name"),g=function(b,d){var e=d.n||d;Pk.test(e)&&(a.pos-=e.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),c.v[b]=d},a.allowWhitespace();h=hk(a)||Ek(a);)h.name?(e=Qk[h.name])?c[e]=Kk(h.value):(f=Ok.exec(h.name))?(c.v||(c.v={}),i=Kk(h.value),g(f[1],i)):a.sanitizeEventAttributes&&Nk.test(h.name)||(c.a||(c.a={}),c.a[h.name]=h.value||0):(c.m||(c.m=[]),c.m.push(h)),a.allowWhitespace();if(a.allowWhitespace(),a.matchString("/")&&(j=!0),!a.matchString(">"))return null;if(d=c.e.toLowerCase(),!j&&!$j.test(c.e)){for(("script"===d||"style"===d)&&(a.inside=d),k=[];Z(d,a.remaining())&&(l=a.read(Ik))&&l.t!==ui&&l.t!==Ai;)k.push(l);k.length&&(c.f=k)}return a.inside=null,a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(d)?Rk:c}function Z(a,b){var c,d;return c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b),d=Jk[a],c&&d?!~d.indexOf(c[1].toLowerCase()):!0}function $(a){return"string"==typeof a}function _(a){return a.t===xi||a.t===yi}function ab(a){return(a.t===si||a.t===ti)&&a.f}function bb(a,b,c){for(var d,f,g=c.length;g--;)d=c[g],cb(d)?(b[d.n]=d.f,c.splice(g,1)):e(d.f)&&((f=db(a,d))?(a.push(f),bb(a,d.p={},d.f),a.pop()):e(d.f)&&bb(a,b,d.f))}function cb(a){return a.t===Di}function db(a,b){var c,d,e=b.e;if(b.e)for(c=0;c<a.length;c++)if(d=(a[c].components||{})[e])return d}function eb(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;for($k(a),g=a.length;g--;)h=a[g],h.exclude?a.splice(g,1):b&&h.t===xi&&a.splice(g,1);for(Xk(a,d,e),g=a.length;g--;)if(h=a[g],h.f&&(k=c||h.t===vi&&bl.test(h.e),k||(i=a[g-1],j=a[g+1],(!i||"string"==typeof i&&dl.test(i))&&(l=!0),(!j||"string"==typeof j&&cl.test(j))&&(m=!0)),eb(h.f,b,k,l,m,f)),h.l&&(eb(h.l,b,c,l,m,f),f&&(n={t:4,n:Vi,f:h.l},h.r&&(n.r=h.r),h.x&&(n.x=h.x),h.rx&&(n.rx=h.rx),a.splice(g+1,0,n),delete h.l)),h.a)for(o in h.a)h.a.hasOwnProperty(o)&&"string"!=typeof h.a[o]&&eb(h.a[o],b,c,l,m,f);for(g=a.length;g--;)"string"==typeof a[g]&&("string"==typeof a[g+1]&&(a[g]=a[g]+a[g+1],a.splice(g+1,1)),c||(a[g]=a[g].replace(al," ")),""===a[g]&&a.splice(g,1))}function fb(a,b){return void 0===b&&(b=a),function(){b.delimiters=a.delimiters||["{{","}}"],b.tripleDelimiters=a.tripleDelimiters||["{{{","}}}"],b.staticDelimiters=a.staticDelimiters||["[[","]]"],b.staticTripleDelimiters=a.staticTripleDelimiters||["[[[","]]]"]}()}function gb(a,b){var c=a.map(b);return a.forEach(function(a,b){c[a]=c[b]}),c}function hb(a){var b=Rh(jl);return b.parse=function(b,c){return ib(b,c||a)},b}function ib(a,b){if(!gl)throw new Error(oi.missingParser);return gl(a,b||this.options)}function jb(a,b){var c;if(!Bh){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(kb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function kb(a){return a&&"#"===a.charAt(0)}function lb(a){return!("string"==typeof a)}function mb(a){return a.defaults&&(a=a.defaults),il.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function nb(a){var b,c=a._config.template;if(c&&c.fn)return b=ob(a,c.fn),b!==c.result?(c.result=b,b=pb(b,a)):void 0}function ob(a,b){var c=kl.createHelper(kl.getParseOptions(a));return b.call(a,a.data,c)}function pb(a,b){if("string"==typeof a)"#"===a[0]&&(a=kl.fromId(a)),a=gl(a,kl.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function qb(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function rb(a,b){this.name=a,this.useDefaults=b}function sb(a,b){var c;return b.test(a)?b.getValue(a):!a.isolated&&(c=a.parent)?sb(c,b):void 0}function tb(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=ub(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function ub(a,b){var c;return b in a?!function(){var d=a[b];c="function"==typeof d?d:function(){return d}}():c=vl,c}function vb(a,b,c){if(b in a){if(c in a)throw new Error(wb(b,c,!0));ci(wb(b,c)),a[c]=a[b]}}function wb(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function xb(a){vb(a,"eventDefinitions","events")}function yb(a){e(a.adaptors)&&vb(a,"adaptors","adapt")}function zb(a){vb(a,"beforeInit","onconstruct"),vb(a,"init","onrender"),vb(a,"complete","oncomplete"),xb(a),yb(a)}function Ab(a,b,c,d,e){nl[b][a](c,d,e)}function Bb(a){return a in Eh&&!(a in pl.parseOptions)&&!(a in nl)}function Cb(a,b,c,d){xl(d),Ab(a,"data",b,c,d),pl.parseOptions.forEach(function(a){a in d&&(c[a]=d[a])});for(var e in d)if(Bb(e)){var f=d[e];c[e]="function"==typeof f?wl(b.prototype,e,f):f}pl.registries.forEach(function(e){e[a](b,c,d)}),Ab(a,"template",b,c,d),Ab(a,"css",b,c,d),Db(b.prototype,c,d)}function Db(a,b,c){for(var d in c)if(!(d in ql)&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=wl(a,d,e)),b[d]=e}}function Eb(a){return function(){return a}}function Fb(a){var b=oi[a.message]||a.message||"";return Gb(b,a.args)}function Gb(a,b){return a.replace(/{([^{}]*)}/g,function(a,c){return b[c]})}function Hb(a){this.event=a,this.method="on"+a,this.deprecate=Gl[a]}function Ib(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function Jb(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function Kb(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function Lb(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function Mb(a){setTimeout(a,0)}function Nb(a,b){return function(){for(var c;c=a.shift();)c(b)}}function Ob(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Hl)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,Ob(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function Pb(a,b,c,d){var e=a[b];if(e&&!Rb(e,d)&&Rb(e,c))return a[b]=Ub(e,c,d),!0}function Qb(a){var b=a.slice(2);return"i"===a[1]&&j(b)?+b:b}function Rb(a,b){return a===b||Wb(a,b)}function Sb(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c]?a.viewmodel.wrapped[c].get():a.get(c);for(f in d)!d.hasOwnProperty(f)||"_ractive"===f&&e(d)||(g=c?c+"."+f:f,b.push(g));return b}var d,f,g;for(d=b.split("."),g=[""];f=d.shift();)"*"===f?g=g.reduce(c,[]):""===g[0]?g[0]=f:g=g.map(Tb(f));return g}function Tb(a){return function(b){return b?b+"."+a:a}}function Ub(a,b,c){return a===b?void 0!==c?c:null:Wb(a,b)?null===c?c:a.replace(b+".",c+"."):void 0}function Vb(a){return a?a.replace(Nl,".$1"):""}function Wb(a,b){return a&&b&&a.substr(0,b.length+1)===b+"."}function Xb(a,b,c){return b=Vb(b),"~/"===b.substr(0,2)?(b=b.substring(2),$b(a,ac(b),c),b):"."===b[0]?(b=Yb(Ol(c),b),b&&$b(a,ac(b),c),b):Zb(a,b,c)}function Yb(a,b){var c;if("."===b)return a;if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),c.join(".")}return a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,"")}function Zb(a,b,c,d){var e,f,g,h,i;for(f=ac(b);c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e+"."+b;return _b(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,i=Zb(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function $b(a,b){var c;!a.parent||a.isolated||_b(a,b)||(c=Zb(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c})}function _b(a,b){return b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function ac(a){var b=a.indexOf(".");return~b?a.slice(0,b):a}function bc(a){a.teardown()}function cc(a){a.unbind()}function dc(a){a.unrender()}function ec(a){a.detach()}function fc(a){a.detachNodes()}function gc(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function hc(){for(var a,b,c;Rl.viewmodels.length;)b=Rl.viewmodels.pop(),c=b.applyChanges(),c&&Vl.fire(b.ractive,c);for(ic(),a=0;a<Rl.views.length;a+=1)Rl.views[a].update();for(Rl.views.length=0,a=0;a<Rl.tasks.length;a+=1)Rl.tasks[a]();return Rl.tasks.length=0,Rl.viewmodels.length?hc():void 0}function ic(){var a,b,c,d;for(a=Ul.length;a--;)b=Ul[a],b.keypath&&Ul.splice(a,1),(c=Pl(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),Ul.splice(a,1));d&&d.forEach(jc)}function jc(a){a.item.resolve(a.keypath)}function kc(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,Yl.start(d),d.viewmodel.mark(c),Yl.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function lc(a,b,c){var d;if("string"!=typeof b||!j(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!j(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function mc(a,b){return cm(this,a,void 0===b?1:+b)}function nc(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;if(d=new Ml(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:mm,h.push(oc(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){k(a,n)}),l&&d.then(function(a){l(a,n)}).then(null,function(a){Fl.consoleError({debug:r.debug,err:a})}),q.complete=e,p=oc(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,function(a){Fl.consoleError({debug:r.debug,err:a})}),c.complete=e,g=oc(this,a,b,c),d.stop=function(){g.stop()},d}function oc(a,b,c,d){var e,f,g,i;return b&&(b=Vb(b)),null!==b&&(i=a.viewmodel.get(b)),jm.abort(b,a),h(i,c)?(d.complete&&d.complete(d.to),nm):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,g=new lm({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),jm.add(g),a._animations.push(g),g)}function pc(){return this.detached?this.detached:(this.el&&Kb(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),pm.fire(this),this.detached)}function qc(a){return this.el?this.fragment.find(a):null}function rc(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function sc(a){var b,c;for(b=[a],c=rc(a);c;)b.push(c),c=rc(c);return b}function tc(a,b,c,d){var e=[];return Th(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:sm}}),c?(Th(e,{cancel:{value:tm},_root:{value:a},_sort:{value:wm},_makeDirty:{value:xm},_remove:{value:ym},_dirty:{value:!1,writable:!0}}),e):e}function uc(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=zm(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function vc(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=zm(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function wc(a){return this.fragment.findComponent(a)}function xc(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function yc(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function zc(a){var b,c,d,e,f,g;for(b=a.split("."),(c=Hm[b.length])||(c=Ac(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function Ac(a){var b,c,d,e,f,g="";if(!Hm[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}Hm[a]=d}return Hm[a]}function Bc(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=Im(b);Cc(a,d,c.event,c.args,!0)}}function Cc(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(Gm.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=Dc(a,f,c,d)&&h);if(Gm.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=Im(i),c&&(c.component=a)}Cc(a.parent,b,c,d)}}function Dc(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function Ec(a){var b={args:Array.prototype.slice.call(arguments,1)};Jm(this,a,b)}function Fc(a){var b;return a=Vb(a),b=this.viewmodel.get(a,Lm),void 0===b&&this.parent&&!this.isolated&&Pl(this,a,this.fragment)&&(b=this.viewmodel.get(a)),b}function Gc(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,Hc(this)}function Hc(a){Nm.fire(a),a.findAllComponents("*").forEach(function(a){Hc(a.instance)})}function Ic(a,b,c){var d,f,g=this;return a=Vb(a),d=this.viewmodel.get(a),e(d)&&e(b)?(f=Yl.start(this,!0),this.viewmodel.merge(a,d,b,c),Yl.end(),c&&c.complete&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.merge"}}),f.then(c.complete).then(null,function(a){Fl.consoleError({debug:g.debug,err:a})})),f):this.set(a,b,c&&c.complete)}function Jc(a,b){var c,d;return c=Sb(a,b),d={},c.forEach(function(b){d[b]=a.get(b)}),d}function Kc(a,b,c,d){var e,f,g;return b=Vb(b),d=d||cn,bn.test(b)?(e=new an(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Sm(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function Lc(a,b,c){var d,e,f,g;if(k(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",dn(this,a,b,c);if(f=a.split(" "),1===f.length)return dn(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(dn(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function Mc(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function Nc(a,b){var c,d=this;if(a)c=a.split(" ").map(gn).filter(hn),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function Oc(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(gn).filter(hn),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function Pc(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Qc(a,b,c){var d,e,f,g,h,i,j=[];if(d=Rc(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function Rc(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function Sc(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=Yl.start(this,!0),Yl.scheduleTask(function(){return wn.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Tc(h),b.innerHTML=""}return this.constructor.css&&vn.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),Yl.end(),this.transitionsEnabled=f,d.then(function(){return xn.fire(g)}).then(null,function(a){Fl.consoleError({debug:g.debug,err:a})}),d}function Tc(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Uc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function Vc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function Wc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function Xc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function Yc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function Zc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function $c(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function _c(){return this.items&&this.items[0]?this.items[0].firstNode():null}function ad(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function bd(a){var b=this;return void 0===a&&(a=In),function(){var c,d,e,f,g,h,i;return c=a.args,g=c?"argsList":"value",h=c?"dirtyArgs":"dirtyValue",b[h]&&(e=cd(b.items,d={},b.root._guid),f=Gk(c?"["+e+"]":e,d),i=f?f.value:c?[b.toString()]:b.toString(),b[g]=i,b[h]=!1),b[g]}()}function cd(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return cd(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=(f=a.root.viewmodel.wrapped[a.keypath])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function dd(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function ed(){return this.value}function fd(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function gd(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function hd(a,b,c){var d;return"@"===b.charAt(0)?new Tn(a,b,c):(d=Wn(a.parentFragment,b))?new Vn(a,d,c):new Qn(a,b,c)}function id(a,b){var c,d;if(Zn[a])return Zn[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),Zn[a]=c,c}function jd(a){return a.call()}function kd(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":"@"===d[0]?(e=d.slice(1),j(e)?e:'"'+e+'"'):d})}function ld(a){return"${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"}function md(a){return void 0!==a&&"@"!==a[0]}function nd(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){Sh(a,d,{value:_n.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return Sh(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function od(a){return a.value}function pd(a){return void 0!=a}function qd(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!==c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.key=b.key,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Yn(a,e,c)),b.template.x&&(a.resolver=new ao(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new fo(a,b.template.rx,d)),a.template.n!==Vi||a.hasOwnProperty("value")||a.setValue(void 0)}function rd(a){var b,c,d;return a&&"@"===a[0]?(this.keypath=a,void this.setValue(Qb(a))):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function sd(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)
}),this.resolver&&this.resolver.rebind(a,b)}function td(){this.parentFragment.bubble()}function ud(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function vd(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function wd(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function xd(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function yd(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function zd(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function Ad(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function Bd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Wi){if(this.shuffling=!0,Yl.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath+"."+b,h=i.keypath+"."+a,d.index=a,(j=d.registeredIndexRefs)&&j.forEach(Cd),d.rebind(g,h),void(f[a]=d)))}),e=this.root.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&Yl.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function Cd(a){a.rebind("","")}function Dd(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Ed(a){var b,c,d=this;this.updating||(this.updating=!0,(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=Od(d.keypath,a),c.index=a,b=new Ft(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):Gd(this,a)&&(this.bubble(),this.rendered&&Yl.addView(this)),this.value=a,this.updating=!1)}function Fd(a,b,c){if(b===Wi&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function Gd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case Ui:return Ld(a,b,!1,c);case Vi:return Ld(a,b,!0,c);case Xi:return Kd(a,c);case Yi:return Jd(a,b,c);case Wi:if(k(b))return Fd(a,a.subtype,!0),Id(a,b,c)}return a.ordered=!!f(b),a.ordered?(Fd(a,Wi,!1),Hd(a,b,c)):k(b)||"function"==typeof b?a.template.i?(Fd(a,Wi,!0),Id(a,b,c)):(Fd(a,Xi,!1),Kd(a,c)):(Fd(a,Ui,!1),Ld(a,b,!1,c))}function Hd(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(cc);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=Od(a.keypath,d),c.index=d,f=new Ft(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function Id(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(Pd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=Od(a.keypath,d),c.key=d,c.index=e++,g=new Ft(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function Jd(a,b,c){return b?Kd(a,c):Md(a)}function Kd(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Ft(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function Ld(a,b,c,d){var e,g,h,i,j;if(g=f(b)&&0===b.length,h=!1,!f(b)&&k(b)){h=!0;for(j in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(cc),!0):void 0:(d.index=0,i=new Ft(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):Md(a)}function Md(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(Nd),a.fragmentsToUnrender.forEach(cc),a.length=a.fragmentsToRender.length=0,!0):void 0}function Nd(a){return a.rendered}function Od(a,b){return(a?a+".":"")+b}function Pd(a){a.rebind("","")}function Qd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function Rd(){var a=this;this.fragments.forEach(cc),this.fragmentsToRender.forEach(function(b){return Kb(a.fragments,b)}),this.fragmentsToRender=[],Nn.call(this),this.length=0,this.unbound=!0}function Sd(a){this.fragments.forEach(a?Td:Ud),this.renderedFragments=[],this.rendered=!1}function Td(a){a.unrender(!0)}function Ud(a){a.unrender(!1)}function Vd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function Wd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function Xd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(Hh(d,a))return d;if(e=d.querySelector(a))return e}return null}function Yd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(Hh(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function Zd(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function $d(a){return Ko[a]||(Ko[a]=Gh(a))}function _d(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=Lb(a.node.options).filter(ae),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function ae(a){return a.selected}function be(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Lo(this.value,this.parentFragment.getNode(),this.docFrag),Mo(this.pElement),this.rendered=!0,this.docFrag}function ce(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&Yl.addView(this))}function de(){return void 0!=this.value?M(""+this.value):""}function ee(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function fe(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=Lo(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Mo(this.pElement)}}function ge(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function he(){return null}function ie(){return this.node}function je(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function ke(){var a=this.fragment.getValue();h(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&Yl.addView(this))}function le(a){var b=a.fragment.items;if(1===b.length)return b[0].type===qi?b[0]:void 0}function me(a){return this.type=zi,this.element=a.element,this.root=a.root,kp(this,a.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Ft({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=lp(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,np(this,a),void(this.ready=!0)):void(this.value=Zj.test(this.name)?!0:a.value||"")}function ne(a,b){this.fragment&&this.fragment.rebind(a,b)}function oe(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==Ph.html||(b=qp[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(Zj.test(b)||"value"===b)&&(this.useProperty=!0),"value"===b&&(this.useProperty=!0,a._ractive.value=this.value)),this.rendered=!0,this.update()}function pe(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath||e.ref)+"}}":Zj.test(b)?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+qe(d)+'"':b)}function qe(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function re(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function se(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function te(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=Ib(f,d)}function ue(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function ve(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return Yl.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function we(){var a,b,c=this,d=c.element,f=c.node,g=c.value;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(f.checked=!0);f.checked=!1}else f.checked=g==a}function xe(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function ye(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function ze(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function Ae(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function Be(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function Ce(){this.locked||(this.node[this.propertyName]=this.value)}function De(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):Zj.test(d)?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function Ee(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=Ap:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?vp:up:"textarea"===e.name?b=Dp:null!=e.getAttribute("contenteditable")?b=Cp:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?vl:"radio"===a&&e.binding&&"name"===e.binding.name?xp:Dp):this.twoway&&"name"===d?"radio"===f.type?b=wp:"checkbox"===f.type&&(b=yp):"style"===d&&f.style.setAttribute?b=Bp:"class"!==d||f.namespaceURI&&f.namespaceURI!==Ph.html?this.useProperty&&(b=Ep):b=zp,b||(b=Fp),this.update=b,this.update()}function Fe(a,b){var c=b?"svg":"div";return Ip.innerHTML="<"+c+" "+a+"></"+c+">",Lb(Ip.childNodes[0].attributes)}function Ge(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function He(a){for(;a=a.parent;)if("form"===a.name)return a}function Ie(){this._ractive.binding.handleChange()}function Je(a,b,c){var d=a+b+c;return Up[d]||(Up[d]=[])}function Ke(a){return a.isChecked}function Le(a){return a.element.getAttribute("value")}function Me(){var a;Rp.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function Ne(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&Rp.call(b),a._timeout=void 0},a.element.lazy)}function Oe(a){var b,c,d,e,f=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||f.contenteditable&&Pe(f.contenteditable))&&Pe(f.value)?c=Tp:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=Pe(f.name),e=Pe(f.checked),d&&e&&Fl.error({message:"badRadioInputBinding"}),d?c="radio"===b?Zp:_p:e&&(c="radio"===b?Xp:bq)):"file"===b&&Pe(f.value)?c=hq:Pe(f.value)&&(c="number"===b||"range"===b?jq:iq)):"select"===a.name&&Pe(f.value)?c=a.getAttribute("multiple")?fq:dq:"textarea"===a.name&&Pe(f.value)&&(c=iq),c?new c(a):void 0}function Pe(a){return a&&a.isBindable}function Qe(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function Re(a){Jm(this.root,this.getAction(),{event:a})}function Se(){return this.action.toString().trim()}function Te(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(Fl.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:a.tagName,event:b}}),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=$n(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=pq.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Yn(g,a,function(a){return g.resolve(b,a)}))}),this.fire=Ue):(d=c.n||c,"string"!=typeof d&&(d=new Ft({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Ft({template:c.d,root:this.root,owner:this.element}),this.fire=We):c.a&&(this.params=c.a,this.fire=Ve))}function Ue(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Gm.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Gm.dequeue(b)}function Ve(a){Jm(this.root,this.getAction(),{event:a,args:this.params})}function We(a){var b=this.dynamicParams.getValue(oq);"string"==typeof b&&(b=b.substr(1,b.length-2)),Jm(this.root,this.getAction(),{event:a,args:b})}function Xe(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=Wn(c.element.parentFragment))&&(e=Wn.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath,context:b.root.get(b.keypath)})}function Ye(){var a,b=this.name;if(!this.invalid){if(a=zl.registries.events.find(this.root,b))this.custom=a(this.node,Ze(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(tq[b]||Fl.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:b}}));this.node.addEventListener(b,rq,!1)}this.hasListener=!0}}function Ze(a){return sq[a]||(sq[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath,b.context=c.root.get(c.keypath),c.events[a].fire(b)}),sq[a]}function $e(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function _e(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function af(a,b){this.keypaths[a]=b}function bf(){return this.method?void this.refResolvers.forEach(cc):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function cf(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,rq,!1),this.hasListener=!1}function df(){var a=this;this.dirty||(this.dirty=!0,Yl.scheduleTask(function(){ef(a),a.dirty=!1})),this.parentFragment.bubble()}function ef(a){var b,c,d,e,f;b=a.node,b&&(e=Lb(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?ff(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function ff(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function gf(a,b){a.select=jf(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function hf(a){a.select&&Kb(a.select.options,a)}function jf(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function kf(a){var b,c,d,e,f,g;this.type=vi,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=jp(c.e),"option"===this.name&&gf(this,c),"select"===this.name&&(this.options=[],this.bubble=df),"form"===this.name&&(this.formBindings=[]),hp(this,c.a||{}),this.attributes=Kp(this,c.a),this.conditionalAttributes=Np(this,c.m),c.f&&(this.fragment=new Ft({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=kq(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath]||(this.root._twowayBindings[e.keypath]=[]),f.push(e)),c.v&&(this.eventHandlers=Eq(this,c.v)),c.o&&(this.decorator=new Iq(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function lf(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&Pb(e,"keypath",a,b)}function mf(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function nf(a){a.node.addEventListener("reset",pf,!1)}function of(a){a.node.removeEventListener("reset",pf,!1)}function pf(){var a=this._ractive.proxy;Yl.start(),a.formBindings.forEach(qf),Yl.end()}function qf(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function rf(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Ft({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Ft({template:b.d,root:d,owner:a}),this.params=f.getValue(Lq),f.unbind()),this._fn=zl.registries.transitions.find(d,e),this._fn||Fl.error({debug:d.debug,message:"missingPlugin",args:{plugin:"transition",name:e}}))}function sf(a){return a}function tf(){lr.hidden=document[hr]}function uf(){lr.hidden=!0}function vf(){lr.hidden=!1}function wf(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&xf(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function xf(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function yf(){var a,b,c=this,d=this.root;return a=zf(this),b=this.node=Gh(this.name,a),d.constructor.css&&this.parentFragment.getNode()===d.el&&this.node.setAttribute("data-ractive-css",d.constructor._guid),Sh(this.node,"_ractive",{value:{proxy:this,keypath:Ol(this.parentFragment),events:Rh(null),root:d}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=wr,this.node.text=this.fragment.toString(!1),this.fragment.unrender=vl):"style"===this.name?(this.bubble=vr,this.bubble(),this.fragment.unrender=vl):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=vl:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&Af(this),"img"===this.name?mf(this):"form"===this.name?nf(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&Yl.scheduleTask(function(){c.decorator.torndown||c.decorator.init()},!0),d.transitionsEnabled&&this.intro&&!function(){var a=new xr(c,c.intro,!0);Yl.registerTransition(a),Yl.scheduleTask(function(){return a.start()},!0),c.transition=a}(),this.node.autofocus&&Yl.scheduleTask(function(){return c.node.focus()},!0),Bf(this),this.node}function zf(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?Ph.svg:(d=a.parent)?"foreignObject"===d.name?Ph.html:d.node.namespaceURI:a.root.el.namespaceURI}function Af(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function Bf(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function Cf(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function Df(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function Ef(a){var b=a.toString();return b?" "+b:""}function Ff(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(cc),"option"===this.name&&hf(this),this.attributes.forEach(cc),this.conditionalAttributes.forEach(cc)}function Gf(a){var b,c,d=this;this.transition&&this.transition.complete(),"option"===this.name?this.detach():a&&Yl.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(dc),this.decorator&&Yl.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&!function(){var a=new xr(d,d.outro,!1);Yl.registerTransition(a),Yl.scheduleTask(function(){return a.start()})}(),this.liveQueries&&Hf(this),"form"===this.name&&of(this)}function Hf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function If(a,b){var c=Fr.exec(b)[0];return null===a||c.length<a.length?c:a}function Jf(a,b){var c;if(c=Kf(a,b))return c;if(c=kl.fromId(b,{noThrow:!0})){c=Gr(c);var d=kl.parse(c,kl.getParseOptions(a));return a.partials[b]=d.t}}function Kf(a,b){var c=zl.registries.partials,d=c.findInstance(a,b);if(d){var e,f=d.partials[b];if("function"==typeof f&&(e=f.bind(d),e.isOwner=d.partials.hasOwnProperty(b),f=e(d.data,kl)),!f&&""!==f)return void Fl.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:b}});if(!kl.isParsed(f)){var g=kl.parse(f,kl.getParseOptions(d));g.p&&Fl.warn({debug:a.debug,message:"noNestedPartials",args:{rname:b}});var h=e?d:c.findOwner(d,b);h.partials[b]=f=g.t}return e&&(f._fn=e),f.v?f.t:f}}function Lf(a,b){var c,d=zl.registries.components.findInstance(a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void Fl.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:b}});"string"==typeof c&&(c=Lf(a,c)),c._fn=e,d.components[b]=c}return c}function Mf(){var a=this.instance.fragment.detach();return Mr.fire(this.instance),a}function Nf(a){return this.instance.fragment.find(a)}function Of(a,b){return this.instance.fragment.findAll(a,b)}function Pf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function Qf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function Rf(){return this.parentFragment.findNextNode(this)}function Sf(){return this.rendered?this.instance.fragment.firstNode():null}function Tf(a){this.hook=new Il(a),this.inProcess={},this.queue={}}function Uf(a,b){return a[b._guid]||(a[b._guid]=[])}function Vf(a,b){var c=Uf(a.queue,b);for(a.hook.fire(b);c.length;)Vf(a,c.shift());delete a.queue[b._guid]}function Wf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1){if(e=g.adapt[d],"string"==typeof e){var h=zl.registries.adaptors.find(g,e);if(!h)return Fl.critical({debug:g.debug,message:"missingPlugin",args:{plugin:"adaptor",name:e}});e=g.adapt[d]=h}if(e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,Yf(a)),f.value=b,b}return g.magic?hs.filter(b,a,g)?this.wrapped[a]=hs.wrap(g,b,a):am.filter(b,a,g)&&(this.wrapped[a]=am.wrap(g,b,a)):g.modifyArrays&&gs.filter(b,a,g)&&(this.wrapped[a]=gs.wrap(g,b,a)),b}function Xf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function Yf(a){var b;return is[a]||(b=a?a+".":"",is[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?Xf(c,a):c:void 0}),is[a]}function Zf(a){var b,c,d,e,f=[""];for(b=a.length;b--;)for(c=a[b],d=c.split(".");d.length>1;)d.pop(),e=d.join("."),-1===f.indexOf(e)&&f.push(e);return f}function $f(a){var b,c,d,e;return b=a.split("."),c=_f(b.length),d=function(a,c){return a?"*":b[c]},e=c.map(function(a){return a.map(d).join(".")})}function _f(a){var b,c,d,e,f,g="";if(!ls[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}ls[a]=d}return ls[a]}function ag(a,b,c){var d;cg(a,b),c||(d=ms(b),d.forEach(function(c){bg(a,c,b)}))}function bg(a,b,c){var d,e,f;d=a.depsMap.patternObservers,d&&(e=d[b])&&e.forEach(function(b){var d=ns.exec(b)[0];f=c?c+"."+d:d,cg(a,f),bg(a,b,f)})}function cg(a,b){a.patternObservers.forEach(function(a){a.regex.test(b)&&a.update(b)})}function dg(){function a(c){var d,f;e.noCascade.hasOwnProperty(c)||((f=e.deps.computed[c])&&f.forEach(function(c){c.viewmodel===e?(e.clearCache(c.key),c.invalidate(),b.push(c.key),a(c.key)):c.viewmodel.mark(c.key)}),(d=e.depsMap.computed[c])&&d.forEach(a))}var b,c,d=this,e=this,f={};return b=this.changes,b.length?(b.slice().forEach(a),c=ks(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=e.deps.computed[a])&&(d.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return os(d,a,!0)}),b.forEach(function(a){return os(d,a)})),this.deps.observers&&(c.forEach(function(a){return eg(d,null,a,"observers")}),gg(this,b,"observers")),this.deps["default"]&&!function(){var a=[];c.forEach(function(b){return eg(d,a,b,"default")}),a.length&&fg(d,a,b),gg(d,b,"default")}(),b.forEach(function(a){f[a]=d.get(a)}),this.implicitChanges={},this.noCascade={},f):void 0}function eg(a,b,c,d){var e,f;(e=hg(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function fg(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function gg(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=hg(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function hg(a,b,c){var d=a.deps[c];return d?d[b]:null}function ig(){this.captureGroups.push([])}function jg(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function kg(a){var b="var __ractive=this;return("+a.replace(ss,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function lg(a,b){var c=b.split(".")[0];return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function mg(a,b){return b=ts(b),this.computations[a]=new xs(this.ractive,a,b)}function ng(a,b){var c=this;return void 0===b&&(b=As),function(){var d,e,f,g,h,i=c.ractive,j=c.cache;return b.capture&&(h=c.captureGroups[c.captureGroups.length-1])&&(~h.indexOf(a)||h.push(a)),(d=c.mappings[a.split(".")[0]])?d.get(a,b):"@"===a[0]?Qb(a):(void 0===j[a]?((f=c.computations[a])&&!f.bypass?(e=f.get(),c.adapt(a,e)):(g=c.wrapped[a])?e=g.value:a?e=og(c,a):(c.adapt("",i.data),e=i.data),j[a]=e):e=j[a],!b.noUnwrap&&(g=c.wrapped[a])&&(e=g.get()),e===zs?void 0:e)}()}function og(a,b){var c,d,e,f,g,h,i;return c=b.split("."),d=c.pop(),e=c.join("."),f=a.get(e),(i=a.wrapped[e])&&(f=i.get()),null!==f&&void 0!==f?((g=a.cacheMap[e])?-1===g.indexOf(b)&&g.push(b):a.cacheMap[e]=[b],"object"!=typeof f||d in f?(h=f[d],a.adapt(b,h,!1),a.cache[b]=h,h):a.cache[b]=zs):void 0}function pg(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(a,this.ractive.computed[a]),c.push(b),a in this.mappings&&Fl.critical({message:"Cannot map to a computed property ('"+a+"')"});c.forEach(qg)}function qg(a){a.init()}function rg(a,b){this.keypath=a,this.viewmodel=b}function sg(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.trackData=b.trackData,this.resolved=!1}function tg(a,b){var c=new Es(a,b);return c.initViewmodel(this),c}function ug(a,b){var c;Yl.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[a]=!0),b.noCascade&&(this.noCascade[a]=!0)),(c=this.computations[a])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var d=b?b.dontTeardownWrapper:!1;this.clearCache(a,d)}function vg(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=xg(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;ci("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=Hs(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function wg(a){return JSON.stringify(a)}function xg(a){if(a===!0)return wg;if("string"==typeof a)return Is[a]||(Is[a]=function(b){return b[a]}),Is[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function yg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.register(a,b,c);e=this.deps[c]||(this.deps[c]={}),f=e[a]||(e[a]=[]),f.push(b),a&&zg(this,a,c)}}function zg(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c]||(a.depsMap[c]={}),g=f[e]||(f[e]=[]),void 0===g[b]&&(g[b]=0,g.push(b)),g[b]+=1,b=e}function Ag(){return this.captureGroups.pop()}function Bg(a,b,c){void 0===c&&(c={});var d,e,f,g;if(!c.noMapping&&(d=this.mappings[a.split(".")[0]]))return d.set(a,b);
if(e=this.computations[a]){if(e.setting)return;e.set(b),b=e.get()}h(this.cache[a],b)||(f=this.wrapped[a],f&&f.reset&&(g=f.reset(b)!==!1,g&&(b=f.get())),e||g||Cg(this,a,b),c.silent?this.clearCache(a):this.mark(a))}function Cg(a,b,c){var d,e,f,g,h,i,j;i=function(){g.set?g.set(e,c):(h=g.get(),j())},j=function(){h||(h=$l(e),a.set(f,h,{silent:!0})),h[e]=c},d=b.split("."),e=d.pop(),f=d.join("."),g=a.wrapped[f],g?i():(h=a.get(f),(g=a.wrapped[f])?i():j())}function Dg(a,b,c){var d,e,f=this;if(e=c.length,c.forEach(function(b,c){-1===b&&f.mark(a+"."+c,Os)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a])&&d.filter(Eg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){this.mark(a+".length",Ns);for(var g=e;g<b.length;g+=1)this.mark(a+"."+g);for(var g=b.length;e>g;g+=1)this.mark(a+"."+g,Os)}}function Eg(a){return"function"==typeof a.shuffle}function Fg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function Gg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.unregister(a,b,c);if(e=this.deps[c][a],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a&&Hg(this,a,c)}}function Hg(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c],g=f[e],g[b]-=1,g[b]||(Kb(g,b),g[b]=void 0),b=e}function Ig(a){return"string"==typeof a&&(a=[a]),a}function Jg(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;Kg(b,d),Ws.fire(zl.getConstructTarget(b,c),c),zl.init(b.constructor,b,c),Xs.fire(b),Ys.begin(b),b.viewmodel=new Vs(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Ft({template:b.template,root:b,owner:b})),Ys.end(b),(e=a(b.el))&&b.render(e,b.append)}function Kg(a,b){a._guid="r-"+Zs++,a._subs=Rh(null),a._config={},a._twowayBindings=Rh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function Lg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Ft({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key,this.fragment.getValue())}function Mg(a,b){return b.parameters?bm&&"legacy"!==b.parameters?Og(a,b):Ng(a):a.data}function Ng(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function Og(a,b){var c=Pg(a,b);return new c(a)}function Pg(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=Qg(a,c.defined)),c.Constructor}function Qg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(Yl.start(),c.setValue(a),Yl.end()):this._data[b]=a},enumerable:!0},a},b),Th(e={},d),e.constructor=c,c.prototype=e,c}function Rg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=Yn(d,c.r,e):c.x?this.resolver=new ao(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new fo(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function Sg(a,b,c){var d,e,f;return c?(b.parameters&&(f=Tg(b)),d=new Ug(a,c,f),e=bt(d,b),{data:e,mappings:d.mappings}):{data:{}}}function Tg(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function Ug(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=Rh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(a,b[a])})}function Vg(a){return 1===a.length&&a[0].t===qi}function Wg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&Xg(a.instance,a.root,c,b[c])}function Xg(a,b,c,d){"string"!=typeof d&&Fl.error({debug:b.debug,message:"noComponentEventArguments"}),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Jm(b,d,{event:a,args:c}),!1})}function Yg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Bi,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=dt(this,b.prototype,a.template.a),_s(this,b,e,a.template.f,a.template.p),et(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&ci('The "intro", "outro" and "decorator" directives have no effect on components'),ft(this)}function Zg(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function $g(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function _g(){return this.instance.fragment.toString()}function ah(){var a=this.instance;this.resolvers.forEach(cc),bh(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&Kb(a.el.__ractive_instances__,a),kt.fire(a)}function bh(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function ch(a){this.shouldDestroy=a,this.instance.unrender()}function dh(a){if("string"==typeof a.template)return new Mn(a);switch(a.template.t){case qi:return"yield"===a.template.r?new st(a):new lo(a);case si:return new Fo(a);case ri:return new Xo(a);case vi:var b;return(b=Lr(a.parentFragment.root,a.template.e))?new ot(a,b):new Dr(a);case wi:return new Kr(a);case xi:return new qt(a);case Ei:return new ut(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function eh(a){var b,c=this;this.owner=a.owner,b=this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],"string"==typeof a.template?a.template=[a.template]:a.template||(a.template=[]),this.items=a.template.map(function(b,d){return vt({parentFragment:c,pElement:a.pElement,template:b,index:d})}).filter(function(a){return null!==a}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function fh(a,b){Pb(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function gh(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function hh(a){return this.items?this.items.map(function(b){return b.toString(a)}).join(""):""}function ih(){this.bound&&(this.items.forEach(jh),this.bound=!1)}function jh(a){a.unbind&&a.unbind()}function kh(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function lh(a,b){var c,d,e,f,g,h=this;if("function"!=typeof a||b?a=a||{}:(b=a,a={}),"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((d=this.viewmodel.wrapped[""])&&d.reset?d.reset(a)===!1&&(this.data=a):this.data=a,e=zl.reset(this),f=e.length;f--;)if(Gt.indexOf(e[f])>-1){g=!0;break}if(g){var i;this.viewmodel.mark(""),(i=this.component)&&(i.shouldDestroy=!0),this.unrender(),i&&(i.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Ft({template:this.template,root:this,owner:this})),c=this.render(this.el,this.anchor)}else c=Yl.start(this,!0),this.viewmodel.mark(""),Yl.end();return Ht.fire(this,a),b&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.reset"}}),c.then(b).then(null,function(a){Fl.consoleError({debug:h.debug,err:a})})),c}function mh(a){var b,c;zl.template.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Ft({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function nh(a,b,c){var d,e,f=this;if(e=Yl.start(this,!0),k(a)){d=a,c=b;for(a in d)d.hasOwnProperty(a)&&(b=d[a],a=Vb(a),this.viewmodel.set(a,b))}else a=Vb(a),Mt.test(a)?Sb(this,a).forEach(function(a){f.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return Yl.end(),c&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.set"}}),e.then(c.bind(this)).then(null,function(a){Fl.consoleError({debug:f.debug,err:a})})),e}function oh(a,b){return cm(this,a,void 0===b?-1:-b)}function ph(a){var b,c=this;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&Kb(this.el.__ractive_instances__,this),this.shouldDestroy=!0,b=this.fragment.rendered?this.unrender():Ml.resolve(),St.fire(this),a&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),b.then(a.bind(this)).then(null,function(a){Fl.consoleError({debug:c.debug,err:a})})),this._boundFunctions.forEach(qh),b}function qh(a){delete a.fn[a.prop]}function rh(a,b){var c;return"string"!=typeof a&&Fl.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:a}}),c=this.get(a),this.set(a,!c,b)}function sh(){return this.fragment.toString(!0)}function th(){var a,b,c=this;if(!this.fragment.rendered)return Fl.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"}),Ml.resolve();for(a=Yl.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){vn.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),Kb(this.el.__ractive_instances__,this),Wt.fire(this),Yl.end(),a}function uh(a,b){var c,d=this;return"function"==typeof a?(b=a,a=""):a=a||"",c=Yl.start(this,!0),this.viewmodel.mark(a),Yl.end(),Zt.fire(this,a),b&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),c.then(b.bind(this)).then(null,function(a){Fl.consoleError({debug:d.debug,err:a})})),c}function vh(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||Rb(d,a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=wh(this,e),this.set(c)}function wh(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath]||a.changed()||(d.push(a.keypath),d[a.keypath]=a));b=a.attribute.value,e=a.getValue(),Jb(b,e)||h(b,e)||(c[a.keypath]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a],e=b.attribute.value,f=b.getValue(),Jb(e,f)||(c[a]=f)}),c}function xh(a){if(!(a.prototype instanceof gu))return a;for(var b={};a;)zl.registries.forEach(function(c){yh(c.useDefaults?a.prototype:a,b,c.name)}),Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=li(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}}),a=a._Parent!==gu?a._Parent:!1;return b}function yh(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function zh(a){void 0===a&&(a={});var b,c,d,e=this;return a=bu(a),b=function(a,b){$s(this,a,b)},c=Rh(e.prototype),c.constructor=b,d={_guid:{value:cu++},defaults:{value:c},extend:{value:zh,writable:!0,configurable:!0},_Parent:{value:e}},Th(b,d),zl.extend(e,c,a),Vs.extend(e,c),b.prototype=c,b}var Ah,Bh,Ch,Dh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1},Eh=Dh,Fh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};Ah="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),Bh="object"==typeof document,Ch="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;var Gh,Hh,Ih,Jh,Kh,Lh,Mh,Nh,Oh,Ph={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qh=["o","ms","moz","webkit"];if(Gh=Ah?function(a,b){return b&&b!==Ph.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==Ph.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},Bh){for(Ih=Gh("div"),Jh=["matches","matchesSelector"],Oh=function(a){return function(b,c){return b[a](c)}},Mh=Jh.length;Mh--&&!Hh;)if(Kh=Jh[Mh],Ih[Kh])Hh=Oh(Kh);else for(Nh=Qh.length;Nh--;)if(Lh=Qh[Mh]+Kh.substr(0,1).toUpperCase()+Kh.substring(1),Ih[Lh]){Hh=Oh(Lh);break}Hh||(Hh=function(a,b){var c,d,e;for(d=a.parentNode,d||(Ih.innerHTML="",d=Ih,a=a.cloneNode(),Ih.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else Hh=null;var Rh,Sh,Th,Uh=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),Bh&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Sh=Object.defineProperty}catch(Vh){Sh=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Vh){throw Vh}Bh&&Object.defineProperties(Gh("div"),{test:{value:0}}),Th=Object.defineProperties}catch(Vh){Th=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&Sh(a,c,b[c])}}try{Object.create(null),Rh=Object.create}catch(Vh){Rh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var Wh,Xh=Object.prototype.hasOwnProperty,Yh=Object.prototype.toString,Zh=/^\[object (?:Array|FileList)\]$/,$h={};Wh=Ch?function(a,b){if(!b){if($h[a])return;$h[a]=!0}console.warn("%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);")}:function(){};var _h,ai,bi,ci=Wh,di=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,ei=/\/\*.*?\*\//g,fi=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,gi=/^@media/,hi=/\[data-ractive-css="[a-z0-9-]+"]/g,ii=l,ji={name:"css",extend:o,init:function(){}},ki=ji,li=function(a,b,c){return c||q(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},mi={name:"data",extend:s,init:t,reset:u},ni=mi,oi={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.',methodDeprecated:'The method "{deprecated}" has been deprecated in favor of "{replacement}" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',usePromise:"{method} now returns a Promise, use {method}(...).then(callback) instead.",noTwowayExpressions:"Two-way binding does not work with expressions. Encountered ( {expression} ) on element {element}.",computedCannotMapTo:'Computed property "{key}" cannot be mapped to "{other}" because {reason}.',notUsed:'prevents forgetting trailing "," in cut and paste of previous line :)'},pi=1,qi=2,ri=3,si=4,ti=5,ui=6,vi=7,wi=8,xi=9,yi=10,zi=13,Ai=14,Bi=15,Ci=16,Di=17,Ei=18,Fi=20,Gi=21,Hi=22,Ii=23,Ji=24,Ki=26,Li=27,Mi=30,Ni=31,Oi=32,Pi=33,Qi=34,Ri=35,Si=36,Ti=40,Ui=50,Vi=51,Wi=52,Xi=53,Yi=54,Zi=55,$i="Expected a JavaScript expression",_i="Expected closing paren",aj=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,bj=function(a){var b;return(b=a.matchPattern(aj))?{t:Fi,v:b}:null},cj=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Ji,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Ji,v:"false"}):null};_h=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,ai=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,bi=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var dj,ej,fj,gj,hj,ij=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(_h)||b.matchPattern(ai)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(bi),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},jj=ij('"'),kj=ij("'"),lj=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=kj(a),a.matchString('"')?{t:Gi,v:c}:(a.pos=b,null)):a.matchString("'")?(c=jj(a),a.matchString("'")?{t:Gi,v:c}:(a.pos=b,null)):null},mj=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,nj=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,oj=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,pj=function(a){var b;return(b=lj(a))?oj.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=bj(a))?b.v:(b=a.matchPattern(mj))?b:void 0},qj=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=pj(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:Li,k:c,v:d}):(a.pos=b,null))},rj=B,sj=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=rj(a),a.allowWhitespace(),a.matchString("}")?{t:Ii,m:c}:(a.pos=b,null)):(a.pos=b,null)},tj=C,uj=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=tj(a),a.matchString("]")?{t:Hi,m:c}:(a.pos=b,null)):(a.pos=b,null)},vj=function(a){var b=bj(a)||cj(a)||lj(a)||sj(a)||uj(a);return b};dj=/^\.[a-zA-Z_$0-9]+/,fj=function(a){var b=a.matchPattern(ej);return b?"."+b:null},ej=/^\[(0|[1-9][0-9]*)\]/,gj=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,hj=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var wj,xj,yj=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?nj:mj,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&hj.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&gj.test(d))return{t:Ki,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(dj)||fj(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:Mi,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},zj=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error($i),a.allowWhitespace(),a.matchString(")")||a.error(_i),{t:Qi,x:c}):null},Aj=function(a){return vj(a)||yj(a)||zj(a)},Bj=D,Cj=function(a){var b,c,d,e;if(c=Aj(a),!c)return null;for(;c;)if(b=a.pos,d=Bj(a))c={t:Oi,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=tj(a),a.allowWhitespace(),a.matchString(")")||a.error(_i),c={t:Ti,x:c},e&&(c.o=e)}return c};xj=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error($i),{s:a,o:d,t:Pi}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Cj,a=0,b=d.length;b>a;a+=1)c=xj(d[a],e),e=c;wj=e}();var Dj,Ej,Fj=wj;Ej=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:Si,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Fj,a=0,b=d.length;b>a;a+=1)c=Ej(d[a],e),e=c;Dj=e}();var Gj,Hj,Ij=Dj,Jj=function(a){var b,c,d,e;return(c=Ij(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error($i),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error($i),{t:Ri,o:[c,d,e]}):(a.pos=b,c)):null},Kj=function(a){var b,c=[];return F(a,c),b={r:c,s:G(this,a,c)}},Lj=/^\s+/;Hj=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Hj.prototype=Error.prototype,Gj=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Gj.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return Jj(this)},flattenExpression:Kj,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Hj(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(Lj)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Gj.extend=function(a){var b,c,d=this;b=function(a,b){Gj.call(this,a,b)},b.prototype=Rh(d.prototype);for(c in a)Xh.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Gj.extend,b};var Mj,Nj=Gj,Oj=/^[^\s=]+/,Pj=/^\s+/,Qj=function(a){var b,c,d;return a.matchString("=")?(b=a.pos,a.allowWhitespace(),(c=a.matchPattern(Oj))?a.matchPattern(Pj)?(d=a.matchPattern(Oj))?(a.allowWhitespace(),a.matchString("=")?[c,d]:(a.pos=b,null)):(a.pos=b,null):null:(a.pos=b,null)):null},Rj=[{delimiters:"delimiters",isTriple:!1,isStatic:!1},{delimiters:"tripleDelimiters",isTriple:!0,isStatic:!1},{delimiters:"staticDelimiters",isTriple:!1,isStatic:!0},{delimiters:"staticTripleDelimiters",isTriple:!0,isStatic:!0}],Sj={"#":si,"^":ti,"/":ui,">":wi,"!":xi,"&":ri},Tj=function(a){var b=Sj[a.str.charAt(a.pos)];return b?(a.pos+=1,b):null},Uj={each:Wi,"if":Ui,"if-with":Yi,"with":Xi,unless:Vi,partial:Zi},Vj=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Wj=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Xj=/^[0-9][1-9]*$/,Yj=new RegExp("^("+Object.keys(Uj).join("|")+")\\b");Mj=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/;var Zj,$j,_j,ak,bk,ck,dk,ek,fk=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(c=a.pos,e={},l=a[b.delimiters],b.isStatic&&(e.s=!0),b.isTriple)e.t=ri;else{if("!"===a.remaining()[0]){try{h=a.readExpression(),a.allowWhitespace(),a.remaining().indexOf(l[1])?h=null:e.t=qi}catch(n){}if(!h)return k=a.remaining().indexOf(l[1]),~k?a.pos+=k:a.error("Expected closing delimiter ('"+l[1]+"')"),{t:xi}}if(!h)if(f=Tj(a),e.t=f||qi,f===si)(g=a.matchPattern(Yj))&&(e.n=g),a.allowWhitespace();else if((f===xi||f===ui)&&(j=a.remaining(),k=j.indexOf(l[1]),-1!==k))return e.r=j.substr(0,k).split(" ")[0],a.pos+=k,e}if(!h){a.allowWhitespace(),f===wi?(m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=m):e.t===qi&&a.matchString("yield ")?(a.allowWhitespace(),e.r="yield",m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=!1,h&&h.t===Mi?(e.yn=h.n,h=null):h&&a.error("Only names are supported with yield.")):e.t===si&&"partial"===e.n?(m=a.relaxedNames,a.relaxedNames=!0,h=a.readExpression(),a.relaxedNames=!1):h=a.readExpression();var o;if(e.t===wi&&h&&(o=a.readExpression())&&(e={contextPartialExpression:h},h=o),j=a.remaining(),j.substr(0,l[1].length)!==l[1]&&":"!==j.charAt(0)){if(d=a.pos,a.pos=c,j=a.remaining(),k=j.indexOf(l[1]),-1!==k)return e.r=j.substr(0,k).trim(),Mj.test(e.r)||a.error("Expected a legal Mustache reference"),a.pos+=k,e;a.pos=d}}if(H(a,h,e),e.contextPartialExpression&&(e.contextPartialExpression=[H(a,e.contextPartialExpression,{t:wi})]),i=a.matchPattern(Vj)){var p;e.i=(p=a.matchPattern(Wj))?i+","+p:i}return e},gk={t:yi,exclude:!0},hk=J,ik="<!--",jk="-->",kk=function(a){var b,c,d,e,f;return b=a.pos,a.matchString(ik)?(d=a.remaining(),e=d.indexOf(jk),-1===e&&a.error("Illegal HTML - expected closing comment sequence ('-->')"),c=d.substr(0,e),a.pos+=e+3,f={t:xi,c:c},a.includeLinePositions&&(f.p=a.getLinePos(b)),f):null};Zj=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,$j=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,_j={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},ak=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],bk=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(_j).join("|")+"));?","g"),ck=/</g,dk=/>/g,ek=/&/g;var lk,mk,nk,ok,pk,qk,rk,sk=/[-/\\^$*+?.()|[\]{}]/g,tk=P,uk=Q,vk=/^<!--\s*/,wk=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,xk=/\s*-->/,yk=function(a,b){var c,d,e;for(c=b.length;c--;){if(d=a.indexOf(b[c]),!d)return 0;-1!==d&&(!e||e>d)&&(e=d)}return e||-1},zk=function(a){var b,c,d,e;return c=a.remaining(),e=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=c.indexOf(e):(d=[a.delimiters[0],a.tripleDelimiters[0],a.staticDelimiters[0],a.staticTripleDelimiters[0]],a.inAttribute===!0?d.push('"',"'","=","<",">","`"):d.push(a.inAttribute?a.inAttribute:e),b=yk(c,d)),b?(-1===b&&(b=c.length),a.pos+=b,a.inside?c.substr(0,b):M(c.substr(0,b))):null},Ak=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Bk=function(a){var b;return a.matchString("</")?(b=a.matchPattern(Ak))?{t:Ai,e:b}:(a.pos-=2,void a.error("Illegal closing tag")):null},Ck=/^[^\s"'>\/=]+/,Dk=/^[^\s"'=<>`]+/,Ek=R;mk={"true":!0,"false":!1,undefined:void 0,"null":null},nk=new RegExp("^(?:"+Object.keys(mk).join("|")+")"),ok=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,pk=/\$\{([^\}]+)\}/g,qk=/^\$\{([^\}]+)\}/,rk=/^\s*$/,lk=Nj.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&rk.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(qk),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(nk))?{v:mk[b]}:void 0},function(a){var b;return(b=a.matchPattern(ok))?{v:+b}:void 0},function(a){var b,c=lj(a);return c&&(b=a.values)?{v:c.v.replace(pk,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=X(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};
if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var Fk,Gk=function(a,b){var c=new lk(a,{values:b});return c.result},Hk=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/;Fk=Nj.extend({converters:[Jj]});var Ik,Jk,Kk=function(a){var b,c,d,e,f,g,h,i,j;if("string"==typeof a){if(c=Hk.exec(a))return b={m:c[1]},e="["+a.slice(b.m.length+1,-1)+"]",d=new Fk(e),b.a=Kj(d.result[0]),b;if(-1===a.indexOf(":"))return a.trim();a=[a]}if(b={},h=[],i=[],a){for(;a.length;)if(f=a.shift(),"string"==typeof f){if(g=f.indexOf(":"),-1!==g){g&&h.push(f.substr(0,g)),f.length>g+1&&(i[0]=f.substring(g+1));break}h.push(f)}else h.push(f);i=i.concat(a)}return h.length?i.length||"string"!=typeof h?(b={n:1===h.length&&"string"==typeof h[0]?h[0]:h},1===i.length&&"string"==typeof i[0]?(j=Gk("["+i[0]+"]"),b.a=j?j.value:i[0].trim()):b.d=i):b=h:b="",b},Lk=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Mk=/^[\s\n\/>]/,Nk=/^on/,Ok=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Pk=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Qk={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Rk={exclude:!0};Ik=[uk,hk,kk,Y,zk,Bk],Jk={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Sk,Tk,Uk=Y,Vk=/^[ \t\f\r\n]+/,Wk=/[ \t\f\r\n]+$/,Xk=function(a,b,c){var d;b&&(d=a[0],"string"==typeof d&&(d=d.replace(Vk,""),d?a[0]=d:a.shift())),c&&(d=a[a.length-1],"string"==typeof d&&(d=d.replace(Wk,""),d?a[a.length-1]=d:a.pop()))},Yk=/^\s*\r?\n/,Zk=/\r?\n\s*$/,$k=function(a){var b,c,d,e,f;for(b=1;b<a.length;b+=1)c=a[b],d=a[b-1],e=a[b-2],$(c)&&_(d)&&$(e)&&Zk.test(e)&&Yk.test(c)&&(a[b-2]=e.replace(Zk,"\n"),a[b]=c.replace(Yk,"")),ab(c)&&$(d)&&Zk.test(d)&&$(c.f[0])&&Yk.test(c.f[0])&&(a[b-1]=d.replace(Zk,"\n"),c.f[0]=c.f[0].replace(Yk,"")),$(c)&&ab(d)&&(f=d.f[d.f.length-1],$(f)&&Zk.test(f)&&Yk.test(c)&&(d.f[d.f.length-1]=f.replace(Zk,"\n"),a[b]=c.replace(Yk,"")));return a},_k=bb,al=/[ \t\f\r\n]+/g,bl=/^(?:pre|script|style|textarea)$/i,cl=/^\s+/,dl=/\s+$/;Sk=Nj.extend({init:function(a,b){fb(b,this),this.sectionDepth=0,this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1},b.sanitize===!0&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=b.sanitize&&b.sanitize.elements,this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes,this.includeLinePositions=b.includeLinePositions,this.StandardParser=Sk},postProcess:function(a,b){return this.sectionDepth>0&&this.error("A section was left open"),eb(a,b.stripComments!==!1,b.preserveWhitespace,!b.preserveWhitespace,!b.preserveWhitespace,b.rewriteElse!==!1),a},converters:[uk,hk,kk,Uk,zk]}),Tk=function(a,b){void 0===b&&(b={});var c;fb(b),c={v:2},c.t=new Sk(a,b).result;var d={};return _k(b.ractive?[b.ractive]:[],d,c.t),g(d)||(c.p=d),c};var el,fl,gl=Tk,hl=gb;el=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],fl=hl(el,function(a){return a});var il=fl,jl={parse:ib,fromId:jb,isHashedId:kb,isParsed:lb,getParseOptions:mb,createHelper:hb},kl=jl,ll={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:pb(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=ob(b,e),b._config.template={fn:e,result:d}),d=pb(d,b),b.template=d.t,d.p&&qb(b.partials,d.p)},reset:function(a){var b,c=nb(a);return c?(b=pb(c,a),a.template=b.t,qb(a.partials,b.p,!0),!0):void 0}},ml=ll;rb.prototype={constructor:rb,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=Rh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c},findOwner:function(a,b){return a[this.name].hasOwnProperty(b)?a:this.findConstructor(a.constructor,b)},findConstructor:function(a,b){return a?a[this.name].hasOwnProperty(b)?a:this.findConstructor(a._Parent,b):void 0},find:function(a,b){var c=this;return sb(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a[c.name][b]}})},findInstance:function(a,b){var c=this;return sb(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a}})}};var nl,ol,pl,ql,rl=rb,sl=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],tl=hl(sl,function(a){return new rl(a,"computed"===a)}),ul=tl,vl=function(){},wl=tb,xl=zb;nl={data:ni,template:ml,css:ki},ol=Object.keys(Eh).filter(function(a){return!ul[a]&&!nl[a]&&!il[a]}),pl=[].concat(nl.data,il,ol,ul,nl.template,nl.css);for(var yl in nl)pl[yl]=nl[yl];pl.keys=Object.keys(Eh).concat(ul.map(function(a){return a.name})).concat(["css"]),ql=pl.keys.reduce(function(a,b){return a[b]=!0,a},{}),pl.parseOptions=il,pl.registries=ul,pl.extend=function(a,b,c){Cb("extend",a,b,c)},pl.init=function(a,b,c){Cb("init",a,b,c)},pl.reset=function(a){return pl.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},pl.getConstructTarget=function(a,b){return b.onconstruct?{onconstruct:wl(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a};var zl=pl,Al=function(a,b,c,d){if(a===b)return Eb(b);if(d){var e=zl.registries.interpolators.find(c,d);if(e)return e(a,b)||Eb(b);ci('Missing "'+d+'" interpolator. You may need to download a plugin from [TODO]')}return Dl.number(a,b)||Dl.array(a,b)||Dl.object(a,b)||Eb(b)},Bl=Al,Cl={number:function(a,b){var c;return j(a)&&j(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Bl(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!k(a)||!k(b))return null;c=[],f={},e={};for(g in a)Xh.call(a,g)&&(Xh.call(b,g)?(c.push(g),e[g]=Bl(a[g],b[g])):f[g]=a[g]);for(g in b)Xh.call(b,g)&&!Xh.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},Dl=Cl,El={warn:function(a,b){(a.debug||b)&&this.warnAlways(a)},warnAlways:function(a){this.logger(Fb(a),a.allowDuplicates)},error:function(a){this.errorOnly(a),a.debug||this.warn(a,!0)},errorOnly:function(a){a.debug&&this.critical(a)},critical:function(a){var b=a.err||new Error(Fb(a));this.thrower(b)},logger:ci,thrower:function(a){throw a},consoleError:function(a){Ch?console.error(a.err):this.thrower(a.err)}},Fl=El,Gl={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};Hb.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&Fl.warnAlways({debug:a.debug,message:this.deprecate.message||"methodDeprecated",args:this.deprecate}),b?a.fire(this.event,b):a.fire(this.event)};var Hl,Il=Hb,Jl={},Kl={},Ll={};"function"==typeof Promise?Hl=Promise:(Hl=function(a){var b,c,d,e,f,g,h=[],i=[],j=Jl;d=function(a){return function(d){j===Jl&&(b=d,j=a,c=Nb(j===Kl?h:i,b),Mb(c))}},e=d(Kl),f=d(Ll);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Hl(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),Ob(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==Jl&&Mb(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Hl.all=function(a){return new Hl(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Hl.resolve=function(a){return new Hl(function(b){b(a)})},Hl.reject=function(a){return new Hl(function(b,c){c(a)})});var Ml=Hl,Nl=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ol=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return""},Pl=Xb,Ql=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};Ql.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,gc(this)},decrementTotal:function(){this.totalChildren-=1,gc(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;Kb(b,a),gc(this)},init:function(){this.ready=!0,gc(this)},detachNodes:function(){this.decoratorQueue.forEach(bc),this.detachQueue.forEach(ec),this.children.forEach(fc)}};var Rl,Sl,Tl=Ql,Ul=[],Vl=new Il("change");Sl={start:function(a,b){var c,d;return b&&(c=new Ml(function(a){return d=a})),Rl={previousBatch:Rl,transitionManager:new Tl(d,Rl&&Rl.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&Rl.viewmodels.push(a.viewmodel),c},end:function(){hc(),Rl.transitionManager.init(),!Rl.previousBatch&&Rl.instance&&(Rl.instance.viewmodel.changes=[]),Rl=Rl.previousBatch},addViewmodel:function(a){return Rl?-1===Rl.viewmodels.indexOf(a)?(Rl.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=Rl.transitionManager,Rl.transitionManager.add(a)},registerDecorator:function(a){Rl.transitionManager.addDecorator(a)},addView:function(a){Rl.views.push(a)},addUnresolved:function(a){Ul.push(a)},removeUnresolved:function(a){Kb(Ul,a)},detachWhenReady:function(a){Rl.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(Rl){for(c=Rl;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var Wl,Xl,Yl=Sl,Zl=/^\s*[0-9]+\s*$/,$l=function(a){return Zl.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Wl={filter:function(a,b,c){var d,f,g,h,i;return b?(d=b.split("."),f=d.pop(),g=d.join("."),(h=c.viewmodel.wrapped[g])&&!h.magic?!1:(i=c.get(g),e(i)&&/^[0-9]+$/.test(f)?!1:i&&("object"==typeof i||"function"==typeof i))):!1},wrap:function(a,b,c){return new Xl(a,b,c)}},Xl=function(a,b,c){var d,e,f,g;return this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,d=c.split("."),this.prop=d.pop(),e=d.join("."),this.obj=e?a.get(e):a.data,f=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),f&&f.set&&(g=f.set._ractiveWrappers)?void(-1===g.indexOf(this)&&g.push(this)):void kc(this,b,f)},Xl.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,Yl.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=$l(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(Vh){Wl=!1}var _l,am=Wl,bm=!!am,cm=lc,dm=mc;"undefined"==typeof window?_l=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(Qh,0,window),_l=window.requestAnimationFrame);var em,fm=_l;em="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var gm=em,hm=[],im={tick:function(){var a,b,c;for(c=gm(),Yl.start(),a=0;a<hm.length;a+=1)b=hm[a],b.tick(c)||hm.splice(a--,1);Yl.end(),hm.length?fm(im.tick):im.running=!1},add:function(a){hm.push(a),im.running||(im.running=!0,fm(im.tick))},abort:function(a,b){for(var c,d=hm.length;d--;)c=hm[d],c.root===b&&c.keypath===a&&c.stop()}},jm=im,km=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Bl(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};km.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(Yl.start(this.root),this.root.viewmodel.set(f,this.to),Yl.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&ci("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),Yl.start(this.root),this.root.viewmodel.set(f,c),Yl.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&ci("Animation was not found"),this.root._animations.splice(a,1)}};var lm=km,mm=function(){},nm={stop:mm},om=nc,pm=new Il("detach"),qm=pc,rm=qc,sm=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?Hh(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},tm=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},um=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=sc(a.component||a._ractive.proxy),d=sc(b.component||b._ractive.proxy),e=c[c.length-1],f=d[d.length-1];e&&e===f;)c.pop(),d.pop(),g=e,e=c[c.length-1],f=d[d.length-1];if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},vm=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):um(a,b)},wm=function(){this.sort(this._isComponentQuery?um:vm),this._dirty=!1},xm=function(){var a=this;this._dirty||(this._dirty=!0,Yl.scheduleTask(function(){a._sort()}))},ym=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},zm=tc,Am=uc,Bm=vc,Cm=wc,Dm=xc,Em=yc,Fm={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Gm=Fm,Hm={},Im=zc,Jm=Bc,Km=Ec,Lm={capture:!0,noUnwrap:!0},Mm=Fc,Nm=new Il("insert"),Om=Gc,Pm=Ic,Qm=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Qm.prototype={init:function(a){this.value=this.root.get(this.keypath),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;h(a,this.value)||(this.value=a,this.defer&&this.ready?Yl.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1)}};var Rm,Sm=Qm,Tm=Jc,Um=/\*/,Vm=Array.prototype.slice;Rm=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Rm.prototype={init:function(a){var b,c;if(b=Tm(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(c);else this.values=b},update:function(a){var b,c=this;if(Um.test(a)){b=Tm(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(a)}else if(!this.root.viewmodel.implicitChanges[a])return this.defer&&this.ready?void Yl.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d;return b=this.root.viewmodel.get(a),this.updating?void(this.values[a]=b):(this.updating=!0,h(b,this.values[a])&&this.ready||(c=Vm.call(this.regex.exec(a),1),d=[b,this.values[a],a].concat(c),this.values[a]=b,this.callback.apply(this.context,d)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a]||(this.proxies[a]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a]}};var Wm,Xm,Ym,Zm,$m,_m,an=Rm,bn=/\*/,cn={},dn=Kc,en=Lc,fn=Mc,gn=function(a){return a.trim()},hn=function(a){return""!==a},jn=Nc,kn=Oc,ln=Pc,mn=Qc,nn=Array.prototype.slice,on=Array.prototype,pn=function(a){return function(b){var c,d,f,g,h=nn.call(arguments,1),i=[];if(c=this.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=mn(c,a,h),g=on[a].apply(c,h),f=Yl.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),Yl.end(),f}},qn=pn("pop"),rn=pn("push"),sn="/* Ractive.js component styles */\n",tn={},un=[];Bh?(Ym=document.createElement("style"),Ym.type="text/css",Zm=document.getElementsByTagName("head")[0],_m=!1,$m=Ym.styleSheet,Xm=function(){var a;un.length?(a=sn+un.join(" "),$m?$m.cssText=a:Ym.innerHTML=a,_m||(Zm.appendChild(Ym),_m=!0)):_m&&(Zm.removeChild(Ym),_m=!1)},Wm={add:function(a){a.css&&(tn[a._guid]||(tn[a._guid]=0,un.push(a.css),Xm()),tn[a._guid]+=1)},remove:function(a){a.css&&(tn[a._guid]-=1,tn[a._guid]||(Kb(un,a.css),Yl.scheduleTask(Xm)))}}):Wm=null;var vn=Wm,wn=new Il("render"),xn=new Il("complete"),yn=Sc,zn=Uc,An=Vc,Bn=Wc,Cn=Xc,Dn=Yc,En=Zc,Fn=$c,Gn=_c,Hn=ad,In={},Jn=bd,Kn=function(){return b(this.node)},Ln=function(a){this.type=pi,this.text=a.template};Ln.prototype={detach:Kn,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?O(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var Mn=Ln,Nn=dd,On=ed,Pn=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=Pl(a.root,b,a.parentFragment),void 0!==d?this.resolve(d):Yl.addUnresolved(this)};Pn.prototype={resolve:function(a){this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(this.ref)},rebind:function(a,b){var c;void 0!==this.keypath&&(c=Ub(this.keypath,a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||Yl.removeUnresolved(this)}};var Qn=Pn,Rn=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},Sn={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Rn.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=Sn[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback("@"+d.prefix+fd(this.cached,d));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===Wi&&void 0!==(a=fd(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback("@"+d.prefix+a);c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=fd(c,d)))return this.callback("@"+d.prefix+a);c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Tn=Rn,Un=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};Un.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback("@"+a)},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Vn=Un,Wn=gd;gd.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var Xn,Yn=hd,Zn={},$n=id,_n=Function.prototype.bind;Xn=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Yn(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},Xn.prototype={bubble:function(){this.ready&&(this.uniqueString=kd(this.str,this.keypaths),this.keypath=ld(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e=this;a=this.root.viewmodel.computations[this.keypath],a?this.root.viewmodel.mark(this.keypath):(d=$n(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:"@"===a[0]?(b=Qb(a),function(){return b}):function(){var b=e.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=nd(b,e.root)),b}}),c={deps:this.keypaths.filter(md),get:function(){var a=b.map(jd);return d.apply(null,a)}},a=this.root.viewmodel.compute(this.keypath,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var ao=Xn,bo=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===Mi?this.refResolver=Yn(this,a.n,function(a){d.resolve(a)}):new ao(b,c,a,function(a){d.resolve(a)})};bo.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var co=bo,eo=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=Pl(d,e,g))?this.base=f:this.baseResolver=new Qn(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new co(a,h,g)}),this.ready=!0,this.bubble()};eo.prototype={getKeypath:function(){var a=this.members.map(od);return!a.every(pd)||this.baseResolver?null:this.base+"."+a.join(".")},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(cc)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(function(a){return a.forceResolution()}),this.bubble()}};var fo=eo,go=qd,ho=rd,io=sd,jo={getValue:On,init:go,resolve:ho,rebind:io},ko=function(a){this.type=qi,jo.init(this,a)};ko.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:jo.resolve,rebind:jo.rebind,detach:Kn,unbind:Nn,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:jo.getValue,setValue:function(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),h(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&Yl.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?O(b):b}};var lo=ko,mo=td,no=ud,oo=vd,po=wd,qo=xd,ro=yd,so=zd,to=Ad,uo=Bd,vo=function(a,b){jo.rebind.call(this,a,b)},wo=Dd,xo=Ed,yo=Qd,zo=Rd,Ao=Sd,Bo=Vd,Co=function(a){this.type=si,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===Vi,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,jo.init(this,a)};Co.prototype={bubble:mo,detach:no,find:oo,findAll:po,findAllComponents:qo,findComponent:ro,findNextNode:so,firstNode:to,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:jo.getValue,shuffle:uo,rebind:vo,render:wo,resolve:jo.resolve,setValue:xo,toString:yo,unbind:zo,unrender:Ao,update:Bo};var Do,Eo,Fo=Co,Go=Wd,Ho=Xd,Io=Yd,Jo=Zd,Ko={};try{Gh("table").innerHTML="foo"}catch(Vh){Do=!0,Eo={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Lo=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(Do&&(e=Eo[b.tagName])?(d=$d("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===Ph.svg?(d=$d("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=$d(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},Mo=_d,No=be,Oo=ce,Po=de,Qo=ee,Ro=fe,So=function(a){this.type=ri,jo.init(this,a)};So.prototype={detach:Go,find:Ho,findAll:Io,firstNode:Jo,getValue:jo.getValue,rebind:jo.rebind,render:No,resolve:jo.resolve,setValue:Oo,toString:Po,unbind:Nn,unrender:Qo,update:Ro};var To,Uo,Vo,Wo,Xo=So,Yo=function(){this.parentFragment.bubble()},Zo=ge,$o=function(a){return this.node?Hh(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},_o=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},ap=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},bp=function(a){return this.fragment?this.fragment.findComponent(a):void 0},cp=he,dp=ie,ep=je,fp=/^true|on|yes|1$/i,gp=/^[0-9]+$/,hp=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||fp.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&gp.test(c)?parseInt(c):0===c||fp.test(c),delete b.lazy)},ip=ke;To="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Uo="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Vo=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},Wo=Vo(To.concat(Uo));var jp=function(a){var b=a.toLowerCase();return Wo[b]||b},kp=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==Ph.html?jp(b):b;else if(b=b.substring(c+1),a.name=jp(b),a.namespace=Ph[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},lp=le,mp={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},np=function(a,b){var c;!a.pNode||a.namespace||b.pNode.namespaceURI&&b.pNode.namespaceURI!==Ph.html||(c=mp[a.name]||a.name,void 0!==b.pNode[c]&&(a.propertyName=c),(Zj.test(c)||"value"===c)&&(a.useProperty=!0))},op=me,pp=ne,qp={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},rp=oe,sp=pe,tp=re,up=se,vp=te,wp=ue,xp=ve,yp=we,zp=xe,Ap=ye,Bp=ze,Cp=Ae,Dp=Be,Ep=Ce,Fp=De,Gp=Ee,Hp=function(a){this.init(a)};Hp.prototype={bubble:ip,init:op,rebind:pp,render:rp,toString:sp,unbind:tp,update:Gp};var Ip,Jp=Hp,Kp=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new Jp({element:a,name:c,value:b[c],root:a.root}),e.push(e[c]=d));return e};"undefined"!=typeof document&&(Ip=Gh("div"));var Lp=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Ft({root:a.root,owner:this,template:[b]})};Lp.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===Ph.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=Fe(a,this.isSvg),this.attributes.filter(function(a){return Ge(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var Mp=Lp,Np=function(a,b){return b?b.map(function(b){return new Mp(a,b)}):[]},Op=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c[c.length-1])return Fl.error({debug:this.root.debug,message:"noTwowayExpressions",args:{expression:c.slice(2,-1).replace("-","."),element:a.tagName}}),!1}else b.resolver.forceResolution(),c=b.keypath;
this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=He(a))&&(this.resetValue=d,e.formBindings.push(this))};Op.prototype={handleChange:function(){var a=this;Yl.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),Yl.scheduleTask(function(){return a.attribute.locked=!1}),Yl.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(Kb(this.root._twowayBindings[b],this),this.keypath=c,a=this.root._twowayBindings[c]||(this.root._twowayBindings[c]=[]),a.push(this))},unbind:function(){}},Op.extend=function(a){var b,d=this;return b=function(a){Op.call(this,a),this.init&&this.init()},b.prototype=Rh(d.prototype),c(b.prototype,a),b.extend=Op.extend,b};var Pp,Qp=Op,Rp=Ie,Sp=Qp.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",Rp,!1),this.root.lazy||(a.addEventListener("input",Rp,!1),a.attachEvent&&a.addEventListener("keyup",Rp,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",Rp,!1),a.removeEventListener("input",Rp,!1),a.removeEventListener("keyup",Rp,!1)},getValue:function(){return this.element.node.innerHTML}}),Tp=Sp,Up={},Vp=Je,Wp=Qp.extend({name:"checked",init:function(){this.siblings=Vp(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",Rp,!1),a.attachEvent&&a.addEventListener("click",Rp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Rp,!1),a.removeEventListener("click",Rp,!1)},handleChange:function(){Yl.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),Yl.end()},getValue:function(){return this.element.node.checked},unbind:function(){Kb(this.siblings,this)}}),Xp=Wp,Yp=Qp.extend({name:"name",init:function(){this.siblings=Vp(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",Rp,!1),a.attachEvent&&a.addEventListener("click",Rp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Rp,!1),a.removeEventListener("click",Rp,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&Qp.prototype.handleChange.call(this)},rebound:function(a,b){var c;Qp.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath+"}}")},unbind:function(){Kb(this.siblings,this)}}),Zp=Yp,$p=Qp.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.attribute.twoway=!0,this.siblings=Vp(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){Kb(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?Ib(a,b):a==b,c.name="{{"+this.keypath+"}}",c.checked=this.isChecked,c.addEventListener("change",Rp,!1),c.attachEvent&&c.addEventListener("click",Rp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Rp,!1),a.removeEventListener("click",Rp,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,Qp.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(Ke).map(Le)}}),_p=$p,aq=Qp.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",Rp,!1),a.attachEvent&&a.addEventListener("click",Rp,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Rp,!1),a.removeEventListener("click",Rp,!1)},getValue:function(){return this.element.node.checked}}),bq=aq,cq=Qp.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",Rp,!1)},unrender:function(){this.element.node.removeEventListener("change",Rp,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,Yl.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),dq=cq,eq=dq.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",Rp,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Rp,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&Jb(c,b)||dq.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,Yl.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),fq=eq,gq=Qp.extend({render:function(){this.element.node.addEventListener("change",Rp,!1)},unrender:function(){this.element.node.removeEventListener("change",Rp,!1)},getValue:function(){return this.element.node.files}}),hq=gq;Pp=Qp.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:i(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",Rp,!1),a||(b.addEventListener("input",c?Ne:Rp,!1),b.attachEvent&&b.addEventListener("keyup",c?Ne:Rp,!1)),b.addEventListener("blur",Me,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",Rp,!1),a.removeEventListener("input",Rp,!1),a.removeEventListener("keyup",Rp,!1),a.removeEventListener("blur",Me,!1)}});var iq=Pp,jq=iq.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),kq=Oe,lq=Qe,mq=Re,nq=Se,oq={args:!0},pq=/^event(?:\.(.+))?/,qq=Te,rq=Xe,sq={},tq={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},uq=Ye,vq=$e,wq=_e,xq=af,yq=bf,zq=cf,Aq=function(a,b,c){this.init(a,b,c)};Aq.prototype={bubble:lq,fire:mq,getAction:nq,init:qq,listen:uq,rebind:vq,render:wq,resolve:xq,unbind:yq,unrender:zq};var Bq,Cq,Dq=Aq,Eq=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new Dq(a,e[c],b[d]),g.push(f);return g};Bq={args:!0},Cq=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Ft({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Ft({template:b.d,root:c,owner:a}),this.params=this.fragment.getValue(Bq),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getValue(Bq),f.ready&&f.update()}),this.fn=zl.registries.decorators.find(c,d),this.fn||Fl.error({debug:c.debug,message:"missingPlugin",args:{plugin:"decorator",name:d}}))},Cq.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var Fq,Gq,Hq,Iq=Cq,Jq=kf,Kq=lf,Lq={},Mq=rf,Nq=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};Bh?(Gq={},Hq=Gh("div").style,Fq=function(a){var b,c,d;if(a=Nq(a),!Gq[a])if(void 0!==Hq[a])Gq[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=Qh.length;b--;)if(c=Qh[b],void 0!==Hq[c+d]){Gq[a]=c+d;break}return Gq[a]}):Fq=null;var Oq,Pq,Qq=Fq;Bh?(Pq=window.getComputedStyle||legacy__default.getComputedStyle,Oq=function(a){var b,c,d,f,g;if(b=Pq(this.node),"string"==typeof a)return g=b[Qq(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[Qq(f)],"0px"===g&&(g=0),c[f]=g;return c}):Oq=null;var Rq=Oq,Sq=function(a,b){var c;if("string"==typeof a)this.node.style[Qq(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[Qq(c)]=a[c]);return this},Tq=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(ci('Missing easing function ("'+a.easing+'"). You may need to download a plugin from [TODO]'),b=sf)):b="function"==typeof a.easing?a.easing:sf,this.easing=b,this.start=gm(),this.end=this.start+this.duration,this.running=!0,jm.add(this)};Tq.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Uq,Vq,Wq,Xq,Yq,Zq,$q,_q,ar=Tq,br=new RegExp("^-(?:"+Qh.join("|")+")-"),cr=function(a){return a.replace(br,"")},dr=new RegExp("^(?:"+Qh.join("|")+")([A-Z])"),er=function(a){var b;return a?(dr.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},fr={},gr={};Bh?(Vq=Gh("div").style,function(){void 0!==Vq.transition?(Wq="transition",Xq="transitionend",Yq=!0):void 0!==Vq.webkitTransition?(Wq="webkitTransition",Xq="webkitTransitionEnd",Yq=!0):Yq=!1}(),Wq&&(Zq=Wq+"Duration",$q=Wq+"Property",_q=Wq+"TimingFunction"),Uq=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[$q]=d.map(Qq).map(er).join(","),a.node.style[_q]=er(c.easing||"linear"),a.node.style[Zq]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(Nq(cr(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Xq,j,!1),h=!0,i())},a.node.addEventListener(Xq,j,!1),setTimeout(function(){for(var e,k,l,m,n,o=d.length,p=[];o--;)m=d[o],e=f+m,Yq&&!gr[e]&&(a.node.style[Qq(m)]=b[m],fr[e]||(k=a.getStyle(m),fr[e]=a.getStyle(m)!=b[m],gr[e]=!fr[e],gr[e]&&(a.node.style[Qq(m)]=k))),(!Yq||gr[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?ci("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],p.push({name:Qq(m),interpolator:Bl(parseFloat(k),parseFloat(b[m])),suffix:n}));p.length?new ar({root:a.root,duration:c.duration,easing:Nq(c.easing||""),step:function(b){var c,d;for(d=p.length;d--;)c=p[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Xq,j,!1),h=!0,i())},0)},c.delay||0)}):Uq=null;var hr,ir,jr,kr,lr,mr=Uq;if("undefined"!=typeof document){if(hr="hidden",lr={},hr in document)jr="";else for(kr=Qh.length;kr--;)ir=Qh[kr],hr=ir+"Hidden",hr in document&&(jr=ir);void 0!==jr?(document.addEventListener(jr+"visibilitychange",tf),tf()):("onfocusout"in document?(document.addEventListener("focusout",uf),document.addEventListener("focusin",vf)):(window.addEventListener("pagehide",uf),window.addEventListener("blur",uf),window.addEventListener("pageshow",vf),window.addEventListener("focus",vf)),lr.hidden=!1)}var nr,or,pr,qr=lr;Bh?(or=window.getComputedStyle||legacy__default.getComputedStyle,nr=function(a,b,c,d){var e,f=this;if(qr.hidden)return this.setStyle(a,b),pr||(pr=Ml.resolve());"string"==typeof a?(e={},e[a]=b):(e=a,d=c,c=b),c||(ci('The "'+this.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),c=this,d=this.complete);var g=new Ml(function(a){var b,d,g,h,i,j,k;if(!c.duration)return f.setStyle(e),void a();for(b=Object.keys(e),d=[],g=or(f.node),i={},j=b.length;j--;)k=b[j],h=g[Qq(k)],"0px"===h&&(h=0),h!=e[k]&&(d.push(k),f.node.style[Qq(k)]=h);return d.length?void mr(f,e,c,d,a):void a()});return d&&(Fl.warn({debug:!0,message:"usePromise",args:{method:"t.animateStyle"}}),g.then(d).then(null,function(a){Fl.consoleError({debug:!0,err:a})})),g}):nr=null;var rr=nr,sr=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},tr=wf,ur=function(a,b,c){this.init(a,b,c)};ur.prototype={init:Mq,start:tr,getStyle:Rq,setStyle:Sq,animateStyle:rr,processParams:sr};var vr,wr,xr=ur;vr=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},wr=function(){this.node.type&&"text/javascript"!==this.node.type||ci("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var yr=yf,zr=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(Ef).join("")+this.conditionalAttributes.map(Ef).join(""),"option"===this.name&&Cf(this)&&(a+=" selected"),"input"===this.name&&Df(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=O(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),$j.test(this.template.e)||(a+="</"+this.template.e+">"),a)},Ar=Ff,Br=Gf,Cr=function(a){this.init(a)};Cr.prototype={bubble:Yo,detach:Zo,find:$o,findAll:_o,findAllComponents:ap,findComponent:bp,findNextNode:cp,firstNode:dp,getAttribute:ep,init:Jq,rebind:Kq,render:yr,toString:zr,unbind:Ar,unrender:Br};var Dr=Cr,Er=/^\s*$/,Fr=/^\s*/,Gr=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&Er.test(c)&&b.shift(),d=b[b.length-1],void 0!==d&&Er.test(d)&&b.pop(),e=b.reduce(If,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},Hr=Jf,Ir=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},Jr=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=wi,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,jo.init(this,a),!this.keypath&&(c=Hr(this.root,this.name))&&(Nn.call(this),this.isNamed=!0,this.setTemplate(c))};Jr.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||io.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:jo.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=Hr(this.root,""+a)),!b&&this.name&&(b=Hr(this.root,this.name))&&(Nn.call(this),this.isNamed=!0),b||Fl.error({debug:this.root.debug,message:"noTemplateForPartial",args:{name:this.name}}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&Yl.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Ft({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===pi?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?Ir(b,e[0]):b):b},unbind:function(){this.isNamed||Nn.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var Kr=Jr,Lr=Lf,Mr=new Il("detach"),Nr=Mf,Or=Nf,Pr=Of,Qr=Pf,Rr=Qf,Sr=Rf,Tr=Sf;Tf.prototype={constructor:Tf,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?Uf(this.queue,b).push(a):Vf(this,a),delete this.inProcess[a._guid]}};var Ur,Vr,Wr,Xr=Tf,Yr=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},Zr=Array.prototype.slice,$r=[],_r=["pop","push","reverse","shift","sort","splice","unshift"];_r.forEach(function(a){var b=function(){var b,c,d,e,f=Zr.call(arguments);for(b=mn(this,a,f),c=Array.prototype[a].apply(this,arguments),Yl.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],Yl.addViewmodel(d.root.viewmodel),Yr(d,this,a,b);return Yl.end(),this._ractive.setting=!1,c};Sh($r,a,{value:b})}),Ur={},Ur.__proto__?(Vr=function(a){a.__proto__=$r},Wr=function(a){a.__proto__=Array.prototype}):(Vr=function(a){var b,c;for(b=_r.length;b--;)c=_r[b],Sh(a,c,{value:$r[c],configurable:!0})},Wr=function(a){var b;for(b=_r.length;b--;)delete a[_r[b]]}),Vr.unpatch=Wr;var as,bs,cs,ds=Vr;as={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new bs(a,b,c)}},bs=function(a,b,c){this.root=a,this.value=b,this.keypath=c,b._ractive||(Sh(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),ds(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},bs.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(cs);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(cs);d.splice(e,1)}}else delete a._ractive,ds.unpatch(this.value)}},cs="Something went wrong in a rather interesting way";var es,fs,gs=as;am&&(es={filter:function(a,b,c){return am.filter(a,b,c)&&gs.filter(a)},wrap:function(a,b,c){return new fs(a,b,c)}},fs=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=am.wrap(a,b,c),this.arrayWrapper=gs.wrap(a,b,c)},fs.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var hs=es,is={},js=Wf,ks=Zf,ls={},ms=$f,ns=/[^\.]+$/,os=ag,ps=dg,qs=ig,rs=jg,ss=/\$\{([^\}]+)\}/g,ts=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:kg(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:kg(a.get),set:a.set}),a)},us=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};us.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a]=null,this.viewmodel.register(a,this.computation,"computed")}};var vs=us,ws=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};ws.prototype={constructor:ws,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,g;if(!e)for(g=b.length;g--;)if(c=b[g],f=a.viewmodel.get(c),!h(f,d.depValues[c]))return d.depValues[c]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){Fl.warn({debug:a.debug,message:"failedComputation",args:{key:this.key,err:f.message||f}}),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,lg(this.viewmodel,d)&&!this.unresolvedDeps[d]?(f=new vs(this,d),a.splice(b,1),this.unresolvedDeps[d]=f,Yl.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var xs=ws,ys=mg,zs={FAILED_LOOKUP:!0},As={},Bs=ng,Cs=pg,Ds=rg;rg.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})};var Es=sg;sg.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.deps=[],this.local.mappings[this.localKey]=this,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Ds(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var Fs=tg,Gs=ug,Hs=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},Is={},Js=vg,Ks=yg,Ls=Ag,Ms=Bg,Ns={implicit:!0},Os={noCascade:!0},Ps=Dg,Qs=Fg,Rs=Gg,Ss={lookup:function(a,b){var c,d=a.adapt;if(!d||!d.length)return d;if(b&&Object.keys(b).length&&(c=d.length))for(;c--;){var e=d[c];"string"==typeof e&&(d[c]=b[e]||e)}return d},combine:function(a,b){return a=Ig(a),b=Ig(b),a&&a.length?b&&b.length?(a.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}),b):a.slice():b}},Ts=Ss,Us=function(a,b){var c=this;return void 0===b&&(b=Rh(null)),function(){var d,e;c.ractive=a,Us.extend(a.constructor,a),c.mappings=b;for(d in b)b[d].initViewmodel(c);if(a.data&&a.parameters!==!0)for(d in a.data)(e=c.mappings[d])&&void 0===e.getValue()&&e.setValue(a.data[d]);c.cache={},c.cacheMap=Rh(null),c.deps={computed:Rh(null),"default":Rh(null)},c.depsMap={computed:Rh(null),"default":Rh(null)},c.patternObservers=[],c.specials=Rh(null),c.wrapped=Rh(null),c.computations=Rh(null),c.captureGroups=[],c.unresolvedImplicitDependencies=[],c.changes=[],c.implicitChanges={},c.noCascade={}}()};Us.extend=function(a,b){if(b.magic&&!bm)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.adapt=Ts.combine(a.prototype.adapt,b.adapt)||[],b.adapt=Ts.lookup(b,b.adaptors)},Us.prototype={adapt:js,applyChanges:ps,capture:qs,clearCache:rs,compute:ys,get:Bs,init:Cs,map:Fs,mark:Gs,merge:Js,register:Ks,release:Ls,set:Ms,smartUpdate:Ps,teardown:Qs,unregister:Rs};var Vs=Us,Ws=new Il("construct"),Xs=new Il("config"),Ys=new Xr("init"),Zs=0,$s=Jg,_s=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&Fl.warn({debug:i.debug,message:"defaultElSpecified",args:{name:a.name}}),j=h;j;){if(j.owner.type===Ci){k=j.owner.container;break}j=j.parent}return g=Rh(b.prototype),$s(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g},at=Lg;Lg.prototype={bubble:function(){this.dirty||(this.dirty=!0,Yl.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var bt=Mg,ct=Rg;Rg.prototype={resolve:function(a){this.resolved=!0,this.specialRef="@"===a[0],this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(this.specialRef)this.parameters.addData(this.key,Qb(a));else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;this.specialRef?(this.parameters.addData(this.key,Qb(a)),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key]?b.reversedMappings[this.key].rebind(a):b.mappings[this.key].resolve(a)}};var dt=Sg;Ug.prototype={add:function(a,b){if("string"==typeof b){var c=Gk(b);this.addData(a,c?c.value:b)}else if(0===b)this.addData(a);else{var d;d=Vg(b)?new ct(this,a,b[0]).resolver:new at(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c=this.parentViewmodel.mappings[b];return this.mappings[a]=new Es(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var et=Wg,ft=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},gt=Yg,ht=Zg,it=$g,jt=_g,kt=new Il("teardown"),lt=ah,mt=ch,nt=function(a,b){this.init(a,b)};nt.prototype={detach:Nr,find:Or,findAll:Pr,findAllComponents:Qr,findComponent:Rr,findNextNode:Sr,firstNode:Tr,init:gt,rebind:ht,render:it,toString:jt,unbind:lt,unrender:mt};var ot=nt,pt=function(a){this.type=xi,this.value=a.template.c};pt.prototype={detach:Kn,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var qt=pt,rt=function(a){var b,c;this.type=Ci,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new Ft({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],Yl.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};rt.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),Kb(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var st=rt,tt=function(a){this.declaration=a.template.a};tt.prototype={init:vl,render:vl,unrender:vl,teardown:vl,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var ut=tt,vt=dh,wt=eh,xt=fh,yt=gh,zt=hh,At=ih,Bt=kh,Ct=function(a){this.init(a)};Ct.prototype={bubble:zn,detach:An,find:Bn,findAll:Cn,findAllComponents:Dn,findComponent:En,findNextNode:Fn,firstNode:Gn,getNode:Hn,getValue:Jn,init:wt,rebind:xt,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:yt,toString:zt,unbind:At,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Bt};var Dt,Et,Ft=Ct,Gt=["template","partials","components","decorators","events"],Ht=new Il("reset"),It=lh,Jt=function(a,b,c){function d(b,c,f){f&&f.partials[a]||b.forEach(function(b){b.type===wi&&b.getPartialName()===a&&c.push(b),b.fragment&&d(b.fragment.items,c,f),e(b.fragments)?d(b.fragments,c,f):e(b.items)?d(b.items,c,f):b.type===Bi&&b.instance&&d(b.instance.fragment.items,c,b.instance),b.type===vi&&(e(b.attributes)&&d(b.attributes,c,f),e(b.conditionalAttributes)&&d(b.conditionalAttributes,c,f))
})}var f,g=this,h=[];return d(this.fragment.items,h),this.partials[a]=b,f=Yl.start(this,!0),h.forEach(function(b){b.value=void 0,b.setValue(a)}),Yl.end(),c&&(Fl.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.resetPartial"}}),f.then(c.bind(this)).then(null,function(a){Fl.consoleError({debug:g.debug,err:a})})),f},Kt=mh,Lt=pn("reverse"),Mt=/\*/,Nt=nh,Ot=pn("shift"),Pt=pn("sort"),Qt=pn("splice"),Rt=oh,St=new Il("teardown"),Tt=ph,Ut=rh,Vt=sh,Wt=new Il("unrender"),Xt=th,Yt=pn("unshift"),Zt=new Il("update"),$t=uh,_t=vh,au={add:dm,animate:om,detach:qm,find:rm,findAll:Am,findAllComponents:Bm,findComponent:Cm,findContainer:Dm,findParent:Em,fire:Km,get:Mm,insert:Om,merge:Pm,observe:en,observeOnce:fn,off:jn,on:kn,once:ln,pop:qn,push:rn,render:yn,reset:It,resetPartial:Jt,resetTemplate:Kt,reverse:Lt,set:Nt,shift:Ot,sort:Pt,splice:Qt,subtract:Rt,teardown:Tt,toggle:Ut,toHTML:Vt,toHtml:Vt,unrender:Xt,unshift:Yt,update:$t,updateModel:_t},bu=xh,cu=1,du=zh,eu=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath,d.index={},(c=Wn(b.proxy.parentFragment))&&(d.index=Wn.resolve(c)),d):d};Dt=function(a){$s(this,a)},Et={extend:{value:du},getNodeInfo:{value:eu},parse:{value:gl},Promise:{value:Ml},svg:{value:Ah},magic:{value:bm},VERSION:{value:"0.6.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Fh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Dl},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Th(Dt,Et),Dt.prototype=c(au,Eh),Dt.prototype.constructor=Dt,Dt.defaults=Dt.prototype;var fu="function";if(typeof Date.now!==fu||typeof String.prototype.trim!==fu||typeof Object.keys!==fu||typeof Array.prototype.indexOf!==fu||typeof Array.prototype.forEach!==fu||typeof Array.prototype.map!==fu||typeof Array.prototype.filter!==fu||"undefined"!=typeof window&&typeof window.addEventListener!==fu)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var gu=Dt;return gu});