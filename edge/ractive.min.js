!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(){return Go.createDocumentFragment()}function e(t){var e;if(t&&"boolean"!=typeof t)return Yo&&Go&&t?t.nodeType?t:"string"==typeof t&&(e=Go.getElementById(t),!e&&Go.querySelector&&(e=Go.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function n(t){return null!=t&&t.toString?""+t:""}function r(t){for(var e,n,r=arguments.length,i=Array(r>1?r-1:0),o=1;r>o;o++)i[o-1]=arguments[o];for(;n=i.shift();)for(e in n)xs.call(n,e)&&(t[e]=n[e]);return t}function i(t){return"[object Array]"===Os.call(t)}function o(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function s(t){return!isNaN(parseFloat(t))&&isFinite(t)}function a(t){return t&&"[object Object]"===Os.call(t)}function u(t,e){return t.replace(/%s/g,function(){return e.shift()})}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];throw t=u(t,n),new Error(t)}function h(){$o.DEBUG&&ws.apply(null,arguments)}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=u(t,n),Es(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=u(t,n),js[t]||(js[t]=!0,Es(t,n))}function f(){$o.DEBUG&&l.apply(null,arguments)}function d(){$o.DEBUG&&p.apply(null,arguments)}function m(t,e,n){var r=v(t,e,n);return r?r[t][n]:null}function v(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function g(t){return function(){return t}}function y(t){return t?t.replace(Is,".$1"):""}function b(t){return y(t).split(".")}function w(t,e,n){if("string"!=typeof e||!s(n))throw new Error("Bad arguments");if(/\*/.test(e)){var r=function(){var r={};return t.viewmodel.findMatches(b(e)).forEach(function(t){var e=t.get();if(!s(e))throw new Error(Ds);r[t.getKeypath()]=e+n}),{v:t.set(r)}}();if("object"==typeof r)return r.v}var i=t.get(e);if(!s(i))throw new Error(Ds);return t.set(e,+i+n)}function E(t,e){return Rs(this,t,void 0===e?1:+e)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function O(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function k(t,e){var n;if(!i(t)||!i(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function j(t){return"string"==typeof t?[t]:void 0===t?[]:t}function A(t){return t[t.length-1]}function S(t,e){if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function C(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function T(t){setTimeout(t,0)}function P(t,e){return function(){for(var n;n=t.shift();)n(e)}}function F(t,e,n,r){var i;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Ws)e.then(n,r);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{i=e.then}catch(o){return void r(o)}if("function"==typeof i){var s,a,u;a=function(e){s||(s=!0,F(t,e,n,r))},u=function(t){s||(s=!0,r(t))};try{i.call(e,a,u)}catch(o){if(!s)return r(o),void(s=!0)}}else n(e)}}function N(t){t.bind()}function I(t){t.cancel()}function R(t){t.handleChange()}function D(t){t.mark()}function L(t){t.render()}function V(t){t.rebind()}function M(t){t.teardown()}function B(t){t.unbind()}function K(t){t.unrender()}function W(t){t.unrender(!0)}function z(t){t.update()}function U(t){return t.toString()}function $(t){return t.toString(!0)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t){t.detach()}function H(t){t.detachNodes()}function Z(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function Y(t){t.dispatch()}function G(){var t,e;for(Zs.immediateObservers.forEach(Y),t=Zs.fragments.length;t--;){e=Zs.fragments[t];var n=e.ractive;Hs.fire(n,n.viewmodel.changes),n.viewmodel.changes={},e.update()}Zs.fragments.length=0,Zs.transitionManager.start(),Zs.deferredObservers.forEach(Y);var r=Zs.tasks;for(Zs.tasks=[],t=0;t<r.length;t+=1)r[t]();return Zs.fragments.length?G():void 0}function J(t,e,n){var r,i,o,s,a,u,c,h,l,p,f,d,m,v;if(r=new qs(function(t){return i=t}),"object"==typeof t){n=e||{},u=n.easing,c=n.duration,a=[],h=n.step,l=n.complete,(h||l)&&(f={},n.step=null,n.complete=null,p=function(t){return function(e,n){f[t]=n}});for(o in t)t.hasOwnProperty(o)&&((h||l)&&(d=p(o),n={easing:u,duration:c},h&&(n.step=d)),n.complete=l?d:ks,a.push(X(this,o,t[o],n)));return v={easing:u,duration:c},h&&(v.step=function(t){return h(t,f)}),l&&r.then(function(t){return l(t,f)}),v.complete=i,m=X(this,null,null,v),a.push(m),r.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},r}return n=n||{},n.complete&&r.then(n.complete),n.complete=i,s=X(this,t,e,n),r.stop=function(){return s.stop()},r}function X(t,e,n,r){var i,s,a,u,c=void 0;return e&&(c=t.viewmodel.joinAll(y(e).split(".")),u=c.get(),Xs.abort(c,t)),o(u,n)?(r.complete&&r.complete(r.to),ua):(r.easing&&(i="function"==typeof r.easing?r.easing:t.easing[r.easing],"function"!=typeof i&&(i=null)),s=void 0===r.duration?400:r.duration,a=new ta({model:c,from:u,to:n,root:t,duration:s,easing:i,interpolator:r.interpolator,step:r.step,complete:r.complete}),Xs.add(a),t._animations.push(a),a)}function tt(){return this.isDetached?this.el:(this.el&&S(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,ha.fire(this),this.el)}function et(t){return this.el?this.fragment.find(t):null}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){if(t.compareDocumentPosition){var n=t.compareDocumentPosition(e);return 2&n?1:-1}return it(t,e)}function it(t,e){for(var n=st(t.component||t._ractive.proxy),r=st(e.component||e._ractive.proxy),i=A(n),o=A(r),s=void 0;i&&i===o;)n.pop(),r.pop(),s=i,i=A(n),o=A(r);i=i.component||i,o=o.component||o;var a=i.parentFragment,u=o.parentFragment;if(a===u){var c=a.items.indexOf(i),h=u.items.indexOf(o);return c-h||n.length-r.length}var l=s.iterations;if(l){var c=l.indexOf(a),h=l.indexOf(u);return c-h||n.length-r.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!")}function ot(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function st(t){var e,n;for(e=[t],n=ot(t);n;)e.push(n),n=ot(n);return e}function at(t,e){var n,r;return this.el?(e=e||{},n=this._liveQueries,(r=n[t])?e&&e.live?r:r.slice():(r=new pa(this,t,!!e.live,!1),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAll(t,r),r.init(),r.result)):[]}function ut(t,e){var n,r;return e=e||{},n=this._liveComponentQueries,(r=n[t])?e&&e.live?r:r.slice():(r=new pa(this,t,!!e.live,!0),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAllComponents(t,r),r.init(),r.result)}function ct(t){return this.fragment.findComponent(t)}function ht(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function lt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function pt(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function ft(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}function dt(t){var e,n,r,i,o,s;for(e=t.split("."),(n=ya[e.length])||(n=mt(e.length)),o=[],r=function(t,n){return t?"*":e[n]},i=n.length;i--;)s=n[i].map(r).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function mt(t){var e,n,r,i,o,s,a,u,c="";if(!ya[t]){for(r=[];c.length<t;)c+=1;for(e=parseInt(c,2),i=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(i(n[s]));r[o]=u}ya[t]=r}return ya[t]}function vt(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var r=gt(e);yt(t,r,n.event,n.args,!0)}}function gt(t){return ba.hasOwnProperty(t)?ba[t]:ba[t]=dt(t)}function yt(t,e,n,r){var i,o,s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=!0;for(pt(t,n),o=e.length;o>=0;o--)i=t._subs[e[o]],i&&(a=bt(t,i,n,r)&&a);if(ft(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=gt(u),n&&(n.component=t)}yt(t.parent,e,n,r)}}function bt(t,e,n,r){var i=null,o=!1;n&&!n._noArg&&(r=[n].concat(r)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,r)===!1&&(o=!0);return n&&!n._noArg&&o&&(i=n.original)&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),!o}function wt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];vt(this,t,{args:n})}function Et(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function _t(t,e){var n=t.findContext().root,r=e.split("."),i=r[0],o=n.mappings.hasOwnProperty(i)?n.mappings[i]:n.computations.hasOwnProperty(i)?n.computations[i]:null;if(o)return r.length>1?o.joinAll(r.slice(1)):o;for(var s=void 0,a=void 0;t;){if(t.isIteration){if(i===t.parent.keyRef)return r.length>1&&Et(i),t.context.getKeyModel();if(i===t.parent.indexRef)return r.length>1&&Et(i),t.context.getIndexModel(t.index)}if(t.context&&((!t.isRoot||t.ractive.component)&&(s=!0),t.context.has(i)))return a&&n.map(i,t.context.joinKey(i)),t.context.joinAll(r);t.componentParent&&!t.ractive.isolated?(t=t.componentParent,a=!0):t=t.parent}return s?void 0:n.joinAll(r)}function xt(t,e){var n=t.findContext();if("."===e||"this"===e)return n;if("@keypath"===e)return n.getKeypathModel();if("@index"===e){var r=t.findRepeatingFragment();return r.context.getIndexModel(r.index)}if("@key"===e)return t.findRepeatingFragment().context.getKeyModel();if("~"===e[0])return n.root.joinAll(e.slice(2).split("."));if("."===e[0]){for(var i=e.split("/");"."===i[0]||".."===i[0];){var o=i.shift();".."===o&&(n=n.parent)}return e=i.join("/"),"."===e[0]&&(e=e.slice(1)),n.joinAll(e.split("."))}return _t(t,e)}function Ot(t){if(!t)return this.viewmodel.get(!0);var e=b(t),n=e[0],r=void 0;return this.viewmodel.has(n)||this.component&&(r=xt(this.component.parentFragment,n),r&&this.viewmodel.map(n,r)),r=this.viewmodel.joinAll(e),r.get(!0)}function kt(t,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,jt(this)}function jt(t){xa.fire(t),t.findAllComponents("*").forEach(function(t){jt(t.instance)})}function At(t){if(!t)return null;if(t===!0)return JSON.stringify;if("function"==typeof t)return t;if("string"==typeof t)return ka[t]||(ka[t]=function(e){return e[t]});throw new Error("If supplied, options.compare must be a string, function, or `true`")}function St(t,e,n){var r=this.viewmodel.joinAll(b(t)),o=Ys.start(this,!0),s=r.get();if(e===s)throw new Error("You cannot merge an array with itself");if(!i(s)||!i(e))throw new Error("You cannot merge an array with a non-array");var a=At(n&&n.compare);return r.merge(e,a),Ys.end(),o}function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e,n){var r=this,i=[];if(a(t))!function(){var o=t;n=e||{},Object.keys(o).forEach(function(t){var e=o[t];t.split(" ").forEach(function(t){i.push(Pt(r,t,e,n))})})}();else{var o=void 0;"function"==typeof t?(n=e,e=t,o=[""]):o=t.split(" "),o.forEach(function(t){i.push(Pt(r,t,e,n||{}))})}return this._observers.push.apply(this._observers,i),{cancel:function(){i.forEach(I)}}}function Pt(t,e,n,r){var i=t.viewmodel,o=b(e),s=o.indexOf("*");if(!~s){var a=o[0];if(!i.has(a)&&t.component){var u=xt(t.component.parentFragment,a);u&&i.map(a,u)}var c=i.joinAll(o);return new ja(t,c,n,r)}var h=0===s?i:i.joinAll(o.slice(0,s));return new Aa(t,h,o.splice(s),n,r)}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e,n){if("string"!=typeof t)throw new Error("ractive.observeList() must be passed a string as its first argument");var r=this.viewmodel.joinAll(b(t)),i=new Sa(this,r,e,n||{});return this._observers.push(i),{cancel:function(){i.cancel()}}}function It(){return-1}function Rt(t,e,n){return a(t)||"function"==typeof t?(n=r(e||{},Ca),this.observe(t,n)):(n=r(n||{},Ca),this.observe(t,e,n))}function Dt(t,e){var n,r=this;if(t)n=t.split(" ").map(Ta).filter(Pa),n.forEach(function(t){var n,i;(n=r._subs[t])&&(e?(i=n.indexOf(e),-1!==i&&n.splice(i,1)):r._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Lt(t,e){var n,r,i,o=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&n.push(this.on(r,t[r]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return i=t.split(" ").map(Ta).filter(Pa),i.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Vt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Mt(t,e,n){var r,i,o,s,a,u=[];if(r=Bt(t,e,n),!r)return null;for(s=r.length-2-r[1],i=Math.min(t,r[0]),o=i+r[1],a=0;i>a;a+=1)u.push(a);for(;o>a;a+=1)u.push(-1);for(;t>a;a+=1)u.push(a+s);return 0!==s?u.touchedFrom=r[0]:u.touchedFrom=t,u}function Bt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t));n.length<2;)n.push(t-n[0]);return n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}function Kt(t,n,r){var i=t.transitionsEnabled;t.noIntro&&(t.transitionsEnabled=!1);var o=Ys.start(t,!0);if(Ys.scheduleTask(function(){return qa.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(r=e(r)||t.anchor,t.el=n,t.anchor=r,t.cssId&&Ua.apply(),n)if((n.__ractive_instances__||(n.__ractive_instances__=[])).push(t),r){var s=Go.createDocumentFragment();t.fragment.render(s),n.insertBefore(s,r)}else t.fragment.render(n);return Ys.end(),t.transitionsEnabled=i,o.then(function(){return Qa.fire(t)})}function Wt(t,n){if(t=e(t)||this.el,!this.append&&t){var r=t.__ractive_instances__;r&&r.length&&zt(r),t.innerHTML=""}return $a(this,t,n)}function zt(t){t.splice(0,t.length).forEach(M)}function Ut(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function $t(t,e){var n,r,i;return r='[data-ractive-css~="{'+e+'}"]',i=function(t){var e,n,i,o,s,a,u,c=[];for(e=[];n=Ja.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(Qt),u=e.length;u--;)a=o.slice(),i=e[u],a[u]=i.base+r+i.modifiers||"",s=o.slice(),s[u]=r+" "+s[u],c.push(a.join(" "),s.join(" "));return c.join(", ")},n=tu.test(t)?t.replace(tu,r):t.replace(Ga,"").replace(Ya,function(t,e){var n,r;return Xa.test(e)?t:(n=e.split(",").map(qt),r=n.map(i).join(", ")+" ",t.replace(e,r))})}function qt(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Qt(t){return t.str}function Ht(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?c("data option must be an object or a function, `"+t+"` is not valid"):f("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Zt(t,e){Ht(e);var n="function"==typeof t,r="function"==typeof e;return e||n||(e={}),n||r?function(){var i=r?Yt(e,this):e,o=n?Yt(t,this):t;return Gt(i,o)}:Gt(e,t)}function Yt(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&c("Data function must return an object"),n.constructor!==Object&&d("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Gt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Jt(t){var e,n,r;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(qu))?t.matchPattern(Qu)?(r=t.matchPattern(qu))?(t.allowWhitespace(),t.matchString("=")?[n,r]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function Xt(t){var e;return(e=t.matchPattern(Zu))?{t:Su,v:e}:null}function te(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=ee(t,t.tags[n]))return e}function ee(t,e){var n,r,i,o;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(r=Jt(t))return t.matchString(e.close)?(e.open=r[0],e.close=r[1],t.sortMustacheTags(),Yu):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var s=t.pos;Hu(t)?t.pos=s:(t.pos=s-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(o=0;o<e.readers.length;o+=1)if(i=e.readers[o],r=i(t,e))return e.isStatic&&(r.s=!0),t.includeLinePositions&&(r.p=t.getLinePos(n)),r;return t.pos=n,null}function ne(t){var e;return(e=t.matchPattern(tc))?{t:xu,v:e}:null}function re(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:Au,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:Au,v:"false"}):null}function ie(t){var e;return(e=sc(t))?uc.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Xu(t))?e.v:(e=t.matchPattern(ac))?e:void 0}function oe(t){var e,n,r;return e=t.pos,t.allowWhitespace(),n=ie(t),null===n?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),r=fe(t),null===r?(t.pos=e,null):{t:Tu,k:n,v:r}):(t.pos=e,null))}function se(t){var e,n,r,i;return e=t.pos,r=cc(t),null===r?null:(n=[r],t.matchString(",")?(i=se(t),i?n.concat(i):(t.pos=e,null)):n)}function ae(t){function e(t){r.push(t)}var n,r,i,o;return n=t.pos,t.allowWhitespace(),i=fe(t),null===i?null:(r=[i],t.allowWhitespace(),t.matchString(",")&&(o=ae(t),null===o&&t.error(Gu),o.forEach(e)),r)}function ue(t){return Xu(t)||re(t)||sc(t)||hc(t)||lc(t)||Hu(t)}function ce(t){var e,n,r,i,o,s;return e=t.pos,r=t.matchPattern(/^@(?:keypath|index|key)/),r||(n=t.matchPattern(pc)||"",r=!n&&t.relaxedNames&&t.matchPattern(vc)||t.matchPattern(mc),r||"."!==n||(n="",r=".")),r?n||t.relaxedNames||!nc.test(r)?!n&&ec.test(r)?(i=ec.exec(r)[0],t.pos=e+i.length,{t:Cu,v:i}):(o=(n||"")+y(r),t.matchString("(")&&(s=o.lastIndexOf("."),-1!==s?(o=o.substr(0,s),t.pos=e+o.length):t.pos-=1),{t:Pu,n:o.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function he(t){var e,n;return e=t.pos,t.matchString("(")?(t.allowWhitespace(),n=fe(t),n||t.error(Gu),t.allowWhitespace(),t.matchString(")")||t.error(Ju),{t:Ru,x:n}):null}function le(t){var e,n,r;if(e=t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),n=t.matchPattern(ac))return{t:Fu,n:n};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),r=fe(t),r||t.error(Gu),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:Fu,x:r}):null}function pe(t){var e,n,r,i;return(n=Cc(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),r=fe(t),r||t.error(Gu),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),i=fe(t),i||t.error(Gu),{t:Du,o:[n,r,i]}):(t.pos=e,n)):null}function fe(t){return Tc(t)}function de(t){function e(t){switch(t.t){case Au:case Cu:case xu:case Su:return t.v;case Ou:return JSON.stringify(String(t.v));case ku:return"["+(t.m?t.m.map(e).join(","):"")+"]";case ju:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case Tu:return t.k+":"+e(t.v);case Iu:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case Lu:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case Vu:return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case Ru:return"("+e(t.x)+")";case Nu:return e(t.x)+e(t.r);case Fu:return t.n?"."+t.n:"["+e(t.x)+"]";case Du:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case Pu:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return me(t,n=[]),{r:n,s:e(t)}}function me(t,e){var n,r;if(t.t===Pu&&-1===e.indexOf(t.n)&&e.unshift(t.n),r=t.o||t.m)if(a(r))me(r,e);else for(n=r.length;n--;)me(r[n],e);t.x&&me(t.x,e),t.r&&me(t.r,e),t.v&&me(t.v,e)}function ve(t,e){var n;if(t){for(;t.t===Ru&&t.x;)t=t.x;return t.t===Pu?e.r=t.n:t.t===xu&&Pc.test(t.v)?e.r=t.v:(n=ge(t))?e.rx=n:e.x=de(t),e}}function ge(t){for(var e,n=[];t.t===Nu&&t.r.t===Fu;)e=t.r,e.x?e.x.t===Pu?n.unshift(e.x):n.unshift(de(e.x)):n.unshift(e.n),t=t.x;return t.t!==Pu?null:{r:t.n,m:n}}function ye(t,e){var n,r=fe(t);return r?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:hu},ve(r,n),n):null}function be(t,e){var n,r;return t.matchString("&")?(t.allowWhitespace(),(n=fe(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r={t:hu},ve(n,r),r):null):null}function we(t,e){var n,r,i,o,s;return n=t.pos,t.matchString(">")?(t.allowWhitespace(),r=t.pos,t.relaxedNames=!0,i=fe(t),t.relaxedNames=!1,t.allowWhitespace(),o=fe(t),t.allowWhitespace(),i?(s={t:mu},ve(i,s),t.allowWhitespace(),o&&(s={t:lu,n:Wu,f:[s]},ve(o,s)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):null):null}function Ee(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),-1!==n?(t.pos+=n+e.close.length,{t:vu}):void 0):null}function _e(t,e){var n,r,i;if(n=t.pos,r=fe(t),!r)return null;for(i=0;i<e.length;i+=1)if(t.remaining().substr(0,e[i].length)===e[i])return r;return t.pos=n,ce(t)}function xe(t,e){var n,r,i,o;n=t.pos;try{r=_e(t,[e.close])}catch(s){o=s}if(!r){if("!"===t.str.charAt(n))return t.pos=n,null;if(o)throw o}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!r)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return i={t:cu},ve(r,i),i}function Oe(t,e){var n,r,i;return t.matchPattern(Nc)?(n=t.pos,r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),i={t:wu},r&&(i.n=r),i):null}function ke(t,e){var n,r,i,o;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),r=t.remaining(),i=r.indexOf(e.close),-1!==i?(o={t:fu,r:r.substr(0,i).split(" ")[0]},t.pos+=i,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o):(t.pos=n,null)):(t.pos=n,null)):null}function je(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(Ic)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Uu}):(t.pos=n,null):null}function Ae(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Rc))return t.pos=n,null;var r=fe(t);return t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:$u,x:r}}function Se(t,e){var n,r,i,o,s,a,u,c,h,l,p,f;if(n=t.pos,t.matchString("^"))i={t:lu,f:[],n:Bu};else{if(!t.matchString("#"))return null;i={t:lu,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(u=t.matchPattern(Mc))&&(f=u,i.n=Dc[u])}if(t.allowWhitespace(),r=fe(t),r||t.error("Expected expression"),p=t.matchPattern(Lc)){var d=void 0;(d=t.matchPattern(Vc))?i.i=p+","+d:i.i=p}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,s=i.f,h=[];do if(o=ke(t,e))f&&o.r!==f&&t.error("Expected "+e.open+"/"+f+e.close),t.sectionDepth-=1,l=!0;else if(o=Ae(t,e))i.n===Bu&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),c||(c=Ce(r,i.n)),c.f.push({t:lu,n:Mu,x:de(Pe(h.concat(o.x))),f:s=[]}),h.push(Te(o.x));else if(o=je(t,e))i.n===Bu&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,c?c.f.push({t:lu,n:Mu,x:de(Pe(h)),f:s=[]}):(c=Ce(r,i.n),s=c.f);else{if(o=t.read(Fh),!o)break;s.push(o)}while(!l);return c&&(i.n===Wu&&(i.n=zu),i.l=c),ve(r,i),i.f.length||delete i.f,i}function Ce(t,e){var n={t:lu,n:Bu,f:[]};return ve(t,n),n}function Te(t){return t.t===Iu&&"!"===t.s?t.o:{t:Iu,s:"!",o:Fe(t)}}function Pe(t){return 1===t.length?t[0]:{t:Lu,s:"&&",o:[Fe(t[0]),Fe(Pe(t.slice(1)))]}}function Fe(t){return{t:Ru,x:t}}function Ne(t){var e,n,r,i,o;return e=t.pos,t.matchString(Bc)?(r=t.remaining(),i=r.indexOf(Kc),-1===i&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=r.substr(0,i),t.pos+=i+3,o={t:vu,c:n},t.includeLinePositions&&(o.p=t.getLinePos(e)),o):null}function Ie(t){return t.replace(qc,function(t,e){var n;return n="#"!==e[0]?Uc[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(De(n)):t})}function Re(t){return t.replace(Zc,"&amp;").replace(Qc,"&lt;").replace(Hc,"&gt;")}function De(t){return t?10===t?32:128>t?t:159>=t?$c[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function Le(t){return"string"==typeof t}function Ve(t){return t.t===vu||t.t===gu}function Me(t){return(t.t===lu||t.t===pu)&&t.f}function Be(t,e,n,r,o){var s,a,u,c,h,l,p,f;for(Jc(t),s=t.length;s--;)a=t[s],a.exclude?t.splice(s,1):e&&a.t===vu&&t.splice(s,1);for(Xc(t,r?nh:null,o?rh:null),s=t.length;s--;){if(a=t[s],a.f){var d=a.t===du&&eh.test(a.e);h=n||d,!n&&d&&Xc(a.f,ih,oh),h||(u=t[s-1],c=t[s+1],(!u||"string"==typeof u&&rh.test(u))&&(l=!0),(!c||"string"==typeof c&&nh.test(c))&&(p=!0)),Be(a.f,e,h,l,p)}if(a.l&&(Be(a.l.f,e,n,l,p),t.splice(s+1,0,a.l),delete a.l),a.a)for(f in a.a)a.a.hasOwnProperty(f)&&"string"!=typeof a.a[f]&&Be(a.a[f],e,n,l,p);if(a.m&&Be(a.m,e,n,l,p),a.v)for(f in a.v)a.v.hasOwnProperty(f)&&(i(a.v[f].n)&&Be(a.v[f].n,e,n,l,p),i(a.v[f].d)&&Be(a.v[f].d,e,n,l,p))}for(s=t.length;s--;)"string"==typeof t[s]&&("string"==typeof t[s+1]&&(t[s]=t[s]+t[s+1],t.splice(s+1,1)),n||(t[s]=t[s].replace(th," ")),""===t[s]&&t.splice(s,1))}function Ke(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(sh))?t.inside&&n!==t.inside?(t.pos=e,null):{t:yu,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function We(t){var e,n,r;return t.allowWhitespace(),(n=t.matchPattern(uh))?(e={name:n},r=ze(t),null!=r&&(e.value=r),e):null}function ze(t){var e,n,r,i;return e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,r=t.sectionDepth,i=qe(t,"'")||qe(t,'"')||$e(t),null===i&&t.error("Expected valid attribute value"),t.sectionDepth!==r&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),i.length?1===i.length&&"string"==typeof i[0]?Ie(i[0]):i:""):(t.pos=e,null)}function Ue(t){var e,n,r,i,o;return e=t.pos,(n=t.matchPattern(ch))?(r=n,i=t.tags.map(function(t){return t.open}),-1!==(o=ah(r,i))&&(n=n.substr(0,o),t.pos=e+n.length),n):null}function $e(t){var e,n;for(t.inAttribute=!0,e=[],n=te(t)||Ue(t);null!==n;)e.push(n),n=te(t)||Ue(t);return e.length?(t.inAttribute=!1,e):null}function qe(t,e){var n,r,i;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,r=[],i=te(t)||Qe(t,e);null!==i;)r.push(i),i=te(t)||Qe(t,e);return t.matchString(e)?(t.inAttribute=!1,r):(t.pos=n,null)}function Qe(t,e){var n,r,i,o;return n=t.pos,i=t.remaining(),o=t.tags.map(function(t){return t.open}),o.push(e),r=ah(i,o),-1===r&&t.error("Quoted attribute value must have a closing quote"),r?(t.pos+=r,i.substr(0,r)):null}function He(t){var e,n,r;return t.allowWhitespace(),(e=ie(t))?(r={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(r.value=n.v,r):null):null):null}function Ze(t,e){var n,r,i,o,s,a,u,c,h;if("string"==typeof t){if(r=ph.exec(t)){var l=t.lastIndexOf(")");return fh.test(t)||e.error("Invalid input after method call expression '"+t.slice(l+1)+"'"),n={m:r[1]},o="["+t.slice(n.m.length+1,l)+"]",i=new hh(o),n.a=de(i.result[0]),n}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(n={},u=[],c=[],t){for(;t.length;)if(s=t.shift(),"string"==typeof s){if(a=s.indexOf(":"),-1!==a){a&&u.push(s.substr(0,a)),s.length>a+1&&(c[0]=s.substring(a+1));break}u.push(s)}else u.push(s);c=c.concat(t)}return u.length?c.length||"string"!=typeof u?(n={n:1===u.length&&"string"==typeof u[0]?u[0]:u},1===c.length&&"string"==typeof c[0]?(h=lh("["+c[0]+"]"),n.a=h?h.value:[c[0].trim()]):n.d=c):n=u:n="",n}function Ye(t){var e,n,r,i,o,s,a,u,c,h,l,p,f,d,m,v;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=_u,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=du,n.e=t.matchPattern(mh),!n.e)return null;for(vh.test(t.nextChar())||t.error("Illegal tag name"),o=function(e,r){var i=r.n||r;bh.test(i)&&(t.pos-=i.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=r},t.allowWhitespace();s=te(t)||We(t);)s.name?(r=wh[s.name])?n[r]=Ze(s.value,t):(i=yh.exec(s.name))?(n.v||(n.v={}),a=Ze(s.value,t),o(i[1],a)):t.sanitizeEventAttributes&&gh.test(s.name)||(n.a||(n.a={}),n.a[s.name]=s.value||(""===s.value?"":0)):(n.m||(n.m=[]),n.m.push(s)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(u=!0),!t.matchString(">"))return null;var g=n.e.toLowerCase(),y=t.preserveWhitespace;if(!u&&!zc.test(n.e)){t.elementStack.push(g),("script"===g||"style"===g)&&(t.inside=g),c=[],h=ms(null);do if(d=t.pos,m=t.remaining(),Ge(g,m))if(v=Ke(t)){f=!0;var b=v.e.toLowerCase();if(b!==g&&(t.pos=d,!~t.elementStack.indexOf(b))){var w="Unexpected closing tag";zc.test(b)&&(w+=" (<"+b+"> is a void element - it cannot contain children)"),t.error(w)}}else(p=ke(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(f=!0,t.pos=d):(p=t.read(Nh))?(h[p.n]&&(t.pos=d,t.error("Duplicate partial definition")),Be(p.f,t.stripComments,y,!y,!y),h[p.n]=p.f,l=!0):(p=t.read(Fh))?c.push(p):f=!0;else f=!0;while(!f);c.length&&(n.f=c),l&&(n.p=h),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(g)?Eh:n}function Ge(t,e){var n,r;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),r=dh[t],n&&r?!~r.indexOf(n[1].toLowerCase()):!0}function Je(t){var e,n,r,i;return n=t.remaining(),i=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(i):(r=t.tags.map(function(t){return t.open}),r=r.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?r.push('"',"'","=","<",">","`"):t.inAttribute?r.push(t.inAttribute):r.push(i),e=ah(n,r)),e?(-1===e&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):Ie(n.substr(0,e))):null}function Xe(t){return t.replace(xh,"\\$&")}function tn(t){var e=t.pos,n=t.standardDelimiters[0],r=t.standardDelimiters[1],i=void 0,o=void 0;if(!t.matchPattern(Oh)||!t.matchString(n))return t.pos=e,null;var s=t.matchPattern(kh);if(d("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+s+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+s+"}} --> ... <!-- {{/"+s+"}} -->'"),!t.matchString(r)||!t.matchPattern(jh))return t.pos=e,null;i=[];var a=new RegExp("^<!--\\s*"+Xe(n)+"\\s*\\/\\s*"+s+"\\s*"+Xe(r)+"\\s*-->");do t.matchPattern(a)?o=!0:(_h=t.read(Fh),_h||t.error("expected closing comment ('<!-- "+n+"/"+s+r+" -->')"),i.push(_h));while(!o);return{t:Eu,f:i,n:s}}function en(t){var e,n,r,i,o;e=t.pos;var s=t.standardDelimiters;if(!t.matchString(s[0]))return null;if(!t.matchPattern(Ah))return t.pos=e,null;n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/),n||t.error("expected legal partial name"),t.matchString(s[1])||t.error("Expected closing delimiter '"+s[1]+"'"),
r=[];do(i=ke(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!i.r&&t.error("Expected "+s[0]+"/partial"+s[1]),o=!0):(i=t.read(Fh),i||t.error("Expected "+s[0]+"/partial"+s[1]),r.push(i));while(!o);return{t:Eu,n:n,f:r}}function nn(t){for(var e=[],n=ms(null),r=!1,i=t.preserveWhitespace;t.pos<t.str.length;){var o=t.pos,s=void 0,a=void 0;(a=t.read(Nh))?(n[a.n]&&(t.pos=o,t.error("Duplicated partial definition")),Be(a.f,t.stripComments,i,!i,!i),n[a.n]=a.f,r=!0):(s=t.read(Fh))?e.push(s):t.error("Unexpected template content")}var u={v:qo,t:e};return r&&(u.p=n),u}function rn(t,e){return new Ph(t,e||{}).result}function on(t){var e=ms(Vh);return e.parse=function(e,n){return sn(e,n||t)},e}function sn(t,e){if(!rn)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return rn(t,e||this.options)}function an(t,e){var n;if(!Go){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(un(t)&&(t=t.substring(1)),!(n=Go.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function un(t){return t&&"#"===t[0]}function cn(t){return!("string"==typeof t)}function hn(t){return t.defaults&&(t=t.defaults),Lh.reduce(function(e,n){return e[n]=t[n],e},{})}function ln(t){var e,n=t._config.template;if(n&&n.fn)return e=pn(t,n.fn),e!==n.result?(n.result=e,e=dn(e,t)):void 0}function pn(t,e){var n=fn(Mh.getParseOptions(t));return e.call(t,n)}function fn(t){var e=ms(Mh);return e.parse=function(e,n){return Mh.parse(e,n||t)},e}function dn(t,e){if("string"==typeof t)"#"===t[0]&&(t=Mh.fromId(t)),t=rn(t,Mh.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==qo)throw new Error("Mismatched template version (expected "+qo+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function mn(t,e,n){if(e)for(var r in e)(n||!t.hasOwnProperty(r))&&(t[r]=e[r])}function vn(t,e,n){if(!/_super/.test(n))return n;var r=function(){var t,i=gn(r._parent,e),o="_super"in this,s=this._super;return this._super=i,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return r._parent=t,r._method=n,r}function gn(t,e){var n,r;return e in t?(n=t[e],r="function"==typeof n?n:function(){return n}):r=ks,r}function yn(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function bn(t,e,n){if(e in t){if(n in t)throw new Error(yn(e,n,!0));f(yn(e,n)),t[n]=t[e]}}function wn(t){bn(t,"beforeInit","onconstruct"),bn(t,"init","onrender"),bn(t,"complete","oncomplete"),bn(t,"eventDefinitions","events"),i(t.adaptors)&&bn(t,"adaptors","adapt")}function En(t,e,n,r){wn(r);for(var i in r)if(qh.hasOwnProperty(i)){var o=r[i];"el"!==i&&"function"==typeof o?f(i+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[i]=o}Dh.forEach(function(i){i[t](e,n,r)}),Za[t](e,n,r),Bh[t](e,n,r),nu[t](e,n,r),_n(e.prototype,n,r)}function _n(t,e,n){for(var r in n)if(!$h[r]&&n.hasOwnProperty(r)){var i=n[r];"function"==typeof i&&(i=Qh(t,r,i)),e[r]=i}}function xn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function On(t){if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");t=ru.init(this.constructor,this,{data:t});var e=Ys.start(this,!0),n=this.viewmodel.wrapper;n&&n.reset?n.reset(t)===!1&&this.viewmodel.set(t):this.viewmodel.set(t);for(var r=Kh.reset(this),i=void 0,o=r.length;o--;)if(Zh.indexOf(r[o])>-1){i=!0;break}return i&&(Xh.fire(this),this.fragment.resetTemplate(this.template),Jh.fire(this),Yh.fire(this)),Ys.end(),Gh.fire(this,t),e}function kn(t,e,n){t.forEach(function(t){if(t.type===mu&&t.name===e)return void n.push(t);if(t.fragment)kn(t.fragment.iterations||t.fragment.items,e,n);else if(i(t.items))kn(t.items,e,n);else if(t.type===bu&&t.instance){if(t.instance.partials[e])return;kn(t.instance.fragment.items,e,n)}t.type===du&&(i(t.attributes)&&kn(t.attributes,e,n),i(t.conditionalAttributes)&&kn(t.conditionalAttributes,e,n))})}function jn(t){t.forceResetTemplate()}function An(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tn(t,e,n){if(t.set&&t.set.__magic)return t.set.__magic.dependants.push({ractive:e,keypath:n}),t;var r=void 0,i=[{ractive:e,keypath:n}],o={get:function(){return"value"in t?t.value:t.get()},set:function(e){r||("value"in t?t.value=e:t.set(e),r=!0,i.forEach(function(t){var n=t.ractive,r=t.keypath;n.set(r,e)}),r=!1)},enumerable:!0};return o.set.__magic={dependants:i,originalDescriptor:t},o}function Pn(t,e,n){if(!t.set||!t.set.__magic)return!0;for(var r=t.set.__magic,i=r.length;i--;){var o=r[i];if(o.ractive===e&&o.keypath===n)return r.splice(i,1),!1}}function Fn(){bl.push(wl=[])}function Nn(){return bl.pop()}function In(t){wl&&wl.push(t)}function Rn(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function Dn(t){var e;return El[t]||(e=t?t+".":"",El[t]=function(n,r){var i;return"string"==typeof n?(i={},i[e+n]=r,i):"object"==typeof n?e?Rn(n,t):n:void 0}),El[t]}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bn(t){t.updateFromBindings(!0)}function Kn(t){t.updateKeypathDependants()}function Wn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Un(t){var e=t.replace(/^\t+/gm,function(t){return t.split("	").join("  ")}).split("\n"),n=e.length<2?0:e.slice(1).reduce(function(t,e){return Math.min(t,/^\s*/.exec(e)[0].length)},1/0);return e.map(function(t,e){return"    "+(e?t.substring(n):t)}).join("\n")}function $n(t){if(!t)return"";for(var e=t.split("\n"),n=Al.name+".getValue",r=[],i=e.length,o=1;i>o;o+=1){var s=e[o];if(~s.indexOf(n))return r.join("\n");r.push(s)}}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Hn(t,e){var n,r,i;return n="return ("+e.replace(Cl,function(t,e){return r=!0,'__ractive.get("'+e+'")'})+");",r&&(n="var __ractive = this; "+n),i=new Function(n),r?i.bind(t):i}function Zn(t,e){return/this/.test(t.toString())?t.bind(e):t}function Yn(t,e,n){var r=void 0,i=void 0,o=void 0,s=void 0,a=void 0;return"function"==typeof n&&(r=Zn(n,t),o=n.toString(),s=!0),"string"==typeof n&&(r=Hn(t,n),o=n),"object"==typeof n&&("string"==typeof n.get?(r=Hn(t,n.get),o=n.get):"function"==typeof n.get?(r=Zn(n.get,t),o=n.get.toString(),s=!0):c("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(i=Zn(n.set,t),a=n.set.toString())),{getter:r,setter:i,getterString:o,setterString:a,getterUseStack:s}}function Gn(t,e){$o.DEBUG&&_s(),tr(t),vs(t,"data",{get:er}),Tl.fire(t,e),Pl.forEach(function(n){t[n]=r(ms(t.constructor[n]||null),e[n])});var n=new Sl({adapt:Xn(t,t.adapt,e),data:ru.init(t.constructor,t,e),ractive:t});t.viewmodel=n;var i=r(ms(t.constructor.prototype.computed),e.computed);for(var o in i){var s=Yn(t,o,i[o]);n.compute(o,s)}}function Jn(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function Xn(t,e,n){function r(e){return"string"==typeof e&&(e=m("adaptors",t,e),e||c(Ts(e,"adaptor"))),e}var i,o,s;if(e=e.map(r),i=j(n.adapt).map(r),i=Jn(e,i),o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,o){if(!ts)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&i.push(fl),i.push(pl)}return s&&i.push(hl),i}function tr(t){t._guid="r-"+Fl++,t._subs=ms(null),t._config={},t._animations=[],t.nodes={},t.event=null,t._eventQueue=[],t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],t.root=t,t.parent=t.container=null}function er(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rr(t,e){return t[e._guid]||(t[e._guid]=[])}function ir(t,e){var n=rr(t.queue,e);for(t.hook.fire(e);n.length;)ir(t,n.shift());delete t.queue[e._guid]}function or(t,n,r){if(Object.keys(t.viewmodel.computations).forEach(function(e){var n=t.viewmodel.computations[e];t.viewmodel.value.hasOwnProperty(e)&&n.set(t.viewmodel.value[e]),n.init()}),Kh.init(t.constructor,t,n),Il.fire(t),Rl.begin(t),t.template){var i=void 0;(r.cssIds||t.cssId)&&(i=r.cssIds?r.cssIds.slice():[],t.cssId&&i.push(t.cssId)),t.fragment=new cf({owner:t,template:t.template,cssIds:i,indexRefs:r.indexRefs||{},keyRefs:r.keyRefs||{}})}if(Rl.end(t),t.fragment){t.fragment.bind(t.viewmodel);var o=e(t.el);if(o){var s=t.render(o,t.append);$o.DEBUG_PROMISES&&s["catch"](function(e){throw d("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),f("An error happened during rendering",{ractive:t}),e.stack&&h(e.stack),e})}}}function sr(t,e){if(Dl[t])return Dl[t];for(var n=new Array(e);e--;)n[e]="_"+e;var r=new Function(n.join(","),"return ("+t+")");return Dl[t]=r}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function cr(t,e,n){if(t.__ractive_nowrap)return t;var r="__ractive_"+n;if(t[r])return t[r];if(!/\bthis\b/.test(t))return vs(t,"__ractive_nowrap",{value:!0}),t;vs(t,r,{value:t.bind(e),configurable:!0});for(var i in t)t.hasOwnProperty(i)&&(t[r][i]=t[i]);return e._boundFunctions.push({fn:t,prop:r}),t[r]}function hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function pr(t,e){return e.r?xt(t,e.r):e.x?new Ll(t,e.x):new Vl(t,e.rx)}function fr(t){var e=t.ractive;do for(var n=e._liveComponentQueries,r=n.length;r--;){var i=n[r],o=n["_"+i];o.test(t)&&(o.add(t.instance),t.liveQueries.push(o))}while(e=e.parent)}function dr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function vr(t){for(var e=t.ractive;e;){var n=e._liveComponentQueries["_"+t.name];n&&n.remove(t),e=e.parent}}function gr(t){t.makeDirty()}function yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wr(t){var e=t.element,n=t.name;if("id"===n)return Er;if("value"===n){if("select"===e.name&&"value"===n)return e.getAttribute("multiple")?_r:xr;if("textarea"===e.name)return jr;if(null!=e.getAttribute("contenteditable"))return Or;if("input"===e.name){var r=e.getAttribute("type");if("file"===r)return ks;if("radio"===r&&e.binding&&"name"===e.binding.attribute.name)return kr}return jr}var i=e.node;if(t.isTwoway&&"name"===n){if("radio"===i.type)return Ar;if("checkbox"===i.type)return Sr}return"style"===n&&i.style.setAttribute?Cr:"class"!==n||i.namespaceURI&&i.namespaceURI!==fs?t.useProperty?Pr:Fr:Tr}function Er(){var t=this.node,e=this.getValue();delete this.ractive.nodes[t.id],this.ractive.nodes[e]=t,t.id=e}function _r(){var t=this.getValue();i(t)||(t=[t]);for(var e=this.node.options,n=e.length;n--;){var r=e[n],o=r._ractive?r._ractive.value:r.value;r.selected=O(t,o)}}function xr(){var t=this.getValue();if(!this.locked){this.node._ractive.value=t;for(var e=this.node.options,n=e.length;n--;){var r=e[n],i=r._ractive?r._ractive.value:r.value;if(i==t){r.selected=!0;break}}}}function Or(){var t=this.getValue();this.locked||(this.node.innerHTML=void 0===t?"":t)}function kr(){var t=this.node,e=t.checked,n=this.getValue();t.value=this.node._ractive.value=n,t.checked=n===this.element.getAttribute("name"),e&&!t.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function jr(){if(!this.locked){var t=this.getValue();this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",t)}}function Ar(){this.node.checked=this.getValue()==this.node._ractive.value}function Sr(){var t=this.element,e=this.node,n=t.binding,r=this.getValue(),o=t.getAttribute("value");if(i(r)){for(var s=r.length;s--;)if(o==r[s])return void(n.isChecked=e.checked=!0);n.isChecked=e.checked=!1}else n.isChecked=e.checked=r==o}function Cr(){this.node.style.setAttribute("cssText",this.getValue()||"")}function Tr(){this.node.className=n(this.getValue())}function Pr(){this.locked||(this.node[this.propertyName]=this.getValue())}function Fr(){this.node.setAttribute(this.name,n(this.getString()))}function Nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ir(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Rr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Lr(t,e){var n=e?"svg":"div";return Ql.innerHTML="<"+n+" "+t+"></"+n+">",C(Ql.childNodes[0].attributes)}function Vr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function Mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kr(t){var e=this._ractive.events[t.type];e.fire({node:this,original:t})}function Wr(){tp=!Go[ep]}function zr(){tp=!1}function Ur(){tp=!0}function $r(t){return t}function qr(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hr(t){var e=t.node,n=t.ractive;do for(var r=n._liveQueries,i=r.length;i--;){var o=r[i],s=r["_"+o];s.test(e)&&(s.add(e),t.liveQueries.push(s))}while(n=n.parent)}function Zr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(t){for(;t=t.parent;)if("form"===t.name)return t}function Gr(t,e){d("The "+t+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:e})}function Jr(){this._ractive.binding.handleChange()}function Xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e,n,r){var i=t+e+n.getKeypath();return Cp[i]||(Cp[i]=new Tp(n,r))}function ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ii(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function oi(t){return t.node.checked}function si(t){return t.element.getAttribute("value")}function ai(){return this.bindings.filter(oi).map(si)}function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function li(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function di(){var t;Jr.call(this),t=this._ractive.binding.model.get(),this.value=void 0==t?"":t}function mi(t){var e=void 0;return function(){var n=this;e&&clearTimeout(e),e=setTimeout(function(){var t=n._ractive.binding;t.rendered&&Jr.call(n),e=null},t)}}function vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ei(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _i(t){return Vp[t]||(Vp[t]=[])}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ki(){for(var t=this.bindings.length;t--;){var e=this.bindings[t];if(e.node.checked)return e.element.getAttribute("value")}}function ji(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ai(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Si(t){return t&&1===t.template.length&&t.template[0].t===cu&&!t.template[0].s}function Ci(t){var e=t.attributeByName;if(t.getAttribute("contenteditable")||Si(e.contenteditable))return Si(e.value)?Np:null;if("input"===t.name){var n=t.getAttribute("type");if("radio"===n||"checkbox"===n){var r=Si(e.name),i=Si(e.checked);if(r&&i&&f("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),r)return"radio"===n?Bp:Fp;if(i)return"radio"===n?Mp:Sp}return"file"===n&&Si(e.value)?Ip:Si(e.value)?"number"===n||"range"===n?Lp:Rp:null}return"select"===t.name&&Si(e.value)?t.getAttribute("multiple")?Dp:Kp:"textarea"===t.name&&Si(e.value)?Rp:void 0}function Ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Fi(t){t.makeDirty()}function Ni(t){var e=t.attributeByName,n=e.type,r=e.value,i=e.name;return n&&"radio"===n.value&&r&&i.interpolator&&r.getValue()===i.interpolator.model.get()?!0:void 0}function Ii(t){var e=t.toString();return e?" "+e:""}function Ri(t){for(var e=t.liveQueries.length;e--;){var n=t.liveQueries[e];n.remove(t.node)}}function Di(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return ds;var n=t.parent;return n?"foreignobject"===n.name?fs:n.node.namespaceURI:t.ractive.el.namespaceURI}function Li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Mi(){var t=this._ractive.proxy;Ys.start(),t.formBindings.forEach(Bi),Ys.end()}function Bi(t){t.model.set(t.resetValue)}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function zi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ui(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function $i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Zi(t){for(;t;){if("select"===t.name)return t;t=t.parent}}function Yi(t,e,n){var r;if(r=Gi(t,e,n||{}))return r;if(r=Mh.fromId(e,{noThrow:!0})){var i=Mh.parse(r,Mh.getParseOptions(t));return t.partials[e]=i.t}}function Gi(t,e,n){var r=void 0,i=to(e,n.owner);if(i)return i;var o=v("partials",t,e);if(o){if(i=o.partials[e],"function"==typeof i&&(r=i.bind(o),r.isOwner=o.partials.hasOwnProperty(e),i=r.call(t,Mh)),!i&&""!==i)return void f(Cs,e,"partial","partial",{ractive:t});if(!Mh.isParsed(i)){var s=Mh.parse(i,Mh.getParseOptions(o));s.p&&f("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=r?o:Ji(o,e);a.partials[e]=i=s.t}return r&&(i._fn=r),i.v?i.t:i}}function Ji(t,e){return t.partials.hasOwnProperty(e)?t:Xi(t.constructor,e)}function Xi(t,e){return t?t.partials.hasOwnProperty(e)?t:Xi(t._Parent,e):void 0}function to(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return to(t,e.parentFragment.owner)}}function eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function no(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e,n){var r=void 0;return t?(r={},Object.keys(n).forEach(function(t){r[t]=n[t]}),r[t]=e):r=n,r}function oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function so(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ao(t){return!t||i(t)&&0===t.length||a(t)&&0===Object.keys(t).length}function uo(t,e){return e||i(t)?Ku:a(t)||"function"==typeof t?Wu:void 0===t?null:Mu}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ho(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function lo(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function mo(t){return tf[t]||(tf[t]=ns(t))}function vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function go(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function yo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wo(t,e){var n,r=v("components",t,e);if(r&&(n=r.components[e],!n._Parent)){var i=n.bind(r);if(i.isOwner=r.components.hasOwnProperty(e),n=i(),!n)return void f(Cs,e,"component","component",{ractive:t});"string"==typeof n&&(n=wo(t,n)),n._fn=i,r.components[e]=n}return n}function Eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _o(t){if("string"==typeof t.template)return new Xp(t);if(t.template.t===du){var e=wo(t.parentFragment.ractive,t.template.e);if(e)return new zl(t,e);var n=t.template.e.toLowerCase(),r=af[n]||Wp;return new r(t)}var i=sf[t.template.t];if(!i)throw new Error("Unrecognised item type "+t.template.t);return new i(t)}function xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oo(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];return t.map(function(t){if(t.type===uu)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return Oo(t.items,e,n,r)}).join(""):Oo(t.fragment.items,e,n,r);var i=n+"-"+r++;return e[i]=t.model?t.model.wrapper?t.model.wrapper.value:t.model.get():void 0,"${"+i+"}"}).join("")}function ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jo(t){t.unrender(!0)}function Ao(t){var e,n;Bh.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new cf({template:this.template,root:this,owner:this}),this.fragment.bind(this.viewmodel),this.render(this.el,this.anchor),this.transitionsEnabled=e}function So(t,e){var n,r;if(r=Ys.start(this,!0),a(t)){n=t;for(t in n)n.hasOwnProperty(t)&&Co(this,t,n[t])}else Co(this,t,e);return Ys.end(),r}function Co(t,e,n){if(/\*/.test(e))t.viewmodel.findMatches(b(e)).forEach(function(t){t.set(n)});else{var r=t.viewmodel.joinAll(b(e));r.set(n)}}function To(t,e){return Rs(this,t,void 0===e?-1:-e);
}function Po(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(I),this.fragment.rendered&&this.el.__ractive_instances__&&S(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():qs.resolve(),yf.fire(this),this._boundFunctions.forEach(Fo),t}function Fo(t){delete t.fn[t.prop]}function No(t){if("string"!=typeof t)throw new TypeError(Ss);var e=void 0;return/\*/.test(t)?(e={},this.viewmodel.findMatches(b(t)).forEach(function(t){e[t.getKeypath()]=!t.get()}),this.set(e)):this.set(t,!this.get(t))}function Io(){return this.fragment.toString(!0)}function Ro(){var t,e;if(!this.fragment.rendered)return f("ractive.unrender() was called on a Ractive instance that was not rendered"),qs.resolve();for(t=Ys.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),S(this.el.__ractive_instances__,this),_f.fire(this),Ys.end(),t}function Do(t){var e,n;return n=t?this.viewmodel.joinAll(b(t)):this.viewmodel,e=Ys.start(this,!0),n.mark(),Ys.end(),kf.fire(this,n),e}function Lo(t,e){var n=Ys.start(this,!0);return t?this.viewmodel.joinAll(b(t)).updateFromBindings(e!==!1):this.viewmodel.updateFromBindings(!0),Ys.end(),n}function Vo(t,e){return"function"==typeof e&&/_super/.test(t)}function Mo(t){for(var e={};t;)Bo(t,e),Wo(t,e),t=t._Parent!==$o?t._Parent:!1;return e}function Bo(t,e){Dh.forEach(function(n){Ko(n.useDefaults?t.prototype:t,e,n.name)})}function Ko(t,e,n){var r,i=Object.keys(t[n]);i.length&&((r=e[n])||(r=e[n]={}),i.filter(function(t){return!(t in r)}).forEach(function(e){return r[e]=t[n][e]}))}function Wo(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var r=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof r&&e[n]._method){var i=void 0,o=r._method;o&&(r=r._method),i=Sf(e[n]._method,r),o&&(i._method=i),e[n]=i}}else e[n]=r._method?r._method:r}})}function zo(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(Uo,this):Uo(this)}function Uo(t){var e,n,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.prototype instanceof $o&&(i=Cf(i)),e=function(t){return this instanceof e?(Gn(this,t||{}),void or(this,t||{},{})):new e(t)},n=ms(t.prototype),n.constructor=e,gs(e,{defaults:{value:n},extend:{value:zo,writable:!0,configurable:!0},_Parent:{value:t}}),Kh.extend(t,n,i),ru.extend(t,n,i),i.computed&&(n.computed=r(ms(t.prototype.computed),i.computed)),e.prototype=n,e}function $o(t){return this instanceof $o?(Gn(this,t||{}),void or(this,t||{},{})):new $o(t)}var qo=3,Qo={el:void 0,append:!1,template:{v:qo,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},Ho=Qo,Zo={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},Yo="undefined"!=typeof window?window:null,Go=Yo?document:null,Jo=!!Go,Xo=("undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply),ts=void 0;try{Object.defineProperty({},"test",{value:0}),ts=!0}catch(es){ts=!1}var ns,rs,is,os,ss,as,us,cs,hs,ls=Go?Go.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,ps=["o","ms","moz","webkit"],fs="http://www.w3.org/1999/xhtml",ds="http://www.w3.org/2000/svg";if(ns=ls?function(t,e){return e&&e!==fs?Go.createElementNS(e,t):Go.createElement(t)}:function(t,e){if(e&&e!==fs)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return Go.createElement(t)},Jo){for(is=ns("div"),os=["matches","matchesSelector"],hs=function(t){return function(e,n){return e[t](n)}},us=os.length;us--&&!rs;)if(ss=os[us],is[ss])rs=hs(ss);else for(cs=ps.length;cs--;)if(as=ps[us]+ss.substr(0,1).toUpperCase()+ss.substring(1),is[as]){rs=hs(as);break}rs||(rs=function(t,e){var n,r,i;for(r=t.parentNode,r||(is.innerHTML="",r=is,t=t.cloneNode(),is.appendChild(t)),n=r.querySelectorAll(e),i=n.length;i--;)if(n[i]===t)return!0;return!1})}else rs=null;var ms,vs,gs,ys=null;try{Object.defineProperty({},"test",{value:0}),Go&&Object.defineProperty(ns("div"),"test",{value:0}),vs=Object.defineProperty}catch(bs){vs=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(bs){throw bs}Go&&Object.defineProperties(ns("div"),{test:{value:0}}),gs=Object.defineProperties}catch(bs){gs=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&vs(t,n,e[n])}}try{Object.create(null),ms=Object.create}catch(bs){ms=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}var ws,Es,_s,xs=Object.prototype.hasOwnProperty,Os=Object.prototype.toString,ks=function(){},js={};Xo?!function(){var t=["%cRactive.js %c0.8.0-edge %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.8.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";_s=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),_s=ks},Es=function(t,e){if(_s(),"object"==typeof e[e.length-1]){var n=e.pop(),r=n?n.ractive:null;if(r){var i=void 0;r.component&&(i=r.component.name)&&(t="<"+i+"> "+t);var o=void 0;(o=n.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},ws=function(){console.log.apply(console,arguments)}}():Es=ws=_s=ks;var As,Ss="Bad arguments",Cs='A function was specified for "%s" %s, but no %s was returned',Ts=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Ps=function(t,e,n,r){if(t===e)return g(e);if(r){var i=m("interpolators",n,r);if(i)return i(t,e)||g(e);c(Ts(r,"interpolator"))}return Ns.number(t,e)||Ns.array(t,e)||Ns.object(t,e)||g(e)},Fs={number:function(t,e){var n;return s(t)&&s(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,r,o,s;if(!i(t)||!i(e))return null;for(n=[],r=[],s=o=Math.min(t.length,e.length);s--;)r[s]=Ps(t[s],e[s]);for(s=o;s<t.length;s+=1)n[s]=t[s];for(s=o;s<e.length;s+=1)n[s]=e[s];return function(t){for(var e=o;e--;)n[e]=r[e](t);return n}},object:function(t,e){var n,r,i,o,s;if(!a(t)||!a(e))return null;n=[],o={},i={};for(s in t)xs.call(t,s)&&(xs.call(e,s)?(n.push(s),i[s]=Ps(t[s],e[s])):o[s]=t[s]);for(s in e)xs.call(e,s)&&!xs.call(t,s)&&(o[s]=e[s]);return r=n.length,function(t){for(var e,s=r;s--;)e=n[s],o[e]=i[e](t);return o}}},Ns=Fs,Is=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Rs=w,Ds="Cannot add to a non-numeric value",Ls=E;Yo?(!function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,o;return n=Date.now(),r=Math.max(0,16-(n-e)),o=i(function(){t(n+r)},r),e=n+r,o})}}(ps,0,Yo),As=Yo.requestAnimationFrame):As=null;var Vs=As,Ms=Yo&&Yo.performance&&"function"==typeof Yo.performance.now?function(){return Yo.performance.now()}:function(){return Date.now()},Bs={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}},Ks=function(){function t(e){_(this,t),this.event=e,this.method="on"+e,this.deprecate=Bs[e]}return t.prototype.call=function(t,e,n){return e[t]?(n?e[t](n):e[t](),!0):void 0},t.prototype.fire=function(t,e){this.call(this.method,t,e),!t[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,t,e)&&(this.deprecate.message?f(this.deprecate.message):f('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)},t}();Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;r>o;o++)if(o in n&&(e=n[o],t.call(i,e,o,n)))return e;return void 0});var Ws,zs={},Us={},$s={};"function"==typeof Promise?Ws=Promise:(Ws=function(t){var e,n,r,i,o,s,a=[],u=[],c=zs;r=function(t){return function(r){c===zs&&(e=r,c=t,n=P(c===Us?a:u,e),T(n))}},i=r(Us),o=r($s);try{t(i,o)}catch(h){o(h)}return s={then:function(t,e){var r=new Ws(function(i,o){var s=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),F(r,n,i,o)}catch(s){o(s)}}):e.push(n)};s(t,a,i),s(e,u,o),c!==zs&&T(n)});return r}},s["catch"]=function(t){return this.then(null,t)},s},Ws.all=function(t){return new Ws(function(e,n){var r,i,o,s=[];if(!t.length)return void e(s);for(o=function(t,i){t&&"function"==typeof t.then?t.then(function(t){s[i]=t,--r||e(s)},n):(s[i]=t,--r||e(s))},r=i=t.length;i--;)o(t[i],i)})},Ws.resolve=function(t){return new Ws(function(e){e(t)})},Ws.reject=function(t){return new Ws(function(e,n){n(t)})});var qs=Ws,Qs=function(){function t(e,n){q(this,t),this.callback=e,this.parent=n,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,n&&n.addChild(this)}return t.prototype.add=function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},t.prototype.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},t.prototype.addDecorator=function(t){this.decoratorQueue.push(t)},t.prototype.decrementOutros=function(){this.outroChildren-=1,Z(this)},t.prototype.decrementTotal=function(){this.totalChildren-=1,Z(this)},t.prototype.detachNodes=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.decoratorQueue.forEach(M),this.detachQueue.forEach(Q),this.children.forEach(H)}),t.prototype.init=function(){this.ready=!0,Z(this)},t.prototype.remove=function(t){var e=t.isIntro?this.intros:this.outros;S(e,t),Z(this)},t.prototype.start=function(){this.intros.concat(this.outros).forEach(function(t){return t.start()})},t}(),Hs=new Ks("change"),Zs=void 0,Ys={start:function(t,e){var n,r;return e&&(n=new qs(function(t){return r=t})),Zs={previousBatch:Zs,transitionManager:new Qs(r,Zs&&Zs.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],instance:t},n},end:function(){G(),Zs.transitionManager.init(),Zs=Zs.previousBatch},addFragment:function(t){x(Zs.fragments,t)},addObserver:function(t,e){x(e?Zs.deferredObservers:Zs.immediateObservers,t)},registerTransition:function(t){t._manager=Zs.transitionManager,Zs.transitionManager.add(t)},registerDecorator:function(t){Zs.transitionManager.addDecorator(t)},detachWhenReady:function(t){Zs.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(Zs){for(n=Zs;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}},Gs=[],Js={tick:function(){var t,e,n;for(n=Ms(),Ys.start(),t=0;t<Gs.length;t+=1)e=Gs[t],e.tick(n)||Gs.splice(t--,1);Ys.end(),Gs.length?Vs(Js.tick):Js.running=!1},add:function(t){Gs.push(t),Js.running||(Js.running=!0,Vs(Js.tick))},abort:function(t,e){for(var n,r=Gs.length;r--;)n=Gs[r],n.root===e&&n.model===t&&n.stop()}},Xs=Js,ta=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Ps(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ta.prototype={tick:function(){var t,e,n,r,i,o;return o=this.keypath,this.running?(r=Date.now(),t=r-this.startTime,t>=this.duration?(null!==o&&(Ys.start(this.root),this.model&&this.model.set(this.to),Ys.end()),this.step&&this.step(1,this.to),this.complete(this.to),i=this.root._animations.indexOf(this),-1===i&&f("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(n=this.interpolator(e),Ys.start(this.root),this.model&&this.model.set(n),Ys.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&f("Animation was not found"),this.root._animations.splice(t,1)}};var ea,na,ra,ia,oa,sa,aa=J,ua={stop:ks},ca=tt,ha=new Ks("detach"),la=et,pa=function(){function t(e,n,r,i){nt(this,t),this.ractive=e,this.selector=n,this.live=r,this.isComponentQuery=i,this.result=[],this.dirty=!0}return t.prototype.add=function(t){this.result.push(t),this.makeDirty()},t.prototype.cancel=function(){var t,e,n;t=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},t.prototype.init=function(){this.dirty=!1},t.prototype.makeDirty=function(){var t=this;this.dirty||(this.dirty=!0,Ys.scheduleTask(function(){return t.update()}))},t.prototype.remove=function(t){var e=this.result.indexOf(this.isComponentQuery?t.instance:t);-1!==e&&this.result.splice(e,1)},t.prototype.update=function(){this.result.sort(this.isComponentQuery?it:rt),this.dirty=!1},t.prototype.test=function(t){return this.isComponentQuery?!this.selector||t.name===this.selector:t?rs(t,this.selector):null},t}(),fa=at,da=ut,ma=ct,va=ht,ga=lt,ya={},ba={},wa=wt,Ea=Ot,_a=kt,xa=new Ks("insert"),Oa=St,ka={},ja=function(){function t(e,n,r,i){Ct(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=r,this.oldValue=void 0,this.newValue=n.get(),this.defer=i.defer,this.once=i.once,this.strict=i.strict,this.dirty=!1,i.init!==!1?this.dispatch():this.oldValue=this.newValue,n.register(this)}return t.prototype.cancel=function(){this.model.unregister(this)},t.prototype.dispatch=function(){this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.newValue,this.dirty=!1},t.prototype.handleChange=function(){if(!this.dirty){if(this.newValue=this.model.get(),this.strict&&this.newValue===this.oldValue)return;Ys.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel()}},t}(),Aa=function(){function t(e,n,r,i,o){var s=this;Ct(this,t),this.context=e,this.baseModel=n,this.keys=r,this.callback=i;var a=r.join("\\.").replace(/\*/g,"(.+)"),u=n.getKeypath();this.pattern=new RegExp("^"+(u?u+".":"")+a+"$"),this.oldValues={},this.newValues={},this.defer=o.defer,this.once=o.once,this.strict=o.strict,this.dirty=!1,this.baseModel.findMatches(this.keys).forEach(function(t){s.newValues[t.getKeypath()]=t.get()}),o.init!==!1?this.dispatch():this.oldValues=this.newValues,n.register(this)}return t.prototype.cancel=function(){this.baseModel.unregister(this)},t.prototype.dispatch=function(){var t=this;Object.keys(this.newValues).forEach(function(e){var n=t.newValues[e],r=t.oldValues[e];if(!(t.strict&&n===r||o(n,r))){var i=t.pattern.exec(e).slice(1),s=[n,r,e].concat(i);t.callback.apply(t.context,s)}}),this.oldValues=this.newValues,this.dirty=!1},t.prototype.handleChange=function(){var t=this;this.dirty||(this.newValues={},this.baseModel.findMatches(this.keys).forEach(function(e){var n=e.getKeypath();t.newValues[n]=e.get()}),Ys.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel())},t}(),Sa=function(){function t(e,n,r,i){Ft(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=r,this.pending=null,n.register(this),i.init!==!1?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()}return t.prototype.handleChange=function(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(It)),this.handleChange())},t.prototype.shuffle=function(t){var e=this,n=this.slice(),r=[],i=[],o=void 0,s={};t.forEach(function(t,n){s[t]=!0,t!==n&&void 0===o&&(o=n),-1===t&&i.push(e.sliced[n])}),void 0===o&&(o=t.length);for(var a=n.length,u=0;a>u;u+=1)s[u]||r.push(n[u]);this.pending={inserted:r,deleted:i,start:o},this.sliced=n},t.prototype.slice=function(){var t=this.model.get();return i(t)?t.slice():[]},t}(),Ca={init:!1,once:!0},Ta=function(t){return t.trim()},Pa=function(t){return""!==t},Fa=Dt,Na=Lt,Ia=Vt,Ra=Array.prototype,Da=function(t){return function(e){var n=this.viewmodel.joinAll(y(e).split(".")),r=n.get();if(!i(r))throw new Error("shuffle array method "+t+" called on non-array at "+e.getKeypath());for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;o>a;a++)s[a-1]=arguments[a];var u=Mt(r.length,t,s),c=Ra[t].apply(r,s),h=Ys.start(this,!0).then(function(){return c});return u?n.shuffle(u):n.set(c),Ys.end(),h}},La=Da("pop"),Va=Da("push"),Ma="/* Ractive.js component styles */\n",Ba=[],Ka=!1;Go?(ra=Go.createElement("style"),ra.type="text/css",ia=Go.getElementsByTagName("head")[0],sa=!1,oa=ra.styleSheet,na=function(){var t=Ma+Ba.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");oa?oa.cssText=t:ra.innerHTML=t,sa||(ia.appendChild(ra),sa=!0)},ea={add:function(t){Ba.push(t),Ka=!0},apply:function(){Ka&&(na(),Ka=!1)}}):ea={add:ks,apply:ks};var Wa,za,Ua=ea,$a=Kt,qa=new Ks("render"),Qa=new Ks("complete"),Ha=Wt,Za={extend:function(t,e,n){e.adapt=Ut(e.adapt,j(n.adapt))},init:function(){}},Ya=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Ga=/\/\*.*?\*\//g,Ja=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Xa=/^@media/,tu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,eu=1,nu={name:"css",extend:function(t,e,n){if(n.css){var r=eu++,i=n.noCssTransform?n.css:$t(n.css,r);e.cssId=r,Ua.add({id:r,styles:i})}},init:function(){}},ru={name:"data",extend:function(t,e,n){var r=void 0,o=void 0;if(n.data&&a(n.data))for(r in n.data)o=n.data[r],o&&"object"==typeof o&&(a(o)||i(o))&&f("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Zt(e.data,n.data)},init:function(t,e,n){var r=Zt(t.prototype.data,n.data);return"function"==typeof r&&(r=r.call(e)),r||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},iu=/^\s+/;za=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},za.prototype=Error.prototype,Wa=function(t,e){var n,r,i=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},Wa.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},getLinePos:function(t){for(var e,n=0,r=0;t>=this.lineEnds[n];)r=this.lineEnds[n],n+=1;return e=t-r,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],r=e[1],i=this.lines[e[0]-1],o=0,s=i.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new za(t+" at line "+n+" character "+r+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(iu)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Wa.extend=function(t){var e,n,r=this;e=function(t,e){Wa.call(this,t,e)},e.prototype=ms(r.prototype);for(n in t)xs.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=Wa.extend,e};var ou,su,au,uu=1,cu=2,hu=3,lu=4,pu=5,fu=6,du=7,mu=8,vu=9,gu=10,yu=14,bu=15,wu=16,Eu=17,_u=18,xu=20,Ou=21,ku=22,ju=23,Au=24,Su=25,Cu=26,Tu=27,Pu=30,Fu=31,Nu=32,Iu=33,Ru=34,Du=35,Lu=36,Vu=40,Mu=50,Bu=51,Ku=52,Wu=53,zu=54,Uu=60,$u=61,qu=/^[^\s=]+/,Qu=/^\s+/,Hu=Xt,Zu=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Yu={t:gu,exclude:!0},Gu="Expected a JavaScript expression",Ju="Expected closing paren",Xu=ne,tc=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;ou=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,su=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,au=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var ec,nc,rc=function(t){return function(e){var n,r,i,o;for(n=e.pos,r='"',i=!1;!i;)o=e.matchPattern(ou)||e.matchPattern(su)||e.matchString(t),o?r+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.matchPattern(au),o?r+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):i=!0);return r+='"',JSON.parse(r)}},ic=rc('"'),oc=rc("'"),sc=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=oc(t),t.matchString('"')?{t:Ou,v:n}:(t.pos=e,null)):t.matchString("'")?(n=ic(t),t.matchString("'")?{t:Ou,v:n}:(t.pos=e,null)):null},ac=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,uc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,cc=oe,hc=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=se(t),t.allowWhitespace(),t.matchString("}")?{t:ju,m:n}:(t.pos=e,null)):(t.pos=e,null)},lc=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=ae(t),t.matchString("]")?{t:ku,m:n}:(t.pos=e,null)):(t.pos=e,null)},pc=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;ec=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,nc=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var fc,dc,mc=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,vc=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,gc=function(t){return ue(t)||ce(t)||he(t)},yc=function(t){var e,n,r,i;if(n=gc(t),!n)return null;for(;n;)if(e=t.pos,r=le(t))n={t:Nu,x:n,r:r};else{if(!t.matchString("("))break;t.allowWhitespace(),i=ae(t),t.allowWhitespace(),t.matchString(")")||t.error(Ju),n={t:Vu,x:n},i&&(n.o=i)}return n};dc=function(t,e){return function(n){var r;return(r=e(n))?r:n.matchString(t)?(n.allowWhitespace(),r=fe(n),r||n.error(Gu),{s:t,o:r,t:Iu}):null}},function(){var t,e,n,r,i;for(r="! ~ + - typeof".split(" "),i=yc,t=0,e=r.length;e>t;t+=1)n=dc(r[t],i),i=n;fc=i}();var bc,wc,Ec=fc;wc=function(t,e){return function(n){var r,i,o;if(i=e(n),!i)return null;for(;;){if(r=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=r,i;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=r,i;if(n.allowWhitespace(),o=e(n),!o)return n.pos=r,i;i={t:Lu,s:t,o:[i,o]}}}},function(){var t,e,n,r,i;for(r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=Ec,t=0,e=r.length;e>t;t+=1)n=wc(r[t],i),i=n;bc=i}();var _c,xc,Oc,kc,jc,Ac,Sc,Cc=bc,Tc=pe,Pc=/^[0-9][1-9]*$/,Fc=Ee,Nc=/^yield\s*/,Ic=/^\s*else\s*/,Rc=/^\s*elseif\s+/,Dc={each:Ku,"if":Mu,"if-with":zu,"with":Wu,unless:Bu},Lc=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Vc=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Mc=new RegExp("^("+Object.keys(Dc).join("|")+")\\b"),Bc="<!--",Kc="-->",Wc=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,zc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Uc={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},$c=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],qc=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Uc).join("|")+"));?","g"),Qc=/</g,Hc=/>/g,Zc=/&/g,Yc=/^\s*\r?\n/,Gc=/\r?\n\s*$/,Jc=function(t){var e,n,r,i,o;for(e=1;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e-2],Le(n)&&Ve(r)&&Le(i)&&Gc.test(i)&&Yc.test(n)&&(t[e-2]=i.replace(Gc,"\n"),t[e]=n.replace(Yc,"")),Me(n)&&Le(r)&&Gc.test(r)&&Le(n.f[0])&&Yc.test(n.f[0])&&(t[e-1]=r.replace(Gc,"\n"),n.f[0]=n.f[0].replace(Yc,"")),Le(n)&&Me(r)&&(o=A(r.f),Le(o)&&Gc.test(o)&&Yc.test(n)&&(r.f[r.f.length-1]=o.replace(Gc,"\n"),t[e]=n.replace(Yc,"")));return t},Xc=function(t,e,n){var r;e&&(r=t[0],"string"==typeof r&&(r=r.replace(e,""),r?t[0]=r:t.shift())),n&&(r=A(t),"string"==typeof r&&(r=r.replace(n,""),r?t[t.length-1]=r:t.pop()))},th=/[ \t\f\r\n]+/g,eh=/^(?:pre|script|style|textarea)$/i,nh=/^[ \t\f\r\n]+/,rh=/[ \t\f\r\n]+$/,ih=/^(?:\r\n|\r|\n)/,oh=/(?:\r\n|\r|\n)$/,sh=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,ah=function(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},uh=/^[^\s"'>\/=]+/,ch=/^[^\s"'=<>`]+/;xc={"true":!0,"false":!1,undefined:void 0,"null":null},Oc=new RegExp("^(?:"+Object.keys(xc).join("|")+")"),kc=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,jc=/\$\{([^\}]+)\}/g,Ac=/^\$\{([^\}]+)\}/,Sc=/^\s*$/,_c=Wa.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Sc.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Ac),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(Oc))?{v:xc[e]}:void 0},function(t){var e;return(e=t.matchPattern(kc))?{v:+e}:void 0},function(t){var e,n=sc(t);return n&&(e=t.values)?{v:n.v.replace(jc,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=He(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var hh,lh=function(t,e){var n=new _c(t,{values:e});return n.result},ph=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,fh=/\)\s*$/;hh=Wa.extend({converters:[fe]});var dh,mh=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,vh=/^[\s\n\/>]/,gh=/^on/,yh=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,bh=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,wh={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Eh={exclude:!0};dh={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var _h,xh=/[-/\\^$*+?.()|[\]{}]/g,Oh=/^<!--\s*/,kh=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,jh=/\s*-->/,Ah=/^#\s*partial\s+/,Sh=[we,be,Se,Oe,xe,Fc],Ch=[ye],Th=[be,Se,xe],Ph=void 0,Fh=[te,Ne,Ye,Je],Nh=[tn,en];Ph=Wa.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],r=e.staticDelimiters||["[[","]]"],i=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Sh},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Ch},{isStatic:!0,isTriple:!1,open:r[0],close:r[1],readers:Th
},{isStatic:!0,isTriple:!0,open:i[0],close:i[1],readers:Ch}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),Be(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:qo}},converters:[nn],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var Ih,Rh,Dh,Lh=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Vh={fromId:an,isHashedId:un,isParsed:cn,getParseOptions:hn,createHelper:on,parse:sn},Mh=Vh,Bh={name:"template",extend:function(t,e,n){var r;"template"in n&&(r=n.template,"function"==typeof r?e.template=r:e.template=dn(r,e))},init:function(t,e,n){var r,i;r="template"in n?n.template:t.prototype.template,"function"==typeof r&&(i=r,r=pn(e,i),e._config.template={fn:i,result:r}),r=dn(r,e),e.template=r.t,r.p&&mn(e.partials,r.p)},reset:function(t){var e,n=ln(t);return n?(e=dn(n,t),t.template=e.t,mn(t.partials,e.p,!0),!0):void 0}};Ih=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],Rh=function(t,e){this.name=t,this.useDefaults=e},Rh.prototype={constructor:Rh,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var r,i=this.name,o=n[i];r=ms(t[i]);for(var s in o)r[s]=o[s];e[i]=r},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var r=e[t];r._fn&&(r._fn.isOwner?e[t]=r._fn:delete e[t],n=!0)}),n}},Dh=Ih.map(function(t){return new Rh(t,"computed"===t)});var Kh,Wh,zh,Uh,$h,qh,Qh=vn;Uh={adapt:Za,css:nu,data:ru,template:Bh},zh=Object.keys(Ho),qh=xn(zh.filter(function(t){return!Uh[t]})),$h=xn(zh.concat(Dh.map(function(t){return t.name}))),Wh=[].concat(zh.filter(function(t){return!Dh[t]&&!Uh[t]}),Dh,Uh.template,Uh.css),Kh={extend:function(t,e,n){return En("extend",t,e,n)},init:function(t,e,n){return En("init",t,e,n)},reset:function(t){return Wh.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Wh};var Hh=On,Zh=["template","partials","components","decorators","events"],Yh=new Ks("complete"),Gh=new Ks("reset"),Jh=new Ks("render"),Xh=new Ks("unrender"),tl=function(t,e){var n=[];kn(this.fragment.items,t,n);var r=Ys.start(this,!0);return this.partials[t]=e,n.forEach(jn),Ys.end(),r},el=function(){function t(e){An(this,t),this.parentFragment=e.parentFragment,this.ractive=e.parentFragment.ractive,this.template=e.template,this.index=e.index,this.type=e.template.t,this.dirty=!1}return t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},t.prototype.find=function(){return null},t.prototype.findAll=function(){},t.prototype.findComponent=function(){return null},t.prototype.findAllComponents=function(){},t.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)},t}(),nl=el,rl=function(t,e,n,r){var i=t.__model;r&&i.shuffle(r)},il=["pop","push","reverse","shift","sort","splice","unshift"],ol=[];il.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=Mt(this.length,t,n),o=Array.prototype[t].apply(this,arguments);Ys.start(),this._ractive.setting=!0;for(var s=this._ractive.wrappers.length;s--;)rl(this._ractive.wrappers[s],this,t,i);return Ys.end(),this._ractive.setting=!1,o};vs(ol,t,{value:e})});var sl=void 0,al=void 0;({}).__proto__?(sl=function(t){return t.__proto__=ol},al=function(t){return t.__proto__=Array.prototype}):(sl=function(t){for(var e=il.length;e--;){var n=il[e];vs(t,n,{value:ol[n],configurable:!0})}},al=function(t){for(var e=il.length;e--;)delete t[il[e]]}),sl.unpatch=al;var ul=sl,cl="Something went wrong in a rather interesting way",hl={filter:function(t){return i(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new ll(t,e,n)}},ll=function(){function t(e,n){Sn(this,t),this.root=e,this.value=n,this.__model=null,n._ractive||(vs(n,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),ul(n)),n._ractive.instances[e._guid]||(n._ractive.instances[e._guid]=0,n._ractive.instances.push(e)),n._ractive.instances[e._guid]+=1,n._ractive.wrappers.push(this)}return t.prototype.get=function(){return this.value},t.prototype.teardown=function(){var t,e,n,r,i;if(t=this.value,e=t._ractive,n=e.wrappers,r=e.instances,e.setting)return!1;if(i=n.indexOf(this),-1===i)throw new Error(cl);if(n.splice(i,1),n.length){if(r[this.root._guid]-=1,!r[this.root._guid]){if(i=r.indexOf(this.root),-1===i)throw new Error(cl);r.splice(i,1)}}else delete t._ractive,ul.unpatch(this.value)},t}(),pl=void 0;try{Object.defineProperty({},"test",{value:0}),pl={filter:function(t){return t&&"object"==typeof t},wrap:function(t,e,n){return new ml(t,e,n)}}}catch(bs){pl=!1}var fl,dl,ml=function(){function t(e,n,r){var i=this;Cn(this,t),this.ractive=e,this.value=n,this.keypath=r,this.originalDescriptors={},Object.keys(n).forEach(function(t){var n=Object.getOwnPropertyDescriptor(i.value,t);i.originalDescriptors[t]=n;var o=r?r+"."+t:t,s=Tn(n,e,o);Object.defineProperty(i.value,t,s)})}return t.prototype.get=function(){return this.value},t.prototype.reset=function(){throw new Error("TODO magic adaptor reset")},t.prototype.set=function(t,e){this.value[t]=e},t.prototype.teardown=function(){var t=this;Object.keys(this.value).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t.value,e);n.set&&n.set.__magic&&(Pn(n),1===n.set.__magic.dependants.length&&Object.defineProperty(t.value,e,n.set.__magic.originalDescriptor))})},t}();pl&&(fl={filter:function(t,e,n){return pl.filter(t,e,n)&&hl.filter(t)},wrap:function(t,e,n){return new dl(t,e,n)}},dl=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=pl.wrap(t,e,n),this.arrayWrapper=hl.wrap(t,e,n),Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(t){this.arrayWrapper.__model=t}})},dl.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var vl,gl,yl,bl=[],wl=void 0,El={},_l=function(){function t(e){Ln(this,t),this.value=e,this.isReadonly=!0,this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.getKeypath=function(){return this.value},t.prototype.rebind=function(t){this.value=t,this.dependants.forEach(R)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){S(this.dependants,t)},t}(),xl=function(){function t(e){Vn(this,t),this.parent=e,this.value=e.getKeypath(),this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.handleChange=function(){this.value=this.parent.getKeypath(),this.dependants.forEach(R)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){S(this.dependants,t)},t}(),Ol=Object.prototype.hasOwnProperty,kl=null,jl=function(){function t(e,n){Mn(this,t),this.deps=[],this.children=[],this.childByKey={},this.indexModels=[],this.unresolved=[],this.unresolvedByKey={},this.bindings=[],this.value=void 0,e&&(this.parent=e,this.root=e.root,this.key=n,e.value&&(this.value=e.value[this.key],this.adapt()))}return t.prototype.adapt=function(){var t=this.root.adaptors,e=this.value,n=t.length,r=this.root.ractive,i=this.getKeypath(),o=void 0;for(o=0;n>o;o+=1){var s=t[o];if(s.filter(e,i,r)){this.wrapper=s.wrap(r,e,i,Dn(i)),this.wrapper.value=this.value,this.wrapper.__model=this,this.value=this.wrapper.get();break}}},t.prototype.addUnresolved=function(t,e){this.unresolvedByKey[t]||(this.unresolved.push(t),this.unresolvedByKey[t]=[]),this.unresolvedByKey[t].push(e)},t.prototype.clearUnresolveds=function(t){for(var e=this.unresolved.length;e--;){var n=this.unresolved[e];if(!t||n===t){for(var r=this.unresolvedByKey[n],i=this.has(n),o=r.length;o--;)i&&r[o].attemptResolution(),r[o].resolved&&r.splice(o,1);r.length||(this.unresolved.splice(e,1),this.unresolvedByKey[n]=null)}}},t.prototype.createBranch=function(t){var e=s(t)?[]:{};return this.set(e),e},t.prototype.discard=function(){var t=this;this.deps.forEach(function(e){e.boundsSensitive&&t.unregister(e)})},t.prototype.findMatches=function(t){var e=t.length,n=[this],r=void 0,o=void 0,s=function(){var e=t[o];"*"===e?(r=[],n.forEach(function(t){i(t.value)?(kl&&kl.parent===t&&"length"===kl.key&&r.push(kl),t.value.forEach(function(e,n){r.push(t.joinKey(n))})):(a(t.value)||"function"==typeof t.value)&&(Object.keys(t.value).forEach(function(e){r.push(t.joinKey(e))}),t.isRoot&&Object.keys(t.computations).forEach(function(e){r.push(t.joinKey(e))}))})):r=n.map(function(t){return t.joinKey(e)}),n=r};for(o=0;e>o;o+=1)s();return r},t.prototype.get=function(t){return t&&In(this),this.value},t.prototype.getIndexModel=function(t){var e=this.parent.indexModels;return"string"==typeof this.key&&void 0!==t?new _l(t):(e[this.key]||(e[this.key]=new _l(this.key)),e[this.key])},t.prototype.getKeyModel=function(){return new _l(this.key)},t.prototype.getKeypathModel=function(){return this.keypathModel||(this.keypathModel=new xl(this))},t.prototype.getKeypath=function(){return this.parent.isRoot?this.key:this.parent.getKeypath()+"."+this.key},t.prototype.has=function(t){return this.value&&Ol.call(this.value,t)},t.prototype.joinKey=function(e){if(void 0===e||""===e)return this;if(!this.childByKey.hasOwnProperty(e)){var n=new t(this,e);this.children.push(n),this.childByKey[e]=n}return this.childByKey[e]},t.prototype.joinAll=function(t){for(var e=this,n=0;n<t.length;n+=1)e=e.joinKey(t[n]);return e},t.prototype.mark=function(){var t=this.retrieve();o(t,this.value)||(this.value=t,this.children.forEach(D),this.deps.forEach(R),this.clearUnresolveds())},t.prototype.merge=function(t,e){var n=e?this.value.map(e):this.value,r=e?t.map(e):t,i=n.length,o={},s=0,a=n.map(function(t){var e=void 0,n=s;do{if(e=r.indexOf(t,n),-1===e)return-1;n=e+1}while(o[e]===!0&&i>n);return e===s&&(s+=1),o[e]=!0,e});this.parent.value[this.key]=t,this._merged=!0,this.shuffle(a)},t.prototype.register=function(t){this.deps.push(t)},t.prototype.registerTwowayBinding=function(t){this.bindings.push(t)},t.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},t.prototype.set=function(t){if(!o(t,this.value)){if(this.root.changes[this.getKeypath()]=t,this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key];else if(this.wrapper){var e=!this.wrapper.reset||this.wrapper.reset(t)===!1;e?(this.wrapper.teardown(),this.wrapper=null,this.parent.value[this.key]=this.value=t,this.adapt()):this.value=this.wrapper.get()}else{var n=this.parent.value||this.parent.createBranch(this.key);n[this.key]=t,this.value=t,this.adapt()}this.parent.clearUnresolveds(),this.clearUnresolveds();var r=kl;kl=this,this.children.forEach(D),this.deps.forEach(R);for(var i=this.parent;i;)i.deps.forEach(R),i=i.parent;kl=r}},t.prototype.shuffle=function(t){var e=this,n=[],r=0,i=void 0;for(t.forEach(function(t,i){if(t>r&&(r=t),~t){var o=e.indexModels[i];o&&(n[t]=o,t!==i&&o.rebind(t))}});i=this.childByKey[++r];)"function"==typeof i.discard&&i.discard();this.indexModels=n,this.deps.forEach(function(e){e.shuffle&&e.shuffle(t)}),this.updateKeypathDependants(),this.mark(),this.deps.forEach(function(t){t.shuffle||t.handleChange()})},t.prototype.teardown=function(){this.children.forEach(M),this.wrapper&&this.wrapper.teardown()},t.prototype.unregister=function(t){S(this.deps,t)},t.prototype.unregisterTwowayBinding=function(t){S(this.bindings,t)},t.prototype.updateFromBindings=function(t){for(var e=this.bindings.length;e--;){var n=this.bindings[e].getValue();n!==this.value&&this.set(n)}t&&this.children.forEach(Bn)},t.prototype.updateKeypathDependants=function(){this.children.forEach(Kn),this.keypathModel&&this.keypathModel.handleChange()},t}(),Al=function(t){function e(n,r,i){Wn(this,e),t.call(this,null,null),this.root=this.parent=n,this.signature=r,this.key=i,this.isReadonly=!this.signature.setter,this.context=n.computationContext,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.boundsSensitive=!0,this.dirty=!0}return zn(e,t),e.prototype.get=function(t){return t&&In(this),this.dirty&&(this.value=this.getValue(),this.adapt(),this.dirty=!1),this.value},e.prototype.getValue=function(){Fn();var t=void 0;try{t=this.signature.getter.call(this.context)}catch(e){f("Failed to compute "+this.getKeypath()+": "+(e.message||e)),console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var n=Un(this.signature.getterString),r=this.signature.getterUseStack?"\n\n"+$n(e.stack):"";console.error(e.name+": "+e.message+"\n\n"+n+r),console.groupCollapsed&&console.groupEnd()}var i=Nn();return this.setDependencies(i),t},e.prototype.handleChange=function(){this.dirty=!0,this.deps.forEach(R),this.children.forEach(D),this.clearUnresolveds()},e.prototype.init=function(){},e.prototype.mark=function(){this.handleChange()},e.prototype.register=function(t){this.deps.push(t)},e.prototype.set=function(t){if(!this.signature.setter)throw new Error("Cannot set read-only computed property '"+this.key+"'");this.signature.setter(t)},e.prototype.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var n=t[e];~this.dependencies.indexOf(n)||n.register(this)}this.dependencies=t},e.prototype.unregister=function(t){S(this.deps,t)},e}(jl),Sl=function(t){function e(n){qn(this,e),t.call(this,null,null),this.changes={},this.isRoot=!0,this.root=this,this.ractive=n.ractive,this.value=n.data,this.adaptors=n.adapt,this.adapt(),this.mappings={},this.computationContext=n.ractive,this.computations={}}return Qn(e,t),e.prototype.applyChanges=function(){return this._changeHash={},this.flush(),this._changeHash},e.prototype.compute=function(t,e){var n=new Al(this,e,t);return this.computations[t]=n,n},e.prototype.get=function(t){var e=this;t&&In(this);var n=r({},this.value);return Object.keys(this.mappings).forEach(function(t){n[t]=e.mappings[t].value}),Object.keys(this.computations).forEach(function(t){"@"!==t[0]&&(n[t]=e.computations[t].value)}),n},e.prototype.getKeypath=function(){return""},e.prototype.has=function(e){return e in this.mappings||e in this.computations||t.prototype.has.call(this,e)},e.prototype.joinKey=function(e){return this.mappings.hasOwnProperty(e)?this.mappings[e]:this.computations.hasOwnProperty(e)?this.computations[e]:t.prototype.joinKey.call(this,e)},e.prototype.map=function(t,e){this.mappings[t]=e},e.prototype.set=function(t){var e=this.wrapper;if(e){var n=!e.reset||e.reset(t)===!1;n&&(e.teardown(),this.wrapper=null,this.value=t,this.adapt())}else this.value=t,this.adapt();this.deps.forEach(R),this.children.forEach(D),this.clearUnresolveds()},e.prototype.retrieve=function(){return this.value},e.prototype.update=function(){},e.prototype.updateFromBindings=function(e){var n=this;t.prototype.updateFromBindings.call(this,e),e&&Object.keys(this.mappings).forEach(function(t){var r=n.mappings[t];r.updateFromBindings(e)})},e}(jl),Cl=/\$\{([^\}]+)\}/g,Tl=new Ks("construct"),Pl=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Fl=0,Nl=function(){function t(e){nr(this,t),this.hook=new Ks(e),this.inProcess={},this.queue={}}return t.prototype.begin=function(t){this.inProcess[t._guid]=!0},t.prototype.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?rr(this.queue,e).push(t):ir(this,t),delete this.inProcess[t._guid]},t}(),Il=new Ks("config"),Rl=new Nl("init"),Dl={},Ll=function(t){function e(n,r){var i=this;ar(this,e),t.call(this,n.ractive.viewmodel,null),this.fragment=n,this.template=r,this.isReadonly=!0,this.fn=sr(r.s,r.r.length),this.computation=null,this.resolvers=[],this.models=r.r.map(function(t,e){var r=xt(n,t);return r||!function(){var r=n.resolve(t,function(t){S(i.resolvers,r),i.models[e]=t,i.bubble()});i.resolvers.push(r)}(),r}),this.bubble()}return ur(e,t),e.prototype.bubble=function(){var t=this,e=this.fragment.ractive,n="@"+this.template.s.replace(/_(\d+)/g,function(e,n){if(n>=t.models.length)return e;var r=t.models[n];return r?r.getKeypath():"@undefined"}),r={getter:function(){var n=t.models.map(function(t){var n=t.get(!0);return"function"==typeof n?cr(n,e,e._guid):n});return t.fn.apply(e,n)},getterString:n},i=e.viewmodel.compute(n,r);i.init(),this.value=i.get(),this.computation&&this.computation.unregister(this),this.computation=i,i.register(this)},e.prototype.get=function(){return this.computation.get()},e.prototype.getKeypath=function(){return this.computation?this.computation.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.unbind=function(){this.resolvers.forEach(B)},e}(jl),Vl=function(t){function e(n,r){var i=this;hr(this,e),t.call(this,null,null),this.root=n.ractive.viewmodel,this.resolvers=[],this.base=Ml(n,r),this.base||!function(){var t=n.resolve(r.r,function(e){i.base=e,i.bubble(),S(i.resolvers,t)});i.resolvers.push(t)}();var o={handleChange:function(){return i.bubble()}};this.members=r.m.map(function(t,e){if("string"==typeof t)return{get:function(){return t}};var r=void 0;return t.t===Pu?(r=xt(n,t.n),r?r.register(o):!function(){var r=n.resolve(t.n,function(t){i.members[e]=t,t.register(o),i.bubble(),S(i.resolvers,r)});i.resolvers.push(r)}(),r):(r=new Ll(n,t),r.register(o),r)}),this.isUnresolved=!0,this.bubble()}return lr(e,t),e.prototype.bubble=function(){if(this.base){for(var t=this.members.length;t--;)if(!this.members[t]||void 0===this.members[t].get())return;this.isUnresolved=!1;var e=this.members.map(function(t){return t.get()}),n=this.base.joinAll(e);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=n,this.parent=n.parent,n.register(this),n.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange(),this.mark()}},e.prototype.forceResolution=function(){this.resolvers.forEach(function(t){return t.forceResolution()}),this.bubble()},e.prototype.get=function(){return this.model?this.model.get():void 0},e.prototype.getValue=function(){for(var t=this.bindings.length;t--;){var e=this.bindings[t].getValue();if(e!==this.value)return e}return this.value},e.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.set=function(t){if(!this.model)throw new Error("Unresolved reference expression. This should not happen!");this.model.set(t)},e.prototype.unbind=function(){this.resolvers.forEach(B)},e}(jl),Ml=pr,Bl=fr,Kl=new Ks("teardown"),Wl=function(t){function e(n,r){dr(this,e),t.call(this,n),this.type=bu;var i=ms(r.prototype);this.instance=i,this.name=n.template.e,this.parentFragment=n.parentFragment,this.complexMappings=[],this.liveQueries=[],i.el&&f("The <"+this.name+"> component has a default 'el' property; it has been disregarded");var o=n.template.p||{};"content"in o||(o.content=n.template.f||[]),this._partials=o,this.yielders={},Gn(this.instance,{partials:o});for(var s=n.parentFragment,a=void 0;s;){if(s.owner.type===wu){a=s.owner.container;break}s=s.parent}i.parent=this.parentFragment.ractive,i.container=a||null,i.root=i.parent.root,i.component=this,i._inlinePartials=o,this.template.v&&this.setupEvents()}return mr(e,t),e.prototype.bind=function(){var t=this,e=this.instance.viewmodel,n=e.value;this.template.a&&Object.keys(this.template.a).forEach(function(r){var o=t.template.a[r];if(0===o)e.joinKey(r).set(!0);else if("string"==typeof o){var s=lh(o);e.joinKey(r).set(s?s.value:o)}else if(i(o))if(1===o.length&&o[0].t===cu){var a=Ml(t.parentFragment,o[0]);a||(d("The "+r+"='{{"+o[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(r),a=t.parentFragment.findContext().joinKey(r)),e.map(r,a),void 0===a.get()&&r in n&&a.set(n[r])}else!function(){var n=new cf({owner:t,template:o}).bind(),i=e.joinKey(r);i.set(n.valueOf()),n.bubble=function(){cf.prototype.bubble.call(n),i.set(n.valueOf())},t.complexMappings.push(n)}()}),or(this.instance,{partials:this._partials},{indexRefs:this.instance.isolated?{}:this.parentFragment.indexRefs,keyRefs:this.instance.isolated?{}:this.parentFragment.keyRefs,cssIds:this.parentFragment.cssIds})},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},e.prototype.checkYielders=function(){var t=this;Object.keys(this.yielders).forEach(function(e){if(t.yielders[e].length>1)throw Ys.end(),new Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time")})},e.prototype.detach=function(){return this.instance.fragment.detach()},e.prototype.find=function(t){return this.instance.fragment.find(t)},e.prototype.findAll=function(t,e){this.instance.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t):void 0:this.instance},e.prototype.findAllComponents=function(t,e){e.test(this)&&(e.add(this.instance),e.live&&this.liveQueries.push(e)),this.instance.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.instance.fragment.firstNode()},e.prototype.rebind=function(){var t=this;this.complexMappings.forEach(V),this.liveQueries.forEach(gr),this.template.a&&!function(){var e=t.instance.viewmodel;Object.keys(t.template.a).forEach(function(n){var r=t.template.a[n];if(i(r)&&1===r.length&&r[0].t===cu){var o=Ml(t.parentFragment,r[0]);o||(d("The "+n+"='{{"+r[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(n),o=t.parentFragment.findContext().joinKey(n)),e.map(n,o)}})}(),this.instance.fragment.rebind(this.instance.viewmodel)},e.prototype.render=function(t){$a(this.instance,t,null),this.checkYielders(),Bl(this),this.rendered=!0},e.prototype.setupEvents=function(){var t=this;Object.keys(this.template.v).forEach(function(e){var n=t.template.v[e];"string"!=typeof n&&c("Components currently only support simple events - you cannot include arguments. Sorry!");var r=t.ractive;t.instance.on(e,function(){var t=void 0;arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments));var e=Array.prototype.slice.call(arguments);return vt(r,n,{event:t,args:e}),!1})})},e.prototype.toString=function(){return this.instance.toHTML()},e.prototype.unbind=function(){this.complexMappings.forEach(B);var t=this.instance;t.viewmodel.teardown(),t.fragment.unbind(),t._observers.forEach(I),vr(this),t.fragment.rendered&&t.el.__ractive_instances__&&S(t.el.__ractive_instances__,t),Kl.fire(t)},e.prototype.unrender=function(t){var e=this;this.shouldDestroy=t,this.instance.unrender(),this.liveQueries.forEach(function(t){return t.remove(e.instance)})},e.prototype.update=function(){this.instance.fragment.update(),this.checkYielders(),this.dirty=!1},e}(nl),zl=Wl,Ul=function(t){function e(){yr(this,e),t.apply(this,arguments)}return br(e,t),e.prototype.bind=function(){},e.prototype.render=function(){},e.prototype.teardown=function(){},e.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e.prototype.unbind=function(){},e.prototype.unrender=function(){},e}(nl),$l={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},ql=function(t){function e(n){Nr(this,e),t.call(this,n),this.name=n.name,this.element=n.element,this.parentFragment=n.element.parentFragment,this.ractive=this.parentFragment.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.value=null,i(n.template)?this.fragment=new cf({owner:this,template:n.template}):(this.value=n.template,0===this.value&&(this.value="")),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===cu&&this.fragment.items[0]}return Ir(e,t),e.prototype.bind=function(){this.fragment&&this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)},e.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""},e.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():Wc.test(this.name)?!0:this.value},e.prototype.rebind=function(){this.unbind(),this.bind()},e.prototype.render=function(){var t=this.element.node;if(this.node=t,!t.namespaceURI||t.namespaceURI===fs){var e=$l[this.name]||this.name;void 0!==t[e]&&(this.propertyName=e),(Wc.test(this.name)||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)}this.rendered=!0,this.updateDelegate=wr(this),this.updateDelegate()},e.prototype.toString=function(){var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator)return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(Wc.test(this.name))return t?this.name:"";if(null==t)return"";var e=n(this.getString()).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return e?this.name+'="'+e+'"':this.name}},e.prototype.unbind=function(){this.fragment&&this.fragment.unbind()},e.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.dirty=!1)},e}(nl),Ql=Go?ns("div"):null,Hl=function(t){function e(n){Rr(this,e),t.call(this,n),this.attributes=[],this.owner=n.owner,this.fragment=new cf({ractive:this.ractive,owner:this,template:[this.template]}),this.dirty=!1}return Dr(e,t),e.prototype.bind=function(){this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},e.prototype.rebind=function(){throw new Error("ConditionalAttribute$rebind is not yet implemented")},e.prototype.render=function(){this.node=this.owner.node,this.isSvg=this.node.namespaceURI===ds,this.rendered=!0,this.dirty=!0,this.update()},e.prototype.toString=function(){return this.fragment.toString()},e.prototype.unbind=function(){this.fragment.unbind()},e.prototype.unrender=function(){this.rendered=!1},e.prototype.update=function(){var t=this;this.dirty&&(this.fragment.update(),this.rendered&&!function(){var e=t.fragment.toString(),n=Lr(e,t.isSvg);t.attributes.filter(function(t){return Vr(n,t)}).forEach(function(e){t.node.removeAttribute(e.name)}),n.forEach(function(e){t.node.setAttribute(e.name,e.value)}),t.attributes=n}(),this.dirty=!1)},e}(nl),Zl={update:ks,teardown:ks},Yl=function(){function t(e,n){Mr(this,t),this.owner=e,this.template=n,this.parentFragment=e.parentFragment,this.ractive=e.ractive,this.dynamicName="object"==typeof n.n,this.dynamicArgs=!!n.d,this.dynamicName?this.nameFragment=new cf({owner:this,template:n.n}):this.name=n.n||n,this.dynamicArgs?this.argsFragment=new cf({owner:this,template:n.d}):this.args=n.a||[],this.node=null,this.intermediary=null}return t.prototype.bind=function(){this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString()),this.dynamicArgs&&this.argsFragment.bind()},t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},t.prototype.rebind=function(){this.dynamicName&&this.nameFragment.rebind(),this.dynamicArgs&&this.argsFragment.rebind()},t.prototype.render=function(){var t=m("decorators",this.ractive,this.name);if(!t)return Ts(this.name,"decorators"),void(this.intermediary=Zl);this.node=this.owner.node;var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;if(this.intermediary=t.apply(this.ractive,[this.node].concat(e)),!this.intermediary||!this.intermediary.teardown)throw new Error("The '"+this.name+"' decorator must return an object with a teardown method")},t.prototype.unbind=function(){this.dynamicName&&this.nameFragment.unbind(),this.dynamicArgs&&this.argsFragment.unbind()},t.prototype.unrender=function(){this.intermediary.teardown()},t.prototype.update=function(){if(this.dynamicName){var t=this.nameFragment.toString();t!==this.name&&(this.name=t,this.unrender(),this.render())}else if(this.intermediary.update){var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;this.intermediary.update.apply(this.ractive,e)}else this.unrender(),this.render()},t}(),Gl=function(){function t(e,n,r){Br(this,t),-1!==n.indexOf("*")&&c('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+n+'="..."/> is not valid'),this.owner=e,this.name=n,this.template=r,this.ractive=e.parentFragment.ractive,this.parentFragment=e.parentFragment,this.node=null}return t.prototype.bind=function(){for(var t=this,e=this.parentFragment;!e.context;)e=e.parent;this.context=e.context;var n=this.template;n.m?(this.method=n.m,this.resolvers=[],this.models=n.a.r.map(function(e,n){if(/^event(?:\.(.+))?$/.test(e))return{event:!0,keys:e.length>5?e.slice(6).split("."):[],unbind:ks};var r=xt(t.parentFragment,e);return r||!function(){var r=t.parentFragment.resolve(e,function(e){t.models[n]=e,S(t.resolvers,r)});t.resolvers.push(r)}(),r}),this.argsFn=sr(n.a.s,n.a.r.length)):(this.action="string"==typeof n?n:"string"==typeof n.n?n.n:new cf({owner:this,template:n.n}),this.args=n.a?"string"==typeof n.a?[n.a]:n.a:n.d?new cf({owner:this,template:n.d}):[]),this.template.n&&"string"!=typeof this.template.n&&this.action.bind(),this.template.d&&this.args.bind()},t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},t.prototype.fire=function(t){if(t.keypath=this.context.getKeypath(),t.context=this.context.get(),t.index=this.parentFragment.indexRefs,this.method){if("function"!=typeof this.ractive[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');var e=this.models.map(function(e){if(!e)return void 0;if(e.event){for(var n=t,r=e.keys.slice();r.length;)n=n[r.shift()];return n}return e.wrapper?e.wrapper.value:e.get()}),n=this.ractive.event;this.ractive.event=t;var r=this.argsFn.apply(null,e);this.ractive[this.method].apply(this.ractive,r),this.ractive.event=n}else{var i=this.action.toString(),r=this.template.d?this.args.getArgsList():this.args;t.name=i,vt(this.ractive,i,{event:t,args:r})}},t.prototype.rebind=function(){throw new Error("EventHandler$rebind not yet implemented!")},t.prototype.render=function(){var t=this;this.node=this.owner.node;var e=m("events",this.ractive,this.name);if(e){var n=function(e){return t.fire(e)};this.customHandler=e(this.node,n)}else"on"+this.name in this.node||Ts(this.name,"events"),this.node._ractive.events[this.name]=this,this.node.addEventListener(this.name,Kr,!1)},t.prototype.unbind=function(){var t=this.template;t.m?(this.resolvers.forEach(B),this.resolvers=[],this.models.forEach(function(t){
t&&t.unbind()})):(this.action.unbind&&this.action.unbind(),this.args.unbind&&this.args.unbind())},t.prototype.unrender=function(){this.customHandler?this.customHandler.teardown():(this.node.removeEventListener(this.name,Kr,!1),this.node._ractive.events[this.name]=null)},t.prototype.update=function(){this.method||(this.action.update&&this.action.update(),this.template.d&&this.args.update())},t}(),Jl=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Jo?(gl={},yl=ns("div").style,vl=function(t){var e,n,r;if(t=Jl(t),!gl[t])if(void 0!==yl[t])gl[t]=t;else for(r=t.charAt(0).toUpperCase()+t.substring(1),e=ps.length;e--;)if(n=ps[e],void 0!==yl[n+r]){gl[t]=n+r;break}return gl[t]}):vl=null;var Xl=vl,tp=void 0,ep="hidden";if(Go){var np=void 0;if(ep in Go)np="";else for(var rp=ps.length;rp--;){var ip=ps[rp];if(ep=ip+"Hidden",ep in Go){np=ip,Go.addEventListener(np+"visibilitychange",Wr),Wr();break}}void 0===np&&("onfocusout"in Go?(Go.addEventListener("focusout",zr),Go.addEventListener("focusin",Ur)):(Yo.addEventListener("pagehide",zr),Yo.addEventListener("blur",zr),Yo.addEventListener("pageshow",Ur),Yo.addEventListener("focus",Ur)),tp=!0)}var op=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(d(Ts(t.easing,"easing")),e=$r)):e="function"==typeof t.easing?t.easing:$r,this.easing=e,this.start=Ms(),this.end=this.start+this.duration,this.running=!0,Xs.add(this)};op.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var sp,ap,up,cp,hp,lp,pp,fp,dp=new RegExp("^-(?:"+ps.join("|")+")-"),mp=function(t){return t.replace(dp,"")},vp=new RegExp("^(?:"+ps.join("|")+")([A-Z])"),gp=function(t){var e;return t?(vp.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},yp={},bp={};Jo?(ap=ns("div").style,function(){void 0!==ap.transition?(up="transition",cp="transitionend",hp=!0):void 0!==ap.webkitTransition?(up="webkitTransition",cp="webkitTransitionEnd",hp=!0):hp=!1}(),up&&(lp=up+"Duration",pp=up+"Property",fp=up+"TimingFunction"),sp=function(t,e,n,r,i){setTimeout(function(){var o,s,a,u,c;u=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),i())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[pp]=r.map(Xl).map(gp).join(","),t.node.style[fp]=gp(n.easing||"linear"),t.node.style[lp]=n.duration/1e3+"s",c=function(e){var n;n=r.indexOf(Jl(mp(e.propertyName))),-1!==n&&r.splice(n,1),r.length||(t.node.removeEventListener(cp,c,!1),a=!0,u())},t.node.addEventListener(cp,c,!1),setTimeout(function(){for(var i,h,l,p,d,m=r.length,v=[];m--;)p=r[m],i=o+p,hp&&!bp[i]&&(t.node.style[Xl(p)]=e[p],yp[i]||(h=t.getStyle(p),yp[i]=t.getStyle(p)!=e[p],bp[i]=!yp[i],bp[i]&&(t.node.style[Xl(p)]=h))),(!hp||bp[i])&&(void 0===h&&(h=t.getStyle(p)),l=r.indexOf(p),-1===l?f("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):r.splice(l,1),d=/[^\d]*$/.exec(e[p])[0],v.push({name:Xl(p),interpolator:Ps(parseFloat(h),parseFloat(e[p])),suffix:d}));v.length?new op({root:t.root,duration:n.duration,easing:Jl(n.easing||""),step:function(e){var n,r;for(r=v.length;r--;)n=v[r],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,u()}}):s=!0,r.length||(t.node.removeEventListener(cp,c,!1),a=!0,u())},0)},n.delay||0)}):sp=null;var wp,Ep,_p=Yo&&(Yo.getComputedStyle||ys.getComputedStyle),xp=qs.resolve(),Op=function(){function t(e,n,r){Qr(this,t),this.owner=e,this.isIntro=r,this.ractive=e.ractive;var i=e.ractive,o=n.n||n;if("string"!=typeof o){var s=new cf({owner:e,template:o}).bind();if(o=s.toString(),s.unbind(),""===o)return}if(this.name=o,n.a)this.params=n.a;else if(n.d){var s=new cf({owner:e,template:n.d}).bind();this.params=s.getArgsList(),s.unbind()}this._fn=m("transitions",i,o),this._fn||d(Ts(o,"transition"),{ractive:i})}return t.prototype.animateStyle=function(t,e,n){var r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!tp)return this.setStyle(t,e),xp;var i=void 0;"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(d('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new qs(function(t){var e,o,s,a,u,c,h;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),o=[],s=_p(r.node),u={},c=e.length;c--;)h=e[c],a=s[Xl(h)],"0px"===a&&(a=0),a!=i[h]&&(o.push(h),r.node.style[Xl(h)]=a);return o.length?void sp(r,i,n,o,t):void t()});return o},t.prototype.getStyle=function(t){var e,n,r,o,s;if(e=_p(this.node),"string"==typeof t)return s=e[Xl(t)],"0px"===s&&(s=0),s;if(!i(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},r=t.length;r--;)o=t[r],s=e[Xl(o)],"0px"===s&&(s=0),n[o]=s;return n},t.prototype.processParams=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},e,t)},t.prototype.setStyle=function(t,e){var n;if("string"==typeof t)this.node.style[Xl(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[Xl(n)]=t[n]);return this},t.prototype.start=function(){var t,e,n,r=this;return t=this.node=this.owner.node,e=t.getAttribute("style"),this.complete=function(i){n||(!i&&r.isIntro&&qr(t,e),r._manager.remove(r),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()},t}(),kp=Hr,jp=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?"value":arguments[1];Zr(this,t),this.element=e,this.ractive=e.ractive,this.attribute=e.attributeByName[n];var r=this.attribute.interpolator;r.twowayBinding=this;var i=r.model;if(i){if(i.isUnresolved)i.forceResolution(),Gr("expression",this.ractive);else if(i.isReadonly){var o=i.getKeypath().replace(/^@/,"");return d("Cannot use two-way binding on <"+e.name+"> element: "+o+" is read-only. To suppress this warning use <"+e.name+" twoway='false'...>",{ractive:this.ractive}),!1}}else r.resolver.forceResolution(),i=r.model,Gr("'"+r.template.r+"' reference",this.ractive);this.attribute.isTwoway=!0,this.model=i;var s=i.get();void 0===s&&this.getInitialValue&&(s=this.getInitialValue(),i.set(s));var a=Yr(e);a&&(this.resetValue=s,a.formBindings.push(this))}return t.prototype.bind=function(){this.model.registerTwowayBinding(this)},t.prototype.handleChange=function(){var t=this;Ys.start(this.root),this.attribute.locked=!0,this.model.set(this.getValue()),Ys.scheduleTask(function(){return t.attribute.locked=!1}),Ys.end()},t.prototype.rebind=function(){this.unbind(),this.model=this.attribute.interpolator.model,this.bind()},t.prototype.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)},t.prototype.unrender=function(){},t}(),Ap=jp,Sp=function(t){function e(n){Xr(this,e),t.call(this,n,"checked")}return ti(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jr,!1),this.node.attachEvent&&this.node.addEventListener("click",Jr,!1)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jr,!1),this.node.removeEventListener("click",Jr,!1)},e.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")},e.prototype.getValue=function(){return this.node.checked},e}(Ap),Cp={},Tp=function(){function t(e,n){ei(this,t),this.model=e,this.getValue=n,this.bindings=[]}return t.prototype.add=function(t){this.bindings.push(t)},t.prototype.bind=function(){this.model.registerTwowayBinding(this),this.bound=!0},t.prototype.remove=function(t){S(this.bindings,t),this.bindings.length||this.unbind()},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1},t}(),Pp=[].push,Fp=function(t){function e(n){ri(this,e),t.call(this,n,"name");var r,i;this.checkboxName=!0,this.group=ni(this.ractive._guid,"checkboxes",this.model,ai),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(r=this.model.get(),i=this.element.getAttribute("value"),Pp.call(r,i))}return ii(e,t),e.prototype.bind=function(){this.group.bound||this.group.bind()},e.prototype.changed=function(){var t=!!this.isChecked;return this.isChecked=this.node.checked,this.isChecked===t},e.prototype.getInitialValue=function(){return this.noInitialValue=!0,[]},e.prototype.getValue=function(){return this.group.getValue()},e.prototype.handleChange=function(){this.isChecked=this.element.node.checked,t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node,n=this.model.get(),r=this.element.getAttribute("value");i(n)?this.isChecked=O(n,r):this.isChecked=n==r,e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.isChecked,e.addEventListener("change",Jr,!1),e.attachEvent&&e.addEventListener("click",Jr,!1)},e.prototype.unbind=function(){this.group.remove(this)},e.prototype.unrender=function(){var t=this.element.node;t.removeEventListener("change",Jr,!1),t.removeEventListener("click",Jr,!1)},e}(Ap),Np=function(t){function e(){ui(this,e),t.apply(this,arguments)}return ci(e,t),e.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.addEventListener("change",Jr,!1),e.addEventListener("blur",Jr,!1),this.ractive.lazy||(e.addEventListener("input",Jr,!1),e.attachEvent&&e.addEventListener("keyup",Jr,!1))},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("blur",Jr,!1),t.removeEventListener("change",Jr,!1),t.removeEventListener("input",Jr,!1),t.removeEventListener("keyup",Jr,!1)},e.prototype.getValue=function(){return this.element.node.innerHTML},e}(Ap),Ip=function(t){function e(){hi(this,e),t.apply(this,arguments)}return li(e,t),e}(Ap),Rp=function(t){function e(){pi(this,e),t.apply(this,arguments)}return fi(e,t),e.prototype.getInitialValue=function(){return""},e.prototype.getValue=function(){return this.node.value},e.prototype.render=function(){t.prototype.render.call(this);var e=this.ractive.lazy,n=!1;this.element.template.a&&"lazy"in this.element.template.a&&(e=this.element.template.a.lazy,0===e&&(e=!0)),"false"===e&&(e=!1),s(e)&&(n=+e,e=!1),this.handler=n?mi(n):Jr;var r=this.node;r.addEventListener("change",Jr,!1),e||(r.addEventListener("input",this.handler,!1),r.attachEvent&&r.addEventListener("keyup",this.handler,!1)),r.addEventListener("blur",di,!1)},e.prototype.unrender=function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Jr,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",di,!1)},e}(Ap),Dp=function(t){function e(){vi(this,e),t.apply(this,arguments)}return gi(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Ys.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.prototype.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],r=0;e>r;r+=1){var i=t[r];if(i.selected){var o=i._ractive?i._ractive.value:i.value;n.push(o)}}return n},e.prototype.handleChange=function(){var e=this.attribute,n=e.getValue(),r=this.getValue();return void 0!==n&&k(r,n)||t.prototype.handleChange.call(this),this},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jr,!1),void 0===this.model.get()&&this.handleChange()},e.prototype.setValue=function(){throw new Error("TODO not implemented yet")},e.prototype.unrender=function(){this.node.removeEventListener("change",Jr,!1)},e.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)},e}(Ap),Lp=function(t){function e(){yi(this,e),t.apply(this,arguments)}return bi(e,t),e.prototype.getInitialValue=function(){return void 0},e.prototype.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},e}(Ap),Vp={},Mp=function(t){function e(n){wi(this,e),t.call(this,n,"checked"),this.siblings=_i(this.ractive._guid+this.element.getAttribute("name")),this.siblings.push(this)}return Ei(e,t),e.prototype.getValue=function(){return this.node.checked},e.prototype.handleChange=function(){Ys.start(this.root),this.siblings.forEach(function(t){t.model.set(t.getValue())}),Ys.end()},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jr,!1),this.node.attachEvent&&this.node.addEventListener("click",Jr,!1)},e.prototype.unbind=function(){S(this.siblings,this)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jr,!1),this.node.removeEventListener("click",Jr,!1)},e}(Ap),Bp=function(t){function e(n){xi(this,e),t.call(this,n,"name"),this.group=ni(this.ractive._guid,"radioname",this.model,ki),this.group.add(this)}return Oi(e,t),e.prototype.bind=function(){var t=this;this.group.bound||this.group.bind(),this.nameAttributeBinding={handleChange:function(){return t.node.name="{{"+t.model.getKeypath()+"}}"}},this.model.getKeypathModel().register(this.nameAttributeBinding)},e.prototype.getInitialValue=function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},e.prototype.getValue=function(){return this.element.getAttribute("value")},e.prototype.handleChange=function(){this.node.checked&&t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.model.get()==this.element.getAttribute("value"),e.addEventListener("change",Jr,!1),e.attachEvent&&e.addEventListener("click",Jr,!1)},e.prototype.unbind=function(){this.group.remove(this),this.model.getKeypathModel().unregister(this.nameAttributeBinding)},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("change",Jr,!1),t.removeEventListener("click",Jr,!1)},e}(Ap),Kp=function(t){function e(){ji(this,e),t.apply(this,arguments)}return Ai(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Ys.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n=void 0,r=void 0,i=e;i--;){var o=t[i];if(o.getAttribute("selected")){o.getAttribute("disabled")||(n=o.getAttribute("value")),r=!0;break}}if(!r)for(;++i<e;)if(!t[i].getAttribute("disabled")){n=t[i].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},e.prototype.getValue=function(){var t,e,n,r,i;for(t=this.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected&&!t[e].disabled)return i=r._ractive?r._ractive.value:r.value},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jr,!1)},e.prototype.setValue=function(t){this.model.set(t)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jr,!1)},e}(Ap),Wp=function(t){function e(n){var r=this;Ti(this,e),t.call(this,n),this.liveQueries=[],this.name=n.template.e.toLowerCase(),this.isVoid=zc.test(this.name);for(var i=this.parentFragment;i;){if(i.owner.type===du){this.parent=i.owner;break}i=i.parent}this.attributeByName={},this.attributes=[],this.template.a&&(Object.keys(this.template.a).forEach(function(t){if("twoway"!==t&&"lazy"!==t){var e=new ql({name:t,element:r,parentFragment:r.parentFragment,template:r.template.a[t]});r.attributeByName[t]=e,"value"!==t&&"type"!==t&&r.attributes.push(e)}}),this.attributeByName.type&&this.attributes.unshift(this.attributeByName.type),this.attributeByName.value&&this.attributes.push(this.attributeByName.value)),this.conditionalAttributes=(this.template.m||[]).map(function(t){return new Hl({owner:r,parentFragment:r.parentFragment,template:t})}),this.template.o&&(this.decorator=new Yl(this,this.template.o)),this.eventHandlers=[],this.template.v&&Object.keys(this.template.v).forEach(function(t){var e=t.split("-"),n=r.template.v[t];e.forEach(function(t){r.eventHandlers.push(new Gl(r,t,n))})}),n.template.f&&(this.fragment=new cf({template:n.template.f,owner:this,cssIds:null})),this.binding=null}return Pi(e,t),e.prototype.bind=function(){this.attributes.forEach(N),this.conditionalAttributes.forEach(N),this.eventHandlers.forEach(N),this.decorator&&this.decorator.bind(),this.fragment&&this.fragment.bind(),(this.binding=this.createTwowayBinding())&&this.binding.bind()},e.prototype.createTwowayBinding=function(){var t=this.template.a;if(!t)return null;var e="twoway"in t?0===t.twoway||"true"===t.twoway:this.ractive.twoway;if(!e)return null;var n=Ci(this);if(!n)return null;var r=new n(this);return r&&r.model?r:null},e.prototype.detach=function(){this.decorator&&this.decorator.unrender();var t=this.node.parentNode;return t&&t.removeChild(this.node),this.node},e.prototype.find=function(t){return rs(this.node,t)?this.node:this.fragment?this.fragment.find(t):void 0},e.prototype.findAll=function(t,e){var n=e.test(this.node);n&&(e.add(this.node),e.live&&this.liveQueries.push(e)),this.fragment&&this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},e.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},e.prototype.findNextNode=function(){return null},e.prototype.firstNode=function(){return this.node},e.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():void 0},e.prototype.rebind=function(){this.attributes.forEach(V),this.conditionalAttributes.forEach(V),this.decorator&&this.decorator.rebind(),this.fragment&&this.fragment.rebind(),this.binding&&this.binding.rebind(),this.liveQueries.forEach(Fi)},e.prototype.render=function(t){var e=this;this.namespace=Di(this);var n=ns(this.template.e,this.namespace);this.node=n;var r=this.parentFragment.findContext();vs(n,"_ractive",{value:{proxy:this,ractive:this.ractive,fragment:this.parentFragment,events:{},context:r,keypath:r.getKeypath()}}),this.parentFragment.cssIds&&n.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.fragment&&this.fragment.render(n),this.attributes.forEach(L),this.conditionalAttributes.forEach(L),this.decorator&&Ys.scheduleTask(function(){return e.decorator.render()},!0),this.binding&&this.binding.render(),this.eventHandlers.forEach(L),kp(this);var i=this.template.t0||this.template.t1;if(i&&this.ractive.transitionsEnabled){var o=new Op(this,i,!0);Ys.registerTransition(o),this._introTransition=o}t.appendChild(n),this.rendered=!0},e.prototype.toString=function(){var t=this.template.e,e=this.attributes.map(Ii).join("")+this.conditionalAttributes.map(Ii).join("");"option"===this.name&&this.isSelected()&&(e+=" selected"),"input"===this.name&&Ni(this)&&(e+=" checked");var n="<"+t+e+">";return this.isVoid?n:("textarea"===this.name&&void 0!==this.getAttribute("value")?n+=Re(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(n+=this.getAttribute("value")||""),this.fragment&&(n+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),n+="</"+t+">")},e.prototype.unbind=function(){this.attributes.forEach(B),this.conditionalAttributes.forEach(B),this.decorator&&this.decorator.unbind(),this.fragment&&this.fragment.unbind()},e.prototype.unrender=function(t){if(this.rendered){this.rendered=!1;var e=this._introTransition;e&&e.complete(),"option"===this.name?this.detach():t&&Ys.detachWhenReady(this),this.fragment&&this.fragment.unrender(),this.eventHandlers.forEach(K),this.binding&&this.binding.unrender(),!t&&this.decorator&&this.decorator.unrender();var n=this.template.t0||this.template.t2;if(n&&this.ractive.transitionsEnabled){var r=new Op(this,n,!1);Ys.registerTransition(r)}var i=this.attributeByName.id;i&&delete this.ractive.nodes[i.getValue()],Ri(this)}},e.prototype.update=function(){this.dirty&&(this.attributes.forEach(z),this.conditionalAttributes.forEach(z),this.eventHandlers.forEach(z),this.decorator&&this.decorator.update(),this.fragment&&this.fragment.update(),this.dirty=!1)},e}(nl),zp=function(t){function e(n){Li(this,e),t.call(this,n),this.formBindings=[]}return Vi(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.addEventListener("reset",Mi,!1)},e.prototype.unrender=function(){this.node.removeEventListener("reset",Mi,!1)},e}(Wp),Up=function(t){function e(n){Ki(this,e),t.call(this,n),this.parentFragment=n.parentFragment,this.template=n.template,this.index=n.index,this.isStatic=!!n.template.s,this.model=null,this.dirty=!1}return Wi(e,t),e.prototype.bind=function(){var t=this,e=Ml(this.parentFragment,this.template),n=e?e.get():void 0;return this.isStatic?void(this.model={get:function(){return n}}):void(e?(e.register(this),this.model=e):this.resolver=this.parentFragment.resolve(this.template.r,function(e){t.model=e,e.register(t),t.handleChange(),t.resolver=null}))},e.prototype.handleChange=function(){this.bubble()},e.prototype.rebind=function(){if(!this.isStatic&&this.model){var t=Ml(this.parentFragment,this.template);if(t!==this.model){var e=this.model.get();this.model.unregister(this),t.register(this),this.model=t,t.get()!==e&&this.handleChange()}}},e.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.resolver&&this.resolver.unbind())},e}(nl),$p=function(t){function e(){zi(this,e),t.apply(this,arguments)}return Ui(e,t),e.prototype.detach=function(){return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.getString=function(){return this.model?n(this.model.get()):""},e.prototype.render=function(t){this.rendered=!0,this.node=Go.createTextNode(this.getString()),t.appendChild(this.node)},e.prototype.toString=function(t){var e=this.getString();return t?Re(e):e},e.prototype.unrender=function(t){t&&this.detach(),this.rendered=!1},e.prototype.update=function(){this.dirty&&(this.rendered&&(this.node.data=this.getString()),this.dirty=!1)},e.prototype.valueOf=function(){return this.model?this.model.get():void 0},e}(Up),qp=function(t){function e(){$i(this,e),t.apply(this,arguments)}return qi(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.defaultValue=this.node.value},e}(Wp),Qp=function(t){function e(n){Qi(this,e);var r=n.template;r.a||(r.a={}),void 0!==r.a.value||"disabled"in r||(r.a.value=r.f),t.call(this,n),this.select=Zi(this.parent)}return Hi(e,t),e.prototype.bind=function(){if(!this.select)return void t.prototype.bind.call(this);var e=this.attributeByName.selected;if(e&&void 0!==this.select.getAttribute("value")){var n=this.attributes.indexOf(e);this.attributes.splice(n,1),delete this.attributeByName.selected}t.prototype.bind.call(this),this.select.options.push(this)},e.prototype.isSelected=function(){var t=this.getAttribute("value");if(void 0===t||!this.select)return!1;var e=this.select.getAttribute("value");if(e==t)return!0;if(this.select.getAttribute("multiple")&&i(e))for(var n=e.length;n--;)if(e[n]==t)return!0},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.select&&S(this.select.options,this)},e}(Wp),Hp=function(t){function e(){eo(this,e),t.apply(this,arguments)}return no(e,t),e.prototype.bind=function(){t.prototype.bind.call(this);var e=this.template.r?Yi(this.ractive,this.template.r,this.parentFragment)||null:null;e?(this.named=!0,this.setTemplate(this.template.r,e)):this.model&&"string"==typeof this.model.get()||!this.template.r?this.setTemplate(this.model.get()):this.setTemplate(this.template.r,e),this.fragment=new cf({owner:this,template:this.partialTemplate}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.forceResetTemplate=function(){this.partialTemplate=Yi(this.ractive,this.name,this.parentFragment),this.partialTemplate||(d("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]),this.fragment.resetTemplate(this.partialTemplate),this.bubble()},e.prototype.rebind=function(){t.prototype.unbind.call(this),t.prototype.bind.call(this),this.fragment.rebind()},e.prototype.render=function(t){this.fragment.render(t)},e.prototype.setTemplate=function(t,e){this.name=t,e||null===e||(e=Yi(this.ractive,t,this.parentFragment)),e||d("Could not find template for partial '"+t+"'"),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.fragment.unbind()},e.prototype.unrender=function(t){this.fragment.unrender(t)},e.prototype.update=function(){this.dirty&&(this.named||this.model&&"string"==typeof this.model.get()&&this.model.get()!==this.name&&(this.setTemplate(this.model.get()),this.fragment.resetTemplate(this.partialTemplate)),this.fragment.update(),this.dirty=!1)},e}(Up),Zp=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Yp=function(){function e(t){ro(this,e),this.parent=t.owner.parentFragment,this.parentFragment=this,this.owner=t.owner,this.ractive=this.parent.ractive,this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.indexByKey=null}return e.prototype.bind=function(t){var e=this;this.context=t;var n=t.get();if(i(n)){this.iterations=[];for(var r=0;r<n.length;r+=1)this.iterations[r]=this.createIteration(r,r)}else if(a(n)){if(this.indexRef){var o=this.indexRef.split(","),s=Zp(o,2),u=s[0],c=s[1];this.keyRef=u,this.indexRef=c}this.indexByKey={},this.iterations=Object.keys(n).map(function(t,n){return e.indexByKey[t]=n,e.createIteration(t,n)})}return this},e.prototype.bubble=function(){this.owner.bubble()},e.prototype.createIteration=function(t,e){var n=this.owner.parentFragment,r=io(this.keyRef,t,n.keyRefs),i=io(this.indexRef,e,n.indexRefs),o=new cf({owner:this,template:this.template,indexRefs:i,keyRefs:r});o.key=t,o.index=e,o.isIteration=!0;var s=this.context.joinKey(t);return o.bind(s)},e.prototype.detach=function(){var e=t();return this.iterations.forEach(function(t){return e.appendChild(t.detach())}),e},e.prototype.find=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var r=this.iterations[n].find(t);if(r)return r}},e.prototype.findAll=function(t,e){var n=this.iterations.length,r=void 0;for(r=0;n>r;r+=1)this.iterations[r].findAll(t,e)},e.prototype.findComponent=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var r=this.iterations[n].findComponent(t);if(r)return r}},e.prototype.findAllComponents=function(t,e){var n=this.iterations.length,r=void 0;for(r=0;n>r;r+=1)this.iterations[r].findAllComponents(t,e)},e.prototype.findNextNode=function(t){return t.index<this.iterations.length-1?this.iterations[t.index+1].firstNode():this.owner.findNextNode()},e.prototype.firstNode=function(){return this.iterations[0]?this.iterations[0].firstNode():null},e.prototype.rebind=function(t){this.context=t,i(t.get())&&this.iterations.forEach(function(e,n){e.rebind(t.joinKey(n))})},e.prototype.render=function(t){this.iterations&&this.iterations.forEach(function(e){return e.render(t)}),this.rendered=!0},e.prototype.shuffle=function(t){var e=this;if(this.pendingNewIndices)throw new Error("Section was already shuffled!");this.pendingNewIndices=t,this.previousIterations=this.iterations.slice();var n=[];t.forEach(function(t,r){if(-1!==t){var i=e.iterations[r];n[t]=i,t!==r&&(i.dirty=!0)}}),this.iterations=n,this.bubble()},e.prototype.toString=function(t){return this.iterations?this.iterations.map(t?$:U).join(""):""},e.prototype.unbind=function(){return this.iterations.forEach(B),this},e.prototype.unrender=function(t){this.iterations.forEach(t?W:K),this.rendered=!1},e.prototype.update=function(){var e=this;if(this.pendingNewIndices)return void this.updatePostShuffle();var n=this.context.get(),r=void 0,o=void 0;if(i(n))this.iterations.length>n.length&&(r=this.iterations.splice(n.length));else if(a(n)){r=[],o={};for(var s=this.iterations.length;s--;){var u=this.iterations[s];u.key in n?o[u.key]=!0:(this.iterations.splice(s,1),r.push(u))}}else r=this.iterations,this.iterations=[];r&&r.forEach(function(t){t.unbind(),t.unrender(!0)}),this.iterations.forEach(z);var c=i(n)?n.length:a(n)?Object.keys(n).length:0;c>this.iterations.length&&!function(){var r=e.rendered?t():null,s=e.iterations.length;if(i(n))for(;s<n.length;){var u=e.createIteration(s,s);e.iterations.push(u),e.rendered&&u.render(r),s+=1}else a(n)&&Object.keys(n).forEach(function(t){if(!(t in o)){var n=e.createIteration(t,s);e.iterations.push(n),e.rendered&&n.render(r),s+=1}});if(e.rendered){var c=e.parent.findParentNode(),h=e.parent.findNextNode(e);c.insertBefore(r,h)}}()},e.prototype.updatePostShuffle=function(){var e=this,n=this.pendingNewIndices,r=-1,i=null;n.forEach(function(t,n){var o=e.previousIterations[n];-1===t?o.unbind().unrender(!0):(o.index=t,o.rebind(e.context.joinKey(t)),null===i&&t!==r+1&&(i=n)),r=t});var o=this.rendered?t():null,s=this.rendered?this.parent.findParentNode():null,a=this.context.get().length,u=void 0;for(u=0;a>u;u+=1){var c=this.iterations[u];this.rendered&&(c?null!==i&&u>=i?o.appendChild(c.detach()):o.childNodes.length&&s.insertBefore(o,c.firstNode()):(this.iterations[u]=this.createIteration(u,u),this.iterations[u].render(o))),this.rendered||c||(this.iterations[u]=this.createIteration(u,u))}this.rendered&&o.childNodes.length&&s.insertBefore(o,this.owner.findNextNode()),this.iterations.forEach(z),this.pendingNewIndices=null},e}(),Gp=function(e){function n(t){oo(this,n),e.call(this,t),this.sectionType=t.template.n||null,this.fragment=null}return so(n,e),n.prototype.bind=function(){if(e.prototype.bind.call(this),this.model){var t=this.model.value,n=void 0;if(this.sectionType||(this.sectionType=uo(t,this.template.i)),ao(t)&&this.sectionType!==Wu)return void(this.sectionType===Bu&&(this.fragment=new cf({owner:this,template:this.template.f}).bind()));if(this.sectionType===Bu)return;n=this.sectionType===Mu?new cf({owner:this,template:this.template.f}).bind():this.sectionType===Wu||this.sectionType===zu?new cf({owner:this,template:this.template.f}).bind(this.model):new Yp({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model),this.fragment=n}},n.prototype.detach=function(){return this.fragment?this.fragment.detach():t()},n.prototype.find=function(t){return this.fragment?this.fragment.find(t):void 0},n.prototype.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},n.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},n.prototype.findAllComponents=function(t,e){
this.fragment&&this.fragment.findAllComponents(t,e)},n.prototype.firstNode=function(){return this.fragment&&this.fragment.firstNode()},n.prototype.rebind=function(){e.prototype.rebind.call(this),this.fragment&&this.fragment.rebind(this.sectionType===Mu?null:this.model)},n.prototype.render=function(t){this.rendered=!0,this.fragment&&this.fragment.render(t)},n.prototype.shuffle=function(t){this.fragment&&this.sectionType===Ku&&this.fragment.shuffle(t)},n.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},n.prototype.unbind=function(){e.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},n.prototype.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},n.prototype.update=function(){if(this.dirty&&this.model){var e=this.model.value;null===this.sectionType&&(this.sectionType=uo(e,this.template.i));var n=void 0;if(this.sectionType===Ku)this.fragment?this.fragment.update():n=new Yp({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model);else if(this.sectionType===Wu)this.fragment?this.fragment.update():n=new cf({owner:this,template:this.template.f}).bind(this.model);else if(this.sectionType===zu)this.fragment?ao(e)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update():ao(e)||(n=new cf({owner:this,template:this.template.f}).bind(this.model));else{var r=this.sectionType===Bu?ao(e):!!e;this.fragment?r?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):r&&(n=new cf({owner:this,template:this.template.f}).bind(null))}if(n){if(this.rendered){var i=this.parentFragment.findParentNode(),o=this.parentFragment.findNextNode(this);if(o){var s=t();n.render(s),o.parentNode.insertBefore(s,o)}else n.render(i)}this.fragment=n}this.dirty=!1}},n}(Up),Jp=function(t){function e(n){co(this,e),t.call(this,n),this.options=[]}return ho(e,t),e.prototype.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&Ys.scheduleTask(function(){t.sync(),t.dirty=!1}),this.parentFragment.bubble())},e.prototype.render=function(e){t.prototype.render.call(this,e),this.sync();for(var n=this.node,r=n.options.length;r--;)n.options[r].defaultSelected=n.options[r].selected;this.rendered=!0},e.prototype.sync=function(){var t=this.node;if(t){var e=C(t.options),n=this.getAttribute("value"),r=this.getAttribute("multiple");if(void 0!==n){var i=void 0;e.forEach(function(t){var e=t._ractive?t._ractive.value:t.value,o=r?lo(n,e):n==e;o&&(i=!0),t.selected=o}),i||r||(e[0]&&(e[0].selected=!0),this.binding&&this.binding.forceUpdate())}else this.binding&&this.binding.forceUpdate()}},e.prototype.update=function(){t.prototype.update.call(this),this.sync()},e}(Wp),Xp=function(t){function e(n){po(this,e),t.call(this,n),this.type=uu}return fo(e,t),e.prototype.bind=function(){},e.prototype.detach=function(){if(!this.node.parentNode)throw new Error("TODO an unexpected situation arose");return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.rebind=function(){},e.prototype.render=function(t){this.node=Go.createTextNode(this.template),t.appendChild(this.node),this.rendered=!0},e.prototype.toString=function(t){return t?Re(this.template):this.template},e.prototype.unbind=function(){},e.prototype.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},e.prototype.update=function(){},e.prototype.valueOf=function(){return this.template},e}(nl),tf={};try{ns("table").innerHTML="foo"}catch(bs){wp=!0,Ep={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var ef,nf=function(t,e,n){var r,i,o,s,a,u=[];if(null!=t&&""!==t){for(wp&&(i=Ep[e.tagName])?(r=mo("DIV"),r.innerHTML=i[0]+t+i[1],r=r.querySelector(".x"),"SELECT"===r.tagName&&(o=r.options[r.selectedIndex])):e.namespaceURI===ds?(r=mo("DIV"),r.innerHTML='<svg class="x">'+t+"</svg>",r=r.querySelector(".x")):(r=mo(e.tagName),r.innerHTML=t,"SELECT"===r.tagName&&(o=r.options[r.selectedIndex]));s=r.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1)}return u},rf=function(e){function n(t){vo(this,n),e.call(this,t)}return go(n,e),n.prototype.detach=function(){var e=t();return this.nodes.forEach(function(t){return e.appendChild(t)}),e},n.prototype.find=function(t){var e=this.nodes.length,n=void 0;for(n=0;e>n;n+=1){var r=this.nodes[n];if(1===r.nodeType){if(rs(r,t))return r;var i=r.querySelector(t);if(i)return i}}return null},n.prototype.findAll=function(t,e){var n=this.nodes.length,r=void 0;for(r=0;n>r;r+=1){var i=this.nodes[r];if(1===i.nodeType){e.test(i)&&e.add(i);var o=i.querySelectorAll(t);if(o){var s=o.length,a=void 0;for(a=0;s>a;a+=1)e.add(o[a])}}}},n.prototype.findComponent=function(){return null},n.prototype.firstNode=function(){return this.nodes[0]},n.prototype.render=function(t){var e=this.model?this.model.get():"";this.nodes=nf(e,this.parentFragment.findParentNode(),t),this.rendered=!0},n.prototype.toString=function(){return this.model&&null!=this.model.get()?Ie(""+this.model.get()):""},n.prototype.unrender=function(){this.nodes&&this.nodes.forEach(function(t){return t.parentNode.removeChild(t)}),this.rendered=!1},n.prototype.update=function(){if(this.rendered&&this.dirty){this.unrender();var e=t();this.render(e);var n=this.parentFragment.findParentNode(),r=this.parentFragment.findNextNode(this);n.insertBefore(e,r),this.dirty=!1}},n}(Up),of=function(t){function e(n){yo(this,e),t.call(this,n),this.container=n.parentFragment.ractive,this.component=this.container.component,this.containerFragment=n.parentFragment,this.parentFragment=this.component.parentFragment,this.name=n.template.n||""}return bo(e,t),e.prototype.bind=function(){var t=this.name;(this.component.yielders[t]||(this.component.yielders[t]=[])).push(this);var e=this.container._inlinePartials[t||"content"];"string"==typeof e&&(e=rn(e).t),e||(f('Could not find template for partial "'+t+'"',{ractive:this.ractive}),e=[]),this.fragment=new cf({owner:this,ractive:this.container.parent,template:e}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.find(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.rebind=function(){throw new Error("Yielder$rebind is not yet implemented!")},e.prototype.render=function(t){return this.fragment.render(t)},e.prototype.setTemplate=function(t){var e=this.parentFragment.ractive.partials[t];"string"==typeof e&&(e=rn(e).t),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){this.fragment.unbind(),S(this.component.yielders[this.name],this)},e.prototype.unrender=function(t){this.fragment.unrender(t)},e}(nl),sf=(ef={},Eo(ef,_u,Ul),Eo(ef,cu,$p),Eo(ef,mu,Hp),Eo(ef,lu,Gp),Eo(ef,hu,rf),Eo(ef,wu,of),ef),af={doctype:Ul,form:zp,input:qp,option:Qp,select:Jp,textarea:qp},uf=function(){function t(e,n,r){for(xo(this,t),this.fragment=e,this.reference=y(n),this.callback=r,this.keys=n.split("."),this.resolved=!1;e;)e.context&&e.context.addUnresolved(this.keys[0],this),e=e.componentParent||e.parent}return t.prototype.attemptResolution=function(){if(!this.resolved){var t=_t(this.fragment,this.reference);t&&(this.resolved=!0,this.callback(t))}},t.prototype.forceResolution=function(){if(!this.resolved){var t=this.fragment.findContext().joinAll(this.keys);this.callback(t),this.resolved=!0}},t.prototype.unbind=function(){S(this.fragment.unresolved,this)},t}(),cf=function(){function e(t){ko(this,e),this.owner=t.owner,this.isRoot=!t.owner.parentFragment,this.parent=this.isRoot?null:this.owner.parentFragment,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null,this.context=null,this.rendered=!1,this.indexRefs=t.indexRefs||(this.parent?this.parent.indexRefs:[]),this.keyRefs=t.keyRefs||(this.parent?this.parent.keyRefs:{}),this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.resolvers=[],this.dirty=!1,this.dirtyArgs=this.dirtyValue=!0,this.template=t.template||[],this.createItems()}return e.prototype.bind=function(t){return this.context=t,this.items.forEach(N),this.bound=!0,this.dirty&&this.update(),this},e.prototype.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&Ys.addFragment(this):this.owner.bubble())},e.prototype.createItems=function(){var t=this;this.items=this.template.map(function(e,n){return _o({parentFragment:t,template:e,index:n})})},e.prototype.detach=function(){var e=t();return this.items.forEach(function(t){return e.appendChild(t.detach())}),e},e.prototype.find=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var r=this.items[n].find(t);if(r)return r}},e.prototype.findAll=function(t,e){if(this.items){var n=this.items.length,r=void 0;for(r=0;n>r;r+=1){var i=this.items[r];i.findAll&&i.findAll(t,e)}}return e},e.prototype.findComponent=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var r=this.items[n].findComponent(t);if(r)return r}},e.prototype.findAllComponents=function(t,e){if(this.items){var n=this.items.length,r=void 0;for(r=0;n>r;r+=1){var i=this.items[r];i.findAllComponents&&i.findAllComponents(t,e)}}return e},e.prototype.findContext=function(){for(var t=this;!t.context;)t=t.parent;return t.context},e.prototype.findNextNode=function(t){var e=this.items[t.index+1];return e?e.firstNode():this.isRoot?this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null:this.owner.findNextNode(this)},e.prototype.findParentNode=function(){var t=this;do{if(t.owner.type===du)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el;t=t.componentParent||t.parent}while(t);throw new Error("Could not find parent node")},e.prototype.findRepeatingFragment=function(){for(var t=this;t.parent&&!t.isIteration;)t=t.parent||t.componentParent;return t},e.prototype.firstNode=function(){return this.items[0]?this.items[0].firstNode():this.parent.findNextNode(this.owner)},e.prototype.getArgsList=function(){if(this.dirtyArgs){var t={},e=Oo(this.items,t,this.ractive._guid),n=lh("["+e+"]",t);this.argsList=n?n.value:[this.toString()],this.dirtyArgs=!1}return this.argsList},e.prototype.rebind=function(t){this.context=t,this.items.forEach(V)},e.prototype.render=function(t){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0,this.items.forEach(function(e){return e.render(t)})},e.prototype.resetTemplate=function(e){var n=this.bound,r=this.rendered;if(n&&(r&&this.unrender(!0),this.unbind()),this.template=e,this.createItems(),n&&(this.bind(this.context),r)){var i=this.findParentNode(),o=this.parent?this.parent.findNextNode(this.owner):null;if(o){var s=t();this.render(s),i.insertBefore(s,o)}else this.render(i)}},e.prototype.resolve=function(t,e){if(!this.context)return this.parent.resolve(t,e);var n=new uf(this,t,e);return this.resolvers.push(n),n},e.prototype.toHtml=function(){return this.toString()},e.prototype.toString=function(t){return this.items.map(t?$:U).join("")},e.prototype.unbind=function(){return this.items.forEach(B),this.bound=!1,this},e.prototype.unrender=function(t){this.items.forEach(t?jo:K),this.rendered=!1},e.prototype.update=function(){this.dirty&&(this.items.forEach(z),this.dirty=!1)},e.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var t={},e=Oo(this.items,t,this.ractive._guid),n=lh(e,t);this.value=n?n.value:this.toString(),this.dirtyValue=!1}return this.value},e}(),hf=Ao,lf=Da("reverse"),pf=So,ff=Da("shift"),df=Da("sort"),mf=Da("splice"),vf=To,gf=Po,yf=new Ks("teardown"),bf=No,wf=Io,Ef=Ro,_f=new Ks("unrender"),xf=Da("unshift"),Of=Do,kf=new Ks("update"),jf=Lo,Af={add:Ls,animate:aa,detach:ca,find:la,findAll:fa,findAllComponents:da,findComponent:ma,findContainer:va,findParent:ga,fire:wa,get:Ea,insert:_a,merge:Oa,observe:Tt,observeList:Nt,observeOnce:Rt,off:Fa,on:Na,once:Ia,pop:La,push:Va,render:Ha,reset:Hh,resetPartial:tl,resetTemplate:hf,reverse:lf,set:pf,shift:ff,sort:df,splice:mf,subtract:vf,teardown:gf,toggle:bf,toHTML:wf,toHtml:wf,unrender:Ef,unshift:xf,update:Of,updateModel:jf},Sf=function(t,e,n){return n||Vo(t,e)?function(){var n,r="_super"in this,i=this._super;return this._super=e,n=t.apply(this,arguments),r&&(this._super=i),n}:t},Cf=Mo,Tf=zo,Pf=function(t){if(!t||!t._ractive)return{};var e=t._ractive;return{ractive:e.ractive,keypath:e.context.getKeypath(),index:r({},e.fragment.indexRefs),key:r({},e.fragment.keyRefs)}},Ff="function";if(typeof Date.now!==Ff||typeof String.prototype.trim!==Ff||typeof Object.keys!==Ff||typeof Array.prototype.indexOf!==Ff||typeof Array.prototype.forEach!==Ff||typeof Array.prototype.map!==Ff||typeof Array.prototype.filter!==Ff||Yo&&typeof Yo.addEventListener!==Ff)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return r($o.prototype,Af,Ho),$o.prototype.constructor=$o,$o.defaults=$o.prototype,gs($o,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Tf},getNodeInfo:{value:Pf},parse:{value:rn},Promise:{value:qs},svg:{value:ls},magic:{value:ts},VERSION:{value:"0.8.0-edge"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Zo},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ns},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),$o});
//# sourceMappingURL=ractive.min.js.map
