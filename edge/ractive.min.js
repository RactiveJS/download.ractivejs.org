!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];for(var i,s;s=n.shift();)for(i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function i(t){return"[object Array]"===Tu.call(t)}function s(t){return Pu.test(Tu.call(t))}function o(t){if(!h(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===Tu.call(t)}function c(t){return"function"==typeof t}function l(t,e){return t.replace(/%s/g,function(){return e.shift()})}function f(t){if(!ru)throw t;console.error(t)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];throw t=l(t,n),new Error(t)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=l(t,n),Cu(t,n)}function m(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=l(t,n),Ru[t]||(Ru[t]=!0,Cu(t,n))}function v(t,e,n){var r=g(t,e,n);return r?r[t][n]:null}function g(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function y(t){return function(){return t}}function w(t,e,n){var r;if("string"!=typeof e||!u(n))throw new Error("Bad arguments");if(r=+t.get(e)||0,!u(r))throw new Error("Cannot add to a non-numeric value");return t.set(e,r+n)}function b(t,e){return w(this,t,void 0===e?1:+e)}function k(t){this.event=t,this.method="on"+t,this.deprecate=Uu[t]}function x(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function _(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function E(t,e){var n;if(!i(t)||!i(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function A(t){return"string"==typeof t?[t]:void 0===t?[]:t}function S(t){return t[t.length-1]}function C(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function O(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function T(t){setTimeout(t,0)}function P(t,e){return function(){for(var n;n=t.shift();)n(e)}}function F(t,e,n,r){var i;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof zu)e.then(n,r);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{i=e.then}catch(s){return void r(s)}if("function"==typeof i){var o,a,u;a=function(e){o||(o=!0,F(t,e,n,r))},u=function(t){o||(o=!0,r(t))};try{i.call(e,a,u)}catch(s){if(!o)return r(s),void(o=!0)}}else n(e)}}function R(t){var e,n,r,i,s,o;for(e=t.split("."),(n=Gu[e.length])||(n=N(e.length)),s=[],r=function(t,n){return t?"*":e[n]},i=n.length;i--;)o=n[i].map(r).join("."),s.hasOwnProperty(o)||(s.push(o),s[o]=!0);return s}function N(t){var e,n,r,i,s,o="";if(!Gu[t]){for(r=[];o.length<t;)o+=1;for(e=parseInt(o,2),i=function(t){return"1"===t},s=0;e>=s;s+=1){for(n=s.toString(2);n.length<t;)n="0"+n;r[s]=Array.prototype.map.call(n,i)}Gu[t]=r}return Gu[t]}function j(t,e,n,r){var i=t[e];if(!i||!i.equalsOrStartsWith(r)&&i.equalsOrStartsWith(n))return t[e]=i?i.replace(n,r):r,!0}function V(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function D(t){return null==t?t:(Qu.hasOwnProperty(t)||(Qu[t]=new Zu(t)),Qu[t])}function L(t,e){var n,r,s,o=function(e,n){var r,s,o;r=t.viewmodel.wrapped[n.str],s=r?r.get():t.viewmodel.get(n);for(o in s)!s.hasOwnProperty(o)||"_ractive"===o&&i(s)||e.push(n.join(o));return e};for(n=e.split("."),s=[Yu];r=n.shift();)"*"===r?s=s.reduce(o,[]):s[0]===Yu?s[0]=D(r):s=s.map(M(r));return s}function M(t){return function(e){return e.join(t)}}function I(t){return t?t.replace(Ku,".$1"):""}function W(t,e,n){var r;return e=I(e),"~/"===e.substr(0,2)?(r=D(e.substring(2)),q(t,r.firstKey,n)):"."===e[0]?(r=U(Ju(n),e),r&&q(t,r.firstKey,n)):r=z(t,D(e),n),r}function U(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return D(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),D(n.join("."))}return D(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function z(t,e,n,r){var i,s,o,a,u;if(e.isRoot)return e;for(s=e.firstKey;n;)if(i=n.context,n=n.parent,i&&(a=!0,o=t.viewmodel.get(i),o&&("object"==typeof o||"function"==typeof o)&&s in o))return i.join(e.str);return $(t,s)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,s=D(s),u=z(t.parent,s,n,!0))?(t.viewmodel.map(s,{origin:t.parent.viewmodel,keypath:u}),e):r||a?void 0:(t.viewmodel.set(e,void 0),e)}function q(t,e){var n;!t.parent||t.isolated||$(t,e)||(e=D(e),(n=z(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function $(t,e){return""===e||e in t.data||e in t.viewmodel.computations||e in t.viewmodel.mappings}function B(t){t.teardown()}function K(t){t.unbind()}function Q(t){t.unrender()}function Z(t){t.detach()}function H(t){t.detachNodes()}function G(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function Y(){for(var t,e,n;th.viewmodels.length;)e=th.viewmodels.pop(),n=e.applyChanges(),n&&rh.fire(e.ractive,n);for(J(),t=0;t<th.views.length;t+=1)th.views[t].update();for(th.views.length=0,t=0;t<th.tasks.length;t+=1)th.tasks[t]();return th.tasks.length=0,th.viewmodels.length?Y():void 0}function J(){var t,e,n,r;for(t=nh.length;t--;)e=nh[t],e.keypath?nh.splice(t,1):(n=W(e.root,e.ref,e.parentFragment))&&((r||(r=[])).push({item:e,keypath:n}),nh.splice(t,1));r&&r.forEach(X)}function X(t){t.item.resolve(t.keypath)}function te(t,e,n){var r,i,s,o,a,u,h,c,l,d,p,m,v,g;if(r=new Hu(function(t){i=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(p={},n.step=null,n.complete=null,d=function(t){return function(e,n){p[t]=n}});for(s in t)t.hasOwnProperty(s)&&((c||l)&&(m=d(s),n={easing:u,duration:h},c&&(n.step=m)),n.complete=l?m:Fu,a.push(ee(this,s,t[s],n)));return g={easing:u,duration:h},c&&(g.step=function(t){c(t,p)}),l&&r.then(function(t){l(t,p)}).then(null,f),g.complete=i,v=ee(this,null,null,g),a.push(v),r.stop=function(){for(var t;t=a.pop();)t.stop();v&&v.stop()},r}return n=n||{},n.complete&&r.then(n.complete).then(null,f),n.complete=i,o=ee(this,t,e,n),r.stop=function(){o.stop()},r}function ee(t,e,n,r){var i,s,o,u;return e&&(e=D(I(e))),null!==e&&(u=t.viewmodel.get(e)),oh.abort(e,t),a(u,n)?(r.complete&&r.complete(r.to),uh):(r.easing&&(i="function"==typeof r.easing?r.easing:t.easing[r.easing],"function"!=typeof i&&(i=null)),s=void 0===r.duration?400:r.duration,o=new ah({keypath:e,from:u,to:n,root:t,duration:s,easing:i,interpolator:r.interpolator,step:r.step,complete:r.complete}),oh.add(o),t._animations.push(o),o)}function ne(){return this.detached?this.detached:(this.el&&C(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),hh.fire(this),this.detached)}function re(t){return this.el?this.fragment.find(t):null}function ie(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function se(t){var e,n;for(e=[t],n=ie(t);n;)e.push(n),n=ie(n);return e}function oe(t,e,n,r){var i=[];return Eu(i,{selector:{value:e},live:{value:n},_isComponentQuery:{value:r},_test:{value:ch}}),n?(Eu(i,{cancel:{value:lh},_root:{value:t},_sort:{value:ph},_makeDirty:{value:mh},_remove:{value:vh},_dirty:{value:!1,writable:!0}}),i):i}function ae(t,e){var n,r;return this.el?(e=e||{},n=this._liveQueries,(r=n[t])?e&&e.live?r:r.slice():(r=oe(this,t,!!e.live,!1),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAll(t,r),r)):[]}function ue(t,e){var n,r;return e=e||{},n=this._liveComponentQueries,(r=n[t])?e&&e.live?r:r.slice():(r=oe(this,t,!!e.live,!0),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAllComponents(t,r),r)}function he(t){return this.fragment.findComponent(t)}function ce(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function le(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function fe(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,context:t.data,keypath:"",_noArg:!0};var r=D(e).wildcardMatches();de(t,r,n.event,n.args,!0)}}function de(t,e,n,r){var i,s,o=void 0===arguments[4]?!1:arguments[4],a=!0;for(gh.enqueue(t,n),s=e.length;s>=0;s--)i=t._subs[e[s]],i&&(a=pe(t,i,n,r)&&a);if(gh.dequeue(t),t.parent&&a){if(o&&t.component){var u=t.component.name+"."+e[e.length-1];e=D(u).wildcardMatches(),n&&(n.component=t)}de(t.parent,e,n,r)}}function pe(t,e,n,r){var i=null,s=!1;n&&!n._noArg&&(r=[n].concat(r)),e=e.slice();for(var o=0,a=e.length;a>o;o+=1)e[o].apply(t,r)===!1&&(s=!0);return n&&!n._noArg&&s&&(i=n.original)&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),!s}function me(t){var e={args:Array.prototype.slice.call(arguments,1)};fe(this,t,e)}function ve(t){var e;return t=D(I(t)),e=this.viewmodel.get(t,yh),void 0===e&&this.parent&&!this.isolated&&W(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function ge(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,ye(this)}function ye(t){wh.fire(t),t.findAllComponents("*").forEach(function(t){ye(t.instance)})}function we(t,e,n){var r,s;return t=D(I(t)),r=this.viewmodel.get(t),i(r)&&i(e)?(s=eh.start(this,!0),this.viewmodel.merge(t,r,e,n),eh.end(),s):this.set(t,e,n&&n.complete)}function be(t,e){var n,r;return n=L(t,e.str),r={},n.forEach(function(e){r[e.str]=t.get(e.str)}),r}function ke(t,e,n,r){var i,s,o;return e=D(I(e)),r=r||Fh,Ph.test(e.str)?(i=new kh(t,e,n,r),t.viewmodel.patternObservers.push(i),s=!0):i=new bh(t,e,n,r),i.init(r.init),t.viewmodel.register(e,i,s?"patternObservers":"observers"),i.ready=!0,{cancel:function(){var n;o||(s?(n=t.viewmodel.patternObservers.indexOf(i),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,i,"patternObservers")):t.viewmodel.unregister(e,i,"observers"),o=!0)}}}function xe(t,e,n){var r,i,s,o;if(h(t)){n=e,i=t,r=[];for(t in i)i.hasOwnProperty(t)&&(e=i[t],r.push(this.observe(t,e,n)));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",ke(this,t,e,n);if(s=t.split(" "),1===s.length)return ke(this,t,e,n);for(r=[],o=s.length;o--;)t=s[o],t&&r.push(ke(this,t,e,n));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}function _e(t,e,n){var r=this.observe(t,function(){e.apply(this,arguments),r.cancel()},{init:!1,defer:n&&n.defer});return r}function Ee(t,e){var n,r=this;if(t)n=t.split(" ").map(Rh).filter(Nh),n.forEach(function(t){var n,i;(n=r._subs[t])&&(e?(i=n.indexOf(e),-1!==i&&n.splice(i,1)):r._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Ae(t,e){var n,r,i,s=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&n.push(this.on(r,t[r]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return i=t.split(" ").map(Rh).filter(Nh),i.forEach(function(t){(s._subs[t]||(s._subs[t]=[])).push(e)}),{cancel:function(){return s.off(t,e)}}}function Se(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Ce(t,e,n){var r,i,s,o,a,u,h=[];if(r=Oe(t,e,n),!r)return null;for(i=t.length,a=r.length-2-r[1],s=Math.min(i,r[0]),o=s+r[1],u=0;s>u;u+=1)h.push(u);for(;o>u;u+=1)h.push(-1);for(;i>u;u+=1)h.push(u+a);return h}function Oe(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:null;case"push":return[t.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}}function Te(e,n){var r,i,s,o=this;if(s=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),r=eh.start(this,!0),eh.scheduleTask(function(){return Bh.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Pe(a),e.innerHTML=""}return this.constructor.css&&$h.add(this.constructor),e&&((i=e.__ractive_instances__)?i.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),eh.end(),this.transitionsEnabled=s,r.then(function(){return Kh.fire(o)}).then(null,f),r}function Pe(t){try{t.splice(0,t.length).forEach(function(t){return t.teardown()})}catch(e){}}function Fe(t,e,n){var r,i,s,o,a,u,h=function(t){var n,r;t.value=e,t.updating||(r=t.ractive,n=t.keypath,t.updating=!0,eh.start(r),r.viewmodel.mark(n),eh.end(),t.updating=!1)};if(r=t.obj,i=t.prop,n&&!n.configurable){if("length"===i)return;throw new Error('Cannot use magic mode with property "'+i+'" - object is not configurable')}n&&(s=n.get,o=n.set),a=s||function(){return e},u=function(t){o&&o(t),e=s?s():t,u._ractiveWrappers.forEach(h)},u._ractiveWrappers=[t],Object.defineProperty(r,i,{get:a,set:u,enumerable:!0,configurable:!0})}function Re(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function Ne(t,e){var n,r,i;return r='[data-ractive-css="'+e+'"]',i=function(t){var e,n,i,s,o,a,u,h=[];for(e=[];n=lc.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(s=e.map(Ve),u=e.length;u--;)a=s.slice(),i=e[u],a[u]=i.base+r+i.modifiers||"",o=s.slice(),o[u]=r+" "+o[u],h.push(a.join(" "),o.join(" "));return h.join(", ")},n=dc.test(t)?t.replace(dc,r):t.replace(cc,"").replace(hc,function(t,e){var n,r;return fc.test(e)?t:(n=e.split(",").map(je),r=n.map(i).join(", ")+" ",t.replace(e,r))})}function je(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Ve(t){return t.str}function De(t,e,n){return t?e.noCssTransform?t:Ne(t,n):void 0}function Le(t,e){return"function"==typeof e&&/_super/.test(t)}function Me(t,e,n){var r=n.data||{},i=Ie(t.prototype.data);if("object"!=typeof r&&"function"!=typeof r)throw new TypeError('data option must be an object or a function, "'+r+'" is not valid');return We(i,r)}function Ie(t){if("function"!=typeof t||!Object.keys(t).length)return t;var e={};return Ue(t,e),We(t,e)}function We(t,e){return"function"==typeof e?$e(e,t):"function"==typeof t?qe(e,t):ze(e,t)}function Ue(t,e,n){for(var r in t)!(e._mappings&&e._mappings[r]&&e._mappings[r].updatable)&&n&&r in e||(e[r]=t[r])}function ze(t,e){return t=t||{},e?(Ue(e,t,!0),t):t}function qe(t,e){return function(n){var r;if(t){r=[];for(var i in t)n&&i in n||r.push(i)}return n=e.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(e){n[e]=t[e]})),n}}function $e(t,e){var n;return n="function"!=typeof e?function(t){ze(t,e)}:function(t){return e=mc(e,function(){},!0),e.call(this,t)||t},mc(t,n)}function Be(t){var e,n,r;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(ol))?t.matchPattern(al)?(r=t.matchPattern(ol))?(t.allowWhitespace(),t.matchString("=")?[n,r]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function Ke(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=Qe(t,t.tags[n]))return e}function Qe(t,e){var n,r,i,s;if(n=t.pos,!t.matchString(e.open))return null;if(r=Be(t))return t.matchString(e.close)?(e.open=r[0],e.close=r[1],t.sortMustacheTags(),ul):null;for(t.allowWhitespace(),t.matchString("/")&&(t.pos-=e.close.length+1,t.error("Attempted to close a section that wasn't open")),s=0;s<e.readers.length;s+=1)if(i=e.readers[s],r=i(t,e))return e.isStatic&&(r.s=!0),t.includeLinePositions&&(r.p=t.getLinePos(n)),r;return t.pos=n,null}function Ze(t){var e;return(e=t.matchPattern(ll))?{t:Nc,v:e}:null}function He(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:Lc,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:Lc,v:"false"}):null}function Ge(t){var e;return(e=gl(t))?wl.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Ze(t))?e.v:(e=t.matchPattern(yl))?e:void 0}function Ye(t){var e,n,r;return e=t.pos,t.allowWhitespace(),n=Ge(t),null===n?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),r=on(t),null===r?(t.pos=e,null):{t:Ic,k:n,v:r}):(t.pos=e,null))}function Je(t){var e,n,r,i;return e=t.pos,r=Ye(t),null===r?null:(n=[r],t.matchString(",")?(i=Je(t),i?n.concat(i):(t.pos=e,null)):n)}function Xe(t){var e,n,r,i,s=function(t){n.push(t)};return e=t.pos,t.allowWhitespace(),r=on(t),null===r?null:(n=[r],t.allowWhitespace(),t.matchString(",")&&(i=Xe(t),null===i&&t.error(hl),i.forEach(s)),n)}function tn(t){return Ze(t)||He(t)||gl(t)||bl(t)||kl(t)}function en(t){var e,n,r,i,s,o;return e=t.pos,r=t.matchPattern(/^@(?:keypath|index|key)/),r||(n=t.matchPattern(xl)||"",r=!n&&t.relaxedNames&&t.matchPattern(Sl)||t.matchPattern(Al),r||"."!==n||(n="",r=".")),r?n||t.relaxedNames||!dl.test(r)?!n&&fl.test(r)?(i=fl.exec(r)[0],t.pos=e+i.length,{t:Mc,v:i}):(s=(n||"")+I(r),t.matchString("(")&&(o=r.lastIndexOf("."),-1!==o?(s=s.substr(0,o),t.pos=e+s.length):t.pos-=1),{t:Wc,n:s.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function nn(t){var e,n;return e=t.pos,t.matchString("(")?(t.allowWhitespace(),n=on(t),n||t.error(hl),t.allowWhitespace(),t.matchString(")")||t.error(cl),{t:$c,x:n}):null}function rn(t){var e,n,r;if(e=t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),n=t.matchPattern(yl))return{t:Uc,n:n};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),r=on(t),r||t.error(hl),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:Uc,x:r}):null}function sn(t){var e,n,r,i;return(n=Tl(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),r=on(t),r||t.error(hl),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),i=on(t),i||t.error(hl),{t:Bc,o:[n,r,i]}):(t.pos=e,n)):null}function on(t){return sn(t)}function an(t){var e,n=function(t){switch(t.t){case Lc:case Mc:case Nc:return t.v;case jc:return JSON.stringify(String(t.v));case Vc:return"["+(t.m?t.m.map(n).join(","):"")+"]";case Dc:return"{"+(t.m?t.m.map(n).join(","):"")+"}";case Ic:return t.k+":"+n(t.v);case qc:return("typeof"===t.s?"typeof ":t.s)+n(t.o);case Kc:return n(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+n(t.o[1]);case Qc:return n(t.x)+"("+(t.o?t.o.map(n).join(","):"")+")";case $c:return"("+n(t.x)+")";case zc:return n(t.x)+n(t.r);case Uc:return t.n?"."+t.n:"["+n(t.x)+"]";case Bc:return n(t.o[0])+"?"+n(t.o[1])+":"+n(t.o[2]);case Wc:return"_"+e.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}};return un(t,e=[]),{r:e,s:n(t)}}function un(t,e){var n,r;if(t.t===Wc&&-1===e.indexOf(t.n)&&e.unshift(t.n),r=t.o||t.m)if(h(r))un(r,e);else for(n=r.length;n--;)un(r[n],e);t.x&&un(t.x,e),t.r&&un(t.r,e),t.v&&un(t.v,e)}function hn(t,e){var n;if(t){for(;t.t===$c&&t.x;)t=t.x;return t.t===Wc?e.r=t.n:t.t===Nc&&Wl.test(t.v)?e.r=t.v:(n=cn(t))?e.rx=n:e.x=an(t),e}}function cn(t){for(var e,n=[];t.t===zc&&t.r.t===Uc;)e=t.r,n.unshift(e.x?e.x.t===Wc?e.x:an(e.x):e.n),t=t.x;return t.t!==Wc?null:{r:t.n,m:n}}function ln(t,e){var n,r=on(t);return r?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:wc},hn(r,n),n):null}function fn(t,e){var n,r;return t.matchString("&")?(t.allowWhitespace(),(n=on(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r={t:wc},hn(n,r),r):null):null}function dn(t,e){var n,r,i,s,o;return n=t.pos,t.matchString(">")?(t.allowWhitespace(),r=t.pos,t.relaxedNames=!0,i=on(t),t.relaxedNames=!1,t.allowWhitespace(),s=on(t),t.allowWhitespace(),i?(o={t:Ec},hn(i,o),t.allowWhitespace(),s&&(o={t:bc,n:Yc,f:[o]},hn(s,o)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o):null):null}function pn(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),-1!==n?(t.pos+=n+e.close.length,{t:Ac}):void 0):null}function mn(t,e){var n,r,i;if(n=t.pos,r=on(t),!r)return null;for(i=0;i<e.length;i+=1)if(t.remaining().substr(0,e[i].length)===e[i])return r;return t.pos=n,en(t)}function vn(t,e){var n,r,i,s;n=t.pos;try{r=mn(t,[e.close])}catch(o){s=o}if(!r){if("!"===t.str.charAt(n))return null;if(s)throw s}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!r)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return i={t:yc},hn(r,i),i}function gn(t,e){var n,r,i;return t.matchPattern(Ul)?(n=t.pos,r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),i={t:Pc},r&&(i.n=r),i):null}function yn(t,e){var n,r,i,s;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),r=t.remaining(),i=r.indexOf(e.close),-1!==i?(s={t:xc,r:r.substr(0,i).split(" ")[0]},t.pos+=i,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):(t.pos=n,null)):(t.pos=n,null)):null}function wn(t,e){var n,r,i,s,o;if(!t.matchPattern(zl))return null;n=t.pos,r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),r||t.error("expected legal partial name"),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i=[];do(s=yn(t,e))?("partial"===!s.r&&t.error("Expected "+e.open+"/partial"+e.close),o=!0):(s=t.read(),s||t.error("Expected "+e.open+"/partial"+e.close),i.push(s));while(!o);return{t:Fc,n:r,f:i}}function bn(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(ql)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:tl}):(t.pos=n,null):null}function kn(t,e){var n,r=t.pos;return t.matchString(e.open)?t.matchPattern($l)?(n=on(t),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:el,x:n}):(t.pos=r,null):null}function xn(t,e){var n,r,i,s,o,a,u,h,c,l,f,d;if(n=t.pos,t.matchString("^"))i={t:bc,f:[],n:Hc};else{if(!t.matchString("#"))return null;i={t:bc,f:[]},(u=t.matchPattern(Zl))&&(d=u,i.n=Bl[u])}if(t.allowWhitespace(),r=on(t),r||t.error("Expected expression"),f=t.matchPattern(Kl)){var p=void 0;i.i=(p=t.matchPattern(Ql))?f+","+p:f}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,o=i.f,c=[];do if(s=yn(t,e))d&&s.r!==d&&t.error("Expected "+e.open+"/"+d+e.close),t.sectionDepth-=1,l=!0;else if(s=kn(t,e))i.n===Hc&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),h||(h=_n(r,i.n)),h.f.push({t:bc,n:Zc,x:an(An(c.concat(s.x))),f:o=[]}),c.push(En(s.x));else if(s=bn(t,e))i.n===Hc&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,h?h.f.push({t:bc,n:Zc,x:an(An(c)),f:o=[]}):(h=_n(r,i.n),o=h.f);else{if(s=t.read(),!s)break;o.push(s)}while(!l);return h&&(i.n===Yc&&(i.n=Jc),i.l=h),hn(r,i),i.f.length||delete i.f,i}function _n(t,e){var n;return e===Yc?(n={t:bc,n:Zc,f:[]},hn(En(t),n)):(n={t:bc,n:Hc,f:[]},hn(t,n)),n}function En(t){return t.t===qc&&"!"===t.s?t.o:{t:qc,s:"!",o:Sn(t)}}function An(t){return 1===t.length?t[0]:{t:Kc,s:"&&",o:[Sn(t[0]),Sn(An(t.slice(1)))]}}function Sn(t){return{t:$c,x:t}}function Cn(t){var e,n,r,i,s;return e=t.pos,t.matchString(Hl)?(r=t.remaining(),i=r.indexOf(Gl),-1===i&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=r.substr(0,i),t.pos+=i+3,s={t:Ac,c:n},t.includeLinePositions&&(s.p=t.getLinePos(e)),s):null}function On(t){return t.replace(Dl,function(t,e){var n;return n="#"!==e[0]?jl[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Tn(n)):t})}function Tn(t){return t?10===t?32:128>t?t:159>=t?Vl[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function Pn(t){return t.replace(Il,"&amp;").replace(Ll,"&lt;").replace(Ml,"&gt;")}function Fn(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(sf))?t.inside&&n!==t.inside?(t.pos=e,null):{t:Oc,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function Rn(t){var e,n,r;return t.allowWhitespace(),(n=t.matchPattern(af))?(e={name:n},r=Nn(t),r&&(e.value=r),e):null}function Nn(t){var e,n,r,i;return e=t.pos,t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,r=t.sectionDepth,i=Dn(t,"'")||Dn(t,'"')||Vn(t),t.sectionDepth!==r&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),null===i?(t.pos=e,null):i.length?1===i.length&&"string"==typeof i[0]?On(i[0]):i:null):(t.pos=e,null)}function jn(t){var e,n,r,i,s;return e=t.pos,(n=t.matchPattern(uf))?(r=n,i=t.tags.map(function(t){return t.open}),-1!==(s=of(r,i))&&(n=n.substr(0,s),t.pos=e+n.length),n):null}function Vn(t){var e,n;for(t.inAttribute=!0,e=[],n=Ke(t)||jn(t);null!==n;)e.push(n),n=Ke(t)||jn(t);return e.length?(t.inAttribute=!1,e):null}function Dn(t,e){var n,r,i;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,r=[],i=Ke(t)||Ln(t,e);null!==i;)r.push(i),i=Ke(t)||Ln(t,e);return t.matchString(e)?(t.inAttribute=!1,r):(t.pos=n,null)}function Ln(t,e){var n,r,i,s;return n=t.pos,i=t.remaining(),s=t.tags.map(function(t){return t.open}),s.push(e),r=of(i,s),-1===r&&t.error("Quoted attribute value must have a closing quote"),r?(t.pos+=r,i.substr(0,r)):null}function Mn(t){var e,n,r;return t.allowWhitespace(),(e=Ge(t))?(r={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(r.value=n.v,r):null):null):null}function In(t){var e,n,r,i,s,o,a,u,h;if("string"==typeof t){if(n=lf.exec(t))return e={m:n[1]},i="["+t.slice(e.m.length+1,-1)+"]",r=new hf(i),e.a=an(r.result[0]),e;if(-1===t.indexOf(":"))return t.trim();t=[t]}if(e={},a=[],u=[],t){for(;t.length;)if(s=t.shift(),"string"==typeof s){if(o=s.indexOf(":"),-1!==o){o&&a.push(s.substr(0,o)),s.length>o+1&&(u[0]=s.substring(o+1));break}a.push(s)}else a.push(s);u=u.concat(t)}return a.length?u.length||"string"!=typeof a?(e={n:1===a.length&&"string"==typeof a[0]?a[0]:a},1===u.length&&"string"==typeof u[0]?(h=cf("["+u[0]+"]"),e.a=h?h.value:u[0].trim()):e.d=u):e=a:e="",e}function Wn(t){var e,n,r,i,s,o,a,u,h,c,l,f,d;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=Rc,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=_c,n.e=t.matchPattern(df),!n.e)return null;for(pf.test(t.nextChar())||t.error("Illegal tag name"),o=function(e,r){var i=r.n||r;gf.test(i)&&(t.pos-=i.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=r},t.allowWhitespace();a=Ke(t)||Rn(t);)a.name?(i=yf[a.name])?n[i]=In(a.value):(s=vf.exec(a.name))?(n.v||(n.v={}),u=In(a.value),o(s[1],u)):t.sanitizeEventAttributes&&mf.test(a.name)||(n.a||(n.a={}),n.a[a.name]=a.value||0):(n.m||(n.m=[]),n.m.push(a)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(h=!0),!t.matchString(">"))return null;if(r=n.e.toLowerCase(),!h&&!Nl.test(n.e)){("script"===r||"style"===r)&&(t.inside=r),c=[];do d=t.pos,Un(r,t.remaining())?(l=Fn(t))?f=!0:(l=yn(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(f=!0,t.pos=d):(l=t.read(),l?c.push(l):f=!0):f=!0;while(!f);c.length&&(n.f=c)}return t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(r)?wf:n}function Un(t,e){var n,r;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),r=ff[t],n&&r?!~r.indexOf(n[1].toLowerCase()):!0}function zn(t){return t.replace(Ef,"\\$&")}function qn(t){var e=t.pos,n=t.standardDelimiters[0],r=t.standardDelimiters[1],i=void 0;if(!t.matchPattern(Af)||!t.matchString(n))return t.pos=e,null;var s=t.matchPattern(Sf);if(!t.matchString(r)||!t.matchPattern(Cf))return t.pos=e,null;i=[];var o=new RegExp("^<!--\\s*"+zn(n)+"\\s*\\/\\s*"+s+"\\s*"+zn(r)+"\\s*-->");do t.matchPattern(o)?bf=!0:(kf=t.read(),kf||t.error("expected closing comment ('<!-- "+n+"/"+s+r+" -->')"),i.push(kf));while(!bf);return{t:Fc,f:i,n:s}}function $n(t){var e,n,r,i;return n=t.remaining(),i=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(i):(r=t.tags.map(function(t){return t.open}),t.inAttribute===!0?r.push('"',"'","=","<",">","`"):r.push(t.inAttribute?t.inAttribute:i),e=of(n,r)),e?(-1===e&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):On(n.substr(0,e))):null}function Bn(t){return"string"==typeof t}function Kn(t){return t.t===Ac||t.t===Sc}function Qn(t){return(t.t===bc||t.t===kc)&&t.f}function Zn(t,e,n){for(var r=n.length,s=void 0,o=void 0;r--;)s=n[r],Hn(s)?(e[s.n]=s.f,n.splice(r,1)):i(s.f)&&((o=Gn(t,s))?(t.push(o),Zn(t,s.p={},s.f),t.pop()):i(s.f)&&Zn(t,e,s.f))}function Hn(t){return t.t===Fc}function Gn(t,e){var n,r,i=e.e;if(e.e)for(n=0;n<t.length;n++)if(r=(t[n].components||{})[i])return r}function Yn(t,e,n,r,s){var o,a,u,h,c,l,f,d;for(Nf(t),o=t.length;o--;)a=t[o],a.exclude?t.splice(o,1):e&&a.t===Ac&&t.splice(o,1);for(Pf(t,r,s),o=t.length;o--;){if(a=t[o],a.f&&(c=n||a.t===_c&&Df.test(a.e),c||(u=t[o-1],h=t[o+1],(!u||"string"==typeof u&&Mf.test(u))&&(l=!0),(!h||"string"==typeof h&&Lf.test(h))&&(f=!0)),Yn(a.f,e,c,l,f)),a.l&&(Yn(a.l.f,e,n,l,f),t.splice(o+1,0,a.l),delete a.l),a.a)for(d in a.a)a.a.hasOwnProperty(d)&&"string"!=typeof a.a[d]&&Yn(a.a[d],e,n,l,f);if(a.m&&Yn(a.m,e,n,l,f),a.v)for(d in a.v)a.v.hasOwnProperty(d)&&(i(a.v[d].n)&&Yn(a.v[d].n,e,n,l,f),i(a.v[d].d)&&Yn(a.v[d].d,e,n,l,f))}for(o=t.length;o--;)"string"==typeof t[o]&&("string"==typeof t[o+1]&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(Vf," ")),""===t[o]&&t.splice(o,1))}function Jn(t){var e=xu(Kf);return e.parse=function(e,n){return Xn(e,n||t)},e}function Xn(t,e){if(!_f)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return _f(t,e||this.options)}function tr(t,e){var n;if(!nu){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(er(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return n.innerHTML}function er(t){return t&&"#"===t.charAt(0)}function nr(t){return!("string"==typeof t)}function rr(t){return t.defaults&&(t=t.defaults),Bf.reduce(function(e,n){return e[n]=t[n],e},{ractive:t})}function ir(t){var e,n=t._config.template;if(n&&n.fn)return e=sr(t,n.fn),e!==n.result?(n.result=e,e=ar(e,t)):void 0}function sr(t,e){var n=or(Qf.getParseOptions(t));return e.call(t,t.data,n)}function or(t){var e=xu(Qf);return e.parse=function(e,n){return Qf.parse(e,n||t)
},e}function ar(t,e){if("string"==typeof t)"#"===t[0]&&(t=Qf.fromId(t)),t=_f(t,Qf.getParseOptions(e));else if(t.v!==uu)throw new Error("Mismatched template version (expected "+uu+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return t}function ur(t,e,n){if(e)for(var r in e)(n||!t.hasOwnProperty(r))&&(t[r]=e[r])}function hr(t,e,n){if(!/_super/.test(n))return n;var r=function(){var t,i=cr(r._parent,e),s="_super"in this,o=this._super;return this._super=i,t=n.apply(this,arguments),s?this._super=o:delete this._super,t};return r._parent=t,r._method=n,r}function cr(t,e){var n,r;return e in t?(n=t[e],r="function"==typeof n?n:function(){return n}):r=Fu,r}function lr(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function fr(t,e,n){if(e in t){if(n in t)throw new Error(lr(e,n,!0));p(lr(e,n)),t[n]=t[e]}}function dr(t){fr(t,"beforeInit","onconstruct"),fr(t,"init","onrender"),fr(t,"complete","oncomplete"),fr(t,"eventDefinitions","events"),i(t.adaptors)&&fr(t,"adaptors","adapt")}function pr(t,e,n,r){dr(r);for(var i in r)if(td[i]){var s=r[i];"function"==typeof s&&(s=hr(e.prototype,i,s)),n[i]=s}$f.forEach(function(i){i[t](e,n,r)}),uc[t](e,n,r),vc[t](e,n,r),Zf[t](e,n,r),pc[t](e,n,r),mr(e.prototype,n,r)}function mr(t,e,n){for(var r in n)if(!Xf[r]&&n.hasOwnProperty(r)){var i=n[r];"function"==typeof i&&(i=hr(t,r,i)),e[r]=i}}function vr(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function gr(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function yr(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function wr(t){var e,n,r,i;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(r=this.items[e],r.find&&(i=r.find(t)))return i;return null}}function br(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAll&&i.findAll(t,e);return e}function kr(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(t,e);return e}function xr(t){var e,n,r,i;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(t)))return i;return null}}function _r(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function Er(){return this.items&&this.items[0]?this.items[0].firstNode():null}function Ar(t,e,n,r){return r=r||0,t.map(function(t){var i,s,o;return t.text?t.text:t.fragments?t.fragments.map(function(t){return Ar(t.items,e,n,r)}).join(""):(i=n+"-"+r++,o=t.keypath&&(s=t.root.viewmodel.wrapped[t.keypath.str])?s.value:t.getValue(),e[i]=o,"${"+i+"}")}).join("")}function Sr(){var t,e,n,r;return this.dirtyArgs&&(e=Ar(this.items,t={},this.root._guid),n=cf("["+e+"]",t),r=n?n.value:[this.toString()],this.argsList=r,this.dirtyArgs=!1),this.argsList}function Cr(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function Or(){var t,e,n,r;return this.dirtyValue&&(e=Ar(this.items,t={},this.root._guid),n=cf(e,t),r=n?n.value:this.toString(),this.value=r,this.dirtyValue=!1),this.value}function Tr(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Pr(){return this.value}function Fr(t,e){for(var n,r=0;r<e.prop.length;r++)if(void 0!==(n=t[e.prop[r]]))return n}function Rr(t,e){var n,r,i,s,o,a={},u=!1;for(e||(a.refs=n={});t;){if((o=t.owner)&&(r=o.indexRefs)){if(e&&(i=o.getIndexRef(e)))return a.ref={fragment:t,ref:i},a;if(!e)for(s in r)i=r[s],n[i.n]||(u=!0,n[i.n]={fragment:t,ref:i})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Nr(t,e,n){var r;return"@"===e.charAt(0)?new id(t,e,n):(r=Rr(t.parentFragment,e))?new od(t,r,n):new rd(t,e,n)}function jr(t,e){var n,r;if(ud[t])return ud[t];for(r=[];e--;)r[e]="_"+e;return n=new Function(r.join(","),"return("+t+")"),ud[t]=n,n}function Vr(t){return t.call()}function Dr(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var r,i;return r=e[n],void 0===r?"undefined":r.isSpecial?(i=r.value,"number"==typeof i?i:'"'+i+'"'):r.str})}function Lr(t){return D("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Mr(t){return void 0!==t&&"@"!==t[0]}function Ir(t,e){var n,r,i;if(t.__ractive_nowrap)return t;if(r="__ractive_"+e._guid,n=t[r])return n;if(/this/.test(t.toString())){_u(t,r,{value:hd.call(t,e),configurable:!0});for(i in t)t.hasOwnProperty(i)&&(t[r][i]=t[i]);return e._boundFunctions.push({fn:t,prop:r}),t[r]}return _u(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Wr(t){return t.value}function Ur(t){return void 0!=t}function zr(t){t.forceResolution()}function qr(t,e){var n,r,i,s=function(e){t.resolve(e)},o=function(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))};r=e.parentFragment,i=e.template,t.root=r.root,t.parentFragment=r,t.pElement=r.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(n=i.r)&&(t.resolver=Nr(t,n,s)),e.template.x&&(t.resolver=new ad(t,r,e.template.x,o)),e.template.rx&&(t.resolver=new ld(t,e.template.rx,o)),t.template.n!==Hc||t.hasOwnProperty("value")||t.setValue(void 0)}function $r(t){var e,n,r;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(r=this.twowayBinding)&&r.rebound()))}function Br(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function Kr(){this.parentFragment.bubble()}function Qr(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function Zr(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].find(t))return r;return null}function Hr(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(t,e)}function Gr(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(t,e)}function Yr(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].findComponent(t))return r;return null}function Jr(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function Xr(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function ti(t){var e,n,r,i,s,o,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Gc){if(this.shuffling=!0,eh.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,s=[],t.forEach(function(t,e){var r,i,o,a,h;return t===e?void(s[t]=u.fragments[e]):(r=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(r),void r.unbind()):(i=t-e,o=u.keypath.join(e),a=u.keypath.join(t),r.index=t,(h=r.registeredIndexRefs)&&h.forEach(ei),r.rebind(o,a),void(s[t]=r)))}),i=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===i)return;n=this.length}for(this.length=this.fragments.length=i,this.rendered&&eh.addView(this),o={template:this.template.f,root:this.root,owner:this},r=n;i>r;r+=1)a=s[r],a||this.fragmentsToCreate.push(r),this.fragments[r]=a}}function ei(t){t.rebind("","")}function ni(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ri(t){var e,n,r=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=r.keypath.join(t),n.index=t,e=new km(n),r.fragmentsToRender.push(r.fragments[t]=e)}),this.fragmentsToCreate.length=0):si(this,t)&&(this.bubble(),this.rendered&&eh.addView(this)),this.value=t,this.updating=!1)}function ii(t,e,n){if(e===Gc&&t.indexRefs&&t.indexRefs[0]){var r=t.indexRefs[0];(n&&"i"===r.t||!n&&"k"===r.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),r.t=n?"k":"i"}t.currentSubtype=e}function si(t,e){var n={template:t.template.f,root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.subtype)switch(t.subtype){case Zc:return ci(t,e,!1,n);case Hc:return ci(t,e,!0,n);case Yc:return hi(t,n);case Jc:return ui(t,e,n);case Gc:if(h(e))return ii(t,t.subtype,!0),ai(t,e,n)}return t.ordered=!!s(e),t.ordered?(ii(t,Gc,!1),oi(t,e,n)):h(e)||"function"==typeof e?t.template.i?(ii(t,Gc,!0),ai(t,e,n)):(ii(t,Yc,!1),hi(t,n)):(ii(t,Zc,!1),ci(t,e,!1,n))}function oi(t,e,n){var r,i,s;if(i=e.length,i===t.length)return!1;if(i<t.length)t.fragmentsToUnrender=t.fragments.splice(i,t.length-i),t.fragmentsToUnrender.forEach(K);else if(i>t.length)for(r=t.length;i>r;r+=1)n.context=t.keypath.join(r),n.index=r,s=new km(n),t.fragmentsToRender.push(t.fragments[r]=s);return t.length=i,!0}function ai(t,e,n){var r,i,s,o,a,u;for(s=t.hasKey||(t.hasKey={}),i=t.fragments.length;i--;)o=t.fragments[i],o.key in e||(a=!0,o.unbind(),t.fragmentsToUnrender.push(o),t.fragments.splice(i,1),s[o.key]=!1);for(i=t.fragments.length;i--;)o=t.fragments[i],o.index!==i&&(o.index=i,(u=o.registeredIndexRefs)&&u.forEach(di));i=t.fragments.length;for(r in e)s[r]||(a=!0,n.context=t.keypath.join(r),n.key=r,n.index=i++,o=new km(n),t.fragmentsToRender.push(o),t.fragments.push(o),s[r]=!0);return t.length=t.fragments.length,a}function ui(t,e,n){return e?hi(t,n):li(t)}function hi(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new km(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function ci(t,e,n,r){var i,o,a,u,c;if(o=s(e)&&0===e.length,a=!1,!s(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return i=n?o||a||!e:e&&!o&&!a,i?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(K),!0):void 0:(r.index=0,u=new km(r),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):li(t)}function li(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(fi),t.fragmentsToUnrender.forEach(K),t.length=t.fragmentsToRender.length=0,!0):void 0}function fi(t){return t.rendered}function di(t){t.rebind("","")}function pi(t){var e,n,r;for(e="",n=0,r=this.length,n=0;r>n;n+=1)e+=this.fragments[n].toString(t);return e}function mi(){var t=this;this.fragments.forEach(K),this.fragmentsToRender.forEach(function(e){return C(t.fragments,e)}),this.fragmentsToRender=[],Tr.call(this),this.length=0,this.unbound=!0}function vi(t){this.fragments.forEach(t?gi:yi),this.renderedFragments=[],this.rendered=!1}function gi(t){t.unrender(!0)}function yi(t){t.unrender(!1)}function wi(){var t,e,n,r,i,s,o;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(i=this.parentFragment.getNode()),o=this.fragments.length,s=0;o>s;s+=1)t=this.fragments[s],e=n.indexOf(t,s),e!==s?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(s,0,t)):this.docFrag.childNodes.length&&(r=t.firstNode(),i.insertBefore(this.docFrag,r));this.rendered&&this.docFrag.childNodes.length&&(r=this.parentFragment.findNextNode(this),i.insertBefore(this.docFrag,r)),this.renderedFragments=this.fragments.slice()}function bi(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function ki(t){var e,n,r,i;for(n=this.nodes.length,e=0;n>e;e+=1)if(r=this.nodes[e],1===r.nodeType){if(pu(r,t))return r;if(i=r.querySelector(t))return i}return null}function xi(t,e){var n,r,i,s,o,a;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType&&(pu(i,t)&&e.push(i),s=i.querySelectorAll(t)))for(o=s.length,a=0;o>a;a+=1)e.push(s[a])}function _i(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function Ei(t){return yd[t]||(yd[t]=du(t))}function Ai(t){var e,n,r;t&&"select"===t.name&&t.binding&&(e=O(t.node.options).filter(Si),t.getAttribute("multiple")?r=e.map(function(t){return t.value}):(n=e[0])&&(r=n.value),void 0!==r&&t.binding.setValue(r),t.bubble())}function Si(t){return t.selected}function Ci(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=wd(this.value,this.parentFragment.getNode(),this.docFrag),Ai(this.pElement),this.rendered=!0,this.docFrag}function Oi(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&eh.addView(this))}function Ti(){return void 0!=this.value?On(""+this.value):""}function Pi(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Fi(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=wd(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Ai(this.pElement)}}function Ri(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Ni(){return null}function ji(){return this.node}function Vi(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function Di(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&eh.addView(this))}function Li(t){var e=t.fragment.items;if(1===e.length)return e[0].type===yc?e[0]:void 0}function Mi(t){return this.type=Cc,this.element=t.element,this.root=t.root,jd(this,t.name),this.isBoolean=Rl.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new km({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Li(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function Ii(t,e){this.fragment&&this.fragment.rebind(t,e)}function Wi(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==su.html||(e=Vd[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Ui(){var t=this,e=t.name,n=t.namespacePrefix,r=t.value,i=t.interpolator,s=t.fragment;return"value"===e&&("select"===this.element.name||"textarea"===this.element.name)||"value"===e&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===e&&"input"===this.element.name&&i?"name={{"+(i.keypath.str||i.ref)+"}}":this.isBoolean?r?e:"":(s&&(r=s.toString()),n&&(e=n+":"+e),r?e+'="'+zi(r)+'"':e)}function zi(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function qi(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function $i(){var t,e,n,r,i=this.value;if(!this.locked)for(this.node._ractive.value=i,t=this.node.options,r=t.length;r--;)if(e=t[r],n=e._ractive?e._ractive.value:e.value,n==i){e.selected=!0;break}}function Bi(){var t,e,n,r,s=this.value;for(i(s)||(s=[s]),t=this.node.options,e=t.length;e--;)n=t[e],r=n._ractive?n._ractive.value:n.value,n.selected=_(s,r)}function Ki(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Qi(){var t,e,n,r,i=this.node;if(t=i.checked,i.value=this.element.getAttribute("value"),i.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!i.checked&&this.element.binding&&(n=this.element.binding.siblings,r=n.length)){for(;r--;){if(e=n[r],!e.element.node)return;if(e.element.node.checked)return eh.addViewmodel(e.root.viewmodel),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function Zi(){var t,e,n=this,r=n.element,s=n.node,o=n.value,a=r.binding;if(t=r.getAttribute("value"),i(o)){for(e=o.length;e--;)if(t==o[e])return void(a.isChecked=s.checked=!0);a.isChecked=s.checked=!1}else a.isChecked=s.checked=o==t}function Hi(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.className=e}function Gi(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Yi(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function Ji(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Xi(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function ts(){this.locked||(this.node[this.propertyName]=this.value)}function es(){var t=this,e=t.node,n=t.namespace,r=t.name,i=t.value,s=t.fragment;n?e.setAttributeNS(n,r,(s||i).toString()):this.isBoolean?i?e.setAttribute(r,""):e.removeAttribute(r):e.setAttribute(r,(s||i).toString())}function ns(){var t,e,n=this,r=n.name,i=n.element,s=n.node;"id"===r?e=Gi:"value"===r?"select"===i.name&&"value"===r?e=i.getAttribute("multiple")?Bi:$i:"textarea"===i.name?e=Xi:null!=i.getAttribute("contenteditable")?e=Ji:"input"===i.name&&(t=i.getAttribute("type"),e="file"===t?Fu:"radio"===t&&i.binding&&"name"===i.binding.name?Qi:Xi):this.isTwoway&&"name"===r?"radio"===s.type?e=Ki:"checkbox"===s.type&&(e=Zi):"style"===r&&s.style.setAttribute?e=Yi:"class"!==r||s.namespaceURI&&s.namespaceURI!==su.html?this.useProperty&&(e=ts):e=Hi,e||(e=es),this.update=e,this.update()}function rs(t,e){var n=e?"svg":"div";return Ld.innerHTML="<"+n+" "+t+"></"+n+">",O(Ld.childNodes[0].attributes)}function is(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function ss(t){for(;t=t.parent;)if("form"===t.name)return t}function os(){this._ractive.binding.handleChange()}function as(t,e,n){var r=t+e+n;return Bd[r]||(Bd[r]=[])}function us(t){return t.isChecked}function hs(t){return t.element.getAttribute("value")}function cs(){var t;os.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function ls(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&os.call(e),t._timeout=void 0},t.element.lazy)}function fs(t){var e,n,r,i,s,o=t.attributes;return t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||o.contenteditable&&ds(o.contenteditable))&&ds(o.value)?n=$d:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(r=ds(o.name),i=ds(o.checked),r&&i&&p("A radio input can have two-way binding on its name attribute, or its checked attribute - not both"),r?n="radio"===e?Qd:Zd:i&&(n="radio"===e?Kd:Hd)):"file"===e&&ds(o.value)?n=Jd:ds(o.value)&&(n="number"===e||"range"===e?Xd:zd)):"select"===t.name&&ds(o.value)?n=t.getAttribute("multiple")?Yd:Gd:"textarea"===t.name&&ds(o.value)&&(n=zd),n&&(s=new n(t))&&s.keypath?s:void 0}function ds(t){return t&&t.isBindable}function ps(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function ms(t){fe(this.root,this.getAction(),{event:t})}function vs(){return this.action.toString().trim()}function gs(t,e,n){var r,i,s,o=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&((this.root.debug?d:p)('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(i=n.a.r,this.method=n.m,this.keypaths=[],this.fn=jr(n.a.s,i.length),this.parentFragment=t.parentFragment,s=this.root,this.refResolvers=[],i.forEach(function(t,e){var n=void 0;(n=tp.exec(t))?o.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:o.refResolvers.push(Nr(o,t,function(t){return o.resolve(e,t)}))}),this.fire=ys):(r=n.n||n,"string"!=typeof r&&(r=new km({template:r,root:this.root,owner:this})),this.action=r,n.d?(this.dynamicParams=new km({template:n.d,root:this.root,owner:this.element}),this.fire=bs):n.a&&(this.params=n.a,this.fire=ws))}function ys(t){var e,n,r;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var r,i,s;if(void 0===n)return void 0;if(n.eventObject){if(r=t,i=n.refinements.length)for(s=0;i>s;s+=1)r=r[n.refinements[s]]}else r=e.viewmodel.get(n);return r}),gh.enqueue(e,t),r=this.fn.apply(null,n),e[this.method].apply(e,r),gh.dequeue(e)}function ws(t){fe(this.root,this.getAction(),{event:t,args:this.params})}function bs(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),fe(this.root,this.getAction(),{event:t,args:e})}function ks(t){var e,n,r,i={};e=this._ractive,n=e.events[t.type],(r=Rr(n.element.parentFragment))&&(i=Rr.resolve(r)),n.fire({node:this,original:t,index:i,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function xs(){var t,e=this.name;if(!this.invalid){if(t=v("events",this.root,e))this.custom=t(this.node,_s(e));else{if(!("on"+e in this.node||window&&"on"+e in window))return void(np[e]||m(Du(e,"event")));this.node.addEventListener(e,ks,!1)}this.hasListener=!0}}function _s(t){return ep[t]||(ep[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),ep[t]}function Es(t,e){var n,r=function(n){n&&n.rebind(t,e)};return this.method?(n=this.element.parentFragment,void this.refResolvers.forEach(r)):("string"!=typeof this.action&&r(this.action),void(this.dynamicParams&&r(this.dynamicParams)))}function As(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Ss(t,e){this.keypaths[t]=e}function Cs(){return this.method?void this.refResolvers.forEach(K):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Os(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,ks,!1),this.hasListener=!1}function Ts(){var t=this;this.dirty||(this.dirty=!0,eh.scheduleTask(function(){Ps(t),t.dirty=!1})),this.parentFragment.bubble()}function Ps(t){var e,n,r,i,s;e=t.node,e&&(i=O(e.options),n=t.getAttribute("value"),r=t.getAttribute("multiple"),void 0!==n?(i.forEach(function(t){var e,i;e=t._ractive?t._ractive.value:t.value,i=r?Fs(n,e):n==e,i&&(s=!0),t.selected=i}),s||(i[0]&&(i[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Fs(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Rs(t,e){t.select=js(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Ns(t){t.select&&C(t.select.options,t)}function js(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function Vs(t){var e,n,r,i,s,o,a;this.type=_c,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=r=e.root,this.index=t.index,this.key=t.key,this.name=Nd(n.e),"option"===this.name&&Rs(this,n),"select"===this.name&&(this.options=[],this.bubble=Ts),"form"===this.name&&(this.formBindings=[]),a=Rd(this,n),this.attributes=Md(this,n.a),this.conditionalAttributes=Wd(this,n.m),n.f&&(this.fragment=new km({template:n.f,root:r,owner:this,pElement:this})),o=r.twoway,a.twoway===!1?o=!1:a.twoway===!0&&(o=!0),this.twoway=o,this.lazy=a.lazy,o&&(i=fs(this,n.a))&&(this.binding=i,s=this.root._twowayBindings[i.keypath.str]||(this.root._twowayBindings[i.keypath.str]=[]),s.push(i)),n.v&&(this.eventHandlers=ip(this,n.v)),n.o&&(this.decorator=new sp(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Ds(t,e){var n,r,i,s,o=function(n){n.rebind(t,e)};if(this.attributes&&this.attributes.forEach(o),this.conditionalAttributes&&this.conditionalAttributes.forEach(o),this.eventHandlers&&this.eventHandlers.forEach(o),this.decorator&&o(this.decorator),this.fragment&&o(this.fragment),i=this.liveQueries)for(s=this.root,n=i.length;n--;)i[n]._makeDirty();this.node&&(r=this.node._ractive)&&j(r,"keypath",t,e)}function Ls(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),r=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==r&&t.node.setAttribute("height",r),t.node.removeEventListener("load",e,!1)},!1)}function Ms(t){t.node.addEventListener("reset",Ws,!1)}function Is(t){t.node.removeEventListener("reset",Ws,!1)}function Ws(){var t=this._ractive.proxy;eh.start(),t.formBindings.forEach(Us),eh.end()}function Us(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function zs(t,e,n){var r,i,s;this.element=t,this.root=r=t.root,this.isIntro=n,i=e.n||e,("string"==typeof i||(s=new km({template:i,root:r,owner:t}),i=s.toString(),s.unbind(),""!==i))&&(this.name=i,e.a?this.params=e.a:e.d&&(s=new km({template:e.d,root:r,owner:t}),this.params=s.getArgsList(),s.unbind()),this._fn=v("transitions",r,i),this._fn||m(Du(i,"transition")))}function qs(t){return t}function $s(){Np.hidden=document[Tp]}function Bs(){Np.hidden=!0}function Ks(){Np.hidden=!1}function Qs(){var t,e,n,r=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(i){n||(!i&&r.isIntro&&Zs(t,e),t._ractive.transition=null,r._manager.remove(r),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Zs(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Hs(){var t,e,n,r=this,i=this.root;return t=Gs(this),e=this.node=du(this.name,t),i.constructor.css&&this.parentFragment.getNode()===i.el&&this.node.setAttribute("data-ractive-css",i.constructor._guid),_u(this.node,"_ractive",{value:{proxy:this,keypath:Ju(this.parentFragment),events:xu(null),root:i}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=Wp,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Fu):"style"===this.name?(this.bubble=Ip,this.bubble(),this.fragment.unrender=Fu):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Fu:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&Ys(this),"img"===this.name?Ls(this):"form"===this.name?Ms(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&eh.scheduleTask(function(){r.decorator.torndown||r.decorator.init()},!0),i.transitionsEnabled&&this.intro&&(n=new Mp(this,this.intro,!0),eh.registerTransition(n),eh.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&eh.scheduleTask(function(){return r.node.focus()},!0),Js(this),this.node}function Gs(t){var e,n,r;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?su.svg:(r=t.parent)?"foreignObject"===r.name?su.html:r.node.namespaceURI:t.root.el.namespaceURI}function Ys(t){var e,n,r;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&i(n)){for(r=n.length;r--;)if(e==n[r]){t.node.selected=!0;break}}else t.node.selected=e==n}function Js(t){var e,n,r,i,s;e=t.root;do for(n=e._liveQueries,r=n.length;r--;)i=n[r],s=n["_"+i],s._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(s);while(e=e.parent)}function Xs(t){var e,n,r;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&i(n))for(r=n.length;r--;)if(n[r]==e)return!0}function to(t){var e,n,r,i;return e=t.attributes,n=e.type,r=e.value,i=e.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}function eo(t){var e=t.toString();return e?" "+e:""}function no(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(K),"option"===this.name&&Ns(this),this.attributes.forEach(K),this.conditionalAttributes.forEach(K)}function ro(t){var e,n,r;(r=this.transition)&&r.complete(),"option"===this.name?this.detach():t&&eh.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(Q),this.decorator&&eh.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(r=new Mp(this,this.outro,!1),eh.registerTransition(r),eh.scheduleTask(function(){return r.start()})),this.liveQueries&&io(this),"form"===this.name&&Is(this)}function io(t){var e,n,r;for(r=t.liveQueries.length;r--;)e=t.liveQueries[r],n=e.selector,e._remove(t.node)}function so(t,e){var n=$p.exec(e)[0];return null===t||n.length<t.length?n:t}function oo(t,e){var n;if(n=ao(t,e))return n;if(n=Qf.fromId(e,{noThrow:!0})){n=Bp(n);var r=Qf.parse(n,Qf.getParseOptions(t));return t.partials[e]=r.t}}function ao(t,e){var n=g("partials",t,e);if(n){var r=n.partials[e],i=void 0;if("function"==typeof r&&(i=r.bind(n),i.isOwner=n.partials.hasOwnProperty(e),r=i(n.data,Qf)),!r&&""!==r)return void p(Vu,e,"partial","partial");if(!Qf.isParsed(r)){var s=Qf.parse(r,Qf.getParseOptions(n));s.p&&p("Partials ({{>%s}}) cannot contain nested inline partials",e);var o=i?n:uo(n,e);o.partials[e]=r=s.t}return i&&(r._fn=i),r.v?r.t:r}}function uo(t,e){return t.partials.hasOwnProperty(e)?t:ho(t.constructor,e)}function ho(t,e){return t?t.partials.hasOwnProperty(e)?t:ho(t._Parent,e):void 0}function co(t,e){var n,r=g("components",t,e);if(r&&(n=r.components[e],!n._Parent)){var i=n.bind(r);if(i.isOwner=r.components.hasOwnProperty(e),n=i(r.data),!n)return void(t.debug&&p(Vu,e,"component","component"));"string"==typeof n&&(n=co(t,n)),n._fn=i,r.components[e]=n}return n}function lo(){var t=this.instance.fragment.detach();return Zp.fire(this.instance),t}function fo(t){return this.instance.fragment.find(t)}function po(t,e){return this.instance.fragment.findAll(t,e)}function mo(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function vo(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function go(){return this.parentFragment.findNextNode(this)}function yo(){return this.rendered?this.instance.fragment.firstNode():null}function wo(t,e){var n,r,i,s,o=this.ractive;for(n=o.adapt.length,r=0;n>r;r+=1)if(i=o.adapt[r],i.filter(e,t,o))return s=this.wrapped[t]=i.wrap(o,e,t,ko(t)),s.value=e,e;return e}function bo(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function ko(t){var e;return Hp[t]||(e=t?t+".":"",Hp[t]=function(n,r){var i;return"string"==typeof n?(i={},i[e+n]=r,i):"object"==typeof n?e?bo(n,t):n:void 0
}),Hp[t]}function xo(t){var e,n,r=[Yu];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&x(r,n),n=n.parent;return r}function _o(t,e,n){var r;Ao(t,e),n||(r=e.wildcardMatches(),r.forEach(function(n){Eo(t,n,e)}))}function Eo(t,e,n){var r,i,s;e=e.str||e,r=t.depsMap.patternObservers,i=r&&r[e],i&&i.forEach(function(e){s=n.join(e.lastKey),Ao(t,s),Eo(t,e,s)})}function Ao(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function So(){var t,e,n,r=this,i=function(e){var n,r;s.noCascade.hasOwnProperty(e.str)||((r=s.deps.computed[e.str])&&r.forEach(function(e){var n=e.key;e.viewmodel===s?(s.clearCache(n.str),e.invalidate(),t.push(n),i(n)):e.viewmodel.mark(n)}),(n=s.depsMap.computed[e.str])&&n.forEach(i))},s=this,o={};return t=this.changes,t.length?(t.slice().forEach(i),e=xo(t),e.forEach(function(e){var n;-1===t.indexOf(e)&&(n=s.deps.computed[e.str])&&(r.changes.push(e),n.forEach(function(t){t.viewmodel.mark(t.key)}))}),this.changes=[],this.patternObservers.length&&(e.forEach(function(t){return _o(r,t,!0)}),t.forEach(function(t){return _o(r,t)})),this.deps.observers&&(e.forEach(function(t){return Co(r,null,t,"observers")}),To(this,t,"observers")),this.deps["default"]&&(n=[],e.forEach(function(t){return Co(r,n,t,"default")}),n.length&&Oo(this,n,t),To(this,t,"default")),t.forEach(function(t){o[t.str]=r.get(t)}),this.implicitChanges={},this.noCascade={},o):void 0}function Co(t,e,n,r){var i,s;(i=Po(t,n,r))&&(s=t.get(n),i.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(s)}))}function Oo(t,e,n){e.forEach(function(e){for(var r=!1,i=0,s=n.length,o=[];s>i;){var a=n[i];if(a===e.keypath){r=!0;break}a.slice(0,e.keypath.length)===e.keypath&&o.push(a),i++}r&&e.setValue(t.get(e.keypath)),o.length&&e.refineValue(o)})}function To(t,e,n){var r=function(t){t.forEach(i),t.forEach(s)},i=function(e){var r=Po(t,e,n);r&&a.push({keypath:e,deps:r})},s=function(e){var i;(i=t.depsMap[n][e.str])&&r(i)},o=function(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})},a=[];r(e),a.forEach(o)}function Po(t,e,n){var r=t.deps[n];return r?r[e.str]:null}function Fo(){this.captureGroups.push([])}function Ro(t,e){var n,r;if(e||(r=this.wrapped[t])&&r.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function No(t){var e="var __ractive=this;return("+t.replace(Gp,function(t,e){return'__ractive.get("'+e+'")'})+")";return new Function(e)}function jo(t,e){var n=e.firstKey;return!(n in t.ractive.data||n in t.computations||n in t.mappings)}function Vo(t,e){return e=Yp(e),this.computations[t.str]=new Xp(this.ractive,t,e)}function Do(t,e){var n,r,i,s,o,a=this.ractive,u=this.cache,h=t.str;return e=e||em,e.capture&&(o=S(this.captureGroups))&&(~o.indexOf(t)||o.push(t)),(n=this.mappings[t.firstKey])?n.get(t,e):t.isSpecial?t.value:(void 0===u[h]?((i=this.computations[h])&&!i.bypass?(r=i.get(),this.adapt(h,r)):(s=this.wrapped[h])?r=s.value:t.isRoot?(this.adapt("",a.data),r=a.data):r=Lo(this,t),u[h]=r):r=u[h],!e.noUnwrap&&(s=this.wrapped[h])&&(r=s.get()),r===tm?void 0:r)}function Lo(t,e){var n,r,i,s;return n=t.get(e.parent),(s=t.wrapped[e.parent.str])&&(n=s.get()),null!==n&&void 0!==n?((r=t.cacheMap[e.parent.str])?-1===r.indexOf(e.str)&&r.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(i=n[e.lastKey],t.adapt(e.str,i,!1),t.cache[e.str]=i,i):t.cache[e.str]=tm):void 0}function Mo(){var t,e,n=[];for(t in this.ractive.computed)e=this.compute(D(t),this.ractive.computed[t]),n.push(e),t in this.mappings&&d("Cannot map to a computed property ('%s')",t);n.forEach(Io)}function Io(t){t.init()}function Wo(t,e){this.keypath=t,this.viewmodel=e}function Uo(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,e.force&&(this.force=e.force),this.deps=[],this.unresolved=[],this.trackData=e.trackData,this.resolved=!1}function zo(t,e){var n=this.mappings[t.str]=new Uo(t,e);return n.initViewmodel(this),n}function qo(t,e){var n,r=t.str;eh.addViewmodel(this),e&&(e.implicit&&(this.implicitChanges[r]=!0),e.noCascade&&(this.noCascade[r]=!0)),(n=this.computations[r])&&n.invalidate(),-1===this.changes.indexOf(t)&&this.changes.push(t);var i=e?e.keepExistingWrapper:!1;this.clearCache(r,i)}function $o(t,e,n,r){var i,s,o,a;if(this.mark(t),r&&r.compare){o=Ko(r.compare);try{i=e.map(o),s=n.map(o)}catch(u){if(this.debug)throw u;p("Merge operation: comparison failed. Falling back to identity checking"),i=e,s=n}}else i=e,s=n;a=nm(i,s),this.smartUpdate(t,n,a,e.length!==n.length)}function Bo(t){return JSON.stringify(t)}function Ko(t){if(t===!0)return Bo;if("string"==typeof t)return rm[t]||(rm[t]=function(e){return e[t]}),rm[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Qo(t,e){var n,r,i,s=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,s):(r=this.deps[s]||(this.deps[s]={}),i=r[t.str]||(r[t.str]=[]),i.push(e),t.isRoot||Zo(this,t,s)))}function Zo(t,e,n){for(var r,i,s;!e.isRoot;)r=t.depsMap[n]||(t.depsMap[n]={}),i=r[e.parent.str]||(r[e.parent.str]=[]),s=e.str,void 0===i["_"+s]&&(i["_"+s]=0,i.push(e)),i["_"+s]+=1,e=e.parent}function Ho(){return this.captureGroups.pop()}function Go(t,e){var n,r,i,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(r=this.computations[t.str]){if(r.setting)return;r.set(e),e=r.get()}a(this.cache[t.str],e)||(i=this.wrapped[t.str],i&&i.reset&&(s=i.reset(e)!==!1,s&&(e=i.get())),r||s||Yo(this,t,e),o.silent?this.clearCache(t.str):this.mark(t))}function Yo(t,e,n){var r,i,s,o;s=function(){r.set?r.set(e.lastKey,n):(i=r.get(),o())},o=function(){i||(i=rc(e.lastKey),t.set(e.parent,i,{silent:!0})),i[e.lastKey]=n},r=t.wrapped[e.parent.str],r?s():(i=t.get(e.parent),(r=t.wrapped[e.parent.str])?s():o())}function Jo(t,e,n){var r,i,s,o=this;if(i=n.length,n.forEach(function(e,n){-1===e&&o.mark(t.join(n),sm)}),this.set(t,e,{silent:!0}),(r=this.deps["default"][t.str])&&r.filter(Xo).forEach(function(t){return t.shuffle(n,e)}),i!==e.length){for(this.mark(t.join("length"),im),s=i;s<e.length;s+=1)this.mark(t.join(s));for(s=e.length;i>s;s+=1)this.mark(t.join(s),sm)}}function Xo(t){return"function"==typeof t.shuffle}function ta(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function ea(t,e){var n,r,i,s=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,s);if(r=this.deps[s][t.str],i=r.indexOf(e),-1===i)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");r.splice(i,1),t.isRoot||na(this,t,s)}}function na(t,e,n){for(var r,i;!e.isRoot;)r=t.depsMap[n],i=r[e.parent.str],i["_"+e.str]-=1,i["_"+e.str]||(C(i,e),i["_"+e.str]=void 0),e=e.parent}function ra(t){this.hook=new k(t),this.inProcess={},this.queue={}}function ia(t,e){return t[e._guid]||(t[e._guid]=[])}function sa(t,e){var n=ia(t.queue,e);for(t.hook.fire(e);n.length;)sa(t,n.shift());delete t.queue[e._guid]}function oa(e){var n,r=void 0===arguments[1]?{}:arguments[1],i=void 0===arguments[2]?{}:arguments[2];if(aa(e,i),am.fire(Hf.getConstructTarget(e,r),r),Hf.init(e.constructor,e,r),e.magic&&!iu)throw new Error("Getters and setters (magic mode) are not supported in this browser");um.fire(e),hm.begin(e),e.viewmodel=new om(e,i.mappings),e.viewmodel.init(),e.template&&(e.fragment=new km({template:e.template,root:e,owner:e})),hm.end(e),(n=t(e.el))&&e.render(n,e.append)}function aa(t,e){t._guid="r-"+cm++,t._subs=xu(null),t._config={},t._twowayBindings=xu(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function ua(t,e,n){this.parameters=t,this.parentFragment=t.component.parentFragment,this.key=e,this.fragment=new km({template:n,root:t.component.root,owner:this}),this.parameters.addData(this.key.str,this.fragment.getValue())}function ha(t,e){return e.parameters?iu&&"legacy"!==e.parameters?la(t,e):ca(t):t.data}function ca(t){var e,n=t.mappings;for(e in n){var r=n[e];r.trackData=!0,r.updatable||t.addData(e,r.getValue())}return t.data}function la(t,e){var n=fa(t,e);return new n(t)}function fa(t,e){var n=e._parameters;return(!n.Constructor||t.newKeys.length)&&(n.Constructor=da(t,n.defined)),n.Constructor}function da(t,e){var n,r,i=function(t){this._mappings=t.mappings,this._data=t.data||{}};return n=t.keys.reduce(function(t,e){return t[e]={get:function(){var t=this._mappings[e];return t?t.getValue():this._data[e]},set:function(t){var n=this._mappings[e];n?(eh.start(),n.setValue(t),eh.end()):this._data[e]=t},enumerable:!0},t},e),Eu(r={toJSON:pa},n),r.constructor=i,i.prototype=r,i}function pa(){var t,e={};for(t in this)-1===dm.indexOf(t)&&(e[t]=this[t]);return e}function ma(t,e,n){var r,i,s;this.parameters=t,this.key=e,this.resolved=this.ready=!1,r=t.component,i=this.resolve.bind(this),n.r?this.resolver=Nr(r,n.r,i):n.x?this.resolver=new ad(r,r.parentFragment,n.x,i):n.rx&&(this.resolver=new ld(r,n.rx,i)),this.resolved||(this.resolver&&c(this.resolver.forceResolution)&&(s=this.resolver.forceResolution.bind(this.resolver)),t.addMapping(e,void 0,s)),this.ready=!0}function va(t,e,n){var r,i,s;return n?(e.parameters&&(s=ga(e)),r=new ya(t,n,s),i=ha(r,e),{data:i,mappings:r.mappings}):{data:{}}}function ga(t){return t._parameters?t._parameters.defined||(t._parameters.defined={}):t._parameters={defined:{}},t._parameters.defined}function ya(t,e,n){var r=this;this.component=t,this.parentViewmodel=t.root.viewmodel,this.data={},this.mappings=xu(null),this.newKeys=[],this.keys=Object.keys(e),this.keys.forEach(function(t){n&&!n[t]&&r.newKeys.push(t),r.add(D(t),e[t])})}function wa(t){return 1===t.length&&t[0].t===yc}function ba(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ka(t.instance,t.root,n,e[n])}function ka(t,e,n,r){"string"!=typeof r&&p("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),fe(e,r,{event:t,args:n}),!1})}function xa(t,e){var n,r,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,r=n.root,this.root=r,this.type=Tc,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],i=va(this,e.prototype,t.template.a),fm(this,e,i,t.template.f,t.template.p),ba(this,t.template.v),(t.template.t1||t.template.t2||t.template.o)&&p('The "intro", "outro" and "decorator" directives have no effect on components'),pm(this)}function _a(t,e){var n,r=function(n){n.rebind(t,e)};this.resolvers.forEach(r);for(var i in this.yielders)this.yielders[i][0]&&r(this.yielders[i][0]);(n=this.root._liveComponentQueries["_"+this.name])&&n._makeDirty()}function Ea(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function Aa(){return this.instance.fragment.toString()}function Sa(){var t=this.instance;this.resolvers.forEach(K),Ca(this),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&C(t.el.__ractive_instances__,t),mm.fire(t)}function Ca(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function Oa(t){this.shouldDestroy=t,this.instance.unrender()}function Ta(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.items=t.template.map(function(n,r){return Pa({parentFragment:e,pElement:t.pElement,template:n,index:r})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Pa(t){if("string"==typeof t.template)return new nd(t);switch(t.template.t){case Pc:return new wm(t);case yc:return new dd(t);case bc:return new md(t);case wc:return new bd(t);case _c:var e=void 0;return(e=co(t.parentFragment.root,t.template.e))?new gm(t,e):new zp(t);case Ec:return new Qp(t);case Ac:return new ym(t);case Rc:return new bm(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Fa(t,e){j(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function Ra(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Na(t){return this.items?this.items.map(t?Va:ja).join(""):""}function ja(t){return t.toString()}function Va(t){return t.toString(!0)}function Da(){this.bound&&(this.items.forEach(La),this.bound=!1)}function La(t){t.unbind&&t.unbind()}function Ma(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function Ia(t){var e,n,r,i,s;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&(this.data=t):this.data=t,r=Hf.reset(this),i=r.length;i--;)if(_m.indexOf(r[i])>-1){s=!0;break}if(s){var o=void 0;this.viewmodel.mark(Yu),(o=this.component)&&(o.shouldDestroy=!0),this.unrender(),o&&(o.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new km({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=eh.start(this,!0),this.viewmodel.mark(Yu),eh.end();return Em.fire(this,t),e}function Wa(t){var e,n;Zf.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new km({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Ua(t,e){var n,r,i=this;if(r=eh.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],t=D(I(t)),this.viewmodel.set(t,e))}else t=D(I(t)),Cm.test(t.str)?L(this,t.str).forEach(function(t){i.viewmodel.set(t,e)}):this.viewmodel.set(t,e);return eh.end(),r}function za(t,e){return w(this,t,void 0===e?-1:-e)}function qa(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&C(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():Hu.resolve(),Fm.fire(this),this._boundFunctions.forEach($a),t}function $a(t){delete t.fn[t.prop]}function Ba(t){if("string"!=typeof t)throw new TypeError(ju);return this.set(t,!this.get(t))}function Ka(){return this.fragment.toString(!0)}function Qa(){var t,e,n=this;if(!this.fragment.rendered)return p("ractive.unrender() was called on a Ractive instance that was not rendered"),Hu.resolve();for(t=eh.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&t.then(function(){$h.remove(n.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),C(this.el.__ractive_instances__,this),Rm.fire(this),eh.end(),t}function Za(t){var e;return t=D(t)||Yu,e=eh.start(this,!0),this.viewmodel.mark(t),eh.end(),jm.fire(this,t),e}function Ha(t,e){var n,r,i;if("string"!=typeof t||e){i=[];for(r in this._twowayBindings)(!t||D(r).equalsOrStartsWith(t))&&i.push.apply(i,this._twowayBindings[r])}else i=this._twowayBindings[t];return n=Ga(this,i),this.set(n)}function Ga(t,e){var n={},r=[];return e.forEach(function(t){var e,i;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(r[t.keypath.str]||t.changed()||(r.push(t.keypath),r[t.keypath.str]=t));e=t.attribute.value,i=t.getValue(),E(e,i)||a(e,i)||(n[t.keypath.str]=i)}}),r.length&&r.forEach(function(t){var e,i,s;e=r[t.str],i=e.attribute.value,s=e.getValue(),E(i,s)||(n[t.str]=s)}),n}function Ya(t){for(var e={};t;)Ja(t,e),tu(t,e),t=t._Parent!==Lm?t._Parent:!1;return e}function Ja(t,e){$f.forEach(function(n){Xa(n.useDefaults?t.prototype:t,e,n.name)})}function Xa(t,e,n){var r,i=Object.keys(t[n]);i.length&&((r=e[n])||(r=e[n]={}),i.filter(function(t){return!(t in r)}).forEach(function(e){return r[e]=t[n][e]}))}function tu(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var r=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof r&&e[n]._method){var i=void 0,s=r._method;s&&(r=r._method),i=mc(e[n]._method,r),s&&(i._method=i),e[n]=i}}else e[n]=r._method?r._method:r}})}function eu(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Lm&&(r=Ya(r)),e=function(t){lm(this,t)},n=xu(t.prototype),n.constructor=e,Eu(e,{_guid:{value:Dm++},defaults:{value:n},extend:{value:xm,writable:!0,configurable:!0},_Parent:{value:t}}),Hf.extend(t,n,r),e.prototype=n,e}var nu,ru,iu,su,ou,au,uu=3,hu={el:void 0,append:!1,template:{v:uu,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1,debug:!1},cu=hu,lu={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};nu="object"==typeof document,ru="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),iu=!0}catch(fu){iu=!1}su={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ou="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),au=["o","ms","moz","webkit"];var du,pu,mu,vu,gu,yu,wu,bu,ku;if(du=ou?function(t,e){return e&&e!==su.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==su.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},nu){for(mu=du("div"),vu=["matches","matchesSelector"],ku=function(t){return function(e,n){return e[t](n)}},wu=vu.length;wu--&&!pu;)if(gu=vu[wu],mu[gu])pu=ku(gu);else for(bu=au.length;bu--;)if(yu=au[wu]+gu.substr(0,1).toUpperCase()+gu.substring(1),mu[yu]){pu=ku(yu);break}pu||(pu=function(t,e){var n,r,i;for(r=t.parentNode,r||(mu.innerHTML="",r=mu,t=t.cloneNode(),mu.appendChild(t)),n=r.querySelectorAll(e),i=n.length;i--;)if(n[i]===t)return!0;return!1})}else pu=null;var xu,_u,Eu;try{Object.defineProperty({},"test",{value:0}),nu&&Object.defineProperty(document.createElement("div"),"test",{value:0}),_u=Object.defineProperty}catch(Au){_u=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Au){throw Au}nu&&Object.defineProperties(du("div"),{test:{value:0}}),Eu=Object.defineProperties}catch(Au){Eu=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&_u(t,n,e[n])}}try{Object.create(null),xu=Object.create}catch(Au){xu=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}var Su,Cu,Ou=Object.prototype.hasOwnProperty,Tu=Object.prototype.toString,Pu=/^\[object (?:Array|FileList)\]$/,Fu=function(){},Ru={};ru?(Cu=function(t,e){console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Su=function(){console.log.apply(console,arguments)}):Cu=Su=Fu;var Nu,ju="Bad arguments",Vu='A function was specified for "%s" %s, but no %s was returned',Du=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Lu=function(t,e,n,r){if(t===e)return y(e);if(r){var i=v("interpolators",n,r);if(i)return i(t,e)||y(e);m(Du(r,"interpolator"))}return Mu.number(t,e)||Mu.array(t,e)||Mu.object(t,e)||y(e)},Mu={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,r,s,o;if(!i(t)||!i(e))return null;for(n=[],r=[],o=s=Math.min(t.length,e.length);o--;)r[o]=Lu(t[o],e[o]);for(o=s;o<t.length;o+=1)n[o]=t[o];for(o=s;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=s;e--;)n[e]=r[e](t);return n}},object:function(t,e){var n,r,i,s,o;if(!h(t)||!h(e))return null;n=[],s={},i={};for(o in t)Ou.call(t,o)&&(Ou.call(e,o)?(n.push(o),i[o]=Lu(t[o],e[o])):s[o]=t[o]);for(o in e)Ou.call(e,o)&&!Ou.call(t,o)&&(s[o]=e[o]);return r=n.length,function(t){for(var e,o=r;o--;)e=n[o],s[e]=i[e](t);return s}}};"undefined"==typeof window?Nu=null:(!function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-e)),s=i(function(){t(n+r)},r),e=n+r,s})}}(au,0,window),Nu=window.requestAnimationFrame);var Iu,Wu=Nu;Iu="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Uu={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};k.prototype.fire=function(t,e){var n=function(n){return t[n]?(e?t[n](e):t[n](),!0):void 0};n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?p(this.deprecate.message):p('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var zu,qu={},$u={},Bu={};"function"==typeof Promise?zu=Promise:(zu=function(t){var e,n,r,i,s,o,a=[],u=[],h=qu;r=function(t){return function(r){h===qu&&(e=r,h=t,n=P(h===$u?a:u,e),T(n))}},i=r($u),s=r(Bu);try{t(i,s)}catch(c){s(c)}return o={then:function(t,e){var r=new zu(function(i,s){var o=function(t,e,n){e.push("function"==typeof t?function(e){var n;try{n=t(e),F(r,n,i,s)}catch(o){s(o)}}:n)};o(t,a,i),o(e,u,s),h!==qu&&T(n)});return r}},o["catch"]=function(t){return this.then(null,t)},o},zu.all=function(t){return new zu(function(e,n){var r,i,s,o=[];if(!t.length)return void e(o);for(s=function(i){t[i].then(function(t){o[i]=t,--r||e(o)},n)},r=i=t.length;i--;)s(i)})},zu.resolve=function(t){return new zu(function(e){e(t)})},zu.reject=function(t){return new zu(function(e,n){n(t)})});var Ku,Qu,Zu,Hu=zu,Gu={};Ku=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Qu={},Zu=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=V(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.parent=""===t?null:D(e.join(".")),this.isRoot=!t},Zu.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return D(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:D(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return t?t&&this.str.substr(0,t.str.length+1)===t.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=R(this.str))}};var Yu=D(""),Ju=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return Yu},Xu=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};Xu.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,G(this)},decrementTotal:function(){this.totalChildren-=1,G(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;C(e,t),G(this)},init:function(){this.ready=!0,G(this)},detachNodes:function(){this.decoratorQueue.forEach(B),this.detachQueue.forEach(Z),this.children.forEach(H)}};var th,eh,nh=[],rh=new k("change");eh={start:function(t,e){var n,r;return e&&(n=new Hu(function(t){return r=t})),th={previousBatch:th,transitionManager:new Xu(r,th&&th.transitionManager),views:[],tasks:[],viewmodels:[],instance:t},t&&th.viewmodels.push(t.viewmodel),n},end:function(){Y(),th.transitionManager.init(),!th.previousBatch&&th.instance&&(th.instance.viewmodel.changes=[]),th=th.previousBatch},addViewmodel:function(t){return th?-1===th.viewmodels.indexOf(t)?(th.viewmodels.push(t),!0):!1:(t.applyChanges(),!1)},registerTransition:function(t){t._manager=th.transitionManager,th.transitionManager.add(t)},registerDecorator:function(t){th.transitionManager.addDecorator(t)},addView:function(t){th.views.push(t)},addUnresolved:function(t){nh.push(t)},removeUnresolved:function(t){C(nh,t)},detachWhenReady:function(t){th.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(th){for(n=th;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var ih=[],sh={tick:function(){var t,e,n;for(n=Iu(),eh.start(),t=0;t<ih.length;t+=1)e=ih[t],e.tick(n)||ih.splice(t--,1);eh.end(),ih.length?Wu(sh.tick):sh.running=!1},add:function(t){ih.push(t),sh.running||(sh.running=!0,Wu(sh.tick))},abort:function(t,e){for(var n,r=ih.length;r--;)n=ih[r],n.root===e&&n.keypath===t&&n.stop()}},oh=sh,ah=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Lu(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ah.prototype={tick:function(){var t,e,n,r,i,s;return s=this.keypath,this.running?(r=Date.now(),t=r-this.startTime,t>=this.duration?(null!==s&&(eh.start(this.root),this.root.viewmodel.set(s,this.to),eh.end()),this.step&&this.step(1,this.to),this.complete(this.to),i=this.root._animations.indexOf(this),-1===i&&p("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==s&&(n=this.interpolator(e),eh.start(this.root),this.root.viewmodel.set(s,n),eh.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&p("Animation was not found"),this.root._animations.splice(t,1)}};var uh={stop:Fu},hh=new k("detach"),ch=function(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?pu(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0},lh=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},fh=function(t,e){var n,r,i,s,o,a,u,h,c,l;for(n=se(t.component||t._ractive.proxy),r=se(e.component||e._ractive.proxy),i=S(n),s=S(r);i&&i===s;)n.pop(),r.pop(),o=i,i=S(n),s=S(r);if(i=i.component||i,s=s.component||s,c=i.parentFragment,l=s.parentFragment,c===l)return a=c.items.indexOf(i),u=l.items.indexOf(s),a-u||n.length-r.length;if(h=o.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-r.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},dh=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):fh(t,e)},ph=function(){this.sort(this._isComponentQuery?fh:dh),this._dirty=!1},mh=function(){var t=this;this._dirty||(this._dirty=!0,eh.scheduleTask(function(){t._sort()}))},vh=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},gh={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},yh={capture:!0,noUnwrap:!0},wh=new k("insert"),bh=function(t,e,n,r){this.root=t,this.keypath=e,this.callback=n,this.defer=r.defer,this.context=r&&r.context?r.context:t};bh.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?eh.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var kh,xh=/\*/,_h=Array.prototype.slice;kh=function(t,e,n,r){this.root=t,this.callback=n,this.defer=r.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=r&&r.context?r.context:t},kh.prototype={init:function(t){var e,n;if(e=be(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(D(n));else this.values=e},update:function(t){var e,n=this;if(xh.test(t.str)){e=be(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(D(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void eh.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,r,i;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(r=_h.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r),this.values[e]=n,this.callback.apply(this.context,i)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Eh,Ah,Sh,Ch,Oh,Th,Ph=/\*/,Fh={},Rh=function(t){return t.trim()},Nh=function(t){return""!==t},jh=Array.prototype,Vh=function(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;n>s;s++)r[s-1]=arguments[s];var o,a,u,h,c=[];if(e=D(I(e)),o=this.viewmodel.get(e),a=o.length,!i(o))throw new Error("Called ractive."+t+"('"+e+"'), but '"+e+"' does not refer to an array");return c=Ce(o,t,r),h=jh[t].apply(o,r),u=eh.start(this,!0).then(function(){return h}),c?this.viewmodel.smartUpdate(e,o,c):this.viewmodel.mark(e),eh.end(),u}},Dh=Vh("pop"),Lh=Vh("push"),Mh="/* Ractive.js component styles */\n",Ih={},Wh=[];nu?(Sh=document.createElement("style"),Sh.type="text/css",Ch=document.getElementsByTagName("head")[0],Th=!1,Oh=Sh.styleSheet,Ah=function(){var t;
Wh.length?(t=Mh+Wh.join(" "),Oh?Oh.cssText=t:Sh.innerHTML=t,Th||(Ch.appendChild(Sh),Th=!0)):Th&&(Ch.removeChild(Sh),Th=!1)},Eh={add:function(t){t.css&&(Ih[t._guid]||(Ih[t._guid]=0,Wh.push(t.css),Ah()),Ih[t._guid]+=1)},remove:function(t){t.css&&(Ih[t._guid]-=1,Ih[t._guid]||(C(Wh,t.css),eh.scheduleTask(Ah)))}}):Eh=null;var Uh,zh,qh,$h=Eh,Bh=new k("render"),Kh=new k("complete"),Qh=function(t,e,n,r){var i=t.root,s=t.keypath;return"sort"===n||"reverse"===n?void i.viewmodel.set(s,e):void i.viewmodel.smartUpdate(s,e,r)},Zh=[],Hh=["pop","push","reverse","shift","sort","splice","unshift"];Hh.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i,s,o,a;for(i=Ce(this,t,n),s=Array.prototype[t].apply(this,arguments),eh.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],eh.addViewmodel(o.root.viewmodel),Qh(o,this,t,i);return eh.end(),this._ractive.setting=!1,s};_u(Zh,t,{value:e})}),Uh={},Uh.__proto__?(zh=function(t){t.__proto__=Zh},qh=function(t){t.__proto__=Array.prototype}):(zh=function(t){var e,n;for(e=Hh.length;e--;)n=Hh[e],_u(t,n,{value:Zh[n],configurable:!0})},qh=function(t){var e;for(e=Hh.length;e--;)delete t[Hh[e]]}),zh.unpatch=qh;var Gh,Yh,Jh,Xh=zh;Gh={filter:function(t){return i(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Yh(t,e,n)}},Yh=function(t,e,n){this.root=t,this.value=e,this.keypath=D(n),e._ractive||(_u(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Xh(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Yh.prototype={get:function(){return this.value},teardown:function(){var t,e,n,r,i;if(t=this.value,e=t._ractive,n=e.wrappers,r=e.instances,e.setting)return!1;if(i=n.indexOf(this),-1===i)throw new Error(Jh);if(n.splice(i,1),n.length){if(r[this.root._guid]-=1,!r[this.root._guid]){if(i=r.indexOf(this.root),-1===i)throw new Error(Jh);r.splice(i,1)}}else delete t._ractive,Xh.unpatch(this.value)}},Jh="Something went wrong in a rather interesting way";var tc,ec,nc=/^\s*[0-9]+\s*$/,rc=function(t){return nc.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),tc={filter:function(t,e,n){var r,s;return e?(e=D(e),(r=n.viewmodel.wrapped[e.parent.str])&&!r.magic?!1:(s=n.viewmodel.get(e.parent),i(s)&&/^[0-9]+$/.test(e.lastKey)?!1:s&&("object"==typeof s||"function"==typeof s))):!1},wrap:function(t,e,n){return new ec(t,e,n)}},ec=function(t,e,n){var r,i,s;return n=D(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,r=n.parent,this.obj=r.isRoot?t.data:t.viewmodel.get(r),i=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),i&&i.set&&(s=i.set._ractiveWrappers)?void(-1===s.indexOf(this)&&s.push(this)):void Fe(this,e,i)},ec.prototype={get:function(){return this.value},reset:function(t){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=t,eh.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=rc(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,r,i;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(r=e._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(Au){tc=!1}var ic,sc;tc&&(ic={filter:function(t,e,n){return tc.filter(t,e,n)&&Gh.filter(t)},wrap:function(t,e,n){return new sc(t,e,n)}},sc=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=tc.wrap(t,e,n),this.arrayWrapper=Gh.wrap(t,e,n)},sc.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var oc,ac,uc={extend:function(t,e,n){e.adapt=Re(e.adapt,A(n.adapt))},init:function(t,e,n){var r,i,s=function(t){return"string"==typeof t&&(t=v("adaptors",e,t),t||d(Du(t,"adaptor"))),t};if(r=e.adapt.map(s),i=A(n.adapt).map(s),e.adapt=Re(r,i),e.magic){if(!iu)throw new Error("Getters and setters (magic mode) are not supported in this browser");e.modifyArrays&&e.adapt.push(ic),e.adapt.push(tc)}e.modifyArrays&&e.adapt.push(Gh)}},hc=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,cc=/\/\*.*?\*\//g,lc=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,fc=/^@media/,dc=/\[data-ractive-css="[a-z0-9-]+"]/g,pc={name:"css",extend:function(t,e,n){var r,i=e.constructor._guid;(r=De(n.css,n,i)||De(t.css,t,i))&&(e.constructor.css=r)},init:function(){}},mc=function(t,e,n){return n||Le(t,e)?function(){var n,r="_super"in this,i=this._super;return this._super=e,n=t.apply(this,arguments),r&&(this._super=i),n}:t},vc={name:"data",extend:function(t,e,n){e.data=Me(t,e,n)},init:function(t,e,n){var r=n.data,i=Me(t,e,n);return"function"==typeof i&&(i=i.call(e,r)||r),e.data=i||{}},reset:function(t){var e=this.init(t.constructor,t,t);return e?(t.data=e,!0):void 0}},gc=1,yc=2,wc=3,bc=4,kc=5,xc=6,_c=7,Ec=8,Ac=9,Sc=10,Cc=13,Oc=14,Tc=15,Pc=16,Fc=17,Rc=18,Nc=20,jc=21,Vc=22,Dc=23,Lc=24,Mc=26,Ic=27,Wc=30,Uc=31,zc=32,qc=33,$c=34,Bc=35,Kc=36,Qc=40,Zc=50,Hc=51,Gc=52,Yc=53,Jc=54,Xc=55,tl=60,el=61,nl=/^\s+/;ac=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},ac.prototype=Error.prototype,oc=function(t,e){var n,r,i=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},oc.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},getLinePos:function(t){for(var e,n=0,r=0;t>=this.lineEnds[n];)r=this.lineEnds[n],n+=1;return e=t-r,[n+1,e+1,t]},error:function(t){var e,n,r,i,s,o;throw e=this.getLinePos(this.pos),n=e[0],r=e[1],i=this.lines[e[0]-1],s=i+"\n"+new Array(e[1]).join(" ")+"^----",o=new ac(t+" at line "+n+" character "+r+":\n"+s),o.line=e[0],o.character=e[1],o.shortMessage=t,o},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(nl)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},oc.extend=function(t){var e,n,r=this;e=function(t,e){oc.call(this,t,e)},e.prototype=xu(r.prototype);for(n in t)Ou.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=oc.extend,e};var rl,il,sl,ol=/^[^\s=]+/,al=/^\s+/,ul={t:Sc,exclude:!0},hl="Expected a JavaScript expression",cl="Expected closing paren",ll=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;rl=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,il=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,sl=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var fl,dl,pl=function(t){return function(e){var n,r,i,s;for(n=e.pos,r='"',i=!1;!i;)s=e.matchPattern(rl)||e.matchPattern(il)||e.matchString(t),s?r+='"'===s?'\\"':"\\'"===s?"'":s:(s=e.matchPattern(sl),s?r+="\\u"+("000"+s.charCodeAt(1).toString(16)).slice(-4):i=!0);return r+='"',JSON.parse(r)}},ml=pl('"'),vl=pl("'"),gl=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=vl(t),t.matchString('"')?{t:jc,v:n}:(t.pos=e,null)):t.matchString("'")?(n=ml(t),t.matchString("'")?{t:jc,v:n}:(t.pos=e,null)):null},yl=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,wl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,bl=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=Je(t),t.allowWhitespace(),t.matchString("}")?{t:Dc,m:n}:(t.pos=e,null)):(t.pos=e,null)},kl=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=Xe(t),t.matchString("]")?{t:Vc,m:n}:(t.pos=e,null)):(t.pos=e,null)},xl=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;fl=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,dl=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var _l,El,Al=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,Sl=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Cl=function(t){return tn(t)||en(t)||nn(t)},Ol=function(t){var e,n,r,i;if(n=Cl(t),!n)return null;for(;n;)if(e=t.pos,r=rn(t))n={t:zc,x:n,r:r};else{if(!t.matchString("("))break;t.allowWhitespace(),i=Xe(t),t.allowWhitespace(),t.matchString(")")||t.error(cl),n={t:Qc,x:n},i&&(n.o=i)}return n};El=function(t,e){return function(n){var r;return(r=e(n))?r:n.matchString(t)?(n.allowWhitespace(),r=on(n),r||n.error(hl),{s:t,o:r,t:qc}):null}},function(){var t,e,n,r,i;for(r="! ~ + - typeof".split(" "),i=Ol,t=0,e=r.length;e>t;t+=1)n=El(r[t],i),i=n;_l=i}();var Tl,Pl,Fl=_l;Pl=function(t,e){return function(n){var r,i,s;if(i=e(n),!i)return null;for(;;){if(r=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=r,i;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=r,i;if(n.allowWhitespace(),s=e(n),!s)return n.pos=r,i;i={t:Kc,s:t,o:[i,s]}}}},function(){var t,e,n,r,i;for(r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=Fl,t=0,e=r.length;e>t;t+=1)n=Pl(r[t],i),i=n;Tl=i}();var Rl,Nl,jl,Vl,Dl,Ll,Ml,Il,Wl=/^[0-9][1-9]*$/,Ul=/^yield\s*/,zl=/^#\s*partial\s+/,ql=/^\s*else\s*/,$l=/^\s*elseif\s+/,Bl={each:Gc,"if":Zc,"if-with":Jc,"with":Yc,unless:Hc,partial:Xc},Kl=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Ql=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Zl=new RegExp("^("+Object.keys(Bl).join("|")+")\\b"),Hl="<!--",Gl="-->";Rl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Nl=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,jl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Vl=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Dl=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(jl).join("|")+"));?","g"),Ll=/</g,Ml=/>/g,Il=/&/g;var Yl,Jl,Xl,tf,ef,nf,rf,sf=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,of=function(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},af=/^[^\s"'>\/=]+/,uf=/^[^\s"'=<>`]+/;Jl={"true":!0,"false":!1,undefined:void 0,"null":null},Xl=new RegExp("^(?:"+Object.keys(Jl).join("|")+")"),tf=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,ef=/\$\{([^\}]+)\}/g,nf=/^\$\{([^\}]+)\}/,rf=/^\s*$/,Yl=oc.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&rf.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(nf),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(Xl))?{v:Jl[e]}:void 0},function(t){var e;return(e=t.matchPattern(tf))?{v:+e}:void 0},function(t){var e,n=gl(t);return n&&(e=t.values)?{v:n.v.replace(ef,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=Mn(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var hf,cf=function(t,e){var n=new Yl(t,{values:e});return n.result},lf=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/;hf=oc.extend({converters:[on]});var ff,df=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,pf=/^[\s\n\/>]/,mf=/^on/,vf=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,gf=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,yf={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},wf={exclude:!0};ff={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var bf,kf,xf,_f,Ef=/[-/\\^$*+?.()|[\]{}]/g,Af=/^<!--\s*/,Sf=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Cf=/\s*-->/,Of=/^[ \t\f\r\n]+/,Tf=/[ \t\f\r\n]+$/,Pf=function(t,e,n){var r;e&&(r=t[0],"string"==typeof r&&(r=r.replace(Of,""),r?t[0]=r:t.shift())),n&&(r=S(t),"string"==typeof r&&(r=r.replace(Tf,""),r?t[t.length-1]=r:t.pop()))},Ff=/^\s*\r?\n/,Rf=/\r?\n\s*$/,Nf=function(t){var e,n,r,i,s;for(e=1;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e-2],Bn(n)&&Kn(r)&&Bn(i)&&Rf.test(i)&&Ff.test(n)&&(t[e-2]=i.replace(Rf,"\n"),t[e]=n.replace(Ff,"")),Qn(n)&&Bn(r)&&Rf.test(r)&&Bn(n.f[0])&&Ff.test(n.f[0])&&(t[e-1]=r.replace(Rf,"\n"),n.f[0]=n.f[0].replace(Ff,"")),Bn(n)&&Qn(r)&&(s=S(r.f),Bn(s)&&Rf.test(s)&&Ff.test(n)&&(r.f[r.f.length-1]=s.replace(Rf,"\n"),t[e]=n.replace(Ff,"")));return t},jf=Zn,Vf=/[ \t\f\r\n]+/g,Df=/^(?:pre|script|style|textarea)$/i,Lf=/^\s+/,Mf=/\s+$/,If=[dn,fn,wn,xn,gn,vn,pn],Wf=[ln],Uf=[fn,xn,vn];xf=oc.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],r=e.staticDelimiters||["[[","]]"],i=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:If},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Wf},{isStatic:!0,isTriple:!1,open:r[0],close:r[1],readers:Uf},{isStatic:!0,isTriple:!0,open:i[0],close:i[1],readers:Wf}],this.sortMustacheTags(),this.sectionDepth=0,this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t,e){return this.sectionDepth>0&&this.error("A section was left open"),Yn(t,e.stripComments!==!1,e.preserveWhitespace,!e.preserveWhitespace,!e.preserveWhitespace),t},converters:[Ke,qn,Cn,Wn,$n],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}}),_f=function(t){var e,n=void 0===arguments[1]?{}:arguments[1];e={v:uu,t:new xf(t,n).result};var r={};return jf(n.ractive?[n.ractive]:[],r,e.t),o(r)||(e.p=r),e};var zf,qf,$f,Bf=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Kf={parse:Xn,fromId:tr,isHashedId:er,isParsed:nr,getParseOptions:rr,createHelper:Jn},Qf=Kf,Zf={name:"template",extend:function(t,e,n){var r;"template"in n&&(r=n.template,e.template="function"==typeof r?r:ar(r,e))},init:function(t,e,n){var r,i;r="template"in n?n.template:t.prototype.template,"function"==typeof r&&(i=r,r=sr(e,i),e._config.template={fn:i,result:r}),r=ar(r,e),e.template=r.t,r.p&&ur(e.partials,r.p)},reset:function(t){var e,n=ir(t);return n?(e=ar(n,t),t.template=e.t,ur(t.partials,e.p,!0),!0):void 0}};zf=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],qf=function(t,e){this.name=t,this.useDefaults=e},qf.prototype={constructor:qf,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,e,n)},configure:function(t,e,n){var r,i=this.name,s=n[i];r=xu(t[i]);for(var o in s)r[o]=s[o];e[i]=r},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var r=e[t];r._fn&&(r._fn.isOwner?e[t]=r._fn:delete e[t],n=!0)}),n}},$f=zf.map(function(t){return new qf(t,"computed"===t)});var Hf,Gf,Yf,Jf,Xf,td;Jf={adapt:uc,css:pc,data:vc,template:Zf},Yf=Object.keys(cu),td=vr(Yf.filter(function(t){return!Jf[t]})),Xf=vr(Yf.concat($f.map(function(t){return t.name}))),Gf=[].concat(Yf.filter(function(t){return!$f[t]&&!Jf[t]}),$f,Jf.data,Jf.template,Jf.css),Hf={extend:function(t,e,n){return pr("extend",t,e,n)},init:function(t,e,n){return pr("init",t,e,n)},reset:function(t){return Gf.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Gf,getConstructTarget:function(t,e){return e.onconstruct?{onconstruct:hr(t,"onconstruct",e.onconstruct).bind(t),fire:t.fire.bind(t)}:t}};var ed=function(){return e(this.node)},nd=function(t){this.type=gc,this.text=t.template};nd.prototype={detach:ed,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?Pn(this.text):this.text},unrender:function(t){return t?this.detach():void 0}};var rd=function(t,e,n){var r;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,r=W(t.root,e,t.parentFragment),void 0!=r?this.resolve(r):eh.addUnresolved(this)};rd.prototype={resolve:function(t){this.keypath&&!t&&eh.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(D(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||eh.removeUnresolved(this)}};var id=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},sd={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};id.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,r=sd[e];if(!r)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(D("@"+r.prefix+Fr(this.cached,r)));if(-1!==r.prop.indexOf("index")||-1!==r.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===Gc&&void 0!==(t=Fr(n,r)))return this.cached=n,n.registerIndexRef(this),this.callback(D("@"+r.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=Fr(n,r)))return this.callback(D("@"+r.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var od=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};od.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(D("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},Rr.resolve=function(t){var e,n,r={};for(e in t.refs)n=t.refs[e],r[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return r};var ad,ud={},hd=Function.prototype.bind;ad=function(t,e,n,r){var i,s=this;i=t.root,this.root=i,this.parentFragment=e,this.callback=r,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Nr(s,t,function(t){s.resolve(e,t)})}),this.ready=!0,this.bubble()},ad.prototype={bubble:function(){this.ready&&(this.uniqueString=Dr(this.str,this.keypaths),this.keypath=Lr(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,r,i,s=this;r=this.keypath,t=this.root.viewmodel.computations[r.str],t?this.root.viewmodel.mark(r):(i=jr(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){return void 0}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=s.root.viewmodel.get(t,{noUnwrap:!0});return"function"==typeof e&&(e=Ir(e,s.root)),e}}),n={deps:this.keypaths.filter(Mr),get:function(){var t=e.map(Vr);return i.apply(null,t)}},t=this.root.viewmodel.compute(r,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var cd=function(t,e,n){var r=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===Wc?this.refResolver=Nr(this,t.n,function(t){r.resolve(t)}):new ad(e,n,t,function(t){r.resolve(t)})};cd.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var ld=function(t,e,n){var r,i,s,o,a=this;this.parentFragment=o=t.parentFragment,this.root=r=t.root,this.mustache=t,this.ref=i=e.r,this.callback=n,this.unresolved=[],(s=W(r,i,o))?this.base=s:this.baseResolver=new rd(this,i,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new cd(t,a,o)}),this.ready=!0,this.bubble()};ld.prototype={getKeypath:function(){var t=this.members.map(Wr);return!t.every(Ur)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(K)},rebind:function(t,e){var n;this.members.forEach(function(r){r.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=D(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(zr),this.bubble()}};var fd={getValue:Pr,init:qr,resolve:$r,rebind:Br},dd=function(t){this.type=yc,fd.init(this,t)};dd.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:fd.resolve,rebind:fd.rebind,detach:ed,unbind:Tr,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(t){t&&e(this.node)},getValue:fd.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&eh.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=void 0!=this.value?""+this.value:"";return t?Pn(e):e}};var pd=function(t,e){fd.rebind.call(this,t,e)},md=function(t){this.type=bc,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===Hc,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,fd.init(this,t)};md.prototype={bubble:Kr,detach:Qr,find:Zr,findAll:Hr,findAllComponents:Gr,findComponent:Yr,findNextNode:Jr,firstNode:Xr,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:fd.getValue,shuffle:ti,rebind:pd,render:ni,resolve:fd.resolve,setValue:ri,toString:pi,unbind:mi,unrender:vi,update:wi};var vd,gd,yd={};try{du("table").innerHTML="foo"}catch(Au){vd=!0,gd={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var wd=function(t,e,n){var r,i,s,o,a,u=[];if(null!=t&&""!==t){for(vd&&(i=gd[e.tagName])?(r=Ei("DIV"),r.innerHTML=i[0]+t+i[1],r=r.querySelector(".x"),"SELECT"===r.tagName&&(s=r.options[r.selectedIndex])):e.namespaceURI===su.svg?(r=Ei("DIV"),r.innerHTML='<svg class="x">'+t+"</svg>",r=r.querySelector(".x")):(r=Ei(e.tagName),r.innerHTML=t,"SELECT"===r.tagName&&(s=r.options[r.selectedIndex]));o=r.firstChild;)u.push(o),n.appendChild(o);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==s&&(u[a].selected=!1)}return u},bd=function(t){this.type=wc,fd.init(this,t)};bd.prototype={detach:bi,find:ki,findAll:xi,firstNode:_i,getValue:fd.getValue,rebind:fd.rebind,render:Ci,resolve:fd.resolve,setValue:Oi,toString:Ti,unbind:Tr,unrender:Pi,update:Fi};var kd,xd,_d,Ed,Ad=function(){this.parentFragment.bubble()},Sd=function(t){return this.node?pu(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Cd=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Od=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Td=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Pd=/^true|on|yes|1$/i,Fd=/^[0-9]+$/,Rd=function(t,e){var n,r,i;return i=e.a||{},r={},n=i.twoway,void 0!==n&&(r.twoway=0===n||Pd.test(n)),n=i.lazy,void 0!==n&&(r.lazy=0!==n&&Fd.test(n)?parseInt(n):0===n||Pd.test(n)),r};kd="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),xd="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),_d=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Ed=_d(kd.concat(xd));var Nd=function(t){var e=t.toLowerCase();return Ed[e]||e},jd=function(t,e){var n,r;if(n=e.indexOf(":"),-1===n||(r=e.substr(0,n),"xmlns"===r))t.name=t.element.namespace!==su.html?Nd(e):e;else if(e=e.substring(n+1),t.name=Nd(e),t.namespace=su[r.toLowerCase()],t.namespacePrefix=r,!t.namespace)throw'Unknown namespace ("'+r+'")'},Vd={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Dd=function(t){this.init(t)};Dd.prototype={bubble:Di,init:Mi,rebind:Ii,render:Wi,toString:Ui,unbind:qi,update:ns};var Ld,Md=function(t,e){var n,r,i=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(r=new Dd({element:t,name:n,value:e[n],root:t.root}),i[n]=r,"value"!==n&&i.push(r));return(r=i.value)&&i.push(r),i};"undefined"!=typeof document&&(Ld=du("div"));var Id=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new km({root:t.root,owner:this,template:[e]})};Id.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===su.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=rs(t,this.isSvg),this.attributes.filter(function(t){return is(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var Wd=function(t,e){return e?e.map(function(e){return new Id(t,e)
}):[]},Ud=function(t){var e,n,r,i;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return p("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name),!1}else e.resolver.forceResolution(),n=e.keypath;this.attribute.isTwoway=!0,this.keypath=n,r=this.root.viewmodel.get(n),void 0===r&&this.getInitialValue&&(r=this.getInitialValue(),void 0!==r&&this.root.viewmodel.set(n,r)),(i=ss(t))&&(this.resetValue=r,i.formBindings.push(this))};Ud.prototype={handleChange:function(){var t=this;eh.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),eh.scheduleTask(function(){return t.attribute.locked=!1}),eh.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(C(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},Ud.extend=function(t){var e,r=this;return e=function(t){Ud.call(this,t),this.init&&this.init()},e.prototype=xu(r.prototype),n(e.prototype,t),e.extend=Ud.extend,e};var zd,qd=Ud,$d=qd.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var t=this.element.node;t.addEventListener("change",os,!1),this.root.lazy||(t.addEventListener("input",os,!1),t.attachEvent&&t.addEventListener("keyup",os,!1))},unrender:function(){var t=this.element.node;t.removeEventListener("change",os,!1),t.removeEventListener("input",os,!1),t.removeEventListener("keyup",os,!1)},getValue:function(){return this.element.node.innerHTML}}),Bd={},Kd=qd.extend({name:"checked",init:function(){this.siblings=as(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",os,!1),t.attachEvent&&t.addEventListener("click",os,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",os,!1),t.removeEventListener("click",os,!1)},handleChange:function(){eh.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),eh.end()},getValue:function(){return this.element.node.checked},unbind:function(){C(this.siblings,this)}}),Qd=qd.extend({name:"name",init:function(){this.siblings=as(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",os,!1),t.attachEvent&&t.addEventListener("click",os,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",os,!1),t.removeEventListener("click",os,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&qd.prototype.handleChange.call(this)},rebound:function(t,e){var n;qd.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){C(this.siblings,this)}}),Zd=qd.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=as(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){C(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),this.isChecked=i(t)?_(t,e):t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",os,!1),n.attachEvent&&n.addEventListener("click",os,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",os,!1),t.removeEventListener("click",os,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,qd.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(us).map(hs)}}),Hd=qd.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",os,!1),t.attachEvent&&t.addEventListener("click",os,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",os,!1),t.removeEventListener("click",os,!1)},getValue:function(){return this.element.node.checked}}),Gd=qd.extend({getInitialValue:function(){var t,e,n,r,i=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=i.length,t)){for(;e--;)if(i[e].getAttribute("selected")){n=i[e].getAttribute("value"),r=!0;break}if(!r)for(;++e<t;)if(!i[e].getAttribute("disabled")){n=i[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",os,!1)},unrender:function(){this.element.node.removeEventListener("change",os,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,r,i;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected)return i=r._ractive?r._ractive.value:r.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,eh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),Yd=Gd.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",os,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",os,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,r,i,s;for(t=[],e=this.element.node.options,r=e.length,n=0;r>n;n+=1)i=e[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,t.push(s));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&E(n,e)||Gd.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,eh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Jd=qd.extend({render:function(){this.element.node.addEventListener("change",os,!1)},unrender:function(){this.element.node.removeEventListener("change",os,!1)},getValue:function(){return this.element.node.files}});zd=qd.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?ls:os,e.addEventListener("change",os,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",cs,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",os,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",cs,!1)}});var Xd=zd.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),tp=/^event(?:\.(.+))?/,ep={},np={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},rp=function(t,e,n){this.init(t,e,n)};rp.prototype={bubble:ps,fire:ms,getAction:vs,init:gs,listen:xs,rebind:Es,render:As,resolve:Ss,unbind:Cs,unrender:Os};var ip=function(t,e){var n,r,i,s,o=[];for(r in e)if(e.hasOwnProperty(r))for(i=r.split("-"),n=i.length;n--;)s=new rp(t,i[n],e[r]),o.push(s);return o},sp=function(t,e){var n,r,i,s=this;this.element=t,this.root=n=t.root,r=e.n||e,("string"==typeof r||(i=new km({template:r,root:n,owner:t}),r=i.toString(),i.unbind(),""!==r))&&(e.a?this.params=e.a:e.d&&(this.fragment=new km({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready&&s.update()}),this.fn=v("decorators",n,r),this.fn||p(Du(r,"decorator")))};sp.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var op,ap,up,hp=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};nu?(ap={},up=du("div").style,op=function(t){var e,n,r;if(t=hp(t),!ap[t])if(void 0!==up[t])ap[t]=t;else for(r=t.charAt(0).toUpperCase()+t.substring(1),e=au.length;e--;)if(n=au[e],void 0!==up[n+r]){ap[t]=n+r;break}return ap[t]}):op=null;var cp,lp,fp=op;nu?(lp=window.getComputedStyle||legacy.getComputedStyle,cp=function(t){var e,n,r,s,o;if(e=lp(this.node),"string"==typeof t)return o=e[fp(t)],"0px"===o&&(o=0),o;if(!i(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},r=t.length;r--;)s=t[r],o=e[fp(s)],"0px"===o&&(o=0),n[s]=o;return n}):cp=null;var dp=function(t,e){var n;if("string"==typeof t)this.node.style[fp(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[fp(n)]=t[n]);return this},pp=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(m(Du(t.easing,"easing")),e=qs)):e="function"==typeof t.easing?t.easing:qs,this.easing=e,this.start=Iu(),this.end=this.start+this.duration,this.running=!0,oh.add(this)};pp.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var mp,vp,gp,yp,wp,bp,kp,xp,_p=new RegExp("^-(?:"+au.join("|")+")-"),Ep=function(t){return t.replace(_p,"")},Ap=new RegExp("^(?:"+au.join("|")+")([A-Z])"),Sp=function(t){var e;return t?(Ap.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},Cp={},Op={};nu?(vp=du("div").style,function(){void 0!==vp.transition?(gp="transition",yp="transitionend",wp=!0):void 0!==vp.webkitTransition?(gp="webkitTransition",yp="webkitTransitionEnd",wp=!0):wp=!1}(),gp&&(bp=gp+"Duration",kp=gp+"Property",xp=gp+"TimingFunction"),mp=function(t,e,n,r,i){setTimeout(function(){var s,o,a,u,h;u=function(){o&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),i())},s=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[kp]=r.map(fp).map(Sp).join(","),t.node.style[xp]=Sp(n.easing||"linear"),t.node.style[bp]=n.duration/1e3+"s",h=function(e){var n;n=r.indexOf(hp(Ep(e.propertyName))),-1!==n&&r.splice(n,1),r.length||(t.node.removeEventListener(yp,h,!1),a=!0,u())},t.node.addEventListener(yp,h,!1),setTimeout(function(){for(var i,c,l,f,d,m=r.length,v=[];m--;)f=r[m],i=s+f,wp&&!Op[i]&&(t.node.style[fp(f)]=e[f],Cp[i]||(c=t.getStyle(f),Cp[i]=t.getStyle(f)!=e[f],Op[i]=!Cp[i],Op[i]&&(t.node.style[fp(f)]=c))),(!wp||Op[i])&&(void 0===c&&(c=t.getStyle(f)),l=r.indexOf(f),-1===l?p("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!"):r.splice(l,1),d=/[^\d]*$/.exec(e[f])[0],v.push({name:fp(f),interpolator:Lu(parseFloat(c),parseFloat(e[f])),suffix:d}));v.length?new pp({root:t.root,duration:n.duration,easing:hp(n.easing||""),step:function(e){var n,r;for(r=v.length;r--;)n=v[r],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){o=!0,u()}}):o=!0,r.length||(t.node.removeEventListener(yp,h,!1),a=!0,u())},0)},n.delay||0)}):mp=null;var Tp,Pp,Fp,Rp,Np;if("undefined"!=typeof document){if(Tp="hidden",Np={},Tp in document)Fp="";else for(Rp=au.length;Rp--;)Pp=au[Rp],Tp=Pp+"Hidden",Tp in document&&(Fp=Pp);void 0!==Fp?(document.addEventListener(Fp+"visibilitychange",$s),$s()):("onfocusout"in document?(document.addEventListener("focusout",Bs),document.addEventListener("focusin",Ks)):(window.addEventListener("pagehide",Bs),window.addEventListener("blur",Bs),window.addEventListener("pageshow",Ks),window.addEventListener("focus",Ks)),Np.hidden=!1)}var jp,Vp,Dp;nu?(Vp=window.getComputedStyle||legacy.getComputedStyle,jp=function(t,e,n){var r,i=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Np.hidden)return this.setStyle(t,e),Dp||(Dp=Hu.resolve());"string"==typeof t?(r={},r[t]=e):(r=t,n=e),n||(p('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var s=new Hu(function(t){var e,s,o,a,u,h,c;if(!n.duration)return i.setStyle(r),void t();for(e=Object.keys(r),s=[],o=Vp(i.node),u={},h=e.length;h--;)c=e[h],a=o[fp(c)],"0px"===a&&(a=0),a!=r[c]&&(s.push(c),i.node.style[fp(c)]=a);return s.length?void mp(i,r,n,s,t):void t()});return s}):jp=null;var Lp=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},Mp=function(t,e,n){this.init(t,e,n)};Mp.prototype={init:zs,start:Qs,getStyle:cp,setStyle:dp,animateStyle:jp,processParams:Lp};var Ip,Wp;Ip=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},Wp=function(){this.node.type&&"text/javascript"!==this.node.type||p("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var Up=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(eo).join("")+this.conditionalAttributes.map(eo).join(""),"option"===this.name&&Xs(this)&&(t+=" selected"),"input"===this.name&&to(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=Pn(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),Nl.test(this.template.e)||(t+="</"+this.template.e+">"),t)},zp=function(t){this.init(t)};zp.prototype={bubble:Ad,detach:Ri,find:Sd,findAll:Cd,findAllComponents:Od,findComponent:Td,findNextNode:Ni,firstNode:ji,getAttribute:Vi,init:Vs,rebind:Ds,render:Hs,toString:Up,unbind:no,unrender:ro};var qp=/^\s*$/,$p=/^\s*/,Bp=function(t){var e,n,r,i;return e=t.split("\n"),n=e[0],void 0!==n&&qp.test(n)&&e.shift(),r=S(e),void 0!==r&&qp.test(r)&&e.pop(),i=e.reduce(so,null),i&&(t=e.map(function(t){return t.replace(i,"")}).join("\n")),t},Kp=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},Qp=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=Ec,this.index=t.index,this.name=t.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,fd.init(this,t),!this.keypath&&(n=oo(this.root,this.name))&&(Tr.call(this),this.isNamed=!0,this.setTemplate(n))};Qp.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Br.call(this,t,e),this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:fd.resolve,setValue:function(t){var e;(void 0===t||t!==this.value)&&(void 0!==t&&(e=oo(this.root,""+t)),!e&&this.name&&(e=oo(this.root,this.name))&&(Tr.call(this),this.isNamed=!0),e||(this.root.debug?d:m)('Could not find template for partial "%s"',this.name),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&eh.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new km({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,r,i;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===gc?(r=n.text.split("\n").pop(),(i=/^\s+$/.exec(r))?Kp(e,i[0]):e):e},unbind:function(){this.isNamed||Tr.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var Zp=new k("detach"),Hp={},Gp=/\$\{([^\}]+)\}/g,Yp=function(t){return"function"==typeof t?{get:t}:"string"==typeof t?{get:No(t)}:("object"==typeof t&&"string"==typeof t.get&&(t={get:No(t.get),set:t.set}),t)},Jp=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Jp.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var Xp=function(t,e,n){var r=this;this.ractive=t,this.viewmodel=t.viewmodel,this.key=e,this.getter=n.get,this.setter=n.set,this.hardDeps=n.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(e){return t.viewmodel.register(e,r,"computed")}),this._dirty=this._firstRun=!0};Xp.prototype={constructor:Xp,init:function(){var t;this.bypass=!0,t=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==t&&this.set(t)},invalidate:function(){this._dirty=!0},get:function(){var t,e,n,r=this,i=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(t=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(e){var n,s,o;if(!i)for(o=e.length;o--;)if(n=e[o],s=t.viewmodel.get(n),!a(s,r.depValues[n.str]))return r.depValues[n.str]=s,void(i=!0)}),i){t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(s){t.debug&&(p('Failed to compute "%s"',this.key.str),Su(s.stack||s)),this.value=void 0}e=t.viewmodel.release(),n=this.updateDependencies(e),n&&[this.hardDeps,this.softDeps].forEach(function(e){e.forEach(function(e){r.depValues[e.str]=t.viewmodel.get(e)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,t)},updateDependencies:function(t){var e,n,r,i,s;for(n=this.softDeps,e=n.length;e--;)r=n[e],-1===t.indexOf(r)&&(i=!0,this.viewmodel.unregister(r,this,"computed"));for(e=t.length;e--;)r=t[e],-1!==n.indexOf(r)||this.hardDeps&&-1!==this.hardDeps.indexOf(r)||(i=!0,jo(this.viewmodel,r)&&!this.unresolvedDeps[r.str]?(s=new Jp(this,r.str),t.splice(e,1),this.unresolvedDeps[r.str]=s,eh.addUnresolved(s)):this.viewmodel.register(r,this,"computed"));return i&&(this.softDeps=t.slice()),i}};var tm={FAILED_LOOKUP:!0},em={};Wo.prototype.setValue=function(t){this.viewmodel.set(this.keypath,t,{noMapping:!0})},Uo.prototype={ensureKeypath:function(){if(!this.keypath&&(c(this.force)&&this.force(),!this.keypath))throw new Error('Mapping "'+this.localKey.str+'" on component "'+this.local.ractive.component.name+'" does not have a keypath. This is usually caused by an ambiguous complex reference, which can usually be fixed by scoping your references.')},get:function(t,e){return this.resolved?this.origin.get(this.map(t),e):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.ensureKeypath(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Wo(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);t.origin.register(n,e.dep,e.group),c(e.dep.setValue)?e.dep.setValue(t.origin.get(n)):t.local.mark(e.dep.key)}),this.origin.mark(this.keypath)))},setValue:function(t){this.ensureKeypath(),this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(t,e,n){for(var r=this.deps,i=r.length;i--;)if(r[i].dep===e){r.splice(i,1);break}this.origin.unregister(this.map(t),e,n)}};var nm=function(t,e){var n,r,i,s;return n={},r=0,i=t.map(function(t,i){var o,a,u;a=r,u=e.length;do{if(o=e.indexOf(t,a),-1===o)return s=!0,-1;a=o+1}while(n[o]&&u>a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o})},rm={},im={implicit:!0},sm={noCascade:!0},om=function(t,e){var n,r;this.ractive=t,this.mappings=e||xu(null);for(n in e)e[n].initViewmodel(this);if(t.data&&t.parameters!==!0)for(n in t.data)(r=this.mappings[n])&&void 0===r.getValue()&&r.setValue(t.data[n]);this.cache={},this.cacheMap=xu(null),this.deps={computed:xu(null),"default":xu(null)},this.depsMap={computed:xu(null),"default":xu(null)},this.patternObservers=[],this.specials=xu(null),this.wrapped=xu(null),this.computations=xu(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={}};om.prototype={adapt:wo,applyChanges:So,capture:Fo,clearCache:Ro,compute:Vo,get:Do,init:Mo,map:zo,mark:qo,merge:$o,register:Qo,release:Ho,set:Go,smartUpdate:Jo,teardown:ta,unregister:ea},ra.prototype={constructor:ra,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?ia(this.queue,e).push(t):sa(this,t),delete this.inProcess[t._guid]}};var am=new k("construct"),um=new k("config"),hm=new ra("init"),cm=0,lm=oa,fm=function(t,e,r,i,s){var o,a,u,h,c,l={};for(a=t.parentFragment,u=t.root,s=s||{},n(l,s||{}),s.content=i||[],l[""]=s.content,e.defaults.el&&p("The <%s/> component has a default `el` property; it has been disregarded",t.name),h=a;h;){if(h.owner.type===Pc){c=h.owner.container;break}h=h.parent}return o=xu(e.prototype),lm(o,{el:null,append:!0,data:r.data,partials:s,magic:u.magic||e.defaults.magic,modifyArrays:u.modifyArrays,adapt:u.adapt},{parent:u,component:t,container:c,mappings:r.mappings,inlinePartials:l}),o};ua.prototype={bubble:function(){this.dirty||(this.dirty=!0,eh.addView(this))},update:function(){var t=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key.str,this.fragment.getValue()),t.mark(this.key),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var dm=["_data","_mappings"];ma.prototype={resolve:function(t){this.resolved=!0,this.ready?this.readyResolve(t):this.notReadyResolve(t)},notReadyResolve:function(t){if(t.isSpecial)this.parameters.addData(this.key.str,t.value);else{var e=this.parameters.addMapping(this.key,t);void 0===e.getValue()&&(e.updatable=!0)}},readyResolve:function(t){var e=this.parameters.component.instance.viewmodel;t.isSpecial?(this.parameters.addData(this.key.str,t.value),e.mark(this.key)):e.reversedMappings&&e.reversedMappings[this.key.str]?e.reversedMappings[this.key.str].rebind(t):e.mappings[this.key.str].resolve(t)}},ya.prototype={add:function(t,e){if("string"==typeof e){var n=cf(e);this.addData(t.str,n?n.value:e)}else if(0===e)this.addData(t.str);else{var r=void 0;r=wa(e)?new ma(this,t,e[0]).resolver:new ua(this,t,e),this.component.resolvers.push(r)}},addData:function(t,e){this.data[t]=e},addMapping:function(t,e,n){return this.mappings[t.str]=new Uo(t,{origin:this.parentViewmodel,keypath:e,force:n})}};var pm=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},mm=new k("teardown"),vm=function(t,e){this.init(t,e)};vm.prototype={detach:lo,find:fo,findAll:po,findAllComponents:mo,findComponent:vo,findNextNode:go,firstNode:yo,init:xa,rebind:_a,render:Ea,toString:Aa,unbind:Sa,unrender:Oa};var gm=vm,ym=function(t){this.type=Ac,this.value=t.template.c};ym.prototype={detach:ed,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var wm=function(t){var e,n;this.type=Pc,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var r=this.name=t.template.n||"";this.fragment=new km({owner:this,root:e.parent,template:e._inlinePartials[r]||[],pElement:this.containerFragment.pElement}),i(n.yielders[r])?n.yielders[r].push(this):n.yielders[r]=[this],eh.scheduleTask(function(){if(n.yielders[r].length>1)throw new Error("A component template can only have one {{yield"+(r?" "+r:"")+"}} declaration at a time")})};wm.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),C(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var bm=function(t){this.declaration=t.template.a};bm.prototype={init:Fu,render:Fu,unrender:Fu,teardown:Fu,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var km=function(t){this.init(t)};km.prototype={bubble:gr,detach:yr,find:wr,findAll:br,findAllComponents:kr,findComponent:xr,findNextNode:_r,firstNode:Er,getArgsList:Sr,getNode:Cr,getValue:Or,init:Ta,rebind:Fa,registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:Ra,toString:Na,unbind:Da,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:Ma};var xm,_m=["template","partials","components","decorators","events"],Em=new k("reset"),Am=function(t,e){var n,r=function(e,n,s){s&&s.partials[t]||e.forEach(function(e){e.type===Ec&&e.getPartialName()===t&&n.push(e),e.fragment&&r(e.fragment.items,n,s),i(e.fragments)?r(e.fragments,n,s):i(e.items)?r(e.items,n,s):e.type===Tc&&e.instance&&r(e.instance.fragment.items,n,e.instance),e.type===_c&&(i(e.attributes)&&r(e.attributes,n,s),i(e.conditionalAttributes)&&r(e.conditionalAttributes,n,s))})},s=[];return r(this.fragment.items,s),this.partials[t]=e,n=eh.start(this,!0),s.forEach(function(e){e.value=void 0,e.setValue(t)}),eh.end(),n},Sm=Vh("reverse"),Cm=/\*/,Om=Vh("shift"),Tm=Vh("sort"),Pm=Vh("splice"),Fm=new k("teardown"),Rm=new k("unrender"),Nm=Vh("unshift"),jm=new k("update"),Vm={add:b,animate:te,detach:ne,find:re,findAll:ae,findAllComponents:ue,findComponent:he,findContainer:ce,findParent:le,fire:me,get:ve,insert:ge,merge:we,observe:xe,observeOnce:_e,off:Ee,on:Ae,once:Se,pop:Dh,push:Lh,render:Te,reset:Ia,resetPartial:Am,resetTemplate:Wa,reverse:Sm,set:Ua,shift:Om,sort:Tm,splice:Pm,subtract:za,teardown:qa,toggle:Ba,toHTML:Ka,toHtml:Ka,unrender:Qa,unshift:Nm,update:Za,updateModel:Ha},Dm=1;xm=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(eu,this):eu(this)};var Lm,Mm,Im=xm,Wm=function(t){var e,n,r={};return t&&(e=t._ractive)?(r.ractive=e.root,r.keypath=e.keypath.str,r.index={},(n=Rr(e.proxy.parentFragment))&&(r.index=Rr.resolve(n)),r):r};Lm=function(t){lm(this,t)},Mm={extend:{value:Im},getNodeInfo:{value:Wm},parse:{value:_f},Promise:{value:Hu},svg:{value:ou},magic:{value:iu},VERSION:{value:"0.7.0-edge"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:lu},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Mu},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Eu(Lm,Mm),Lm.prototype=n(Vm,cu),Lm.prototype.constructor=Lm,Lm.defaults=Lm.prototype;var Um="function";if(typeof Date.now!==Um||typeof String.prototype.trim!==Um||typeof Object.keys!==Um||typeof Array.prototype.indexOf!==Um||typeof Array.prototype.forEach!==Um||typeof Array.prototype.map!==Um||typeof Array.prototype.filter!==Um||"undefined"!=typeof window&&typeof window.addEventListener!==Um)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return Lm});
//# sourceMappingURL=ractive.min.js.map