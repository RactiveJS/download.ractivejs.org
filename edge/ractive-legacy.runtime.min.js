!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Ractive=b()}(this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d,e;e=b.shift();)for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a}function d(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===Jh.call(a)}function f(a){return Kh.test(Jh.call(a))}function g(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function h(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===Jh.call(a)}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===Jh.call(a)}function k(a){return"function"==typeof a}function l(a,b){return a.replace(/%s/g,function(){return b.shift()})}function m(a){if(!gh)throw a;console.error(a)}function n(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];throw a=l(a,b),new Error(a)}function o(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];a=l(a,b),Hh(a,b)}function p(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];a=l(a,b),Mh[a]||(Mh[a]=!0,Hh(a,b))}function q(a,b,c){var d=r(a,b,c);return d?d[a][c]:null}function r(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function s(a){return function(){return a}}function t(a,b,c){var d;if("string"!=typeof b||!i(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!i(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function u(a,b){return t(this,a,void 0===b?1:+b)}function v(a){this.event=a,this.method="on"+a,this.deprecate=Vh[a]}function w(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function x(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function y(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function z(a){return"string"==typeof a?[a]:void 0===a?[]:a}function A(a){return a[a.length-1]}function B(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function C(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function D(a){setTimeout(a,0)}function E(a,b){return function(){for(var c;c=a.shift();)c(b)}}function F(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Wh)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,F(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function G(a){var b,c,d,e,f,g;for(b=a.split("."),(c=ci[b.length])||(c=H(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function H(a){var b,c,d,e,f,g="";if(!ci[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}ci[a]=d}return ci[a]}function I(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function J(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function K(a){return null==a?a:_h[a]||(_h[a]=new ai(a))}function L(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c.str],f=d?d.get():a.viewmodel.get(c);for(g in f)!f.hasOwnProperty(g)||"_ractive"===g&&e(f)||b.push(c.join(g));return b}var d,f,g;for(d=b.split("."),g=[di];f=d.shift();)"*"===f?g=g.reduce(c,[]):g[0]===di?g[0]=K(f):g=g.map(M(f));return g}function M(a){return function(b){return b.join(a)}}function N(a){return a?a.replace($h,".$1"):""}function O(a,b,c){var d;return b=N(b),"~/"===b.substr(0,2)?(d=K(b.substring(2)),R(a,d.firstKey,c)):"."===b[0]?(d=P(ei(c),b),d&&R(a,d.firstKey,c)):d=Q(a,K(b),c),d}function P(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return K(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),K(c.join("."))}return K(a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,""))}function Q(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return S(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=K(f),i=Q(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function R(a,b){var c;!a.parent||a.isolated||S(a,b)||(b=K(b),(c=Q(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function S(a,b){return""===b||b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function T(a){a.teardown()}function U(a){a.unbind()}function V(a){a.unrender()}function W(a){a.detach()}function X(a){a.detachNodes()}function Y(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function Z(){for(var a,b,c;gi.viewmodels.length;)b=gi.viewmodels.pop(),c=b.applyChanges(),c&&ji.fire(b.ractive,c);for($(),a=0;a<gi.views.length;a+=1)gi.views[a].update();for(gi.views.length=0,a=0;a<gi.tasks.length;a+=1)gi.tasks[a]();return gi.tasks.length=0,gi.viewmodels.length?Z():void 0}function $(){var a,b,c,d;for(a=ii.length;a--;)b=ii[a],b.keypath?ii.splice(a,1):(c=O(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),ii.splice(a,1));d&&d.forEach(_)}function _(a){a.item.resolve(a.keypath)}function ab(a,b,c){var d,e,f,g,h,i,j,k,l,n,o,p,q,r;if(d=new bi(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(o={},c.step=null,c.complete=null,n=function(a){return function(b,c){o[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(p=n(f),c={easing:i,duration:j},k&&(c.step=p)),c.complete=l?p:Lh,h.push(bb(this,f,a[f],c)));return r={easing:i,duration:j},k&&(r.step=function(a){k(a,o)}),l&&d.then(function(a){l(a,o)}).then(null,m),r.complete=e,q=bb(this,null,null,r),h.push(q),d.stop=function(){for(var a;a=h.pop();)a.stop();q&&q.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,m),c.complete=e,g=bb(this,a,b,c),d.stop=function(){g.stop()},d}function bb(a,b,c,d){var e,f,h,i;return b&&(b=K(N(b))),null!==b&&(i=a.viewmodel.get(b)),mi.abort(b,a),g(i,c)?(d.complete&&d.complete(d.to),oi):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,h=new ni({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),mi.add(h),a._animations.push(h),h)}function cb(){return this.detached?this.detached:(this.el&&B(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),pi.fire(this),this.detached)}function db(a){return this.el?this.fragment.find(a):null}function eb(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function fb(a){var b,c;for(b=[a],c=eb(a);c;)b.push(c),c=eb(c);return b}function gb(a,b,c,d){var e=[];return Dh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:qi}}),c?(Dh(e,{cancel:{value:ri},_root:{value:a},_sort:{value:ui},_makeDirty:{value:vi},_remove:{value:wi},_dirty:{value:!1,writable:!0}}),e):e}function hb(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=gb(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function ib(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=gb(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function jb(a){return this.fragment.findComponent(a)}function kb(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function lb(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function mb(a,b){var c=void 0===arguments[2]?{}:arguments[2];if(b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=K(b).wildcardMatches();nb(a,d,c.event,c.args,!0)}}function nb(a,b,c,d){var e,f,g=void 0===arguments[4]?!1:arguments[4],h=!0;for(xi.enqueue(a,c),f=b.length;f>=0;f--)e=a._subs[b[f]],e&&(h=ob(a,e,c,d)&&h);if(xi.dequeue(a),a.parent&&h){if(g&&a.component){var i=a.component.name+"."+b[b.length-1];b=K(i).wildcardMatches(),c&&(c.component=a)}nb(a.parent,b,c,d)}}function ob(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function pb(a){var b={args:Array.prototype.slice.call(arguments,1)};mb(this,a,b)}function qb(a){var b;return a=K(N(a)),b=this.viewmodel.get(a,yi),void 0===b&&this.parent&&!this.isolated&&O(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function rb(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,sb(this)}function sb(a){zi.fire(a),a.findAllComponents("*").forEach(function(a){sb(a.instance)})}function tb(a,b,c){var d,f;return a=K(N(a)),d=this.viewmodel.get(a),e(d)&&e(b)?(f=hi.start(this,!0),this.viewmodel.merge(a,d,b,c),hi.end(),f):this.set(a,b,c&&c.complete)}function ub(a,b){var c,d;return c=L(a,b.str),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function vb(a,b,c,d){var e,f,g;return b=K(N(b)),d=d||Li,Ki.test(b.str)?(e=new Bi(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Ai(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function wb(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",vb(this,a,b,c);if(f=a.split(" "),1===f.length)return vb(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(vb(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function xb(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function yb(a,b){var c,d=this;if(a)c=a.split(" ").map(Mi).filter(Ni),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function zb(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(Mi).filter(Ni),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function Ab(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Bb(a,b,c){var d,e,f,g,h,i,j=[];if(d=Cb(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function Cb(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function Db(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=hi.start(this,!0),hi.scheduleTask(function(){return Zi.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Eb(h),b.innerHTML=""}return this.constructor.css&&Yi.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),hi.end(),this.transitionsEnabled=f,d.then(function(){return $i.fire(g)}).then(null,m),d}function Eb(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Fb(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,hi.start(d),d.viewmodel.mark(c),hi.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function Gb(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Hb(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=sj.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(Jb),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=uj.test(a)?a.replace(uj,d):a.replace(rj,"").replace(qj,function(a,b){var c,d;return tj.test(b)?a:(c=b.split(",").map(Ib),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Ib(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Jb(a){return a.str}function Kb(a,b,c){return a?b.noCssTransform?a:Hb(a,c):void 0}function Lb(a,b){return"function"==typeof b&&/_super/.test(a)}function Mb(a,b,c){var d=c.data||{},e=Nb(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return Ob(e,d)}function Nb(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return Pb(a,b),Ob(a,b)}function Ob(a,b){return"function"==typeof b?Sb(b,a):"function"==typeof a?Rb(b,a):Qb(b,a)}function Pb(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function Qb(a,b){return a=a||{},b?(Pb(b,a,!0),a):a}function Rb(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function Sb(a,b){var c;return c="function"!=typeof b?function(a){Qb(a,b)}:function(a){return b=wj(b,function(){},!0),b.call(this,a)||a},wj(a,c)}function Tb(a){var b=Bh(zj);return b.parse=function(b,c){return Ub(b,c||a)},b}function Ub(a,b){if(!undefined__default)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return undefined__default(a,b||this.options)}function Vb(a,b){var c;if(!fh){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Wb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function Wb(a){return a&&"#"===a.charAt(0)}function Xb(a){return!("string"==typeof a)}function Yb(a){return a.defaults&&(a=a.defaults),yj.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function Zb(a){var b,c=a._config.template;if(c&&c.fn)return b=$b(a,c.fn),b!==c.result?(c.result=b,b=ac(b,a)):void 0}function $b(a,b){var c=_b(Aj.getParseOptions(a));return b.call(a,a.data,c)}function _b(a){var b=Bh(Aj);return b.parse=function(b,c){return Aj.parse(b,c||a)},b}function ac(a,b){if("string"==typeof a)"#"===a[0]&&(a=Aj.fromId(a)),a=undefined__default(a,Aj.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function bc(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function cc(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=dc(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function dc(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=Lh,d}function ec(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function fc(a,b,c){if(b in a){if(c in a)throw new Error(ec(b,c,!0));o(ec(b,c)),a[c]=a[b]}}function gc(a){fc(a,"beforeInit","onconstruct"),fc(a,"init","onrender"),fc(a,"complete","oncomplete"),fc(a,"eventDefinitions","events"),e(a.adaptors)&&fc(a,"adaptors","adapt")}function hc(a,b,c,d){gc(d);for(var e in d)if(Hj[e]){var f=d[e];"function"==typeof f&&(f=cc(b.prototype,e,f)),c[e]=f}oj.forEach(function(e){e[a](b,c,d)}),pj[a](b,c,d),xj[a](b,c,d),Bj[a](b,c,d),vj[a](b,c,d),ic(b.prototype,c,d)}function ic(a,b,c){for(var d in c)if(!Gj[d]&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=cc(a,d,e)),b[d]=e}}function jc(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function kc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function lc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function mc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function nc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function oc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function pc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function qc(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function rc(){return this.items&&this.items[0]?this.items[0].firstNode():null}function sc(a){var b,c,d,e;return b=a.pos,d=Gk(a),null===d?null:(c=[d],a.matchString(",")?(e=sc(a),e?c.concat(e):(a.pos=b,null)):c)}function tc(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=tc(a),null===f&&a.error(ok),f.forEach(b)),d)}function uc(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(Ck))return{t:ck,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ok),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:ck,x:d}):null}function vc(a){return JSON.stringify(String(a))}function wc(a,b){var c,d;if(a.t===bk&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(j(d))wc(d,b);else for(c=d.length;c--;)wc(d[c],b);a.x&&wc(a.x,b),a.r&&wc(a.r,b),a.v&&wc(a.v,b)}function xc(a,b,c){var d=function(b){return xc(a,b,c)};switch(b.t){case $j:case _j:case Wj:return b.v;case Xj:return vc(b.v);case Yj:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Zj:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case ak:return b.k+":"+xc(a,b.v,c);case ek:return("typeof"===b.s?"typeof ":b.s)+xc(a,b.o,c);case hk:return xc(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+xc(a,b.o[1],c);case ik:return xc(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case fk:return"("+xc(a,b.x,c)+")";case dk:return xc(a,b.x,c)+xc(a,b.r,c);case ck:return b.n?"."+b.n:"["+xc(a,b.x,c)+"]";case gk:return xc(a,b.o[0],c)+"?"+xc(a,b.o[1],c)+":"+xc(a,b.o[2],c);case bk:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function yc(a){var b,c,d;return a.allowWhitespace(),(b=Fk(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function zc(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return zc(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function Ac(){var a,b,c,d;return this.dirtyArgs&&(b=zc(this.items,a={},this.root._guid),c=ll("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function Bc(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function Cc(){var a,b,c,d;return this.dirtyValue&&(b=zc(this.items,a={},this.root._guid),c=ll(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function Dc(a){return a.replace(hl,function(a,b){var c;return c="#"!==b[0]?fl[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(Ec(c)):a})}function Ec(a){return a?10===a?32:128>a?a:159>=a?gl[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Fc(a){return a.replace(kl,"&amp;").replace(il,"&lt;").replace(jl,"&gt;")}function Gc(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Hc(){return this.value}function Ic(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Jc(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Kc(a,b,c){var d;return"@"===b.charAt(0)?new pl(a,b,c):(d=Jc(a.parentFragment,b))?new rl(a,d,c):new ol(a,b,c)}function Lc(a,b){var c,d;if(tl[a])return tl[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),tl[a]=c,c}function Mc(a){return a.call()}function Nc(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str})}function Oc(a){return K("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Pc(a){return void 0!==a&&"@"!==a[0]}function Qc(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){Ch(a,d,{value:ul.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return Ch(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Rc(a){return a.value}function Sc(a){return void 0!=a}function Tc(a){a.forceResolution()}function Uc(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Kc(a,e,c)),b.template.x&&(a.resolver=new sl(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new wl(a,b.template.rx,d)),a.template.n!==kk||a.hasOwnProperty("value")||a.setValue(void 0)}function Vc(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,void this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Wc(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Xc(){this.parentFragment.bubble()}function Yc(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Zc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function $c(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function _c(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function ad(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function bd(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function cd(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function dd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===lk){if(this.shuffling=!0,hi.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath.join(b),h=i.keypath.join(a),d.index=a,(j=d.registeredIndexRefs)&&j.forEach(ed),d.rebind(g,h),void(f[a]=d)))}),e=this.root.viewmodel.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&hi.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function ed(a){a.rebind("","")}function fd(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function gd(a){var b,c,d=this;this.updating||(this.updating=!0,this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=d.keypath.join(a),c.index=a,b=new Hn(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):id(this,a)&&(this.bubble(),this.rendered&&hi.addView(this)),this.value=a,this.updating=!1)}function hd(a,b,c){if(b===lk&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function id(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case jk:return nd(a,b,!1,c);case kk:return nd(a,b,!0,c);case mk:return md(a,c);case nk:return ld(a,b,c);case lk:if(j(b))return hd(a,a.subtype,!0),kd(a,b,c)}return a.ordered=!!f(b),a.ordered?(hd(a,lk,!1),jd(a,b,c)):j(b)||"function"==typeof b?a.template.i?(hd(a,lk,!0),kd(a,b,c)):(hd(a,mk,!1),md(a,c)):(hd(a,jk,!1),nd(a,b,!1,c))}function jd(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(U);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new Hn(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function kd(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(qd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new Hn(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function ld(a,b,c){return b?md(a,c):od(a)}function md(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Hn(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function nd(a,b,c,d){var e,g,h,i,k;if(g=f(b)&&0===b.length,h=!1,!f(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(U),!0):void 0:(d.index=0,i=new Hn(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):od(a)}function od(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(pd),a.fragmentsToUnrender.forEach(U),a.length=a.fragmentsToRender.length=0,!0):void 0}function pd(a){return a.rendered}function qd(a){a.rebind("","")}function rd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function sd(){var a=this;this.fragments.forEach(U),this.fragmentsToRender.forEach(function(b){return B(a.fragments,b)}),this.fragmentsToRender=[],Gc.call(this),this.length=0,this.unbound=!0}function td(a){this.fragments.forEach(a?ud:vd),this.renderedFragments=[],this.rendered=!1}function ud(a){a.unrender(!0)}function vd(a){a.unrender(!1)}function wd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function xd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function yd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(qh(d,a))return d;if(e=d.querySelector(a))return e}return null}function zd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(qh(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])
}function Ad(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function Bd(a){return Dl[a]||(Dl[a]=ph(a))}function Cd(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=C(a.node.options).filter(Dd),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function Dd(a){return a.selected}function Ed(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=El(this.value,this.parentFragment.getNode(),this.docFrag),Cd(this.pElement),this.rendered=!0,this.docFrag}function Fd(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&hi.addView(this))}function Gd(){return void 0!=this.value?Dc(""+this.value):""}function Hd(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Id(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=El(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Cd(this.pElement)}}function Jd(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Kd(){return null}function Ld(){return this.node}function Md(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Nd(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();g(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&hi.addView(this))}function Od(a){var b=a.fragment.items;if(1===b.length)return b[0].type===Mj?b[0]:void 0}function Pd(a){return this.type=Sj,this.element=a.element,this.root=a.root,Tl(this,a.name),this.isBoolean=dl.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Hn({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Od(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:a.value||"")}function Qd(a,b){this.fragment&&this.fragment.rebind(a,b)}function Rd(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==ih.html||(b=Ul[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function Sd(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath.str||e.ref)+"}}":this.isBoolean?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+Td(d)+'"':b)}function Td(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Ud(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Vd(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Wd(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=x(f,d)}function Xd(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Yd(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return hi.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Zd(){var a,b,c=this,d=c.element,f=c.node,g=c.value,h=d.binding;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(h.isChecked=f.checked=!0);h.isChecked=f.checked=!1}else h.isChecked=f.checked=g==a}function $d(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function _d(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function ae(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function be(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function ce(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function de(){this.locked||(this.node[this.propertyName]=this.value)}function ee(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function fe(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=_d:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?Wd:Vd:"textarea"===e.name?b=ce:null!=e.getAttribute("contenteditable")?b=be:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?Lh:"radio"===a&&e.binding&&"name"===e.binding.name?Yd:ce):this.isTwoway&&"name"===d?"radio"===f.type?b=Xd:"checkbox"===f.type&&(b=Zd):"style"===d&&f.style.setAttribute?b=ae:"class"!==d||f.namespaceURI&&f.namespaceURI!==ih.html?this.useProperty&&(b=de):b=$d,b||(b=ee),this.update=b,this.update()}function ge(a,b){var c=b?"svg":"div";return Wl.innerHTML="<"+c+" "+a+"></"+c+">",C(Wl.childNodes[0].attributes)}function he(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function ie(a){for(;a=a.parent;)if("form"===a.name)return a}function je(){this._ractive.binding.handleChange()}function ke(a,b,c){var d=a+b+c;return cm[d]||(cm[d]=[])}function le(a){return a.isChecked}function me(a){return a.element.getAttribute("value")}function ne(){var a;je.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function oe(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&je.call(b),a._timeout=void 0},a.element.lazy)}function pe(a){var b,c,d,e,f,g=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||g.contenteditable&&qe(g.contenteditable))&&qe(g.value)?c=bm:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=qe(g.name),e=qe(g.checked),d&&e&&o("A radio input can have two-way binding on its name attribute, or its checked attribute - not both"),d?c="radio"===b?em:fm:e&&(c="radio"===b?dm:gm)):"file"===b&&qe(g.value)?c=jm:qe(g.value)&&(c="number"===b||"range"===b?km:_l)):"select"===a.name&&qe(g.value)?c=a.getAttribute("multiple")?im:hm:"textarea"===a.name&&qe(g.value)&&(c=_l),c&&(f=new c(a))&&f.keypath?f:void 0}function qe(a){return a&&a.isBindable}function re(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function se(a){mb(this.root,this.getAction(),{event:a})}function te(){return this.action.toString().trim()}function ue(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&((this.root.debug?n:o)('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=Lc(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c=void 0;(c=lm.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Kc(g,a,function(a){return g.resolve(b,a)}))}),this.fire=ve):(d=c.n||c,"string"!=typeof d&&(d=new Hn({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Hn({template:c.d,root:this.root,owner:this.element}),this.fire=xe):c.a&&(this.params=c.a,this.fire=we))}function ve(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),xi.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),xi.dequeue(b)}function we(a){mb(this.root,this.getAction(),{event:a,args:this.params})}function xe(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),mb(this.root,this.getAction(),{event:a,args:b})}function ye(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=Jc(c.element.parentFragment))&&(e=Jc.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function ze(){var a,b=this.name;if(!this.invalid){if(a=q("events",this.root,b))this.custom=a(this.node,Ae(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(nm[b]||p(Qh(b,"event")));this.node.addEventListener(b,ye,!1)}this.hasListener=!0}}function Ae(a){return mm[a]||(mm[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),mm[a]}function Be(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function Ce(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function De(a,b){this.keypaths[a]=b}function Ee(){return this.method?void this.refResolvers.forEach(U):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Fe(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,ye,!1),this.hasListener=!1}function Ge(){var a=this;this.dirty||(this.dirty=!0,hi.scheduleTask(function(){He(a),a.dirty=!1})),this.parentFragment.bubble()}function He(a){var b,c,d,e,f;b=a.node,b&&(e=C(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?Ie(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function Ie(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Je(a,b){a.select=Le(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Ke(a){a.select&&B(a.select.options,a)}function Le(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function Me(a){var b,c,d,e,f,g;this.type=Pj,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=Sl(c.e),"option"===this.name&&Je(this,c),"select"===this.name&&(this.options=[],this.bubble=Ge),"form"===this.name&&(this.formBindings=[]),Rl(this,c.a||{}),this.attributes=Xl(this,c.a),this.conditionalAttributes=Zl(this,c.m),c.f&&(this.fragment=new Hn({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=pe(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=pm(this,c.v)),c.o&&(this.decorator=new qm(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Ne(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&I(e,"keypath",a,b)}function Oe(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Pe(a){a.node.addEventListener("reset",Re,!1)}function Qe(a){a.node.removeEventListener("reset",Re,!1)}function Re(){var a=this._ractive.proxy;hi.start(),a.formBindings.forEach(Se),hi.end()}function Se(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Te(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Hn({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Hn({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=q("transitions",d,e),this._fn||p(Qh(e,"transition")))}function Ue(a){return a}function Ve(){Sm.hidden=document[Om]}function We(){Sm.hidden=!0}function Xe(){Sm.hidden=!1}function Ye(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Ze(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Ze(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function $e(){var a,b,c,d=this,e=this.root;return a=_e(this),b=this.node=ph(this.name,a),e.constructor.css&&this.parentFragment.getNode()===e.el&&this.node.setAttribute("data-ractive-css",e.constructor._guid),Ch(this.node,"_ractive",{value:{proxy:this,keypath:ei(this.parentFragment),events:Bh(null),root:e}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=Zm,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Lh):"style"===this.name?(this.bubble=Ym,this.bubble(),this.fragment.unrender=Lh):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Lh:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&af(this),"img"===this.name?Oe(this):"form"===this.name?Pe(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&hi.scheduleTask(function(){d.decorator.torndown||d.decorator.init()},!0),e.transitionsEnabled&&this.intro&&(c=new Xm(this,this.intro,!0),hi.registerTransition(c),hi.scheduleTask(function(){return c.start()},!0),this.transition=c),this.node.autofocus&&hi.scheduleTask(function(){return d.node.focus()},!0),bf(this),this.node}function _e(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?ih.svg:(d=a.parent)?"foreignObject"===d.name?ih.html:d.node.namespaceURI:a.root.el.namespaceURI}function af(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function bf(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function cf(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function df(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function ef(a){var b=a.toString();return b?" "+b:""}function ff(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(U),"option"===this.name&&Ke(this),this.attributes.forEach(U),this.conditionalAttributes.forEach(U)}function gf(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&hi.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(V),this.decorator&&hi.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new Xm(this,this.outro,!1),hi.registerTransition(d),hi.scheduleTask(function(){return d.start()})),this.liveQueries&&hf(this),"form"===this.name&&Qe(this)}function hf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function jf(a,b){var c=bn.exec(b)[0];return null===a||c.length<a.length?c:a}function kf(a,b){var c;if(c=lf(a,b))return c;if(c=Aj.fromId(b,{noThrow:!0})){c=cn(c);var d=Aj.parse(c,Aj.getParseOptions(a));return a.partials[b]=d.t}}function lf(a,b){var c=r("partials",a,b);if(c){var d=c.partials[b],e=void 0;if("function"==typeof d&&(e=d.bind(c),e.isOwner=c.partials.hasOwnProperty(b),d=e(c.data,Aj)),!d&&""!==d)return void o(Ph,b,"partial","partial");if(!Aj.isParsed(d)){var f=Aj.parse(d,Aj.getParseOptions(c));f.p&&o("Partials ({{>%s}}) cannot contain nested inline partials",b);var g=e?c:mf(c,b);g.partials[b]=d=f.t}return e&&(d._fn=e),d.v?d.t:d}}function mf(a,b){return a.partials.hasOwnProperty(b)?a:nf(a.constructor,b)}function nf(a,b){return a?a.partials.hasOwnProperty(b)?a:nf(a._Parent,b):void 0}function of(a,b){var c,d=r("components",a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void(a.debug&&o(Ph,b,"component","component"));"string"==typeof c&&(c=of(a,c)),c._fn=e,d.components[b]=c}return c}function pf(){var a=this.instance.fragment.detach();return fn.fire(this.instance),a}function qf(a){return this.instance.fragment.find(a)}function rf(a,b){return this.instance.fragment.findAll(a,b)}function sf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function tf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function uf(){return this.parentFragment.findNextNode(this)}function vf(){return this.rendered?this.instance.fragment.firstNode():null}function wf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1)if(e=g.adapt[d],e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,yf(a)),f.value=b,b;return b}function xf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function yf(a){var b;return gn[a]||(b=a?a+".":"",gn[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?xf(c,a):c:void 0}),gn[a]}function zf(a){var b,c,d=[di];for(b=a.length;b--;)for(c=a[b].parent;c&&!c.isRoot;)w(d,c),c=c.parent;return d}function Af(a,b,c){var d;Cf(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){Bf(a,c,b)}))}function Bf(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),Cf(a,f),Bf(a,b,f)})}function Cf(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function Df(){function a(c){var d,e;f.noCascade.hasOwnProperty(c.str)||((e=f.deps.computed[c.str])&&e.forEach(function(c){var d=c.key;c.viewmodel===f?(f.clearCache(d.str),c.invalidate(),b.push(d),a(d)):c.viewmodel.mark(d)}),(d=f.depsMap.computed[c.str])&&d.forEach(a))}var b,c,d,e=this,f=this,g={};return b=this.changes,b.length?(b.slice().forEach(a),c=zf(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=f.deps.computed[a.str])&&(e.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return Af(e,a,!0)}),b.forEach(function(a){return Af(e,a)})),this.deps.observers&&(c.forEach(function(a){return Ef(e,null,a,"observers")}),Gf(this,b,"observers")),this.deps["default"]&&(d=[],c.forEach(function(a){return Ef(e,d,a,"default")}),d.length&&Ff(this,d,b),Gf(this,b,"default")),b.forEach(function(a){g[a.str]=e.get(a)}),this.implicitChanges={},this.noCascade={},g):void 0}function Ef(a,b,c,d){var e,f;(e=Hf(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function Ff(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Gf(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Hf(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b.str])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Hf(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function If(){this.captureGroups.push([])}function Jf(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Kf(a){var b="var __ractive=this;return("+a.replace(hn,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function Lf(a,b){var c=b.firstKey;return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function Mf(a,b){return b=jn(b),this.computations[a.str]=new ln(this.ractive,a,b)}function Nf(a,b){var c,d,e,f,g,h=this.ractive,i=this.cache,j=a.str;return b=b||nn,b.capture&&(g=A(this.captureGroups))&&(~g.indexOf(a)||g.push(a)),(c=this.mappings[a.firstKey])?c.get(a,b):a.isSpecial?a.value:(void 0===i[j]?((e=this.computations[j])&&!e.bypass?(d=e.get(),this.adapt(j,d)):(f=this.wrapped[j])?d=f.value:a.isRoot?(this.adapt("",h.data),d=h.data):d=Of(this,a),i[j]=d):d=i[j],!b.noUnwrap&&(f=this.wrapped[j])&&(d=f.get()),d===mn?void 0:d)}function Of(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=mn):void 0}function Pf(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(K(a),this.ractive.computed[a]),c.push(b),a in this.mappings&&n("Cannot map to a computed property ('%s')",a);c.forEach(Qf)}function Qf(a){a.init()}function Rf(a,b){this.keypath=a,this.viewmodel=b}function Sf(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,b.force&&(this.force=b.force),this.deps=[],this.unresolved=[],this.trackData=b.trackData,this.resolved=!1}function Tf(a,b){var c=this.mappings[a.str]=new Sf(a,b);return c.initViewmodel(this),c}function Uf(a,b){var c,d=a.str;hi.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var e=b?b.dontTeardownWrapper:!1;this.clearCache(d,e)}function Vf(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=Xf(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;o("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=on(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Wf(a){return JSON.stringify(a)}function Xf(a){if(a===!0)return Wf;if("string"==typeof a)return pn[a]||(pn[a]=function(b){return b[a]}),pn[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Yf(a,b){var c,d,e,f=void 0===arguments[2]?"default":arguments[2];b.isStatic||((c=this.mappings[a.firstKey])?c.register(a,b,f):(d=this.deps[f]||(this.deps[f]={}),e=d[a.str]||(d[a.str]=[]),e.push(b),a.isRoot||Zf(this,a,f)))}function Zf(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c]||(a.depsMap[c]={}),e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function $f(){return this.captureGroups.pop()}function _f(a,b){var c,d,e,f,h=void 0===arguments[2]?{}:arguments[2];if(!h.noMapping&&(c=this.mappings[a.firstKey]))return c.set(a,b);if(d=this.computations[a.str]){if(d.setting)return;d.set(b),b=d.get()}g(this.cache[a.str],b)||(e=this.wrapped[a.str],e&&e.reset&&(f=e.reset(b)!==!1,f&&(b=e.get())),d||f||ag(this,a,b),h.silent?this.clearCache(a.str):this.mark(a))}function ag(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=jj(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function bg(a,b,c){var d,e,f,g=this;if(e=c.length,c.forEach(function(b,c){-1===b&&g.mark(a.join(c),rn)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a.str])&&d.filter(cg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){for(this.mark(a.join("length"),qn),f=e;f<b.length;f+=1)this.mark(a.join(f));for(f=b.length;e>f;f+=1)this.mark(a.join(f),rn)}}function cg(a){return"function"==typeof a.shuffle}function dg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function eg(a,b){var c,d,e,f=void 0===arguments[2]?"default":arguments[2];if(!b.isStatic){if(c=this.mappings[a.firstKey])return c.unregister(a,b,f);if(d=this.deps[f][a.str],e=d.indexOf(b),-1===e)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");d.splice(e,1),a.isRoot||fg(this,a,f)}}function fg(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(B(e,b),e["_"+b.str]=void 0),b=b.parent}function gg(a){this.hook=new v(a),this.inProcess={},this.queue={}}function hg(a,b){return a[b._guid]||(a[b._guid]=[])}function ig(a,b){var c=hg(a.queue,b);for(a.hook.fire(b);c.length;)ig(a,c.shift());delete a.queue[b._guid]}function jg(b){var c,d=void 0===arguments[1]?{}:arguments[1],e=void 0===arguments[2]?{}:arguments[2];if(kg(b,e),tn.fire(Cj.getConstructTarget(b,d),d),Cj.init(b.constructor,b,d),b.magic&&!hh)throw new Error("Getters and setters (magic mode) are not supported in this browser");un.fire(b),vn.begin(b),b.viewmodel=new sn(b,e.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Hn({template:b.template,root:b,owner:b})),vn.end(b),(c=a(b.el))&&b.render(c,b.append)}function kg(a,b){a._guid="r-"+wn++,a._subs=Bh(null),a._config={},a._twowayBindings=Bh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function lg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Hn({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key.str,this.fragment.getValue())}function mg(a,b){return b.parameters?hh&&"legacy"!==b.parameters?og(a,b):ng(a):a.data}function ng(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function og(a,b){var c=pg(a,b);return new c(a)}function pg(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=qg(a,c.defined)),c.Constructor}function qg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(hi.start(),c.setValue(a),hi.end()):this._data[b]=a},enumerable:!0},a},b),Dh(e={toJSON:rg},d),e.constructor=c,c.prototype=e,c}function rg(){var a,b={};for(a in this)-1===zn.indexOf(a)&&(b[a]=this[a]);return b}function sg(a,b,c){var d,e,f;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=Kc(d,c.r,e):c.x?this.resolver=new sl(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new wl(d,c.rx,e)),this.resolved||(this.resolver&&k(this.resolver.forceResolution)&&(f=this.resolver.forceResolution.bind(this.resolver)),a.addMapping(b,void 0,f)),this.ready=!0}function tg(a,b,c){var d,e,f;return c?(b.parameters&&(f=ug(b)),d=new vg(a,c,f),e=mg(d,b),{data:e,mappings:d.mappings}):{data:{}}}function ug(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function vg(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=Bh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(K(a),b[a])})}function wg(a){return 1===a.length&&a[0].t===Mj}function xg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&yg(a.instance,a.root,c,b[c])}function yg(a,b,c,d){"string"!=typeof d&&o("Components currently only support simple events - you cannot include arguments. Sorry!"),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),mb(b,d,{event:a,args:c}),!1})}function zg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Tj,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=tg(this,b.prototype,a.template.a),yn(this,b,e,a.template.f,a.template.p),xg(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&o('The "intro", "outro" and "decorator" directives have no effect on components'),An(this)}function Ag(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function Bg(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function Cg(){return this.instance.fragment.toString()}function Dg(){var a=this.instance;this.resolvers.forEach(U),Eg(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&B(a.el.__ractive_instances__,a),Bn.fire(a)}function Eg(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function Fg(a){this.shouldDestroy=a,this.instance.unrender()}function Gg(a){var b=this;this.owner=a.owner,this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],this.items=a.template.map(function(c,d){return Hg({parentFragment:b,pElement:a.pElement,template:c,index:d})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Hg(a){if("string"==typeof a.template)return new nl(a);switch(a.template.t){case Mj:return"yield"===a.template.r?new Fn(a):new yl(a);case Oj:return new Al(a);case Nj:return new Fl(a);case Pj:var b=void 0;return(b=of(a.parentFragment.root,a.template.e))?new Dn(a,b):new _m(a);case Qj:return new en(a);case Rj:return new En(a);case Vj:return new Gn(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")
}}function Ig(a,b){I(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Jg(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Kg(a){return this.items?this.items.map(a?Mg:Lg).join(""):""}function Lg(a){return a.toString()}function Mg(a){return a.toString(!0)}function Ng(){this.bound&&(this.items.forEach(Og),this.bound=!1)}function Og(a){a.unbind&&a.unbind()}function Pg(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Qg(a){var b,c,d,e,f;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&(this.data=a):this.data=a,d=Cj.reset(this),e=d.length;e--;)if(Kn.indexOf(d[e])>-1){f=!0;break}if(f){var g=void 0;this.viewmodel.mark(di),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Hn({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)}else b=hi.start(this,!0),this.viewmodel.mark(di),hi.end();return Ln.fire(this,a),b}function Rg(a){var b,c;Bj.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Hn({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Sg(a,b){var c,d,e=this;if(d=hi.start(this,!0),j(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],a=K(N(a)),this.viewmodel.set(a,b))}else a=K(N(a)),On.test(a.str)?L(this,a.str).forEach(function(a){e.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return hi.end(),d}function Tg(a,b){return t(this,a,void 0===b?-1:-b)}function Ug(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&B(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():bi.resolve(),Sn.fire(this),this._boundFunctions.forEach(Vg),a}function Vg(a){delete a.fn[a.prop]}function Wg(a){if("string"!=typeof a)throw new TypeError(Oh);return this.set(a,!this.get(a))}function Xg(){return this.fragment.toString(!0)}function Yg(){var a,b,c=this;if(!this.fragment.rendered)return o("ractive.unrender() was called on a Ractive instance that was not rendered"),bi.resolve();for(a=hi.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){Yi.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),B(this.el.__ractive_instances__,this),Tn.fire(this),hi.end(),a}function Zg(a){var b;return a=K(a)||di,b=hi.start(this,!0),this.viewmodel.mark(a),hi.end(),Vn.fire(this,a),b}function $g(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||K(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=_g(this,e),this.set(c)}function _g(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a));b=a.attribute.value,e=a.getValue(),y(b,e)||g(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),y(e,f)||(c[a.str]=f)}),c}function ah(a){for(var b={};a;)bh(a,b),dh(a,b),a=a._Parent!==In?a._Parent:!1;return b}function bh(a,b){oj.forEach(function(c){ch(c.useDefaults?a.prototype:a,b,c.name)})}function ch(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function dh(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e=void 0,f=d._method;f&&(d=d._method),e=wj(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}})}function eh(){var a,b,c=void 0===arguments[0]?{}:arguments[0],d=this;return c.prototype instanceof In&&(c=ah(c)),a=function(a){xn(this,a)},b=Bh(d.prototype),b.constructor=a,Dh(a,{_guid:{value:Xn++},defaults:{value:b},extend:{value:eh,writable:!0,configurable:!0},_Parent:{value:d}}),Cj.extend(d,b,c),a.prototype=b,a}var fh,gh,hh,ih,jh,kh,lh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1,debug:!1},mh=lh,nh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};fh="object"==typeof document,gh="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),hh=!0}catch(oh){hh=!1}ih={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jh="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),kh=["o","ms","moz","webkit"];var ph,qh,rh,sh,th,uh,vh,wh,xh;if(ph=jh?function(a,b){return b&&b!==ih.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==ih.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},fh){for(rh=ph("div"),sh=["matches","matchesSelector"],xh=function(a){return function(b,c){return b[a](c)}},vh=sh.length;vh--&&!qh;)if(th=sh[vh],rh[th])qh=xh(th);else for(wh=kh.length;wh--;)if(uh=kh[vh]+th.substr(0,1).toUpperCase()+th.substring(1),rh[uh]){qh=xh(uh);break}qh||(qh=function(a,b){var c,d,e;for(d=a.parentNode,d||(rh.innerHTML="",d=rh,a=a.cloneNode(),rh.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else qh=null;var yh,zh,Ah;"undefined"==typeof window?Ah=null:(yh=window,zh=yh.document,Ah={},zh||(Ah=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;for(void 0===b&&(b=0),0>b&&(b+=this.length),0>b&&(b=0),c=this.length;c>b;b++)if(this.hasOwnProperty(b)&&this[b]===a)return b;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;for(c=0,d=this.length;d>c;c+=1)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e,f=this,g=[];for(f instanceof String&&(f=f.toString(),e=!0),c=0,d=f.length;d>c;c+=1)(f.hasOwnProperty(c)||e)&&(g[c]=a.call(b,f[c],c,f));return g}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){var c,d,e,f;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(e=this.length,f=!1,arguments.length>1&&(d=b,f=!0),c=0;e>c;c+=1)this.hasOwnProperty(c)?f&&(d=a(d,this[c],c,this)):(d=this[c],f=!0);if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c,d,e=[];for(c=0,d=this.length;d>c;c+=1)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)&&(e[e.length]=this[c]);return e}),Array.prototype.every||(Array.prototype.every=function(a,b){var c,d,e;if(null==this)throw new TypeError;if(c=Object(this),d=c.length>>>0,"function"!=typeof a)throw new TypeError;for(e=0;d>e;e+=1)if(e in c&&!a.call(b,c[e],e,c))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b,c,d,e,f=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return b=f.call(arguments,1),c=this,d=function(){},e=function(){var e=this instanceof d&&a?this:a;return c.apply(e,b.concat(f.call(arguments)))},d.prototype=this.prototype,e.prototype=new d,e}),yh.addEventListener||!function(a,b){var c,d,e,f,g,h;a.appearsToBeIELessEqual8=!0,c=function(a,b){var c,d=this;for(c in a)d[c]=a[c];d.currentTarget=b,d.target=a.srcElement||b,d.timeStamp=+new Date,d.preventDefault=function(){a.returnValue=!1},d.stopPropagation=function(){a.cancelBubble=!0}},d=function(a,b){var d,e,f=this;d=f.listeners||(f.listeners=[]),e=d.length,d[e]=[b,function(a){b.call(f,new c(a,f))}],f.attachEvent("on"+a,d[e][1])},e=function(a,b){var c,d,e=this;if(e.listeners)for(c=e.listeners,d=c.length;d--;)c[d][0]===b&&e.detachEvent("on"+a,c[d][1])},a.addEventListener=b.addEventListener=d,a.removeEventListener=b.removeEventListener=e,"Element"in a?(a.Element.prototype.addEventListener=d,a.Element.prototype.removeEventListener=e):(h=b.createElement,b.createElement=function(a){var b=h(a);return b.addEventListener=d,b.removeEventListener=e,b},f=b.getElementsByTagName("head")[0],g=b.createElement("style"),f.insertBefore(g,f.firstChild))}(yh,zh),yh.getComputedStyle||(Ah.getComputedStyle=function(){function a(c,d,e,f){var g,h=d[e],i=parseFloat(h),j=h.split(/\d/)[0];return isNaN(i)&&/^thin|medium|thick$/.test(h)&&(i=b(h),j=""),f=null!=f?f:/%|em/.test(j)&&c.parentElement?a(c.parentElement,c.parentElement.currentStyle,"fontSize",null):16,g="fontSize"==e?f:/width/i.test(e)?c.clientWidth:c.clientHeight,"em"==j?i*f:"in"==j?96*i:"pt"==j?96*i/72:"%"==j?i/100*g:i}function b(a){var b,c;return f[a]||(b=document.createElement("div"),b.style.display="block",b.style.position="fixed",b.style.width=b.style.height="0",b.style.borderRight=a+" solid black",document.getElementsByTagName("body")[0].appendChild(b),c=b.getBoundingClientRect(),f[a]=c.right-c.left),f[a]}function c(a,b){var c="border"==b?"Width":"",d=b+"Top"+c,e=b+"Right"+c,f=b+"Bottom"+c,g=b+"Left"+c;a[b]=(a[d]==a[e]==a[f]==a[g]?[a[d]]:a[d]==a[f]&&a[g]==a[e]?[a[d],a[e]]:a[g]==a[e]?[a[d],a[e],a[f]]:[a[d],a[e],a[f],a[g]]).join(" ")}function d(b){var d,e,f,g;d=b.currentStyle,e=this,f=a(b,d,"fontSize",null);for(g in d)/width|height|margin.|padding.|border.+W/.test(g)?"auto"===d[g]?/^width|height/.test(g)?e[g]=("width"===g?b.clientWidth:b.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(g)&&(e[g]="0px"):e[g]=a(b,d,g,f)+"px":"styleFloat"===g?e["float"]=d[g]:e[g]=d[g];return c(e,"margin"),c(e,"padding"),c(e,"border"),e.fontSize=f+"px",e}function e(a){return new d(a)}var f={};return d.prototype={constructor:d,getPropertyPriority:function(){},getPropertyValue:function(a){return this[a]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},e}()));var Bh,Ch,Dh,Eh=Ah;try{Object.defineProperty({},"test",{value:0}),fh&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Ch=Object.defineProperty}catch(Fh){Ch=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Fh){throw Fh}fh&&Object.defineProperties(ph("div"),{test:{value:0}}),Dh=Object.defineProperties}catch(Fh){Dh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&Ch(a,c,b[c])}}try{Object.create(null),Bh=Object.create}catch(Fh){Bh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var Gh,Hh,Ih=Object.prototype.hasOwnProperty,Jh=Object.prototype.toString,Kh=/^\[object (?:Array|FileList)\]$/,Lh=function(){},Mh={};gh?(Hh=function(a,b){console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(b))},Gh=function(){console.log.apply(console,arguments)}):Hh=Gh=Lh;var Nh,Oh="Bad arguments",Ph='A function was specified for "%s" %s, but no %s was returned',Qh=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"},Rh=function(a,b,c,d){if(a===b)return s(b);if(d){var e=q("interpolators",c,d);if(e)return e(a,b)||s(b);p(Qh(d,"interpolator"))}return Sh.number(a,b)||Sh.array(a,b)||Sh.object(a,b)||s(b)},Sh={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Rh(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)Ih.call(a,g)&&(Ih.call(b,g)?(c.push(g),e[g]=Rh(a[g],b[g])):f[g]=a[g]);for(g in b)Ih.call(b,g)&&!Ih.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}};"undefined"==typeof window?Nh=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(kh,0,window),Nh=window.requestAnimationFrame.bind(window));var Th,Uh=Nh;Th="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Vh={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};v.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?o(this.deprecate.message):o('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),b?a.fire(this.event,b):a.fire(this.event)};var Wh,Xh={},Yh={},Zh={};"function"==typeof bi?Wh=bi:(Wh=function(a){var b,c,d,e,f,g,h=[],i=[],j=Xh;d=function(a){return function(d){j===Xh&&(b=d,j=a,c=E(j===Yh?h:i,b),D(c))}},e=d(Yh),f=d(Zh);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Wh(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),F(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==Xh&&D(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Wh.all=function(a){return new Wh(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Wh.resolve=function(a){return new Wh(function(b){b(a)})},Wh.reject=function(a){return new Wh(function(b,c){c(a)})});var $h,_h,ai,bi=Wh,ci={};$h=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,_h={},ai=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=J(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.parent=""===a?null:K(b.join(".")),this.isRoot=!a},ai.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return K(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:K(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=G(this.str))}};var di=K(""),ei=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return di},fi=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};fi.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Y(this)},decrementTotal:function(){this.totalChildren-=1,Y(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;B(b,a),Y(this)},init:function(){this.ready=!0,Y(this)},detachNodes:function(){this.decoratorQueue.forEach(T),this.detachQueue.forEach(W),this.children.forEach(X)}};var gi,hi,ii=[],ji=new v("change");hi={start:function(a,b){var c,d;return b&&(c=new bi(function(a){return d=a})),gi={previousBatch:gi,transitionManager:new fi(d,gi&&gi.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&gi.viewmodels.push(a.viewmodel),c},end:function(){Z(),gi.transitionManager.init(),!gi.previousBatch&&gi.instance&&(gi.instance.viewmodel.changes=[]),gi=gi.previousBatch},addViewmodel:function(a){return gi?-1===gi.viewmodels.indexOf(a)?(gi.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=gi.transitionManager,gi.transitionManager.add(a)},registerDecorator:function(a){gi.transitionManager.addDecorator(a)},addView:function(a){gi.views.push(a)},addUnresolved:function(a){ii.push(a)},removeUnresolved:function(a){B(ii,a)},detachWhenReady:function(a){gi.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(gi){for(c=gi;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var ki=[],li={tick:function(){var a,b,c;for(c=Th(),hi.start(),a=0;a<ki.length;a+=1)b=ki[a],b.tick(c)||ki.splice(a--,1);hi.end(),ki.length?Uh(li.tick):li.running=!1},add:function(a){ki.push(a),li.running||(li.running=!0,Uh(li.tick))},abort:function(a,b){for(var c,d=ki.length;d--;)c=ki[d],c.root===b&&c.keypath===a&&c.stop()}},mi=li,ni=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Rh(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ni.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(hi.start(this.root),this.root.viewmodel.set(f,this.to),hi.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&o("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),hi.start(this.root),this.root.viewmodel.set(f,c),hi.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&o("Animation was not found"),this.root._animations.splice(a,1)}};var oi={stop:Lh},pi=new v("detach"),qi=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?qh(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},ri=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},si=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=fb(a.component||a._ractive.proxy),d=fb(b.component||b._ractive.proxy),e=A(c),f=A(d);e&&e===f;)c.pop(),d.pop(),g=e,e=A(c),f=A(d);if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},ti=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):si(a,b)},ui=function(){this.sort(this._isComponentQuery?si:ti),this._dirty=!1},vi=function(){var a=this;this._dirty||(this._dirty=!0,hi.scheduleTask(function(){a._sort()}))},wi=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},xi={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},yi={capture:!0,noUnwrap:!0},zi=new v("insert"),Ai=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Ai.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;g(a,this.value)||(this.value=a,this.defer&&this.ready?hi.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Bi,Ci=/\*/,Di=Array.prototype.slice;Bi=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Bi.prototype={init:function(a){var b,c;if(b=ub(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(K(c));else this.values=b},update:function(a){var b,c=this;if(Ci.test(a.str)){b=ub(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(K(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?void hi.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?void(this.values[b]=c):(this.updating=!0,g(c,this.values[b])&&this.ready||(d=Di.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}};var Ei,Fi,Gi,Hi,Ii,Ji,Ki=/\*/,Li={},Mi=function(a){return a.trim()},Ni=function(a){return""!==a},Oi=Array.prototype,Pi=function(a){return function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var f,g,h,i,j=[];if(b=K(N(b)),f=this.viewmodel.get(b),g=f.length,!e(f))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return j=Bb(f,a,c),i=Oi[a].apply(f,c),h=hi.start(this,!0).then(function(){return i}),j?this.viewmodel.smartUpdate(b,f,j):this.viewmodel.mark(b),hi.end(),h}},Qi=Pi("pop"),Ri=Pi("push"),Si="/* Ractive.js component styles */\n",Ti={},Ui=[];fh?(Gi=document.createElement("style"),Gi.type="text/css",Hi=document.getElementsByTagName("head")[0],Ji=!1,Ii=Gi.styleSheet,Fi=function(){var a;Ui.length?(a=Si+Ui.join(" "),Ii?Ii.cssText=a:Gi.innerHTML=a,Ji||(Hi.appendChild(Gi),Ji=!0)):Ji&&(Hi.removeChild(Gi),Ji=!1)},Ei={add:function(a){a.css&&(Ti[a._guid]||(Ti[a._guid]=0,Ui.push(a.css),Fi()),Ti[a._guid]+=1)},remove:function(a){a.css&&(Ti[a._guid]-=1,Ti[a._guid]||(B(Ui,a.css),hi.scheduleTask(Fi)))}}):Ei=null;var Vi,Wi,Xi,Yi=Ei,Zi=new v("render"),$i=new v("complete"),_i=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},aj=[],bj=["pop","push","reverse","shift","sort","splice","unshift"];bj.forEach(function(a){var b=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d,e,f,g;for(d=Bb(this,a,b),e=Array.prototype[a].apply(this,arguments),hi.start(),this._ractive.setting=!0,g=this._ractive.wrappers.length;g--;)f=this._ractive.wrappers[g],hi.addViewmodel(f.root.viewmodel),_i(f,this,a,d);return hi.end(),this._ractive.setting=!1,e};Ch(aj,a,{value:b})}),Vi={},Vi.__proto__?(Wi=function(a){a.__proto__=aj},Xi=function(a){a.__proto__=Array.prototype}):(Wi=function(a){var b,c;for(b=bj.length;b--;)c=bj[b],Ch(a,c,{value:aj[c],configurable:!0})},Xi=function(a){var b;for(b=bj.length;b--;)delete a[bj[b]]}),Wi.unpatch=Xi;var cj,dj,ej,fj=Wi;cj={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new dj(a,b,c)}},dj=function(a,b,c){this.root=a,this.value=b,this.keypath=K(c),b._ractive||(Ch(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),fj(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},dj.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(ej);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(ej);d.splice(e,1)}}else delete a._ractive,fj.unpatch(this.value)}},ej="Something went wrong in a rather interesting way";var gj,hj,ij=/^\s*[0-9]+\s*$/,jj=function(a){return ij.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),gj={filter:function(a,b,c){var d,f;return b?(b=K(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(f=c.viewmodel.get(b.parent),e(f)&&/^[0-9]+$/.test(b.lastKey)?!1:f&&("object"==typeof f||"function"==typeof f))):!1},wrap:function(a,b,c){return new hj(a,b,c)}},hj=function(a,b,c){var d,e,f;return c=K(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?void(-1===f.indexOf(this)&&f.push(this)):void Fb(this,b,e)},hj.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,hi.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=jj(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(Fh){gj=!1}var kj,lj;gj&&(kj={filter:function(a,b,c){return gj.filter(a,b,c)&&cj.filter(a)},wrap:function(a,b,c){return new lj(a,b,c)}},lj=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=gj.wrap(a,b,c),this.arrayWrapper=cj.wrap(a,b,c)},lj.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var mj,nj,oj,pj={extend:function(a,b,c){b.adapt=Gb(b.adapt,z(c.adapt))},init:function(a,b,c){function d(a){return"string"==typeof a&&(a=q("adaptors",b,a),a||n(Qh(a,"adaptor"))),a}var e,f;if(e=b.adapt.map(d),f=z(c.adapt).map(d),b.adapt=Gb(e,f),b.magic){if(!hh)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.modifyArrays&&b.adapt.push(kj),b.adapt.push(gj)}b.modifyArrays&&b.adapt.push(cj)}},qj=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,rj=/\/\*.*?\*\//g,sj=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,tj=/^@media/,uj=/\[data-ractive-css="[a-z0-9-]+"]/g,vj={name:"css",extend:function(a,b,c){var d,e=b.constructor._guid;(d=Kb(c.css,c,e)||Kb(a.css,a,e))&&(b.constructor.css=d)},init:function(){}},wj=function(a,b,c){return c||Lb(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},xj={name:"data",extend:function(a,b,c){b.data=Mb(a,b,c)},init:function(a,b,c){var d=c.data,e=Mb(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}},reset:function(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}},yj=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],zj={parse:Ub,fromId:Vb,isHashedId:Wb,isParsed:Xb,getParseOptions:Yb,createHelper:Tb},Aj=zj,Bj={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:ac(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=$b(b,e),b._config.template={fn:e,result:d}),d=ac(d,b),b.template=d.t,d.p&&bc(b.partials,d.p)},reset:function(a){var b,c=Zb(a);return c?(b=ac(c,a),a.template=b.t,bc(a.partials,b.p,!0),!0):void 0}};mj=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],nj=function(a,b){this.name=a,this.useDefaults=b},nj.prototype={constructor:nj,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=Bh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},oj=mj.map(function(a){return new nj(a,"computed"===a)});var Cj,Dj,Ej,Fj,Gj,Hj;Fj={adapt:pj,css:vj,data:xj,template:Bj},Ej=Object.keys(mh),Hj=jc(Ej.filter(function(a){return!Fj[a]})),Gj=jc(Ej.concat(oj.map(function(a){return a.name}))),Dj=[].concat(Ej.filter(function(a){return!oj[a]&&!Fj[a]}),oj,Fj.data,Fj.template,Fj.css),Cj={extend:function(a,b,c){return hc("extend",a,b,c)},init:function(a,b,c){return hc("init",a,b,c)},reset:function(a){return Dj.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:Dj,getConstructTarget:function(a,b){return b.onconstruct?{onconstruct:cc(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a}};var Ij,Jj,Kj,Lj=1,Mj=2,Nj=3,Oj=4,Pj=7,Qj=8,Rj=9,Sj=13,Tj=15,Uj=16,Vj=18,Wj=20,Xj=21,Yj=22,Zj=23,$j=24,_j=26,ak=27,bk=30,ck=31,dk=32,ek=33,fk=34,gk=35,hk=36,ik=40,jk=50,kk=51,lk=52,mk=53,nk=54,ok="Expected a JavaScript expression",pk="Expected closing paren",qk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,rk=function(a){var b;return(b=a.matchPattern(qk))?{t:Wj,v:b}:null},sk=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:$j,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:$j,v:"false"}):null
};Ij=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Jj=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Kj=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var tk,uk,vk,wk,xk,yk=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(Ij)||b.matchPattern(Jj)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(Kj),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},zk=yk('"'),Ak=yk("'"),Bk=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=Ak(a),a.matchString('"')?{t:Xj,v:c}:(a.pos=b,null)):a.matchString("'")?(c=zk(a),a.matchString("'")?{t:Xj,v:c}:(a.pos=b,null)):null},Ck=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Dk=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Ek=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Fk=function(a){var b;return(b=Bk(a))?Ek.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=rk(a))?b.v:(b=a.matchPattern(Ck))?b:void 0},Gk=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=Fk(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:ak,k:c,v:d}):(a.pos=b,null))},Hk=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=sc(a),a.allowWhitespace(),a.matchString("}")?{t:Zj,m:c}:(a.pos=b,null)):(a.pos=b,null)},Ik=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=tc(a),a.matchString("]")?{t:Yj,m:c}:(a.pos=b,null)):(a.pos=b,null)},Jk=function(a){var b=rk(a)||sk(a)||Bk(a)||Hk(a)||Ik(a);return b};tk=/^\.[a-zA-Z_$0-9]+/,vk=function(a){var b=a.matchPattern(uk);return b?"."+b:null},uk=/^\[(0|[1-9][0-9]*)\]/,wk=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,xk=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Kk,Lk,Mk=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?Dk:Ck,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&xk.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&wk.test(d))return{t:_j,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(tk)||vk(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:bk,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},Nk=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(ok),a.allowWhitespace(),a.matchString(")")||a.error(pk),{t:fk,x:c}):null},Ok=function(a){return Jk(a)||Mk(a)||Nk(a)},Pk=function(a){var b,c,d,e;if(c=Ok(a),!c)return null;for(;c;)if(b=a.pos,d=uc(a))c={t:dk,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=tc(a),a.allowWhitespace(),a.matchString(")")||a.error(pk),c={t:ik,x:c},e&&(c.o=e)}return c};Lk=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(ok),{s:a,o:d,t:ek}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Pk,a=0,b=d.length;b>a;a+=1)c=Lk(d[a],e),e=c;Kk=e}();var Qk,Rk;Rk=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:hk,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Kk,a=0,b=d.length;b>a;a+=1)c=Rk(d[a],e),e=c;Qk=e}();var Sk,Tk,Uk=function(a){var b,c,d,e;return(c=Qk(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ok),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(ok),{t:gk,o:[c,d,e]}):(a.pos=b,c)):null},Vk=function(a){var b,c=[];return wc(a,c),b={r:c,s:xc(this,a,c)}},Wk=/^\s+/;Tk=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Tk.prototype=Error.prototype,Sk=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Sk.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return Uk(this)},flattenExpression:Vk,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Tk(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(Wk)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Sk.extend=function(a){var b,c,d=this;b=function(a,b){Sk.call(this,a,b)},b.prototype=Bh(d.prototype);for(c in a)Ih.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Sk.extend,b};var Xk,Yk,Zk,$k,_k,al,bl,cl=function(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})};Yk=function(){var a={};return cl(a,"true",!0),cl(a,"false",!1),cl(a,"undefined",void 0),cl(a,"null",null),a}(),Zk=new RegExp("^(?:"+Object.keys(Yk).join("|")+")"),$k=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,_k=/\$\{([^\}]+)\}/g,al=/^\$\{([^\}]+)\}/,bl=/^\s*$/,Xk=Sk.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&bl.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(al),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(Zk))?{v:Yk[b]}:void 0},function(a){var b;return(b=a.matchPattern($k))?{v:+b}:void 0},function(a){var b,c=Bk(a);return c&&(b=a.values)?{v:c.v.replace(_k,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=yc(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var dl,el,fl,gl,hl,il,jl,kl,ll=function(a,b){var c=new Xk(a,{values:b});return c.result};dl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,el=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,fl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},gl=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],hl=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(fl).join("|")+"));?","g"),il=/</g,jl=/>/g,kl=/&/g;var ml=function(){return b(this.node)},nl=function(a){this.type=Lj,this.text=a.template};nl.prototype={detach:ml,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Fc(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var ol=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=O(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):hi.addUnresolved(this)};ol.prototype={resolve:function(a){this.keypath&&!a&&hi.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(K(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||hi.removeUnresolved(this)}};var pl=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},ql={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};pl.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=ql[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(K("@"+d.prefix+Ic(this.cached,d)));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===lk&&void 0!==(a=Ic(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback(K("@"+d.prefix+a));c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Ic(c,d)))return this.callback(K("@"+d.prefix+a.str));c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var rl=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};rl.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(K("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},Jc.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var sl,tl={},ul=Function.prototype.bind;sl=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Kc(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},sl.prototype={bubble:function(){this.ready&&(this.uniqueString=Nc(this.str,this.keypaths),this.keypath=Oc(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e,f=this;d=this.keypath,a=this.root.viewmodel.computations[d.str],a?this.root.viewmodel.mark(d):(e=Lc(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:a.isSpecial?(b=a.value,function(){return b}):function(){var b=f.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=Qc(b,f.root)),b}}),c={deps:this.keypaths.filter(Pc),get:function(){var a=b.map(Mc);return e.apply(null,a)}},a=this.root.viewmodel.compute(d,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var vl=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===bk?this.refResolver=Kc(this,a.n,function(a){d.resolve(a)}):new sl(b,c,a,function(a){d.resolve(a)})};vl.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var wl=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=O(d,e,g))?this.base=f:this.baseResolver=new ol(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new vl(a,h,g)}),this.ready=!0,this.bubble()};wl.prototype={getKeypath:function(){var a=this.members.map(Rc);return!a.every(Sc)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(U)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=K(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Tc),this.bubble()}};var xl={getValue:Hc,init:Uc,resolve:Vc,rebind:Wc},yl=function(a){this.type=Mj,xl.init(this,a)};yl.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:xl.resolve,rebind:xl.rebind,detach:ml,unbind:Gc,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:xl.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),g(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&hi.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?Fc(b):b}};var zl=function(a,b){xl.rebind.call(this,a,b)},Al=function(a){this.type=Oj,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===kk,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,xl.init(this,a)};Al.prototype={bubble:Xc,detach:Yc,find:Zc,findAll:$c,findAllComponents:_c,findComponent:ad,findNextNode:bd,firstNode:cd,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:xl.getValue,shuffle:dd,rebind:zl,render:fd,resolve:xl.resolve,setValue:gd,toString:rd,unbind:sd,unrender:td,update:wd};var Bl,Cl,Dl={};try{ph("table").innerHTML="foo"}catch(Fh){Bl=!0,Cl={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var El=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(Bl&&(e=Cl[b.tagName])?(d=Bd("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===ih.svg?(d=Bd("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=Bd(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},Fl=function(a){this.type=Nj,xl.init(this,a)};Fl.prototype={detach:xd,find:yd,findAll:zd,firstNode:Ad,getValue:xl.getValue,rebind:xl.rebind,render:Ed,resolve:xl.resolve,setValue:Fd,toString:Gd,unbind:Gc,unrender:Hd,update:Id};var Gl,Hl,Il,Jl,Kl=function(){this.parentFragment.bubble()},Ll=function(a){return this.node?qh(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},Ml=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Nl=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Ol=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Pl=/^true|on|yes|1$/i,Ql=/^[0-9]+$/,Rl=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||Pl.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&Ql.test(c)?parseInt(c):0===c||Pl.test(c),delete b.lazy)};Gl="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Hl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Il=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},Jl=Il(Gl.concat(Hl));var Sl=function(a){var b=a.toLowerCase();return Jl[b]||b},Tl=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==ih.html?Sl(b):b;else if(b=b.substring(c+1),a.name=Sl(b),a.namespace=ih[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},Ul={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Vl=function(a){this.init(a)};Vl.prototype={bubble:Nd,init:Pd,rebind:Qd,render:Rd,toString:Sd,unbind:Ud,update:fe};var Wl,Xl=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new Vl({element:a,name:c,value:b[c],root:a.root}),e[c]=d,"value"!==c&&e.push(d));return(d=e.value)&&e.push(d),e};"undefined"!=typeof document&&(Wl=ph("div"));var Yl=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Hn({root:a.root,owner:this,template:[b]})};Yl.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===ih.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=ge(a,this.isSvg),this.attributes.filter(function(a){return he(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var Zl=function(a,b){return b?b.map(function(b){return new Yl(a,b)}):[]},$l=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return o("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name),!1}else b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=ie(a))&&(this.resetValue=d,e.formBindings.push(this))};$l.prototype={handleChange:function(){var a=this;hi.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),hi.scheduleTask(function(){return a.attribute.locked=!1}),hi.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(B(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},$l.extend=function(a){var b,d=this;return b=function(a){$l.call(this,a),this.init&&this.init()},b.prototype=Bh(d.prototype),c(b.prototype,a),b.extend=$l.extend,b};var _l,am=$l,bm=am.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",je,!1),this.root.lazy||(a.addEventListener("input",je,!1),a.attachEvent&&a.addEventListener("keyup",je,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",je,!1),a.removeEventListener("input",je,!1),a.removeEventListener("keyup",je,!1)},getValue:function(){return this.element.node.innerHTML}}),cm={},dm=am.extend({name:"checked",init:function(){this.siblings=ke(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",je,!1),a.attachEvent&&a.addEventListener("click",je,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",je,!1),a.removeEventListener("click",je,!1)},handleChange:function(){hi.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),hi.end()},getValue:function(){return this.element.node.checked},unbind:function(){B(this.siblings,this)}}),em=am.extend({name:"name",init:function(){this.siblings=ke(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",je,!1),a.attachEvent&&a.addEventListener("click",je,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",je,!1),a.removeEventListener("click",je,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&am.prototype.handleChange.call(this)},rebound:function(a,b){var c;am.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){B(this.siblings,this)}}),fm=am.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=ke(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){B(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?x(a,b):a==b,c.name="{{"+this.keypath.str+"}}",c.checked=this.isChecked,c.addEventListener("change",je,!1),c.attachEvent&&c.addEventListener("click",je,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",je,!1),a.removeEventListener("click",je,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,am.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(le).map(me)}}),gm=am.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",je,!1),a.attachEvent&&a.addEventListener("click",je,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",je,!1),a.removeEventListener("click",je,!1)},getValue:function(){return this.element.node.checked}}),hm=am.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",je,!1)},unrender:function(){this.element.node.removeEventListener("change",je,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,hi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),im=hm.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",je,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",je,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&y(c,b)||hm.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,hi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),jm=am.extend({render:function(){this.element.node.addEventListener("change",je,!1)},unrender:function(){this.element.node.removeEventListener("change",je,!1)},getValue:function(){return this.element.node.files}});_l=am.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:h(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",je,!1),a||(b.addEventListener("input",c?oe:je,!1),b.attachEvent&&b.addEventListener("keyup",c?oe:je,!1)),b.addEventListener("blur",ne,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",je,!1),a.removeEventListener("input",je,!1),a.removeEventListener("keyup",je,!1),a.removeEventListener("blur",ne,!1)}});var km=_l.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),lm=/^event(?:\.(.+))?/,mm={},nm={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},om=function(a,b,c){this.init(a,b,c)};om.prototype={bubble:re,fire:se,getAction:te,init:ue,listen:ze,rebind:Be,render:Ce,resolve:De,unbind:Ee,unrender:Fe};var pm=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new om(a,e[c],b[d]),g.push(f);return g},qm=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Hn({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Hn({template:b.d,root:c,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getArgsList(),f.ready&&f.update()}),this.fn=q("decorators",c,d),this.fn||o(Qh(d,"decorator")))};qm.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var rm,sm,tm,um=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()
})};fh?(sm={},tm=ph("div").style,rm=function(a){var b,c,d;if(a=um(a),!sm[a])if(void 0!==tm[a])sm[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=kh.length;b--;)if(c=kh[b],void 0!==tm[c+d]){sm[a]=c+d;break}return sm[a]}):rm=null;var vm,wm,xm=rm;fh?(wm=window.getComputedStyle||Eh.getComputedStyle,vm=function(a){var b,c,d,f,g;if(b=wm(this.node),"string"==typeof a)return g=b[xm(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[xm(f)],"0px"===g&&(g=0),c[f]=g;return c}):vm=null;var ym=function(a,b){var c;if("string"==typeof a)this.node.style[xm(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[xm(c)]=a[c]);return this},zm=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(p(Qh(a.easing,"easing")),b=Ue)):b="function"==typeof a.easing?a.easing:Ue,this.easing=b,this.start=Th(),this.end=this.start+this.duration,this.running=!0,mi.add(this)};zm.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Am,Bm,Cm,Dm,Em,Fm,Gm,Hm,Im=new RegExp("^-(?:"+kh.join("|")+")-"),Jm=function(a){return a.replace(Im,"")},Km=new RegExp("^(?:"+kh.join("|")+")([A-Z])"),Lm=function(a){var b;return a?(Km.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Mm={},Nm={};fh?(Bm=ph("div").style,function(){void 0!==Bm.transition?(Cm="transition",Dm="transitionend",Em=!0):void 0!==Bm.webkitTransition?(Cm="webkitTransition",Dm="webkitTransitionEnd",Em=!0):Em=!1}(),Cm&&(Fm=Cm+"Duration",Gm=Cm+"Property",Hm=Cm+"TimingFunction"),Am=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[Gm]=d.map(xm).map(Lm).join(","),a.node.style[Hm]=Lm(c.easing||"linear"),a.node.style[Fm]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(um(Jm(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Dm,j,!1),h=!0,i())},a.node.addEventListener(Dm,j,!1),setTimeout(function(){for(var e,k,l,m,n,p=d.length,q=[];p--;)m=d[p],e=f+m,Em&&!Nm[e]&&(a.node.style[xm(m)]=b[m],Mm[e]||(k=a.getStyle(m),Mm[e]=a.getStyle(m)!=b[m],Nm[e]=!Mm[e],Nm[e]&&(a.node.style[xm(m)]=k))),(!Em||Nm[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?o("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!"):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],q.push({name:xm(m),interpolator:Rh(parseFloat(k),parseFloat(b[m])),suffix:n}));q.length?new zm({root:a.root,duration:c.duration,easing:um(c.easing||""),step:function(b){var c,d;for(d=q.length;d--;)c=q[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Dm,j,!1),h=!0,i())},0)},c.delay||0)}):Am=null;var Om,Pm,Qm,Rm,Sm;if("undefined"!=typeof document){if(Om="hidden",Sm={},Om in document)Qm="";else for(Rm=kh.length;Rm--;)Pm=kh[Rm],Om=Pm+"Hidden",Om in document&&(Qm=Pm);void 0!==Qm?(document.addEventListener(Qm+"visibilitychange",Ve),Ve()):("onfocusout"in document?(document.addEventListener("focusout",We),document.addEventListener("focusin",Xe)):(window.addEventListener("pagehide",We),window.addEventListener("blur",We),window.addEventListener("pageshow",Xe),window.addEventListener("focus",Xe)),Sm.hidden=!1)}var Tm,Um,Vm;fh?(Um=window.getComputedStyle||Eh.getComputedStyle,Tm=function(a,b,c){var d,e=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Sm.hidden)return this.setStyle(a,b),Vm||(Vm=bi.resolve());"string"==typeof a?(d={},d[a]=b):(d=a,c=b),c||(o('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);var f=new bi(function(a){var b,f,g,h,i,j,k;if(!c.duration)return e.setStyle(d),void a();for(b=Object.keys(d),f=[],g=Um(e.node),i={},j=b.length;j--;)k=b[j],h=g[xm(k)],"0px"===h&&(h=0),h!=d[k]&&(f.push(k),e.node.style[xm(k)]=h);return f.length?void Am(e,d,c,f,a):void a()});return f}):Tm=null;var Wm=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},Xm=function(a,b,c){this.init(a,b,c)};Xm.prototype={init:Te,start:Ye,getStyle:vm,setStyle:ym,animateStyle:Tm,processParams:Wm};var Ym,Zm;Ym=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},Zm=function(){this.node.type&&"text/javascript"!==this.node.type||o("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var $m=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(ef).join("")+this.conditionalAttributes.map(ef).join(""),"option"===this.name&&cf(this)&&(a+=" selected"),"input"===this.name&&df(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Fc(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),el.test(this.template.e)||(a+="</"+this.template.e+">"),a)},_m=function(a){this.init(a)};_m.prototype={bubble:Kl,detach:Jd,find:Ll,findAll:Ml,findAllComponents:Nl,findComponent:Ol,findNextNode:Kd,firstNode:Ld,getAttribute:Md,init:Me,rebind:Ne,render:$e,toString:$m,unbind:ff,unrender:gf};var an=/^\s*$/,bn=/^\s*/,cn=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&an.test(c)&&b.shift(),d=A(b),void 0!==d&&an.test(d)&&b.pop(),e=b.reduce(jf,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},dn=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},en=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=Qj,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,xl.init(this,a),!this.keypath&&(c=kf(this.root,this.name))&&(Gc.call(this),this.isNamed=!0,this.setTemplate(c))};en.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||Wc.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:xl.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=kf(this.root,""+a)),!b&&this.name&&(b=kf(this.root,this.name))&&(Gc.call(this),this.isNamed=!0),b||(this.root.debug?n:p)('Could not find template for partial "%s"',this.name),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&hi.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Hn({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===Lj?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?dn(b,e[0]):b):b},unbind:function(){this.isNamed||Gc.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var fn=new v("detach"),gn={},hn=/\$\{([^\}]+)\}/g,jn=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:Kf(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:Kf(a.get),set:a.set}),a)},kn=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};kn.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}};var ln=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};ln.prototype={constructor:ln,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,h;if(!e)for(h=b.length;h--;)if(c=b[h],f=a.viewmodel.get(c),!g(f,d.depValues[c.str]))return d.depValues[c.str]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){a.debug&&(o('Failed to compute "%s"',this.key.str),Gh(f.stack||f)),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Lf(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new kn(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,hi.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var mn={FAILED_LOOKUP:!0},nn={};Rf.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})},Sf.prototype={ensureKeypath:function(){if(!this.keypath&&(k(this.force)&&this.force(),!this.keypath))throw new Error('Mapping "'+this.localKey.str+'" on component "'+this.local.ractive.component.name+'" does not have a keypath. This is usually caused by an ambiguous complex reference, which can usually be fixed by scoping your references.')},get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){this.ensureKeypath(),this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Rf(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){this.ensureKeypath(),this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var on=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},pn={},qn={implicit:!0},rn={noCascade:!0},sn=function(a,b){var c,d;this.ractive=a,this.mappings=b||Bh(null);for(c in b)b[c].initViewmodel(this);if(a.data&&a.parameters!==!0)for(c in a.data)(d=this.mappings[c])&&void 0===d.getValue()&&d.setValue(a.data[c]);this.cache={},this.cacheMap=Bh(null),this.deps={computed:Bh(null),"default":Bh(null)},this.depsMap={computed:Bh(null),"default":Bh(null)},this.patternObservers=[],this.specials=Bh(null),this.wrapped=Bh(null),this.computations=Bh(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={}};sn.prototype={adapt:wf,applyChanges:Df,capture:If,clearCache:Jf,compute:Mf,get:Nf,init:Pf,map:Tf,mark:Uf,merge:Vf,register:Yf,release:$f,set:_f,smartUpdate:bg,teardown:dg,unregister:eg},gg.prototype={constructor:gg,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?hg(this.queue,b).push(a):ig(this,a),delete this.inProcess[a._guid]}};var tn=new v("construct"),un=new v("config"),vn=new gg("init"),wn=0,xn=jg,yn=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&o("The <%s/> component has a default `el` property; it has been disregarded",a.name),j=h;j;){if(j.owner.type===Uj){k=j.owner.container;break}j=j.parent}return g=Bh(b.prototype),xn(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g};lg.prototype={bubble:function(){this.dirty||(this.dirty=!0,hi.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key.str,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var zn=["_data","_mappings"];sg.prototype={resolve:function(a){this.resolved=!0,this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(a.isSpecial)this.parameters.addData(this.key.str,a.value);else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;a.isSpecial?(this.parameters.addData(this.key.str,a.value),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key.str]?b.reversedMappings[this.key.str].rebind(a):b.mappings[this.key.str].resolve(a)}},vg.prototype={add:function(a,b){if("string"==typeof b){var c=ll(b);this.addData(a.str,c?c.value:b)}else if(0===b)this.addData(a.str);else{var d=void 0;d=wg(b)?new sg(this,a,b[0]).resolver:new lg(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b,c){return this.mappings[a.str]=new Sf(a,{origin:this.parentViewmodel,keypath:b,force:c})}};var An=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},Bn=new v("teardown"),Cn=function(a,b){this.init(a,b)};Cn.prototype={detach:pf,find:qf,findAll:rf,findAllComponents:sf,findComponent:tf,findNextNode:uf,firstNode:vf,init:zg,rebind:Ag,render:Bg,toString:Cg,unbind:Dg,unrender:Fg};var Dn=Cn,En=function(a){this.type=Rj,this.value=a.template.c};En.prototype={detach:ml,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Fn=function(a){var b,c;this.type=Uj,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new Hn({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],hi.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Fn.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),B(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Gn=function(a){this.declaration=a.template.a};Gn.prototype={init:Lh,render:Lh,unrender:Lh,teardown:Lh,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Hn=function(a){this.init(a)};Hn.prototype={bubble:kc,detach:lc,find:mc,findAll:nc,findAllComponents:oc,findComponent:pc,findNextNode:qc,firstNode:rc,getArgsList:Ac,getNode:Bc,getValue:Cc,init:Gg,rebind:Ig,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Jg,toString:Kg,unbind:Ng,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Pg};var In,Jn,Kn=["template","partials","components","decorators","events"],Ln=new v("reset"),Mn=function(a,b){function c(b,d,f){f&&f.partials[a]||b.forEach(function(b){b.type===Qj&&b.getPartialName()===a&&d.push(b),b.fragment&&c(b.fragment.items,d,f),e(b.fragments)?c(b.fragments,d,f):e(b.items)?c(b.items,d,f):b.type===Tj&&b.instance&&c(b.instance.fragment.items,d,b.instance),b.type===Pj&&(e(b.attributes)&&c(b.attributes,d,f),e(b.conditionalAttributes)&&c(b.conditionalAttributes,d,f))})}var d,f=[];return c(this.fragment.items,f),this.partials[a]=b,d=hi.start(this,!0),f.forEach(function(b){b.value=void 0,b.setValue(a)}),hi.end(),d},Nn=Pi("reverse"),On=/\*/,Pn=Pi("shift"),Qn=Pi("sort"),Rn=Pi("splice"),Sn=new v("teardown"),Tn=new v("unrender"),Un=Pi("unshift"),Vn=new v("update"),Wn={add:u,animate:ab,detach:cb,find:db,findAll:hb,findAllComponents:ib,findComponent:jb,findContainer:kb,findParent:lb,fire:pb,get:qb,insert:rb,merge:tb,observe:wb,observeOnce:xb,off:yb,on:zb,once:Ab,pop:Qi,push:Ri,render:Db,reset:Qg,resetPartial:Mn,resetTemplate:Rg,reverse:Nn,set:Sg,shift:Pn,sort:Qn,splice:Rn,subtract:Tg,teardown:Ug,toggle:Wg,toHTML:Xg,toHtml:Xg,unrender:Yg,unshift:Un,update:Zg,updateModel:$g},Xn=1,Yn=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath.str,d.index={},(c=Jc(b.proxy.parentFragment))&&(d.index=Jc.resolve(c)),d):d};In=function(a){xn(this,a)},Jn={extend:{value:eh},getNodeInfo:{value:Yn},parse:{value:undefined__default},Promise:{value:bi},svg:{value:jh},magic:{value:hh},VERSION:{value:"<%= pkg.version %>"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:nh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Sh},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Dh(In,Jn),In.prototype=c(Wn,mh),In.prototype.constructor=In,In.defaults=In.prototype;var Zn="function";if(typeof Date.now!==Zn||typeof String.prototype.trim!==Zn||typeof Object.keys!==Zn||typeof Array.prototype.indexOf!==Zn||typeof Array.prototype.forEach!==Zn||typeof Array.prototype.map!==Zn||typeof Array.prototype.filter!==Zn||"undefined"!=typeof window&&typeof window.addEventListener!==Zn)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return In});