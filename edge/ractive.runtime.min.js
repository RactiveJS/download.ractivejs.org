!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=b():a.Ractive=b()}("undefined"!=typeof window?window:this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=Ah.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=Ah.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===Fh.call(a)}function f(a){return Gh.test(Fh.call(a))}function g(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function h(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===Fh.call(a)}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===Fh.call(a)}function k(a,b){return a.replace(/%s/g,function(){return b.shift()})}function l(a){if(!fh)throw a;console.error(a)}function m(a){var b=Ih.call(arguments,1);throw a=k(a,b),new Error(a)}function n(a){var b=Ih.call(arguments,1);a=k(a,b),Dh(a,b)}function o(a){var b=Ih.call(arguments,1);a=k(a,b),Jh[a]||(Jh[a]=!0,Dh(a,b))}function p(a,b,c){var d=q(a,b,c);return d?d[a][c]:null}function q(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function r(a){return function(){return a}}function s(a,b,c){var d;if("string"!=typeof b||!i(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!i(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function t(a,b){return Sh(this,a,void 0===b?1:+b)}function u(a){this.event=a,this.method="on"+a,this.deprecate=Xh[a]}function v(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function x(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function y(a){return"string"==typeof a?[a]:void 0===a?[]:a}function z(a){return a[a.length-1]}function A(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function B(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function C(a){setTimeout(a,0)}function D(a,b){return function(){for(var c;c=a.shift();)c(b)}}function E(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Yh)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,E(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function F(a){var b,c,d,e,f,g;for(b=a.split("."),(c=fi[b.length])||(c=G(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function G(a){var b,c,d,e,f,g="";if(!fi[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}fi[a]=d}return fi[a]}function H(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function I(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function J(a){return null==a?a:ci[a]||(ci[a]=new di(a))}function K(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c.str],f=d?d.get():a.viewmodel.get(c);for(g in f)!f.hasOwnProperty(g)||"_ractive"===g&&e(f)||b.push(c.join(g));return b}var d,f,g;for(d=b.split("."),g=[hi];f=d.shift();)"*"===f?g=g.reduce(c,[]):g[0]===hi?g[0]=J(f):g=g.map(L(f));return g}function L(a){return function(b){return b.join(a)}}function M(a){return a?a.replace(bi,".$1"):""}function N(a,b,c){var d;return b=M(b),"~/"===b.substr(0,2)?(d=J(b.substring(2)),Q(a,d.firstKey,c)):"."===b[0]?(d=O(ii(c),b),d&&Q(a,d.firstKey,c)):d=P(a,J(b),c),d}function O(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return J(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),J(c.join("."))}return J(a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,""))}function P(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return R(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=J(f),i=P(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function Q(a,b){var c;!a.parent||a.isolated||R(a,b)||(b=J(b),(c=P(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function R(a,b){return""===b||b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function S(a){a.teardown()}function T(a){a.unbind()}function U(a){a.unrender()}function V(a){a.detach()}function W(a){a.detachNodes()}function X(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function Y(){for(var a,b,c;li.viewmodels.length;)b=li.viewmodels.pop(),c=b.applyChanges(),c&&pi.fire(b.ractive,c);for(Z(),a=0;a<li.views.length;a+=1)li.views[a].update();for(li.views.length=0,a=0;a<li.tasks.length;a+=1)li.tasks[a]();return li.tasks.length=0,li.viewmodels.length?Y():void 0}function Z(){var a,b,c,d;for(a=oi.length;a--;)b=oi[a],b.keypath&&oi.splice(a,1),(c=ji(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),oi.splice(a,1));d&&d.forEach($)}function $(a){a.item.resolve(a.keypath)}function _(a,b,c){var d,e,f,g,h,i,j,k,m,n,o,p,q,r;if(d=new ei(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,m=c.complete,(k||m)&&(o={},c.step=null,c.complete=null,n=function(a){return function(b,c){o[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||m)&&(p=n(f),c={easing:i,duration:j},k&&(c.step=p)),c.complete=m?p:Hh,h.push(ab(this,f,a[f],c)));return r={easing:i,duration:j},k&&(r.step=function(a){k(a,o)}),m&&d.then(function(a){m(a,o)}).then(null,l),r.complete=e,q=ab(this,null,null,r),h.push(q),d.stop=function(){for(var a;a=h.pop();)a.stop();q&&q.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,l),c.complete=e,g=ab(this,a,b,c),d.stop=function(){g.stop()},d}function ab(a,b,c,d){var e,f,h,i;return b&&(b=J(M(b))),null!==b&&(i=a.viewmodel.get(b)),ti.abort(b,a),g(i,c)?(d.complete&&d.complete(d.to),wi):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,h=new vi({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),ti.add(h),a._animations.push(h),h)}function bb(){return this.detached?this.detached:(this.el&&A(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),yi.fire(this),this.detached)}function cb(a){return this.el?this.fragment.find(a):null}function db(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function eb(a){var b,c;for(b=[a],c=db(a);c;)b.push(c),c=db(c);return b}function fb(a,b,c,d){var e=[];return zh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:Bi}}),c?(zh(e,{cancel:{value:Ci},_root:{value:a},_sort:{value:Fi},_makeDirty:{value:Gi},_remove:{value:Hi},_dirty:{value:!1,writable:!0}}),e):e}function gb(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Ii(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function hb(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Ii(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function ib(a){return this.fragment.findComponent(a)}function jb(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function kb(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function lb(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=J(b).wildcardMatches();mb(a,d,c.event,c.args,!0)}}function mb(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(Pi.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=nb(a,f,c,d)&&h);if(Pi.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=J(i).wildcardMatches(),c&&(c.component=a)}mb(a.parent,b,c,d)}}function nb(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function ob(a){var b={args:Array.prototype.slice.call(arguments,1)};Qi(this,a,b)}function pb(a){var b;return a=J(M(a)),b=this.viewmodel.get(a,Si),void 0===b&&this.parent&&!this.isolated&&ji(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function qb(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,rb(this)}function rb(a){Ui.fire(a),a.findAllComponents("*").forEach(function(a){rb(a.instance)})}function sb(a,b,c){var d,f;return a=J(M(a)),d=this.viewmodel.get(a),e(d)&&e(b)?(f=qi.start(this,!0),this.viewmodel.merge(a,d,b,c),qi.end(),f):this.set(a,b,c&&c.complete)}function tb(a,b){var c,d;return c=K(a,b.str),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function ub(a,b,c,d){var e,f,g;return b=J(M(b)),d=d||jj,ij.test(b.str)?(e=new hj(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Zi(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function vb(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",kj(this,a,b,c);if(f=a.split(" "),1===f.length)return kj(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(kj(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function wb(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function xb(a,b){var c,d=this;if(a)c=a.split(" ").map(nj).filter(oj),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function yb(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(nj).filter(oj),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function zb(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Ab(a,b,c){var d,e,f,g,h,i,j=[];if(d=Bb(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function Bb(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function Cb(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=qi.start(this,!0),qi.scheduleTask(function(){return Fj.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Db(h),b.innerHTML=""}return this.constructor.css&&Ej.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),qi.end(),this.transitionsEnabled=f,d.then(function(){return Gj.fire(g)}).then(null,l),d}function Db(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Eb(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,qi.start(d),d.viewmodel.mark(c),qi.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function Fb(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Gb(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=ek.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(Ib),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=gk.test(a)?a.replace(gk,d):a.replace(dk,"").replace(ck,function(a,b){var c,d;return fk.test(b)?a:(c=b.split(",").map(Hb),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Hb(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Ib(a){return a.str}function Jb(a,b,c){return a?b.noCssTransform?a:hk(a,c):void 0}function Kb(a,b){return"function"==typeof b&&/_super/.test(a)}function Lb(a,b,c){var d=c.data||{},e=Mb(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return Nb(e,d)}function Mb(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return Ob(a,b),Nb(a,b)}function Nb(a,b){return"function"==typeof b?Rb(b,a):"function"==typeof a?Qb(b,a):Pb(b,a)}function Ob(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function Pb(a,b){return a=a||{},b?(Ob(b,a,!0),a):a}function Qb(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function Rb(a,b){var c;return c="function"!=typeof b?function(a){Pb(a,b)}:function(a){return b=kk(b,function(){},!0),b.call(this,a)||a},kk(a,c)}function Sb(a){var b=xh(ok);return b.parse=function(b,c){return Tb(b,c||a)},b}function Tb(a,b){if(!parse__default)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return parse__default(a,b||this.options)}function Ub(a,b){var c;if(!eh){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Vb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function Vb(a){return a&&"#"===a.charAt(0)}function Wb(a){return!("string"==typeof a)}function Xb(a){return a.defaults&&(a=a.defaults),nk.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function Yb(a){var b,c=a._config.template;if(c&&c.fn)return b=Zb(a,c.fn),b!==c.result?(c.result=b,b=_b(b,a)):void 0}function Zb(a,b){var c=$b(pk.getParseOptions(a));return b.call(a,a.data,c)}function $b(a){var b=xh(pk);return b.parse=function(b,c){return pk.parse(b,c||a)},b}function _b(a,b){if("string"==typeof a)"#"===a[0]&&(a=pk.fromId(a)),a=parse__default(a,pk.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function ac(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function bc(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=cc(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function cc(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=Hh,d}function dc(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function ec(a,b,c){if(b in a){if(c in a)throw new Error(dc(b,c,!0));n(dc(b,c)),a[c]=a[b]}}function fc(a){ec(a,"beforeInit","onconstruct"),ec(a,"init","onrender"),ec(a,"complete","oncomplete"),ec(a,"eventDefinitions","events"),e(a.adaptors)&&ec(a,"adaptors","adapt")}function gc(a,b,c,d){Ak(d);for(var e in d)if(xk[e]){var f=d[e];"function"==typeof f&&(f=zk(b.prototype,e,f)),c[e]=f}yk.forEach(function(e){e[a](b,c,d)}),bk[a](b,c,d),mk[a](b,c,d),rk[a](b,c,d),jk[a](b,c,d),hc(b.prototype,c,d)}function hc(a,b,c){for(var d in c)if(!wk[d]&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=zk(a,d,e)),b[d]=e}}function ic(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function jc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function kc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function lc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function mc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function nc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function oc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function pc(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function qc(){return this.items&&this.items[0]?this.items[0].firstNode():null}function rc(a){var b,c,d,e;return b=a.pos,d=Il(a),null===d?null:(c=[d],a.matchString(",")?(e=rc(a),e?c.concat(e):(a.pos=b,null)):c)}function sc(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=sc(a),null===f&&a.error(ql),f.forEach(b)),d)}function tc(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(El))return{t:el,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ql),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:el,x:d}):null}function uc(a){return JSON.stringify(String(a))}function vc(a,b){var c,d;if(a.t===dl&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(j(d))vc(d,b);else for(c=d.length;c--;)vc(d[c],b);a.x&&vc(a.x,b),a.r&&vc(a.r,b),a.v&&vc(a.v,b)}function wc(a,b,c){var d=function(b){return wc(a,b,c)};switch(b.t){case al:case bl:case Yk:return b.v;case Zk:return uc(b.v);case $k:return"["+(b.m?b.m.map(d).join(","):"")+"]";case _k:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case cl:return b.k+":"+wc(a,b.v,c);case gl:return("typeof"===b.s?"typeof ":b.s)+wc(a,b.o,c);case jl:return wc(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+wc(a,b.o[1],c);case kl:return wc(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case hl:return"("+wc(a,b.x,c)+")";case fl:return wc(a,b.x,c)+wc(a,b.r,c);case el:return b.n?"."+b.n:"["+wc(a,b.x,c)+"]";case il:return wc(a,b.o[0],c)+"?"+wc(a,b.o[1],c)+":"+wc(a,b.o[2],c);case dl:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function xc(a){var b,c,d;return a.allowWhitespace(),(b=Hl(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function yc(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return yc(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function zc(){var a,b,c,d;return this.dirtyArgs&&(b=tm(this.items,a={},this.root._guid),c=sm("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function Ac(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function Bc(){var a,b,c,d;return this.dirtyValue&&(b=tm(this.items,a={},this.root._guid),c=sm(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function Cc(a){return a.replace(om,function(a,b){var c;return c="#"!==b[0]?mm[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(Dc(c)):a})}function Dc(a){return a?10===a?32:128>a?a:159>=a?nm[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Ec(a){return a.replace(rm,"&amp;").replace(pm,"&lt;").replace(qm,"&gt;")}function Fc(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Gc(){return this.value}function Hc(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Ic(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Jc(a,b,c){var d;return"@"===b.charAt(0)?new Gm(a,b,c):(d=Jm(a.parentFragment,b))?new Im(a,d,c):new Dm(a,b,c)}function Kc(a,b){var c,d;if(Mm[a])return Mm[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),Mm[a]=c,c}function Lc(a){return a.call()}function Mc(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str})}function Nc(a){return J("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Oc(a){return void 0!==a&&"@"!==a[0]}function Pc(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){yh(a,d,{value:Om.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return yh(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Qc(a){return a.value}function Rc(a){return void 0!=a}function Sc(a){a.forceResolution()}function Tc(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Lm(a,e,c)),b.template.x&&(a.resolver=new Pm(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new Tm(a,b.template.rx,d)),a.template.n!==ml||a.hasOwnProperty("value")||a.setValue(void 0)}function Uc(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,void this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Vc(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Wc(){this.parentFragment.bubble()}function Xc(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Yc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Zc(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function $c(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function _c(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function ad(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function bd(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function cd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===nl){if(this.shuffling=!0,qi.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath.join(b),h=i.keypath.join(a),d.index=a,(j=d.registeredIndexRefs)&&j.forEach(dd),d.rebind(g,h),void(f[a]=d)))}),e=this.root.viewmodel.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&qi.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function dd(a){a.rebind("","")}function ed(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function fd(a){var b,c,d=this;this.updating||(this.updating=!0,this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=d.keypath.join(a),c.index=a,b=new Wr(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):hd(this,a)&&(this.bubble(),this.rendered&&qi.addView(this)),this.value=a,this.updating=!1)}function gd(a,b,c){if(b===nl&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function hd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case ll:return md(a,b,!1,c);case ml:return md(a,b,!0,c);case ol:return ld(a,c);case pl:return kd(a,b,c);case nl:if(j(b))return gd(a,a.subtype,!0),jd(a,b,c)}return a.ordered=!!f(b),a.ordered?(gd(a,nl,!1),id(a,b,c)):j(b)||"function"==typeof b?a.template.i?(gd(a,nl,!0),jd(a,b,c)):(gd(a,ol,!1),ld(a,c)):(gd(a,ll,!1),md(a,b,!1,c))}function id(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(T);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new Wr(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function jd(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(pd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new Wr(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function kd(a,b,c){return b?ld(a,c):nd(a)}function ld(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Wr(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function md(a,b,c,d){var e,g,h,i,k;if(g=f(b)&&0===b.length,h=!1,!f(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(T),!0):void 0:(d.index=0,i=new Wr(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):nd(a)}function nd(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(od),a.fragmentsToUnrender.forEach(T),a.length=a.fragmentsToRender.length=0,!0):void 0}function od(a){return a.rendered}function pd(a){a.rebind("","")}function qd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function rd(){var a=this;this.fragments.forEach(T),this.fragmentsToRender.forEach(function(b){return A(a.fragments,b)}),this.fragmentsToRender=[],Am.call(this),this.length=0,this.unbound=!0}function sd(a){this.fragments.forEach(a?td:ud),this.renderedFragments=[],this.rendered=!1}function td(a){a.unrender(!0)}function ud(a){a.unrender(!1)}function vd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function wd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function xd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(ph(d,a))return d;if(e=d.querySelector(a))return e}return null}function yd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(ph(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function zd(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)
}function Ad(a){return xn[a]||(xn[a]=oh(a))}function Bd(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=B(a.node.options).filter(Cd),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function Cd(a){return a.selected}function Dd(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=yn(this.value,this.parentFragment.getNode(),this.docFrag),zn(this.pElement),this.rendered=!0,this.docFrag}function Ed(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&qi.addView(this))}function Fd(){return void 0!=this.value?Cc(""+this.value):""}function Gd(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Hd(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=yn(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),zn(this.pElement)}}function Id(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Jd(){return null}function Kd(){return this.node}function Ld(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Md(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();g(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&qi.addView(this))}function Nd(a){var b=a.fragment.items;if(1===b.length)return b[0].type===Ok?b[0]:void 0}function Od(a){return this.type=Uk,this.element=a.element,this.root=a.root,Zn(this,a.name),this.isBoolean=km.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Wr({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=$n(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:a.value||"")}function Pd(a,b){this.fragment&&this.fragment.rebind(a,b)}function Qd(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==hh.html||(b=bo[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function Rd(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath.str||e.ref)+"}}":this.isBoolean?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+Sd(d)+'"':b)}function Sd(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Td(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Ud(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Vd(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=w(f,d)}function Wd(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Xd(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return qi.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Yd(){var a,b,c=this,d=c.element,f=c.node,g=c.value;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(f.checked=!0);f.checked=!1}else f.checked=g==a}function Zd(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function $d(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function _d(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function ae(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function be(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function ce(){this.locked||(this.node[this.propertyName]=this.value)}function de(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function ee(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=mo:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?ho:go:"textarea"===e.name?b=po:null!=e.getAttribute("contenteditable")?b=oo:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?Hh:"radio"===a&&e.binding&&"name"===e.binding.name?jo:po):this.isTwoway&&"name"===d?"radio"===f.type?b=io:"checkbox"===f.type&&(b=ko):"style"===d&&f.style.setAttribute?b=no:"class"!==d||f.namespaceURI&&f.namespaceURI!==hh.html?this.useProperty&&(b=qo):b=lo,b||(b=ro),this.update=b,this.update()}function fe(a,b){var c=b?"svg":"div";return uo.innerHTML="<"+c+" "+a+"></"+c+">",B(uo.childNodes[0].attributes)}function ge(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function he(a){for(;a=a.parent;)if("form"===a.name)return a}function ie(){this._ractive.binding.handleChange()}function je(a,b,c){var d=a+b+c;return Go[d]||(Go[d]=[])}function ke(a){return a.isChecked}function le(a){return a.element.getAttribute("value")}function me(){var a;Do.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function ne(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&Do.call(b),a._timeout=void 0},a.element.lazy)}function oe(a){var b,c,d,e,f,g=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||g.contenteditable&&pe(g.contenteditable))&&pe(g.value)?c=Fo:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=pe(g.name),e=pe(g.checked),d&&e&&n("A radio input can have two-way binding on its name attribute, or its checked attribute - not both"),d?c="radio"===b?Lo:No:e&&(c="radio"===b?Jo:Po)):"file"===b&&pe(g.value)?c=Vo:pe(g.value)&&(c="number"===b||"range"===b?Xo:Wo)):"select"===a.name&&pe(g.value)?c=a.getAttribute("multiple")?To:Ro:"textarea"===a.name&&pe(g.value)&&(c=Wo),c&&(f=new c(a))&&f.keypath?f:void 0}function pe(a){return a&&a.isBindable}function qe(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function re(a){Qi(this.root,this.getAction(),{event:a})}function se(){return this.action.toString().trim()}function te(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&((this.root.debug?m:n)('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=Nm(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=ap.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Lm(g,a,function(a){return g.resolve(b,a)}))}),this.fire=ue):(d=c.n||c,"string"!=typeof d&&(d=new Wr({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Wr({template:c.d,root:this.root,owner:this.element}),this.fire=we):c.a&&(this.params=c.a,this.fire=ve))}function ue(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Pi.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Pi.dequeue(b)}function ve(a){Qi(this.root,this.getAction(),{event:a,args:this.params})}function we(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),Qi(this.root,this.getAction(),{event:a,args:b})}function xe(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=Jm(c.element.parentFragment))&&(e=Jm.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function ye(){var a,b=this.name;if(!this.invalid){if(a=p("events",this.root,b))this.custom=a(this.node,ze(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(ep[b]||o(Nh(b,"event")));this.node.addEventListener(b,cp,!1)}this.hasListener=!0}}function ze(a){return dp[a]||(dp[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),dp[a]}function Ae(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function Be(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Ce(a,b){this.keypaths[a]=b}function De(){return this.method?void this.refResolvers.forEach(T):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Ee(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,cp,!1),this.hasListener=!1}function Fe(){var a=this;this.dirty||(this.dirty=!0,qi.scheduleTask(function(){Ge(a),a.dirty=!1})),this.parentFragment.bubble()}function Ge(a){var b,c,d,e,f;b=a.node,b&&(e=B(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?He(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function He(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Ie(a,b){a.select=Ke(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Je(a){a.select&&A(a.select.options,a)}function Ke(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function Le(a){var b,c,d,e,f,g;this.type=Rk,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=Yn(c.e),"option"===this.name&&Ie(this,c),"select"===this.name&&(this.options=[],this.bubble=Fe),"form"===this.name&&(this.formBindings=[]),Wn(this,c.a||{}),this.attributes=wo(this,c.a),this.conditionalAttributes=zo(this,c.m),c.f&&(this.fragment=new Wr({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=Yo(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=np(this,c.v)),c.o&&(this.decorator=new sp(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Me(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&H(e,"keypath",a,b)}function Ne(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Oe(a){a.node.addEventListener("reset",Qe,!1)}function Pe(a){a.node.removeEventListener("reset",Qe,!1)}function Qe(){var a=this._ractive.proxy;qi.start(),a.formBindings.forEach(Re),qi.end()}function Re(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Se(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Wr({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Wr({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=p("transitions",d,e),this._fn||o(Nh(e,"transition")))}function Te(a){return a}function Ue(){Wp.hidden=document[Sp]}function Ve(){Wp.hidden=!0}function We(){Wp.hidden=!1}function Xe(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Ye(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Ye(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function Ze(){var a,b,c,d=this,e=this.root;return a=$e(this),b=this.node=oh(this.name,a),e.constructor.css&&this.parentFragment.getNode()===e.el&&this.node.setAttribute("data-ractive-css",e.constructor._guid),yh(this.node,"_ractive",{value:{proxy:this,keypath:ii(this.parentFragment),events:xh(null),root:e}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=fq,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Hh):"style"===this.name?(this.bubble=eq,this.bubble(),this.fragment.unrender=Hh):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Hh:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&_e(this),"img"===this.name?Ne(this):"form"===this.name?Oe(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&qi.scheduleTask(function(){d.decorator.torndown||d.decorator.init()},!0),e.transitionsEnabled&&this.intro&&(c=new gq(this,this.intro,!0),qi.registerTransition(c),qi.scheduleTask(function(){return c.start()},!0),this.transition=c),this.node.autofocus&&qi.scheduleTask(function(){return d.node.focus()},!0),af(this),this.node}function $e(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?hh.svg:(d=a.parent)?"foreignObject"===d.name?hh.html:d.node.namespaceURI:a.root.el.namespaceURI}function _e(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function af(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function bf(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function cf(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function df(a){var b=a.toString();return b?" "+b:""}function ef(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(T),"option"===this.name&&Je(this),this.attributes.forEach(T),this.conditionalAttributes.forEach(T)}function ff(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&qi.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(U),this.decorator&&qi.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new gq(this,this.outro,!1),qi.registerTransition(d),qi.scheduleTask(function(){return d.start()})),this.liveQueries&&gf(this),"form"===this.name&&Pe(this)}function gf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function hf(a,b){var c=oq.exec(b)[0];return null===a||c.length<a.length?c:a}function jf(a,b){var c;if(c=kf(a,b))return c;if(c=pk.fromId(b,{noThrow:!0})){c=pq(c);var d=pk.parse(c,pk.getParseOptions(a));return a.partials[b]=d.t}}function kf(a,b){var c=q("partials",a,b);if(c){var d,e=c.partials[b];if("function"==typeof e&&(d=e.bind(c),d.isOwner=c.partials.hasOwnProperty(b),e=d(c.data,pk)),!e&&""!==e)return void n(Mh,b,"partial","partial");if(!pk.isParsed(e)){var f=pk.parse(e,pk.getParseOptions(c));f.p&&n("Partials ({{>%s}}) cannot contain nested inline partials",b);var g=d?c:lf(c,b);g.partials[b]=e=f.t}return d&&(e._fn=d),e.v?e.t:e}}function lf(a,b){return a.partials.hasOwnProperty(b)?a:mf(a.constructor,b)}function mf(a,b){return a?a.partials.hasOwnProperty(b)?a:mf(a._Parent,b):void 0}function nf(a,b){var c,d=q("components",a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void(a.debug&&n(Mh,b,"component","component"));"string"==typeof c&&(c=nf(a,c)),c._fn=e,d.components[b]=c}return c}function of(){var a=this.instance.fragment.detach();return vq.fire(this.instance),a}function pf(a){return this.instance.fragment.find(a)}function qf(a,b){return this.instance.fragment.findAll(a,b)}function rf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function sf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function tf(){return this.parentFragment.findNextNode(this)}function uf(){return this.rendered?this.instance.fragment.firstNode():null}function vf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1)if(e=g.adapt[d],e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,xf(a)),f.value=b,b;return b}function wf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function xf(a){var b;return Dq[a]||(b=a?a+".":"",Dq[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?wf(c,a):c:void 0}),Dq[a]}function yf(a){var b,c,d=[hi];for(b=a.length;b--;)for(c=a[b].parent;c&&!c.isRoot;)v(d,c),c=c.parent;return d}function zf(a,b,c){var d;Bf(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){Af(a,c,b)}))}function Af(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),Bf(a,f),Af(a,b,f)})}function Bf(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function Cf(){function a(c){var d,e;f.noCascade.hasOwnProperty(c.str)||((e=f.deps.computed[c.str])&&e.forEach(function(c){var d=c.key;c.viewmodel===f?(f.clearCache(d.str),c.invalidate(),b.push(d),a(d)):c.viewmodel.mark(d)}),(d=f.depsMap.computed[c.str])&&d.forEach(a))}var b,c,d,e=this,f=this,g={};return b=this.changes,b.length?(b.slice().forEach(a),c=Fq(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=f.deps.computed[a.str])&&(e.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return Gq(e,a,!0)}),b.forEach(function(a){return Gq(e,a)})),this.deps.observers&&(c.forEach(function(a){return Df(e,null,a,"observers")}),Ff(this,b,"observers")),this.deps["default"]&&(d=[],c.forEach(function(a){return Df(e,d,a,"default")}),d.length&&Ef(this,d,b),Ff(this,b,"default")),b.forEach(function(a){g[a.str]=e.get(a)}),this.implicitChanges={},this.noCascade={},g):void 0}function Df(a,b,c,d){var e,f;(e=Gf(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function Ef(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Ff(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Gf(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b.str])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Gf(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function Hf(){this.captureGroups.push([])}function If(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Jf(a){var b="var __ractive=this;return("+a.replace(Kq,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function Kf(a,b){var c=b.firstKey;return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function Lf(a,b){return b=Lq(b),this.computations[a.str]=new Pq(this.ractive,a,b)}function Mf(a,b){var c,d,e,f,g,h=this.ractive,i=this.cache,j=a.str;return b=b||Sq,b.capture&&(g=z(this.captureGroups))&&(~g.indexOf(a)||g.push(a)),(c=this.mappings[a.firstKey])?c.get(a,b):a.isSpecial?a.value:(void 0===i[j]?((e=this.computations[j])&&!e.bypass?(d=e.get(),this.adapt(j,d)):(f=this.wrapped[j])?d=f.value:a.isRoot?(this.adapt("",h.data),d=h.data):d=Nf(this,a),i[j]=d):d=i[j],!b.noUnwrap&&(f=this.wrapped[j])&&(d=f.get()),d===Rq?void 0:d)}function Nf(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=Rq):void 0}function Of(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(J(a),this.ractive.computed[a]),c.push(b),a in this.mappings&&m("Cannot map to a computed property ('%s')",a);c.forEach(Pf)}function Pf(a){a.init()}function Qf(a,b){this.keypath=a,this.viewmodel=b}function Rf(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.deps=[],this.unresolved=[],this.trackData=b.trackData,this.resolved=!1}function Sf(a,b){var c=this.mappings[a.str]=new Wq(a,b);return c.initViewmodel(this),c}function Tf(a,b){var c,d=a.str;qi.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var e=b?b.dontTeardownWrapper:!1;this.clearCache(d,e)}function Uf(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=Wf(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;n("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=Zq(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Vf(a){return JSON.stringify(a)}function Wf(a){if(a===!0)return Vf;if("string"==typeof a)return $q[a]||($q[a]=function(b){return b[a]}),$q[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Xf(a,b,c){void 0===c&&(c="default");var d,e,f;b.isStatic||((d=this.mappings[a.firstKey])?d.register(a,b,c):(e=this.deps[c]||(this.deps[c]={}),f=e[a.str]||(e[a.str]=[]),f.push(b),a.isRoot||Yf(this,a,c)))}function Yf(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c]||(a.depsMap[c]={}),e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function Zf(){return this.captureGroups.pop()}function $f(a,b,c){void 0===c&&(c={});var d,e,f,h;if(!c.noMapping&&(d=this.mappings[a.firstKey]))return d.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;e.set(b),b=e.get()}g(this.cache[a.str],b)||(f=this.wrapped[a.str],f&&f.reset&&(h=f.reset(b)!==!1,h&&(b=f.get())),e||h||_f(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))}function _f(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=Uj(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function ag(a,b,c){var d,e,f,g=this;if(e=c.length,c.forEach(function(b,c){-1===b&&g.mark(a.join(c),er)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a.str])&&d.filter(bg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){for(this.mark(a.join("length"),dr),f=e;f<b.length;f+=1)this.mark(a.join(f));for(f=b.length;e>f;f+=1)this.mark(a.join(f),er)}}function bg(a){return"function"==typeof a.shuffle}function cg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function dg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.firstKey])return d.unregister(a,b,c);if(e=this.deps[c][a.str],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a.isRoot||eg(this,a,c)}}function eg(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(A(e,b),e["_"+b.str]=void 0),b=b.parent}function fg(a){this.hook=new Zh(a),this.inProcess={},this.queue={}}function gg(a,b){return a[b._guid]||(a[b._guid]=[])}function hg(a,b){var c=gg(a.queue,b);for(a.hook.fire(b);c.length;)hg(a,c.shift());delete a.queue[b._guid]}function ig(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;if(jg(b,d),lr.fire(Ek.getConstructTarget(b,c),c),Ek.init(b.constructor,b,c),b.magic&&!gh)throw new Error("Getters and setters (magic mode) are not supported in this browser");mr.fire(b),nr.begin(b),b.viewmodel=new jr(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Wr({template:b.template,root:b,owner:b})),nr.end(b),(e=a(b.el))&&b.render(e,b.append)}function jg(a,b){a._guid="r-"+or++,a._subs=xh(null),a._config={},a._twowayBindings=xh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function kg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Wr({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key.str,this.fragment.getValue())}function lg(a,b){return b.parameters?gh&&"legacy"!==b.parameters?ng(a,b):mg(a):a.data}function mg(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function ng(a,b){var c=og(a,b);return new c(a)}function og(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=pg(a,c.defined)),c.Constructor}function pg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(qi.start(),c.setValue(a),qi.end()):this._data[b]=a},enumerable:!0},a},b),zh(e={toJSON:qg},d),e.constructor=c,c.prototype=e,c}function qg(){var a,b={};for(a in this)-1===tr.indexOf(a)&&(b[a]=this[a]);return b}function rg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=Lm(d,c.r,e):c.x?this.resolver=new Pm(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new Tm(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function sg(a,b,c){var d,e,f;return c?(b.parameters&&(f=tg(b)),d=new ug(a,c,f),e=sr(d,b),{data:e,mappings:d.mappings}):{data:{}}}function tg(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function ug(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=xh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(J(a),b[a])})}function vg(a){return 1===a.length&&a[0].t===Ok}function wg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&xg(a.instance,a.root,c,b[c])}function xg(a,b,c,d){"string"!=typeof d&&n("Components currently only support simple events - you cannot include arguments. Sorry!"),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Qi(b,d,{event:a,args:c}),!1})}function yg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Vk,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=vr(this,b.prototype,a.template.a),qr(this,b,e,a.template.f,a.template.p),wr(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&n('The "intro", "outro" and "decorator" directives have no effect on components'),xr(this)}function zg(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function Ag(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function Bg(){return this.instance.fragment.toString()}function Cg(){var a=this.instance;this.resolvers.forEach(T),Dg(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&A(a.el.__ractive_instances__,a),Cr.fire(a)}function Dg(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function Eg(a){this.shouldDestroy=a,this.instance.unrender()}function Fg(a){var b=this;this.owner=a.owner,this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],this.items=a.template.map(function(c,d){return Gg({parentFragment:b,pElement:a.pElement,template:c,index:d})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Gg(a){if("string"==typeof a.template)return new zm(a);switch(a.template.t){case Ok:return"yield"===a.template.r?new Kr(a):new Zm(a);case Qk:return new sn(a);case Pk:return new Kn(a);case Rk:var b;return(b=uq(a.parentFragment.root,a.template.e))?new Gr(a,b):new mq(a);case Sk:return new tq(a);case Tk:return new Ir(a);case Xk:return new Mr(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Hg(a,b){H(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Ig(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Jg(a){return this.items?this.items.map(a?Lg:Kg).join(""):""
}function Kg(a){return a.toString()}function Lg(a){return a.toString(!0)}function Mg(){this.bound&&(this.items.forEach(Ng),this.bound=!1)}function Ng(a){a.unbind&&a.unbind()}function Og(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Pg(a){var b,c,d,e,f;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&(this.data=a):this.data=a,d=Ek.reset(this),e=d.length;e--;)if(Xr.indexOf(d[e])>-1){f=!0;break}if(f){var g;this.viewmodel.mark(hi),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Wr({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)}else b=qi.start(this,!0),this.viewmodel.mark(hi),qi.end();return Yr.fire(this,a),b}function Qg(a){var b,c;rk.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Wr({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Rg(a,b){var c,d,e=this;if(d=qi.start(this,!0),j(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],a=J(M(a)),this.viewmodel.set(a,b))}else a=J(M(a)),bs.test(a.str)?K(this,a.str).forEach(function(a){e.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return qi.end(),d}function Sg(a,b){return Sh(this,a,void 0===b?-1:-b)}function Tg(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&A(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():ei.resolve(),hs.fire(this),this._boundFunctions.forEach(Ug),a}function Ug(a){delete a.fn[a.prop]}function Vg(a){if("string"!=typeof a)throw new TypeError(Lh);return this.set(a,!this.get(a))}function Wg(){return this.fragment.toString(!0)}function Xg(){var a,b,c=this;if(!this.fragment.rendered)return n("ractive.unrender() was called on a Ractive instance that was not rendered"),ei.resolve();for(a=qi.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){Ej.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),A(this.el.__ractive_instances__,this),ls.fire(this),qi.end(),a}function Yg(a){var b;return a=J(a)||hi,b=qi.start(this,!0),this.viewmodel.mark(a),qi.end(),os.fire(this,a),b}function Zg(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||J(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=$g(this,e),this.set(c)}function $g(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a));b=a.attribute.value,e=a.getValue(),x(b,e)||g(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),x(e,f)||(c[a.str]=f)}),c}function _g(a){for(var b={};a;)ah(a,b),ch(a,b),a=a._Parent!==xs?a._Parent:!1;return b}function ah(a,b){yk.forEach(function(c){bh(c.useDefaults?a.prototype:a,b,c.name)})}function bh(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function ch(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=kk(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}})}function dh(a){void 0===a&&(a={});var b,c,d=this;return a.prototype instanceof xs&&(a=ss(a)),b=function(a){pr(this,a)},c=xh(d.prototype),c.constructor=b,zh(b,{_guid:{value:ts++},defaults:{value:c},extend:{value:dh,writable:!0,configurable:!0},_Parent:{value:d}}),Ek.extend(d,c,a),b.prototype=c,b}var eh,fh,gh,hh,ih,jh,kh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1,debug:!1},lh=kh,mh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};eh="object"==typeof document,fh="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),gh=!0}catch(nh){gh=!1}hh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ih="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),jh=["o","ms","moz","webkit"];var oh,ph,qh,rh,sh,th,uh,vh,wh;if(oh=ih?function(a,b){return b&&b!==hh.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==hh.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},eh){for(qh=oh("div"),rh=["matches","matchesSelector"],wh=function(a){return function(b,c){return b[a](c)}},uh=rh.length;uh--&&!ph;)if(sh=rh[uh],qh[sh])ph=wh(sh);else for(vh=jh.length;vh--;)if(th=jh[uh]+sh.substr(0,1).toUpperCase()+sh.substring(1),qh[th]){ph=wh(th);break}ph||(ph=function(a,b){var c,d,e;for(d=a.parentNode,d||(qh.innerHTML="",d=qh,a=a.cloneNode(),qh.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else ph=null;var xh,yh,zh,Ah=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),eh&&Object.defineProperty(document.createElement("div"),"test",{value:0}),yh=Object.defineProperty}catch(Bh){yh=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Bh){throw Bh}eh&&Object.defineProperties(oh("div"),{test:{value:0}}),zh=Object.defineProperties}catch(Bh){zh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&yh(a,c,b[c])}}try{Object.create(null),xh=Object.create}catch(Bh){xh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var Ch,Dh,Eh=Object.prototype.hasOwnProperty,Fh=Object.prototype.toString,Gh=/^\[object (?:Array|FileList)\]$/,Hh=function(){},Ih=Array.prototype.slice,Jh={};fh?(Dh=function(a,b){console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(b))},Ch=console.log.bind(console)):Dh=Ch=Hh;var Kh,Lh="Bad arguments",Mh='A function was specified for "%s" %s, but no %s was returned',Nh=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"},Oh=function(a,b,c,d){if(a===b)return r(b);if(d){var e=p("interpolators",c,d);if(e)return e(a,b)||r(b);o(Nh(d,"interpolator"))}return Rh.number(a,b)||Rh.array(a,b)||Rh.object(a,b)||r(b)},Ph=Oh,Qh={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Ph(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)Eh.call(a,g)&&(Eh.call(b,g)?(c.push(g),e[g]=Ph(a[g],b[g])):f[g]=a[g]);for(g in b)Eh.call(b,g)&&!Eh.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},Rh=Qh,Sh=s,Th=t;"undefined"==typeof window?Kh=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(jh,0,window),Kh=window.requestAnimationFrame);var Uh,Vh=Kh;Uh="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Wh=Uh,Xh={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};u.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?n(this.deprecate.message):n('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),b?a.fire(this.event,b):a.fire(this.event)};var Yh,Zh=u,$h={},_h={},ai={};"function"==typeof Promise?Yh=Promise:(Yh=function(a){var b,c,d,e,f,g,h=[],i=[],j=$h;d=function(a){return function(d){j===$h&&(b=d,j=a,c=D(j===_h?h:i,b),C(c))}},e=d(_h),f=d(ai);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Yh(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),E(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==$h&&C(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Yh.all=function(a){return new Yh(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Yh.resolve=function(a){return new Yh(function(b){b(a)})},Yh.reject=function(a){return new Yh(function(b,c){c(a)})});var bi,ci,di,ei=Yh,fi={},gi=F;bi=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,ci={},di=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=I(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.parent=""===a?null:J(b.join(".")),this.isRoot=!a},di.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return J(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:J(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=gi(this.str))}};var hi=J(""),ii=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return hi},ji=N,ki=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};ki.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,X(this)},decrementTotal:function(){this.totalChildren-=1,X(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;A(b,a),X(this)},init:function(){this.ready=!0,X(this)},detachNodes:function(){this.decoratorQueue.forEach(S),this.detachQueue.forEach(V),this.children.forEach(W)}};var li,mi,ni=ki,oi=[],pi=new Zh("change");mi={start:function(a,b){var c,d;return b&&(c=new ei(function(a){return d=a})),li={previousBatch:li,transitionManager:new ni(d,li&&li.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&li.viewmodels.push(a.viewmodel),c},end:function(){Y(),li.transitionManager.init(),!li.previousBatch&&li.instance&&(li.instance.viewmodel.changes=[]),li=li.previousBatch},addViewmodel:function(a){return li?-1===li.viewmodels.indexOf(a)?(li.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=li.transitionManager,li.transitionManager.add(a)},registerDecorator:function(a){li.transitionManager.addDecorator(a)},addView:function(a){li.views.push(a)},addUnresolved:function(a){oi.push(a)},removeUnresolved:function(a){A(oi,a)},detachWhenReady:function(a){li.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(li){for(c=li;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var qi=mi,ri=[],si={tick:function(){var a,b,c;for(c=Wh(),qi.start(),a=0;a<ri.length;a+=1)b=ri[a],b.tick(c)||ri.splice(a--,1);qi.end(),ri.length?Vh(si.tick):si.running=!1},add:function(a){ri.push(a),si.running||(si.running=!0,Vh(si.tick))},abort:function(a,b){for(var c,d=ri.length;d--;)c=ri[d],c.root===b&&c.keypath===a&&c.stop()}},ti=si,ui=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Ph(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ui.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(qi.start(this.root),this.root.viewmodel.set(f,this.to),qi.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&n("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),qi.start(this.root),this.root.viewmodel.set(f,c),qi.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&n("Animation was not found"),this.root._animations.splice(a,1)}};var vi=ui,wi={stop:Hh},xi=_,yi=new Zh("detach"),zi=bb,Ai=cb,Bi=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?ph(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},Ci=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},Di=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=eb(a.component||a._ractive.proxy),d=eb(b.component||b._ractive.proxy),e=z(c),f=z(d);e&&e===f;)c.pop(),d.pop(),g=e,e=z(c),f=z(d);if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Ei=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):Di(a,b)},Fi=function(){this.sort(this._isComponentQuery?Di:Ei),this._dirty=!1},Gi=function(){var a=this;this._dirty||(this._dirty=!0,qi.scheduleTask(function(){a._sort()}))},Hi=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},Ii=fb,Ji=gb,Ki=hb,Li=ib,Mi=jb,Ni=kb,Oi={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Pi=Oi,Qi=lb,Ri=ob,Si={capture:!0,noUnwrap:!0},Ti=pb,Ui=new Zh("insert"),Vi=qb,Wi=sb,Xi=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Xi.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;g(a,this.value)||(this.value=a,this.defer&&this.ready?qi.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Yi,Zi=Xi,$i=tb,_i=/\*/,aj=Array.prototype.slice;Yi=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Yi.prototype={init:function(a){var b,c;if(b=$i(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(J(c));else this.values=b},update:function(a){var b,c=this;if(_i.test(a.str)){b=$i(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(J(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?void qi.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?void(this.values[b]=c):(this.updating=!0,g(c,this.values[b])&&this.ready||(d=aj.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}};var bj,cj,dj,ej,fj,gj,hj=Yi,ij=/\*/,jj={},kj=ub,lj=vb,mj=wb,nj=function(a){return a.trim()},oj=function(a){return""!==a},pj=xb,qj=yb,rj=zb,sj=Ab,tj=Array.prototype.slice,uj=Array.prototype,vj=function(a){return function(b){var c,d,f,g,h=tj.call(arguments,1),i=[];if(b=J(M(b)),c=this.viewmodel.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=sj(c,a,h),g=uj[a].apply(c,h),f=qi.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),qi.end(),f}},wj=vj("pop"),xj=vj("push"),yj="/* Ractive.js component styles */\n",zj={},Aj=[];eh?(dj=document.createElement("style"),dj.type="text/css",ej=document.getElementsByTagName("head")[0],gj=!1,fj=dj.styleSheet,cj=function(){var a;Aj.length?(a=yj+Aj.join(" "),fj?fj.cssText=a:dj.innerHTML=a,gj||(ej.appendChild(dj),gj=!0)):gj&&(ej.removeChild(dj),gj=!1)},bj={add:function(a){a.css&&(zj[a._guid]||(zj[a._guid]=0,Aj.push(a.css),cj()),zj[a._guid]+=1)},remove:function(a){a.css&&(zj[a._guid]-=1,zj[a._guid]||(A(Aj,a.css),qi.scheduleTask(cj)))}}):bj=null;var Bj,Cj,Dj,Ej=bj,Fj=new Zh("render"),Gj=new Zh("complete"),Hj=Cb,Ij=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},Jj=Array.prototype.slice,Kj=[],Lj=["pop","push","reverse","shift","sort","splice","unshift"];Lj.forEach(function(a){var b=function(){var b,c,d,e,f=Jj.call(arguments);for(b=sj(this,a,f),c=Array.prototype[a].apply(this,arguments),qi.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],qi.addViewmodel(d.root.viewmodel),Ij(d,this,a,b);return qi.end(),this._ractive.setting=!1,c};yh(Kj,a,{value:b})}),Bj={},Bj.__proto__?(Cj=function(a){a.__proto__=Kj},Dj=function(a){a.__proto__=Array.prototype}):(Cj=function(a){var b,c;for(b=Lj.length;b--;)c=Lj[b],yh(a,c,{value:Kj[c],configurable:!0})},Dj=function(a){var b;for(b=Lj.length;b--;)delete a[Lj[b]]}),Cj.unpatch=Dj;var Mj,Nj,Oj,Pj=Cj;Mj={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Nj(a,b,c)}},Nj=function(a,b,c){this.root=a,this.value=b,this.keypath=J(c),b._ractive||(yh(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Pj(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},Nj.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(Oj);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(Oj);d.splice(e,1)}}else delete a._ractive,Pj.unpatch(this.value)}},Oj="Something went wrong in a rather interesting way";var Qj,Rj,Sj=Mj,Tj=/^\s*[0-9]+\s*$/,Uj=function(a){return Tj.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Qj={filter:function(a,b,c){var d,f;return b?(b=J(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(f=c.viewmodel.get(b.parent),e(f)&&/^[0-9]+$/.test(b.lastKey)?!1:f&&("object"==typeof f||"function"==typeof f))):!1},wrap:function(a,b,c){return new Rj(a,b,c)}},Rj=function(a,b,c){var d,e,f;return c=J(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?void(-1===f.indexOf(this)&&f.push(this)):void Eb(this,b,e)},Rj.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,qi.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Uj(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(Bh){Qj=!1}var Vj,Wj,Xj=Qj;Xj&&(Vj={filter:function(a,b,c){return Xj.filter(a,b,c)&&Sj.filter(a)},wrap:function(a,b,c){return new Wj(a,b,c)}},Wj=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=Xj.wrap(a,b,c),this.arrayWrapper=Sj.wrap(a,b,c)},Wj.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var Yj,Zj,$j,_j=Vj,ak={extend:function(a,b,c){b.adapt=Fb(b.adapt,y(c.adapt))},init:function(a,b,c){function d(a){return"string"==typeof a&&(a=p("adaptors",b,a),a||m(Nh(a,"adaptor"))),a}var e,f;if(e=b.adapt.map(d),f=y(c.adapt).map(d),b.adapt=Fb(e,f),b.magic){if(!gh)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.modifyArrays&&b.adapt.push(_j),b.adapt.push(Xj)}b.modifyArrays&&b.adapt.push(Sj)}},bk=ak,ck=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,dk=/\/\*.*?\*\//g,ek=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,fk=/^@media/,gk=/\[data-ractive-css="[a-z0-9-]+"]/g,hk=Gb,ik={name:"css",extend:function(a,b,c){var d,e=b.constructor._guid;(d=Jb(c.css,c,e)||Jb(a.css,a,e))&&(b.constructor.css=d)},init:function(){}},jk=ik,kk=function(a,b,c){return c||Kb(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},lk={name:"data",extend:function(a,b,c){b.data=Lb(a,b,c)},init:function(a,b,c){var d=c.data,e=Lb(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}},reset:function(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}},mk=lk,nk=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],ok={parse:Tb,fromId:Ub,isHashedId:Vb,isParsed:Wb,getParseOptions:Xb,createHelper:Sb},pk=ok,qk={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:_b(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=Zb(b,e),b._config.template={fn:e,result:d}),d=_b(d,b),b.template=d.t,d.p&&ac(b.partials,d.p)},reset:function(a){var b,c=Yb(a);return c?(b=_b(c,a),a.template=b.t,ac(a.partials,b.p,!0),!0):void 0}},rk=qk;Yj=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],Zj=function(a,b){this.name=a,this.useDefaults=b},Zj.prototype={constructor:Zj,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=xh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},$j=Yj.map(function(a){return new Zj(a,"computed"===a)});var sk,tk,uk,vk,wk,xk,yk=$j,zk=bc,Ak=fc;vk={adapt:bk,css:jk,data:mk,template:rk},uk=Object.keys(lh),xk=ic(uk.filter(function(a){return!vk[a]})),wk=ic(uk.concat(yk.map(function(a){return a.name}))),tk=[].concat(uk.filter(function(a){return!yk[a]&&!vk[a]}),yk,vk.data,vk.template,vk.css),sk={extend:function(a,b,c){return gc("extend",a,b,c)},init:function(a,b,c){return gc("init",a,b,c)},reset:function(a){return tk.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:tk,getConstructTarget:function(a,b){return b.onconstruct?{onconstruct:zk(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a}};var Bk,Ck,Dk,Ek=sk,Fk=jc,Gk=kc,Hk=lc,Ik=mc,Jk=nc,Kk=oc,Lk=pc,Mk=qc,Nk=1,Ok=2,Pk=3,Qk=4,Rk=7,Sk=8,Tk=9,Uk=13,Vk=15,Wk=16,Xk=18,Yk=20,Zk=21,$k=22,_k=23,al=24,bl=26,cl=27,dl=30,el=31,fl=32,gl=33,hl=34,il=35,jl=36,kl=40,ll=50,ml=51,nl=52,ol=53,pl=54,ql="Expected a JavaScript expression",rl="Expected closing paren",sl=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,tl=function(a){var b;return(b=a.matchPattern(sl))?{t:Yk,v:b}:null},ul=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:al,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:al,v:"false"}):null};Bk=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Ck=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Dk=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var vl,wl,xl,yl,zl,Al=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(Bk)||b.matchPattern(Ck)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(Dk),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},Bl=Al('"'),Cl=Al("'"),Dl=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=Cl(a),a.matchString('"')?{t:Zk,v:c}:(a.pos=b,null)):a.matchString("'")?(c=Bl(a),a.matchString("'")?{t:Zk,v:c}:(a.pos=b,null)):null},El=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Fl=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Gl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Hl=function(a){var b;return(b=Dl(a))?Gl.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=tl(a))?b.v:(b=a.matchPattern(El))?b:void 0},Il=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=Hl(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:cl,k:c,v:d}):(a.pos=b,null))},Jl=rc,Kl=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=Jl(a),a.allowWhitespace(),a.matchString("}")?{t:_k,m:c}:(a.pos=b,null)):(a.pos=b,null)},Ll=sc,Ml=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=Ll(a),a.matchString("]")?{t:$k,m:c}:(a.pos=b,null)):(a.pos=b,null)},Nl=function(a){var b=tl(a)||ul(a)||Dl(a)||Kl(a)||Ml(a);return b};vl=/^\.[a-zA-Z_$0-9]+/,xl=function(a){var b=a.matchPattern(wl);return b?"."+b:null},wl=/^\[(0|[1-9][0-9]*)\]/,yl=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,zl=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Ol,Pl,Ql=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?Fl:El,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&zl.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&yl.test(d))return{t:bl,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(vl)||xl(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:dl,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},Rl=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(ql),a.allowWhitespace(),a.matchString(")")||a.error(rl),{t:hl,x:c}):null},Sl=function(a){return Nl(a)||Ql(a)||Rl(a)},Tl=tc,Ul=function(a){var b,c,d,e;if(c=Sl(a),!c)return null;for(;c;)if(b=a.pos,d=Tl(a))c={t:fl,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=Ll(a),a.allowWhitespace(),a.matchString(")")||a.error(rl),c={t:kl,x:c},e&&(c.o=e)}return c};Pl=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(ql),{s:a,o:d,t:gl}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Ul,a=0,b=d.length;b>a;a+=1)c=Pl(d[a],e),e=c;Ol=e}();var Vl,Wl,Xl=Ol;Wl=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:jl,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Xl,a=0,b=d.length;b>a;a+=1)c=Wl(d[a],e),e=c;Vl=e}();var Yl,Zl,$l=Vl,_l=function(a){var b,c,d,e;return(c=$l(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ql),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(ql),{t:il,o:[c,d,e]}):(a.pos=b,c)):null},am=function(a){var b,c=[];return vc(a,c),b={r:c,s:wc(this,a,c)}},bm=/^\s+/;Zl=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Zl.prototype=Error.prototype,Yl=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Yl.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return _l(this)},flattenExpression:am,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Zl(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g
},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(bm)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Yl.extend=function(a){var b,c,d=this;b=function(a,b){Yl.call(this,a,b)},b.prototype=xh(d.prototype);for(c in a)Eh.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Yl.extend,b};var cm,dm,em,fm,gm,hm,im,jm=Yl;dm=function(a){return a["true"]=!0,a["false"]=!1,a.undefined=void 0,a["null"]=null,a}({}),em=new RegExp("^(?:"+Object.keys(dm).join("|")+")"),fm=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,gm=/\$\{([^\}]+)\}/g,hm=/^\$\{([^\}]+)\}/,im=/^\s*$/,cm=jm.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&im.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(hm),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(em))?{v:dm[b]}:void 0},function(a){var b;return(b=a.matchPattern(fm))?{v:+b}:void 0},function(a){var b,c=Dl(a);return c&&(b=a.values)?{v:c.v.replace(gm,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=xc(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var km,lm,mm,nm,om,pm,qm,rm,sm=function(a,b){var c=new cm(a,{values:b});return c.result},tm=yc,um=zc,vm=Ac,wm=Bc;km=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,lm=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,mm={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},nm=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],om=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(mm).join("|")+"));?","g"),pm=/</g,qm=/>/g,rm=/&/g;var xm=function(){return b(this.node)},ym=function(a){this.type=Nk,this.text=a.template};ym.prototype={detach:xm,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Ec(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var zm=ym,Am=Fc,Bm=Gc,Cm=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=ji(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):qi.addUnresolved(this)};Cm.prototype={resolve:function(a){this.keypath&&!a&&qi.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(J(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||qi.removeUnresolved(this)}};var Dm=Cm,Em=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},Fm={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Em.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=Fm[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(J("@"+d.prefix+Hc(this.cached,d)));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===nl&&void 0!==(a=Hc(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback(J("@"+d.prefix+a));c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Hc(c,d)))return this.callback(J("@"+d.prefix+a.str));c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Gm=Em,Hm=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};Hm.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(J("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Im=Hm,Jm=Ic;Ic.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var Km,Lm=Jc,Mm={},Nm=Kc,Om=Function.prototype.bind;Km=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Lm(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},Km.prototype={bubble:function(){this.ready&&(this.uniqueString=Mc(this.str,this.keypaths),this.keypath=Nc(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e,f=this;d=this.keypath,a=this.root.viewmodel.computations[d.str],a?this.root.viewmodel.mark(d):(e=Nm(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:a.isSpecial?(b=a.value,function(){return b}):function(){var b=f.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=Pc(b,f.root)),b}}),c={deps:this.keypaths.filter(Oc),get:function(){var a=b.map(Lc);return e.apply(null,a)}},a=this.root.viewmodel.compute(d,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var Pm=Km,Qm=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===dl?this.refResolver=Lm(this,a.n,function(a){d.resolve(a)}):new Pm(b,c,a,function(a){d.resolve(a)})};Qm.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Rm=Qm,Sm=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=ji(d,e,g))?this.base=f:this.baseResolver=new Dm(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new Rm(a,h,g)}),this.ready=!0,this.bubble()};Sm.prototype={getKeypath:function(){var a=this.members.map(Qc);return!a.every(Rc)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(T)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=J(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Sc),this.bubble()}};var Tm=Sm,Um=Tc,Vm=Uc,Wm=Vc,Xm={getValue:Bm,init:Um,resolve:Vm,rebind:Wm},Ym=function(a){this.type=Ok,Xm.init(this,a)};Ym.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Xm.resolve,rebind:Xm.rebind,detach:xm,unbind:Am,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:Xm.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),g(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&qi.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?Ec(b):b}};var Zm=Ym,$m=Wc,_m=Xc,an=Yc,bn=Zc,cn=$c,dn=_c,en=ad,fn=bd,gn=cd,hn=function(a,b){Xm.rebind.call(this,a,b)},jn=ed,kn=fd,ln=qd,mn=rd,nn=sd,on=vd,pn=function(a){this.type=Qk,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===ml,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,Xm.init(this,a)};pn.prototype={bubble:$m,detach:_m,find:an,findAll:bn,findAllComponents:cn,findComponent:dn,findNextNode:en,firstNode:fn,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:Xm.getValue,shuffle:gn,rebind:hn,render:jn,resolve:Xm.resolve,setValue:kn,toString:ln,unbind:mn,unrender:nn,update:on};var qn,rn,sn=pn,tn=wd,un=xd,vn=yd,wn=zd,xn={};try{oh("table").innerHTML="foo"}catch(Bh){qn=!0,rn={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var yn=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(qn&&(e=rn[b.tagName])?(d=Ad("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===hh.svg?(d=Ad("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=Ad(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},zn=Bd,An=Dd,Bn=Ed,Cn=Fd,Dn=Gd,En=Hd,Fn=function(a){this.type=Pk,Xm.init(this,a)};Fn.prototype={detach:tn,find:un,findAll:vn,firstNode:wn,getValue:Xm.getValue,rebind:Xm.rebind,render:An,resolve:Xm.resolve,setValue:Bn,toString:Cn,unbind:Am,unrender:Dn,update:En};var Gn,Hn,In,Jn,Kn=Fn,Ln=function(){this.parentFragment.bubble()},Mn=Id,Nn=function(a){return this.node?ph(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},On=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Pn=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Qn=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Rn=Jd,Sn=Kd,Tn=Ld,Un=/^true|on|yes|1$/i,Vn=/^[0-9]+$/,Wn=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||Un.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&Vn.test(c)?parseInt(c):0===c||Un.test(c),delete b.lazy)},Xn=Md;Gn="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Hn="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),In=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},Jn=In(Gn.concat(Hn));var Yn=function(a){var b=a.toLowerCase();return Jn[b]||b},Zn=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==hh.html?Yn(b):b;else if(b=b.substring(c+1),a.name=Yn(b),a.namespace=hh[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},$n=Nd,_n=Od,ao=Pd,bo={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},co=Qd,eo=Rd,fo=Td,go=Ud,ho=Vd,io=Wd,jo=Xd,ko=Yd,lo=Zd,mo=$d,no=_d,oo=ae,po=be,qo=ce,ro=de,so=ee,to=function(a){this.init(a)};to.prototype={bubble:Xn,init:_n,rebind:ao,render:co,toString:eo,unbind:fo,update:so};var uo,vo=to,wo=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new vo({element:a,name:c,value:b[c],root:a.root}),e.push(e[c]=d));return e};"undefined"!=typeof document&&(uo=oh("div"));var xo=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Wr({root:a.root,owner:this,template:[b]})};xo.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===hh.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=fe(a,this.isSvg),this.attributes.filter(function(a){return ge(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var yo=xo,zo=function(a,b){return b?b.map(function(b){return new yo(a,b)}):[]},Ao=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return n("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name),!1}else b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=he(a))&&(this.resetValue=d,e.formBindings.push(this))};Ao.prototype={handleChange:function(){var a=this;qi.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),qi.scheduleTask(function(){return a.attribute.locked=!1}),qi.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(A(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},Ao.extend=function(a){var b,d=this;return b=function(a){Ao.call(this,a),this.init&&this.init()},b.prototype=xh(d.prototype),c(b.prototype,a),b.extend=Ao.extend,b};var Bo,Co=Ao,Do=ie,Eo=Co.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",Do,!1),this.root.lazy||(a.addEventListener("input",Do,!1),a.attachEvent&&a.addEventListener("keyup",Do,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",Do,!1),a.removeEventListener("input",Do,!1),a.removeEventListener("keyup",Do,!1)},getValue:function(){return this.element.node.innerHTML}}),Fo=Eo,Go={},Ho=je,Io=Co.extend({name:"checked",init:function(){this.siblings=Ho(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",Do,!1),a.attachEvent&&a.addEventListener("click",Do,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Do,!1),a.removeEventListener("click",Do,!1)},handleChange:function(){qi.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),qi.end()},getValue:function(){return this.element.node.checked},unbind:function(){A(this.siblings,this)}}),Jo=Io,Ko=Co.extend({name:"name",init:function(){this.siblings=Ho(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",Do,!1),a.attachEvent&&a.addEventListener("click",Do,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Do,!1),a.removeEventListener("click",Do,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&Co.prototype.handleChange.call(this)},rebound:function(a,b){var c;Co.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){A(this.siblings,this)}}),Lo=Ko,Mo=Co.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=Ho(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){A(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?w(a,b):a==b,c.name="{{"+this.keypath.str+"}}",c.checked=this.isChecked,c.addEventListener("change",Do,!1),c.attachEvent&&c.addEventListener("click",Do,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Do,!1),a.removeEventListener("click",Do,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,Co.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ke).map(le)}}),No=Mo,Oo=Co.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",Do,!1),a.attachEvent&&a.addEventListener("click",Do,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",Do,!1),a.removeEventListener("click",Do,!1)},getValue:function(){return this.element.node.checked}}),Po=Oo,Qo=Co.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",Do,!1)},unrender:function(){this.element.node.removeEventListener("change",Do,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,qi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Ro=Qo,So=Ro.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",Do,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Do,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&x(c,b)||Ro.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,qi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),To=So,Uo=Co.extend({render:function(){this.element.node.addEventListener("change",Do,!1)},unrender:function(){this.element.node.removeEventListener("change",Do,!1)},getValue:function(){return this.element.node.files}}),Vo=Uo;Bo=Co.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:h(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",Do,!1),a||(b.addEventListener("input",c?ne:Do,!1),b.attachEvent&&b.addEventListener("keyup",c?ne:Do,!1)),b.addEventListener("blur",me,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",Do,!1),a.removeEventListener("input",Do,!1),a.removeEventListener("keyup",Do,!1),a.removeEventListener("blur",me,!1)}});var Wo=Bo,Xo=Wo.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Yo=oe,Zo=qe,$o=re,_o=se,ap=/^event(?:\.(.+))?/,bp=te,cp=xe,dp={},ep={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},fp=ye,gp=Ae,hp=Be,ip=Ce,jp=De,kp=Ee,lp=function(a,b,c){this.init(a,b,c)};lp.prototype={bubble:Zo,fire:$o,getAction:_o,init:bp,listen:fp,rebind:gp,render:hp,resolve:ip,unbind:jp,unrender:kp};var mp=lp,np=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new mp(a,e[c],b[d]),g.push(f);return g},op=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Wr({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Wr({template:b.d,root:c,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getArgsList(),f.ready&&f.update()}),this.fn=p("decorators",c,d),this.fn||n(Nh(d,"decorator")))};op.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var pp,qp,rp,sp=op,tp=Le,up=Me,vp=Se,wp=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};eh?(qp={},rp=oh("div").style,pp=function(a){var b,c,d;if(a=wp(a),!qp[a])if(void 0!==rp[a])qp[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=jh.length;b--;)if(c=jh[b],void 0!==rp[c+d]){qp[a]=c+d;break}return qp[a]}):pp=null;var xp,yp,zp=pp;eh?(yp=window.getComputedStyle||legacy__default.getComputedStyle,xp=function(a){var b,c,d,f,g;if(b=yp(this.node),"string"==typeof a)return g=b[zp(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[zp(f)],"0px"===g&&(g=0),c[f]=g;return c}):xp=null;var Ap=xp,Bp=function(a,b){var c;if("string"==typeof a)this.node.style[zp(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[zp(c)]=a[c]);return this},Cp=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(o(Nh(a.easing,"easing")),b=Te)):b="function"==typeof a.easing?a.easing:Te,this.easing=b,this.start=Wh(),this.end=this.start+this.duration,this.running=!0,ti.add(this)};Cp.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Dp,Ep,Fp,Gp,Hp,Ip,Jp,Kp,Lp=Cp,Mp=new RegExp("^-(?:"+jh.join("|")+")-"),Np=function(a){return a.replace(Mp,"")},Op=new RegExp("^(?:"+jh.join("|")+")([A-Z])"),Pp=function(a){var b;return a?(Op.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Qp={},Rp={};eh?(Ep=oh("div").style,function(){void 0!==Ep.transition?(Fp="transition",Gp="transitionend",Hp=!0):void 0!==Ep.webkitTransition?(Fp="webkitTransition",Gp="webkitTransitionEnd",Hp=!0):Hp=!1}(),Fp&&(Ip=Fp+"Duration",Jp=Fp+"Property",Kp=Fp+"TimingFunction"),Dp=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[Jp]=d.map(zp).map(Pp).join(","),a.node.style[Kp]=Pp(c.easing||"linear"),a.node.style[Ip]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(wp(Np(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Gp,j,!1),h=!0,i())},a.node.addEventListener(Gp,j,!1),setTimeout(function(){for(var e,k,l,m,o,p=d.length,q=[];p--;)m=d[p],e=f+m,Hp&&!Rp[e]&&(a.node.style[zp(m)]=b[m],Qp[e]||(k=a.getStyle(m),Qp[e]=a.getStyle(m)!=b[m],Rp[e]=!Qp[e],Rp[e]&&(a.node.style[zp(m)]=k))),(!Hp||Rp[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?n("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!"):d.splice(l,1),o=/[^\d]*$/.exec(b[m])[0],q.push({name:zp(m),interpolator:Ph(parseFloat(k),parseFloat(b[m])),suffix:o}));q.length?new Lp({root:a.root,duration:c.duration,easing:wp(c.easing||""),step:function(b){var c,d;for(d=q.length;d--;)c=q[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Gp,j,!1),h=!0,i())},0)},c.delay||0)}):Dp=null;var Sp,Tp,Up,Vp,Wp,Xp=Dp;if("undefined"!=typeof document){if(Sp="hidden",Wp={},Sp in document)Up="";else for(Vp=jh.length;Vp--;)Tp=jh[Vp],Sp=Tp+"Hidden",Sp in document&&(Up=Tp);void 0!==Up?(document.addEventListener(Up+"visibilitychange",Ue),Ue()):("onfocusout"in document?(document.addEventListener("focusout",Ve),document.addEventListener("focusin",We)):(window.addEventListener("pagehide",Ve),window.addEventListener("blur",Ve),window.addEventListener("pageshow",We),window.addEventListener("focus",We)),Wp.hidden=!1)}var Yp,Zp,$p,_p=Wp;eh?(Zp=window.getComputedStyle||legacy__default.getComputedStyle,Yp=function(a,b,c){var d,e=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(_p.hidden)return this.setStyle(a,b),$p||($p=ei.resolve());"string"==typeof a?(d={},d[a]=b):(d=a,c=b),c||(n('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);var f=new ei(function(a){var b,f,g,h,i,j,k;if(!c.duration)return e.setStyle(d),void a();for(b=Object.keys(d),f=[],g=Zp(e.node),i={},j=b.length;j--;)k=b[j],h=g[zp(k)],"0px"===h&&(h=0),h!=d[k]&&(f.push(k),e.node.style[zp(k)]=h);return f.length?void Xp(e,d,c,f,a):void a()});return f}):Yp=null;var aq=Yp,bq=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)
},cq=Xe,dq=function(a,b,c){this.init(a,b,c)};dq.prototype={init:vp,start:cq,getStyle:Ap,setStyle:Bp,animateStyle:aq,processParams:bq};var eq,fq,gq=dq;eq=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},fq=function(){this.node.type&&"text/javascript"!==this.node.type||n("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var hq=Ze,iq=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(df).join("")+this.conditionalAttributes.map(df).join(""),"option"===this.name&&bf(this)&&(a+=" selected"),"input"===this.name&&cf(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Ec(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),lm.test(this.template.e)||(a+="</"+this.template.e+">"),a)},jq=ef,kq=ff,lq=function(a){this.init(a)};lq.prototype={bubble:Ln,detach:Mn,find:Nn,findAll:On,findAllComponents:Pn,findComponent:Qn,findNextNode:Rn,firstNode:Sn,getAttribute:Tn,init:tp,rebind:up,render:hq,toString:iq,unbind:jq,unrender:kq};var mq=lq,nq=/^\s*$/,oq=/^\s*/,pq=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&nq.test(c)&&b.shift(),d=z(b),void 0!==d&&nq.test(d)&&b.pop(),e=b.reduce(hf,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},qq=jf,rq=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},sq=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=Sk,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Xm.init(this,a),!this.keypath&&(c=qq(this.root,this.name))&&(Am.call(this),this.isNamed=!0,this.setTemplate(c))};sq.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||Wm.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Xm.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=qq(this.root,""+a)),!b&&this.name&&(b=qq(this.root,this.name))&&(Am.call(this),this.isNamed=!0),b||(this.root.debug?m:o)('Could not find template for partial "%s"',this.name),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&qi.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Wr({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===Nk?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?rq(b,e[0]):b):b},unbind:function(){this.isNamed||Am.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var tq=sq,uq=nf,vq=new Zh("detach"),wq=of,xq=pf,yq=qf,zq=rf,Aq=sf,Bq=tf,Cq=uf,Dq={},Eq=vf,Fq=yf,Gq=zf,Hq=Cf,Iq=Hf,Jq=If,Kq=/\$\{([^\}]+)\}/g,Lq=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:Jf(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:Jf(a.get),set:a.set}),a)},Mq=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Mq.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}};var Nq=Mq,Oq=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};Oq.prototype={constructor:Oq,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,h;if(!e)for(h=b.length;h--;)if(c=b[h],f=a.viewmodel.get(c),!g(f,d.depValues[c.str]))return d.depValues[c.str]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){a.debug&&(n('Failed to compute "%s"',this.key.str),Ch(f.stack||f)),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Kf(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new Nq(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,qi.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var Pq=Oq,Qq=Lf,Rq={FAILED_LOOKUP:!0},Sq={},Tq=Mf,Uq=Of,Vq=Qf;Qf.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})};var Wq=Rf;Rf.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Vq(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var Xq=Sf,Yq=Tf,Zq=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},$q={},_q=Uf,ar=Xf,br=Zf,cr=$f,dr={implicit:!0},er={noCascade:!0},fr=ag,gr=cg,hr=dg,ir=function(a,b){var c,d;this.ractive=a,this.mappings=b||xh(null);for(c in b)b[c].initViewmodel(this);if(a.data&&a.parameters!==!0)for(c in a.data)(d=this.mappings[c])&&void 0===d.getValue()&&d.setValue(a.data[c]);this.cache={},this.cacheMap=xh(null),this.deps={computed:xh(null),"default":xh(null)},this.depsMap={computed:xh(null),"default":xh(null)},this.patternObservers=[],this.specials=xh(null),this.wrapped=xh(null),this.computations=xh(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={}};ir.prototype={adapt:Eq,applyChanges:Hq,capture:Iq,clearCache:Jq,compute:Qq,get:Tq,init:Uq,map:Xq,mark:Yq,merge:_q,register:ar,release:br,set:cr,smartUpdate:fr,teardown:gr,unregister:hr};var jr=ir;fg.prototype={constructor:fg,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?gg(this.queue,b).push(a):hg(this,a),delete this.inProcess[a._guid]}};var kr=fg,lr=new Zh("construct"),mr=new Zh("config"),nr=new kr("init"),or=0,pr=ig,qr=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&n("The <%s/> component has a default `el` property; it has been disregarded",a.name),j=h;j;){if(j.owner.type===Wk){k=j.owner.container;break}j=j.parent}return g=xh(b.prototype),pr(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g},rr=kg;kg.prototype={bubble:function(){this.dirty||(this.dirty=!0,qi.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key.str,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var sr=lg,tr=["_data","_mappings"],ur=rg;rg.prototype={resolve:function(a){this.resolved=!0,this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(a.isSpecial)this.parameters.addData(this.key.str,a.value);else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;a.isSpecial?(this.parameters.addData(this.key.str,a.value),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key.str]?b.reversedMappings[this.key.str].rebind(a):b.mappings[this.key.str].resolve(a)}};var vr=sg;ug.prototype={add:function(a,b){if("string"==typeof b){var c=sm(b);this.addData(a.str,c?c.value:b)}else if(0===b)this.addData(a.str);else{var d;d=vg(b)?new ur(this,a,b[0]).resolver:new rr(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c;return b&&(c=this.parentViewmodel.mappings[b.str]),this.mappings[a.str]=new Wq(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var wr=wg,xr=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},yr=yg,zr=zg,Ar=Ag,Br=Bg,Cr=new Zh("teardown"),Dr=Cg,Er=Eg,Fr=function(a,b){this.init(a,b)};Fr.prototype={detach:wq,find:xq,findAll:yq,findAllComponents:zq,findComponent:Aq,findNextNode:Bq,firstNode:Cq,init:yr,rebind:zr,render:Ar,toString:Br,unbind:Dr,unrender:Er};var Gr=Fr,Hr=function(a){this.type=Tk,this.value=a.template.c};Hr.prototype={detach:xm,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Ir=Hr,Jr=function(a){var b,c;this.type=Wk,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new Wr({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],qi.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Jr.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),A(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Kr=Jr,Lr=function(a){this.declaration=a.template.a};Lr.prototype={init:Hh,render:Hh,unrender:Hh,teardown:Hh,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Mr=Lr,Nr=Fg,Or=Hg,Pr=Ig,Qr=Jg,Rr=Mg,Sr=Og,Tr=function(a){this.init(a)};Tr.prototype={bubble:Fk,detach:Gk,find:Hk,findAll:Ik,findAllComponents:Jk,findComponent:Kk,findNextNode:Lk,firstNode:Mk,getArgsList:um,getNode:vm,getValue:wm,init:Nr,rebind:Or,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Pr,toString:Qr,unbind:Rr,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Sr};var Ur,Vr,Wr=Tr,Xr=["template","partials","components","decorators","events"],Yr=new Zh("reset"),Zr=Pg,$r=function(a,b){function c(b,d,f){f&&f.partials[a]||b.forEach(function(b){b.type===Sk&&b.getPartialName()===a&&d.push(b),b.fragment&&c(b.fragment.items,d,f),e(b.fragments)?c(b.fragments,d,f):e(b.items)?c(b.items,d,f):b.type===Vk&&b.instance&&c(b.instance.fragment.items,d,b.instance),b.type===Rk&&(e(b.attributes)&&c(b.attributes,d,f),e(b.conditionalAttributes)&&c(b.conditionalAttributes,d,f))})}var d,f=[];return c(this.fragment.items,f),this.partials[a]=b,d=qi.start(this,!0),f.forEach(function(b){b.value=void 0,b.setValue(a)}),qi.end(),d},_r=Qg,as=vj("reverse"),bs=/\*/,cs=Rg,ds=vj("shift"),es=vj("sort"),fs=vj("splice"),gs=Sg,hs=new Zh("teardown"),is=Tg,js=Vg,ks=Wg,ls=new Zh("unrender"),ms=Xg,ns=vj("unshift"),os=new Zh("update"),ps=Yg,qs=Zg,rs={add:Th,animate:xi,detach:zi,find:Ai,findAll:Ji,findAllComponents:Ki,findComponent:Li,findContainer:Mi,findParent:Ni,fire:Ri,get:Ti,insert:Vi,merge:Wi,observe:lj,observeOnce:mj,off:pj,on:qj,once:rj,pop:wj,push:xj,render:Hj,reset:Zr,resetPartial:$r,resetTemplate:_r,reverse:as,set:cs,shift:ds,sort:es,splice:fs,subtract:gs,teardown:is,toggle:js,toHTML:ks,toHtml:ks,unrender:ms,unshift:ns,update:ps,updateModel:qs},ss=_g,ts=1,us=dh,vs=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath.str,d.index={},(c=Jm(b.proxy.parentFragment))&&(d.index=Jm.resolve(c)),d):d};Ur=function(a){pr(this,a)},Vr={extend:{value:us},getNodeInfo:{value:vs},parse:{value:parse__default},Promise:{value:ei},svg:{value:ih},magic:{value:gh},VERSION:{value:"<%= pkg.version %>"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:mh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Rh},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},zh(Ur,Vr),Ur.prototype=c(rs,lh),Ur.prototype.constructor=Ur,Ur.defaults=Ur.prototype;var ws="function";if(typeof Date.now!==ws||typeof String.prototype.trim!==ws||typeof Object.keys!==ws||typeof Array.prototype.indexOf!==ws||typeof Array.prototype.forEach!==ws||typeof Array.prototype.map!==ws||typeof Array.prototype.filter!==ws||"undefined"!=typeof window&&typeof window.addEventListener!==ws)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var xs=Ur;return xs});