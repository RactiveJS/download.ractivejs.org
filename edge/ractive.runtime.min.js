/*
	ractive.runtime.min.js v0.6.1
	2014-12-17 - commit ed474173 

	http://ractivejs.org
	http://twitter.com/RactiveJS

	Released under the MIT License.
*/

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=b():a.Ractive=b()}("undefined"!=typeof window?window:this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=wh.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=wh.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===Ah.call(a)}function f(a){return Bh.test(Ah.call(a))}function g(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function h(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===Ah.call(a)}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===Ah.call(a)}function k(a,b,c){var d=l(a,b,c);return d?d[a][c]:null}function l(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function m(a){return function(){return a}}function n(a,b,c){var d;if("string"!=typeof b||!i(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!i(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function o(a,b){return Kh(this,a,void 0===b?1:+b)}function p(a){var b=Ph[a.message]||a.message||"";return q(b,a.args)}function q(a,b){return a.replace(/{([^{}]*)}/g,function(a,c){return b[c]})}function r(a){this.event=a,this.method="on"+a,this.deprecate=Sh[a]}function s(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function t(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function u(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function v(a){return"string"==typeof a?[a]:void 0===a?[]:a}function w(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function x(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function y(a){setTimeout(a,0)}function z(a,b){return function(){for(var c;c=a.shift();)c(b)}}function A(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Th)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,A(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function B(a){var b,c,d,e,f,g;for(b=a.split("."),(c=ai[b.length])||(c=C(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function C(a){var b,c,d,e,f,g="";if(!ai[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}ai[a]=d}return ai[a]}function D(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function E(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function F(a){return null==a?a:Zh[a]||(Zh[a]=new $h(a))}function G(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c.str],f=d?d.get():a.viewmodel.get(c);for(g in f)!f.hasOwnProperty(g)||"_ractive"===g&&e(f)||b.push(c.join(g));return b}var d,f,g;for(d=b.split("."),g=[ci];f=d.shift();)"*"===f?g=g.reduce(c,[]):g[0]===ci?g[0]=F(f):g=g.map(H(f));return g}function H(a){return function(b){return b.join(a)}}function I(a){return a?a.replace(Yh,".$1"):""}function J(a,b,c){var d;return b=I(b),"~/"===b.substr(0,2)?(d=F(b.substring(2)),M(a,d.firstKey,c)):"."===b[0]?(d=K(di(c),b),d&&M(a,d.firstKey,c)):d=L(a,F(b),c),d}function K(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return F(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),F(c.join("."))}return F(a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,""))}function L(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return N(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=F(f),i=L(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function M(a,b){var c;!a.parent||a.isolated||N(a,b)||(b=F(b),(c=L(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function N(a,b){return b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function O(a){a.teardown()}function P(a){a.unbind()}function Q(a){a.unrender()}function R(a){a.detach()}function S(a){a.detachNodes()}function T(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function U(){for(var a,b,c;gi.viewmodels.length;)b=gi.viewmodels.pop(),c=b.applyChanges(),c&&ki.fire(b.ractive,c);for(V(),a=0;a<gi.views.length;a+=1)gi.views[a].update();for(gi.views.length=0,a=0;a<gi.tasks.length;a+=1)gi.tasks[a]();return gi.tasks.length=0,gi.viewmodels.length?U():void 0}function V(){var a,b,c,d;for(a=ji.length;a--;)b=ji[a],b.keypath&&ji.splice(a,1),(c=ei(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),ji.splice(a,1));d&&d.forEach(W)}function W(a){a.item.resolve(a.keypath)}function X(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;if(d=new _h(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:Ch,h.push(Y(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){k(a,n)}),l&&d.then(function(a){l(a,n)}).then(null,function(a){Rh.consoleError({debug:r.debug,err:a})}),q.complete=e,p=Y(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,function(a){Rh.consoleError({debug:r.debug,err:a})}),c.complete=e,g=Y(this,a,b,c),d.stop=function(){g.stop()},d}function Y(a,b,c,d){var e,f,h,i;return b&&(b=F(I(b))),null!==b&&(i=a.viewmodel.get(b)),oi.abort(b,a),g(i,c)?(d.complete&&d.complete(d.to),ri):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,h=new qi({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),oi.add(h),a._animations.push(h),h)}function Z(){return this.detached?this.detached:(this.el&&w(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),ti.fire(this),this.detached)}function $(a){return this.el?this.fragment.find(a):null}function _(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function ab(a){var b,c;for(b=[a],c=_(a);c;)b.push(c),c=_(c);return b}function bb(a,b,c,d){var e=[];return vh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:wi}}),c?(vh(e,{cancel:{value:xi},_root:{value:a},_sort:{value:Ai},_makeDirty:{value:Bi},_remove:{value:Ci},_dirty:{value:!1,writable:!0}}),e):e}function cb(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Di(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function db(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Di(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function eb(a){return this.fragment.findComponent(a)}function fb(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function gb(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function hb(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=F(b).wildcardMatches();ib(a,d,c.event,c.args,!0)}}function ib(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(Ki.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=jb(a,f,c,d)&&h);if(Ki.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=F(i).wildcardMatches(),c&&(c.component=a)}ib(a.parent,b,c,d)}}function jb(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function kb(a){var b={args:Array.prototype.slice.call(arguments,1)};Li(this,a,b)}function lb(a){var b;return a=F(I(a)),b=this.viewmodel.get(a,Ni),void 0===b&&this.parent&&!this.isolated&&ei(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function mb(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,nb(this)}function nb(a){Pi.fire(a),a.findAllComponents("*").forEach(function(a){nb(a.instance)})}function ob(a,b,c){var d,f;return a=F(I(a)),d=this.viewmodel.get(a),e(d)&&e(b)?(f=li.start(this,!0),this.viewmodel.merge(a,d,b,c),li.end(),f):this.set(a,b,c&&c.complete)}function pb(a,b){var c,d;return c=G(a,b.str),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function qb(a,b,c,d){var e,f,g;return b=F(I(b)),d=d||ej,dj.test(b.str)?(e=new cj(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Ui(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function rb(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",fj(this,a,b,c);if(f=a.split(" "),1===f.length)return fj(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(fj(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function sb(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function tb(a,b){var c,d=this;if(a)c=a.split(" ").map(ij).filter(jj),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function ub(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(ij).filter(jj),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function vb(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function wb(a,b,c){var d,e,f,g,h,i,j=[];if(d=xb(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function xb(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function yb(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=li.start(this,!0),li.scheduleTask(function(){return Aj.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&zb(h),b.innerHTML=""}return this.constructor.css&&zj.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),li.end(),this.transitionsEnabled=f,d.then(function(){return Bj.fire(g)}).then(null,function(a){Rh.consoleError({debug:g.debug,err:a})}),d}function zb(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Ab(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,li.start(d),d.viewmodel.mark(c),li.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function Bb(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Cb(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=_j.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(Eb),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=bk.test(a)?a.replace(bk,d):a.replace($j,"").replace(Zj,function(a,b){var c,d;return ak.test(b)?a:(c=b.split(",").map(Db),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Db(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Eb(a){return a.str}function Fb(a,b,c){return a?b.noCssTransform?a:ck(a,c):void 0}function Gb(a,b){return"function"==typeof b&&/_super/.test(a)}function Hb(a,b,c){var d=c.data||{},e=Ib(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return Jb(e,d)}function Ib(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return Kb(a,b),Jb(a,b)}function Jb(a,b){return"function"==typeof b?Nb(b,a):"function"==typeof a?Mb(b,a):Lb(b,a)}function Kb(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function Lb(a,b){return a=a||{},b?(Kb(b,a,!0),a):a}function Mb(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function Nb(a,b){var c;return c="function"!=typeof b?function(a){Lb(a,b)}:function(a){return b=fk(b,function(){},!0),b.call(this,a)||a},fk(a,c)}function Ob(a){var b=th(jk);return b.parse=function(b,c){return Pb(b,c||a)},b}function Pb(a,b){if(!parse__default)throw new Error(Ph.missingParser);return parse__default(a,b||this.options)}function Qb(a,b){var c;if(!ah){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Rb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function Rb(a){return a&&"#"===a.charAt(0)}function Sb(a){return!("string"==typeof a)}function Tb(a){return a.defaults&&(a=a.defaults),ik.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function Ub(a){var b,c=a._config.template;if(c&&c.fn)return b=Vb(a,c.fn),b!==c.result?(c.result=b,b=Xb(b,a)):void 0}function Vb(a,b){var c=Wb(kk.getParseOptions(a));return b.call(a,a.data,c)}function Wb(a){var b=th(kk);return b.parse=function(b,c){return kk.parse(b,c||a)},b}function Xb(a,b){if("string"==typeof a)"#"===a[0]&&(a=kk.fromId(a)),a=parse__default(a,kk.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function Yb(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function Zb(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=$b(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function $b(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=Ch,d}function _b(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function ac(a,b,c){if(b in a){if(c in a)throw new Error(_b(b,c,!0));Fh(_b(b,c)),a[c]=a[b]}}function bc(a){ac(a,"beforeInit","onconstruct"),ac(a,"init","onrender"),ac(a,"complete","oncomplete"),ac(a,"eventDefinitions","events"),e(a.adaptors)&&ac(a,"adaptors","adapt")}function cc(a,b,c,d){vk(d);for(var e in d)if(sk[e]){var f=d[e];"function"==typeof f&&(f=uk(b.prototype,e,f)),c[e]=f}tk.forEach(function(e){e[a](b,c,d)}),Yj[a](b,c,d),hk[a](b,c,d),mk[a](b,c,d),ek[a](b,c,d),dc(b.prototype,c,d)}function dc(a,b,c){for(var d in c)if(!rk[d]&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=uk(a,d,e)),b[d]=e}}function ec(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function fc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function gc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function hc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function ic(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function jc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function kc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function lc(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function mc(){return this.items&&this.items[0]?this.items[0].firstNode():null}function nc(a){var b,c,d,e;return b=a.pos,d=Dl(a),null===d?null:(c=[d],a.matchString(",")?(e=nc(a),e?c.concat(e):(a.pos=b,null)):c)}function oc(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=oc(a),null===f&&a.error(ll),f.forEach(b)),d)}function pc(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(zl))return{t:_k,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ll),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:_k,x:d}):null}function qc(a){return JSON.stringify(String(a))}function rc(a,b){var c,d;if(a.t===$k&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(j(d))rc(d,b);else for(c=d.length;c--;)rc(d[c],b);a.x&&rc(a.x,b),a.r&&rc(a.r,b),a.v&&rc(a.v,b)}function sc(a,b,c){var d=function(b){return sc(a,b,c)};switch(b.t){case Xk:case Yk:case Tk:return b.v;case Uk:return qc(b.v);case Vk:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Wk:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case Zk:return b.k+":"+sc(a,b.v,c);case bl:return("typeof"===b.s?"typeof ":b.s)+sc(a,b.o,c);case el:return sc(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+sc(a,b.o[1],c);case fl:return sc(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case cl:return"("+sc(a,b.x,c)+")";case al:return sc(a,b.x,c)+sc(a,b.r,c);case _k:return b.n?"."+b.n:"["+sc(a,b.x,c)+"]";case dl:return sc(a,b.o[0],c)+"?"+sc(a,b.o[1],c)+":"+sc(a,b.o[2],c);case $k:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function tc(a){var b,c,d;return a.allowWhitespace(),(b=Cl(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function uc(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return uc(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function vc(){var a,b,c,d;return this.dirtyArgs&&(b=om(this.items,a={},this.root._guid),c=nm("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function wc(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function xc(){var a,b,c,d;return this.dirtyValue&&(b=om(this.items,a={},this.root._guid),c=nm(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function yc(a){return a.replace(jm,function(a,b){var c;return c="#"!==b[0]?hm[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(zc(c)):a})}function zc(a){return a?10===a?32:128>a?a:159>=a?im[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Ac(a){return a.replace(mm,"&amp;").replace(km,"&lt;").replace(lm,"&gt;")}function Bc(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Cc(){return this.value}function Dc(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Ec(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Fc(a,b,c){var d;return"@"===b.charAt(0)?new Bm(a,b,c):(d=Em(a.parentFragment,b))?new Dm(a,d,c):new ym(a,b,c)}function Gc(a,b){var c,d;if(Hm[a])return Hm[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),Hm[a]=c,c}function Hc(a){return a.call()}function Ic(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str})}function Jc(a){return F("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Kc(a){return void 0!==a&&"@"!==a[0]}function Lc(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){uh(a,d,{value:Jm.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return uh(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Mc(a){return a.value}function Nc(a){return void 0!=a}function Oc(a){a.forceResolution()}function Pc(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Gm(a,e,c)),b.template.x&&(a.resolver=new Km(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new Om(a,b.template.rx,d)),a.template.n!==hl||a.hasOwnProperty("value")||a.setValue(void 0)}function Qc(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,void this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Rc(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Sc(){this.parentFragment.bubble()}function Tc(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Uc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Vc(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function Wc(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function Xc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function Yc(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function Zc(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function $c(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===il){if(this.shuffling=!0,li.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath.join(b),h=i.keypath.join(a),d.index=a,(j=d.registeredIndexRefs)&&j.forEach(_c),d.rebind(g,h),void(f[a]=d)))}),e=this.root.viewmodel.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&li.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function _c(a){a.rebind("","")}function ad(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function bd(a){var b,c,d=this;this.updating||(this.updating=!0,this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=d.keypath.join(a),c.index=a,b=new Rr(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):dd(this,a)&&(this.bubble(),this.rendered&&li.addView(this)),this.value=a,this.updating=!1)}function cd(a,b,c){if(b===il&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function dd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case gl:return id(a,b,!1,c);case hl:return id(a,b,!0,c);case jl:return hd(a,c);case kl:return gd(a,b,c);case il:if(j(b))return cd(a,a.subtype,!0),fd(a,b,c)}return a.ordered=!!f(b),a.ordered?(cd(a,il,!1),ed(a,b,c)):j(b)||"function"==typeof b?a.template.i?(cd(a,il,!0),fd(a,b,c)):(cd(a,jl,!1),hd(a,c)):(cd(a,gl,!1),id(a,b,!1,c))}function ed(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(P);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new Rr(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function fd(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(ld));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new Rr(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function gd(a,b,c){return b?hd(a,c):jd(a)}function hd(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Rr(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function id(a,b,c,d){var e,g,h,i,k;if(g=f(b)&&0===b.length,h=!1,!f(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(P),!0):void 0:(d.index=0,i=new Rr(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):jd(a)}function jd(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(kd),a.fragmentsToUnrender.forEach(P),a.length=a.fragmentsToRender.length=0,!0):void 0}function kd(a){return a.rendered}function ld(a){a.rebind("","")}function md(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function nd(){var a=this;this.fragments.forEach(P),this.fragmentsToRender.forEach(function(b){return w(a.fragments,b)}),this.fragmentsToRender=[],vm.call(this),this.length=0,this.unbound=!0}function od(a){this.fragments.forEach(a?pd:qd),this.renderedFragments=[],this.rendered=!1}function pd(a){a.unrender(!0)}function qd(a){a.unrender(!1)}function rd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function sd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function td(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(lh(d,a))return d;if(e=d.querySelector(a))return e}return null}function ud(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(lh(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function vd(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function wd(a){return sn[a]||(sn[a]=kh(a))}function xd(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=x(a.node.options).filter(yd),a.getAttribute("multiple")?d=b.map(function(a){return a.value
}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function yd(a){return a.selected}function zd(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=tn(this.value,this.parentFragment.getNode(),this.docFrag),un(this.pElement),this.rendered=!0,this.docFrag}function Ad(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&li.addView(this))}function Bd(){return void 0!=this.value?yc(""+this.value):""}function Cd(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Dd(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=tn(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),un(this.pElement)}}function Ed(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Fd(){return null}function Gd(){return this.node}function Hd(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Id(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();g(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&li.addView(this))}function Jd(a){var b=a.fragment.items;if(1===b.length)return b[0].type===Jk?b[0]:void 0}function Kd(a){return this.type=Pk,this.element=a.element,this.root=a.root,Un(this,a.name),this.isBoolean=fm.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Rr({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Vn(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:a.value||"")}function Ld(a,b){this.fragment&&this.fragment.rebind(a,b)}function Md(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==dh.html||(b=Yn[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function Nd(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath.str||e.ref)+"}}":this.isBoolean?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+Od(d)+'"':b)}function Od(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Pd(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Qd(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Rd(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=t(f,d)}function Sd(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Td(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return li.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Ud(){var a,b,c=this,d=c.element,f=c.node,g=c.value;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(f.checked=!0);f.checked=!1}else f.checked=g==a}function Vd(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function Wd(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function Xd(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function Yd(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function Zd(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function $d(){this.locked||(this.node[this.propertyName]=this.value)}function _d(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function ae(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=ho:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?bo:ao:"textarea"===e.name?b=ko:null!=e.getAttribute("contenteditable")?b=jo:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?Ch:"radio"===a&&e.binding&&"name"===e.binding.name?eo:ko):this.isTwoway&&"name"===d?"radio"===f.type?b=co:"checkbox"===f.type&&(b=fo):"style"===d&&f.style.setAttribute?b=io:"class"!==d||f.namespaceURI&&f.namespaceURI!==dh.html?this.useProperty&&(b=lo):b=go,b||(b=mo),this.update=b,this.update()}function be(a,b){var c=b?"svg":"div";return po.innerHTML="<"+c+" "+a+"></"+c+">",x(po.childNodes[0].attributes)}function ce(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function de(a){for(;a=a.parent;)if("form"===a.name)return a}function ee(){this._ractive.binding.handleChange()}function fe(a,b,c){var d=a+b+c;return Bo[d]||(Bo[d]=[])}function ge(a){return a.isChecked}function he(a){return a.element.getAttribute("value")}function ie(){var a;yo.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function je(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&yo.call(b),a._timeout=void 0},a.element.lazy)}function ke(a){var b,c,d,e,f,g=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||g.contenteditable&&le(g.contenteditable))&&le(g.value)?c=Ao:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=le(g.name),e=le(g.checked),d&&e&&Rh.error({message:"badRadioInputBinding"}),d?c="radio"===b?Go:Io:e&&(c="radio"===b?Eo:Ko)):"file"===b&&le(g.value)?c=Qo:le(g.value)&&(c="number"===b||"range"===b?So:Ro)):"select"===a.name&&le(g.value)?c=a.getAttribute("multiple")?Oo:Mo:"textarea"===a.name&&le(g.value)&&(c=Ro),c&&(f=new c(a))&&f.keypath?f:void 0}function le(a){return a&&a.isBindable}function me(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function ne(a){Li(this.root,this.getAction(),{event:a})}function oe(){return this.action.toString().trim()}function pe(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(Rh.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:a.tagName,event:b}}),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=Im(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=Xo.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Gm(g,a,function(a){return g.resolve(b,a)}))}),this.fire=qe):(d=c.n||c,"string"!=typeof d&&(d=new Rr({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Rr({template:c.d,root:this.root,owner:this.element}),this.fire=se):c.a&&(this.params=c.a,this.fire=re))}function qe(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Ki.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Ki.dequeue(b)}function re(a){Li(this.root,this.getAction(),{event:a,args:this.params})}function se(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),Li(this.root,this.getAction(),{event:a,args:b})}function te(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=Em(c.element.parentFragment))&&(e=Em.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function ue(){var a,b=this.name;if(!this.invalid){if(a=k("events",this.root,b))this.custom=a(this.node,ve(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(_o[b]||Rh.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:b}}));this.node.addEventListener(b,Zo,!1)}this.hasListener=!0}}function ve(a){return $o[a]||($o[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),$o[a]}function we(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function xe(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function ye(a,b){this.keypaths[a]=b}function ze(){return this.method?void this.refResolvers.forEach(P):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Ae(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Zo,!1),this.hasListener=!1}function Be(){var a=this;this.dirty||(this.dirty=!0,li.scheduleTask(function(){Ce(a),a.dirty=!1})),this.parentFragment.bubble()}function Ce(a){var b,c,d,e,f;b=a.node,b&&(e=x(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?De(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function De(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Ee(a,b){a.select=Ge(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Fe(a){a.select&&w(a.select.options,a)}function Ge(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function He(a){var b,c,d,e,f,g;this.type=Mk,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=Tn(c.e),"option"===this.name&&Ee(this,c),"select"===this.name&&(this.options=[],this.bubble=Be),"form"===this.name&&(this.formBindings=[]),Rn(this,c.a||{}),this.attributes=ro(this,c.a),this.conditionalAttributes=uo(this,c.m),c.f&&(this.fragment=new Rr({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=To(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=ip(this,c.v)),c.o&&(this.decorator=new np(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Ie(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&D(e,"keypath",a,b)}function Je(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Ke(a){a.node.addEventListener("reset",Me,!1)}function Le(a){a.node.removeEventListener("reset",Me,!1)}function Me(){var a=this._ractive.proxy;li.start(),a.formBindings.forEach(Ne),li.end()}function Ne(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Oe(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Rr({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Rr({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=k("transitions",d,e),this._fn||Rh.error({debug:d.debug,message:"missingPlugin",args:{plugin:"transition",name:e}}))}function Pe(a){return a}function Qe(){Rp.hidden=document[Np]}function Re(){Rp.hidden=!0}function Se(){Rp.hidden=!1}function Te(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Ue(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Ue(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function Ve(){var a,b,c,d=this,e=this.root;return a=We(this),b=this.node=kh(this.name,a),e.constructor.css&&this.parentFragment.getNode()===e.el&&this.node.setAttribute("data-ractive-css",e.constructor._guid),uh(this.node,"_ractive",{value:{proxy:this,keypath:di(this.parentFragment),events:th(null),root:e}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=aq,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Ch):"style"===this.name?(this.bubble=_p,this.bubble(),this.fragment.unrender=Ch):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Ch:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&Xe(this),"img"===this.name?Je(this):"form"===this.name?Ke(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&li.scheduleTask(function(){d.decorator.torndown||d.decorator.init()},!0),e.transitionsEnabled&&this.intro&&(c=new bq(this,this.intro,!0),li.registerTransition(c),li.scheduleTask(function(){return c.start()},!0),this.transition=c),this.node.autofocus&&li.scheduleTask(function(){return d.node.focus()},!0),Ye(this),this.node}function We(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?dh.svg:(d=a.parent)?"foreignObject"===d.name?dh.html:d.node.namespaceURI:a.root.el.namespaceURI}function Xe(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function Ye(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function Ze(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function $e(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function _e(a){var b=a.toString();return b?" "+b:""}function af(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(P),"option"===this.name&&Fe(this),this.attributes.forEach(P),this.conditionalAttributes.forEach(P)}function bf(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&li.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(Q),this.decorator&&li.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new bq(this,this.outro,!1),li.registerTransition(d),li.scheduleTask(function(){return d.start()})),this.liveQueries&&cf(this),"form"===this.name&&Le(this)}function cf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function df(a,b){var c=jq.exec(b)[0];return null===a||c.length<a.length?c:a}function ef(a,b){var c;if(c=ff(a,b))return c;if(c=kk.fromId(b,{noThrow:!0})){c=kq(c);var d=kk.parse(c,kk.getParseOptions(a));return a.partials[b]=d.t}}function ff(a,b){var c=l("partials",a,b);if(c){var d,e=c.partials[b];if("function"==typeof e&&(d=e.bind(c),d.isOwner=c.partials.hasOwnProperty(b),e=d(c.data,kk)),!e&&""!==e)return void Rh.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:b}});if(!kk.isParsed(e)){var f=kk.parse(e,kk.getParseOptions(c));f.p&&Rh.warn({debug:a.debug,message:"noNestedPartials",args:{rname:b}});var g=d?c:gf(c,b);g.partials[b]=e=f.t}return d&&(e._fn=d),e.v?e.t:e}}function gf(a,b){return a.partials.hasOwnProperty(b)?a:hf(a.constructor,b)}function hf(a,b){return a?a.partials.hasOwnProperty(b)?a:hf(a._Parent,b):void 0}function jf(a,b){var c,d=l("components",a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void Rh.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:b}});"string"==typeof c&&(c=jf(a,c)),c._fn=e,d.components[b]=c}return c}function kf(){var a=this.instance.fragment.detach();return qq.fire(this.instance),a}function lf(a){return this.instance.fragment.find(a)}function mf(a,b){return this.instance.fragment.findAll(a,b)}function nf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function of(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function pf(){return this.parentFragment.findNextNode(this)}function qf(){return this.rendered?this.instance.fragment.firstNode():null}function rf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1)if(e=g.adapt[d],e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,tf(a)),f.value=b,b;return b}function sf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function tf(a){var b;return yq[a]||(b=a?a+".":"",yq[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?sf(c,a):c:void 0}),yq[a]}function uf(a){var b,c,d=[ci];for(b=a.length;b--;)for(c=a[b].parent;c&&!c.isRoot;)s(d,c),c=c.parent;return d}function vf(a,b,c){var d;xf(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){wf(a,c,b)}))}function wf(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),xf(a,f),wf(a,b,f)})}function xf(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function yf(){function a(c){var d,e;f.noCascade.hasOwnProperty(c.str)||((e=f.deps.computed[c.str])&&e.forEach(function(c){var d=c.key;c.viewmodel===f?(f.clearCache(d.str),c.invalidate(),b.push(d),a(d)):c.viewmodel.mark(d)}),(d=f.depsMap.computed[c.str])&&d.forEach(a))}var b,c,d,e=this,f=this,g={};return b=this.changes,b.length?(b.slice().forEach(a),c=Aq(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=f.deps.computed[a.str])&&(e.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return Bq(e,a,!0)}),b.forEach(function(a){return Bq(e,a)})),this.deps.observers&&(c.forEach(function(a){return zf(e,null,a,"observers")}),Bf(this,b,"observers")),this.deps["default"]&&(d=[],c.forEach(function(a){return zf(e,d,a,"default")}),d.length&&Af(this,d,b),Bf(this,b,"default")),b.forEach(function(a){g[a.str]=e.get(a)}),this.implicitChanges={},this.noCascade={},g):void 0}function zf(a,b,c,d){var e,f;(e=Cf(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function Af(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Bf(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Cf(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b.str])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Cf(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function Df(){this.captureGroups.push([])}function Ef(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Ff(a){var b="var __ractive=this;return("+a.replace(Fq,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function Gf(a,b){var c=b.firstKey;return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function Hf(a,b){return b=Gq(b),this.computations[a.str]=new Kq(this.ractive,a,b)}function If(a,b){var c,d,e,f,g,h=this.ractive,i=this.cache,j=a.str;return b=b||Nq,b.capture&&(g=this.captureGroups[this.captureGroups.length-1])&&(~g.indexOf(a)||g.push(a)),(c=this.mappings[a.firstKey])?c.get(a,b):a.isSpecial?a.value:(void 0===i[j]?((e=this.computations[j])&&!e.bypass?(d=e.get(),this.adapt(j,d)):(f=this.wrapped[j])?d=f.value:a.isRoot?(this.adapt("",h.data),d=h.data):d=Jf(this,a),i[j]=d):d=i[j],!b.noUnwrap&&(f=this.wrapped[j])&&(d=f.get()),d===Mq?void 0:d)}function Jf(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=Mq):void 0}function Kf(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(F(a),this.ractive.computed[a]),c.push(b),a in this.mappings&&Rh.critical({message:"Cannot map to a computed property ('"+a+"')"});c.forEach(Lf)}function Lf(a){a.init()}function Mf(a,b){this.keypath=a,this.viewmodel=b}function Nf(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.deps=[],this.unresolved=[],this.trackData=b.trackData,this.resolved=!1}function Of(a,b){var c=this.mappings[a.str]=new Rq(a,b);return c.initViewmodel(this),c}function Pf(a,b){var c,d=a.str;li.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var e=b?b.dontTeardownWrapper:!1;this.clearCache(d,e)}function Qf(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=Sf(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;Fh("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=Uq(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Rf(a){return JSON.stringify(a)}function Sf(a){if(a===!0)return Rf;if("string"==typeof a)return Vq[a]||(Vq[a]=function(b){return b[a]}),Vq[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Tf(a,b,c){void 0===c&&(c="default");var d,e,f;b.isStatic||((d=this.mappings[a.firstKey])?d.register(a,b,c):(e=this.deps[c]||(this.deps[c]={}),f=e[a.str]||(e[a.str]=[]),f.push(b),a.isRoot||Uf(this,a,c)))}function Uf(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c]||(a.depsMap[c]={}),e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function Vf(){return this.captureGroups.pop()}function Wf(a,b,c){void 0===c&&(c={});var d,e,f,h;if(!c.noMapping&&(d=this.mappings[a.firstKey]))return d.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;e.set(b),b=e.get()}g(this.cache[a.str],b)||(f=this.wrapped[a.str],f&&f.reset&&(h=f.reset(b)!==!1,h&&(b=f.get())),e||h||Xf(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))}function Xf(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=Pj(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function Yf(a,b,c){var d,e,f,g=this;if(e=c.length,c.forEach(function(b,c){-1===b&&g.mark(a.join(c),_q)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a.str])&&d.filter(Zf).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){for(this.mark(a.join("length"),$q),f=e;f<b.length;f+=1)this.mark(a.join(f));for(f=b.length;e>f;f+=1)this.mark(a.join(f),_q)}}function Zf(a){return"function"==typeof a.shuffle}function $f(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function _f(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.firstKey])return d.unregister(a,b,c);if(e=this.deps[c][a.str],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a.isRoot||ag(this,a,c)}}function ag(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(w(e,b),e["_"+b.str]=void 0),b=b.parent}function bg(a){this.hook=new Uh(a),this.inProcess={},this.queue={}}function cg(a,b){return a[b._guid]||(a[b._guid]=[])}function dg(a,b){var c=cg(a.queue,b);for(a.hook.fire(b);c.length;)dg(a,c.shift());delete a.queue[b._guid]}function eg(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;if(fg(b,d),gr.fire(zk.getConstructTarget(b,c),c),zk.init(b.constructor,b,c),b.magic&&!ch)throw new Error("Getters and setters (magic mode) are not supported in this browser");hr.fire(b),ir.begin(b),b.viewmodel=new er(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Rr({template:b.template,root:b,owner:b})),ir.end(b),(e=a(b.el))&&b.render(e,b.append)}function fg(a,b){a._guid="r-"+jr++,a._subs=th(null),a._config={},a._twowayBindings=th(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function gg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Rr({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key.str,this.fragment.getValue())}function hg(a,b){return b.parameters?ch&&"legacy"!==b.parameters?jg(a,b):ig(a):a.data}function ig(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function jg(a,b){var c=kg(a,b);return new c(a)}function kg(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=lg(a,c.defined)),c.Constructor}function lg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(li.start(),c.setValue(a),li.end()):this._data[b]=a},enumerable:!0},a},b),vh(e={},d),e.constructor=c,c.prototype=e,c}function mg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=Gm(d,c.r,e):c.x?this.resolver=new Km(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new Om(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function ng(a,b,c){var d,e,f;return c?(b.parameters&&(f=og(b)),d=new pg(a,c,f),e=nr(d,b),{data:e,mappings:d.mappings}):{data:{}}}function og(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function pg(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=th(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(F(a),b[a])})}function qg(a){return 1===a.length&&a[0].t===Jk}function rg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&sg(a.instance,a.root,c,b[c])}function sg(a,b,c,d){"string"!=typeof d&&Rh.error({debug:b.debug,message:"noComponentEventArguments"}),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Li(b,d,{event:a,args:c}),!1})}function tg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Qk,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=pr(this,b.prototype,a.template.a),lr(this,b,e,a.template.f,a.template.p),qr(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&Fh('The "intro", "outro" and "decorator" directives have no effect on components'),rr(this)}function ug(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function vg(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function wg(){return this.instance.fragment.toString()}function xg(){var a=this.instance;this.resolvers.forEach(P),yg(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&w(a.el.__ractive_instances__,a),wr.fire(a)}function yg(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function zg(a){this.shouldDestroy=a,this.instance.unrender()}function Ag(a){if("string"==typeof a.template)return new um(a);switch(a.template.t){case Jk:return"yield"===a.template.r?new Er(a):new Um(a);case Lk:return new nn(a);case Kk:return new Fn(a);case Mk:var b;return(b=pq(a.parentFragment.root,a.template.e))?new Ar(a,b):new hq(a);case Nk:return new oq(a);case Ok:return new Cr(a);case Sk:return new Gr(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Bg(a){var b,c=this;this.owner=a.owner,b=this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],a.template=v(a.template),this.items=a.template.map(function(b,d){return Hr({parentFragment:c,pElement:a.pElement,template:b,index:d})}).filter(Cg),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Cg(a){if(!a)throw new Error("null item");return!0}function Dg(a,b){D(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Eg(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Fg(a){return this.items?this.items.map(a?Hg:Gg).join(""):""
}function Gg(a){return a.toString()}function Hg(a){return a.toString(!0)}function Ig(){this.bound&&(this.items.forEach(Jg),this.bound=!1)}function Jg(a){a.unbind&&a.unbind()}function Kg(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Lg(a){var b,c,d,e,f;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&(this.data=a):this.data=a,d=zk.reset(this),e=d.length;e--;)if(Sr.indexOf(d[e])>-1){f=!0;break}if(f){var g;this.viewmodel.mark(ci),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Rr({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)}else b=li.start(this,!0),this.viewmodel.mark(ci),li.end();return Tr.fire(this,a),b}function Mg(a){var b,c;mk.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Rr({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Ng(a,b){var c,d,e=this;if(d=li.start(this,!0),j(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],a=F(I(a)),this.viewmodel.set(a,b))}else a=F(I(a)),Yr.test(a.str)?G(this,a.str).forEach(function(a){e.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return li.end(),d}function Og(a,b){return Kh(this,a,void 0===b?-1:-b)}function Pg(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&w(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():_h.resolve(),cs.fire(this),this._boundFunctions.forEach(Qg),a}function Qg(a){delete a.fn[a.prop]}function Rg(a,b){var c;return"string"!=typeof a&&Rh.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:a}}),c=this.get(a),this.set(a,!c,b)}function Sg(){return this.fragment.toString(!0)}function Tg(){var a,b,c=this;if(!this.fragment.rendered)return Rh.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"}),_h.resolve();for(a=li.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){zj.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),w(this.el.__ractive_instances__,this),gs.fire(this),li.end(),a}function Ug(a){var b;return a=F(a)||ci,b=li.start(this,!0),this.viewmodel.mark(a),li.end(),js.fire(this,a),b}function Vg(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||F(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=Wg(this,e),this.set(c)}function Wg(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a));b=a.attribute.value,e=a.getValue(),u(b,e)||g(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),u(e,f)||(c[a.str]=f)}),c}function Xg(a){for(var b={};a;)Yg(a,b),$g(a,b),a=a._Parent!==ss?a._Parent:!1;return b}function Yg(a,b){tk.forEach(function(c){Zg(c.useDefaults?a.prototype:a,b,c.name)})}function Zg(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function $g(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=fk(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}})}function _g(a){void 0===a&&(a={});var b,c,d=this;return a.prototype instanceof ss&&(a=ns(a)),b=function(a){kr(this,a)},c=th(d.prototype),c.constructor=b,vh(b,{_guid:{value:os++},defaults:{value:c},extend:{value:_g,writable:!0,configurable:!0},_Parent:{value:d}}),zk.extend(d,c,a),b.prototype=c,b}var ah,bh,ch,dh,eh,fh,gh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1,debug:!1},hh=gh,ih={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};ah="object"==typeof document,bh="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),ch=!0}catch(jh){ch=!1}dh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eh="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),fh=["o","ms","moz","webkit"];var kh,lh,mh,nh,oh,ph,qh,rh,sh;if(kh=eh?function(a,b){return b&&b!==dh.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==dh.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},ah){for(mh=kh("div"),nh=["matches","matchesSelector"],sh=function(a){return function(b,c){return b[a](c)}},qh=nh.length;qh--&&!lh;)if(oh=nh[qh],mh[oh])lh=sh(oh);else for(rh=fh.length;rh--;)if(ph=fh[qh]+oh.substr(0,1).toUpperCase()+oh.substring(1),mh[ph]){lh=sh(ph);break}lh||(lh=function(a,b){var c,d,e;for(d=a.parentNode,d||(mh.innerHTML="",d=mh,a=a.cloneNode(),mh.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else lh=null;var th,uh,vh,wh=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),ah&&Object.defineProperty(document.createElement("div"),"test",{value:0}),uh=Object.defineProperty}catch(xh){uh=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(xh){throw xh}ah&&Object.defineProperties(kh("div"),{test:{value:0}}),vh=Object.defineProperties}catch(xh){vh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&uh(a,c,b[c])}}try{Object.create(null),th=Object.create}catch(xh){th=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var yh,zh=Object.prototype.hasOwnProperty,Ah=Object.prototype.toString,Bh=/^\[object (?:Array|FileList)\]$/,Ch=function(){},Dh={};yh=bh?function(a,b){if(!b){if(Dh[a])return;Dh[a]=!0}console.warn("%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);")}:Ch;var Eh,Fh=yh,Gh=function(a,b,c,d){if(a===b)return m(b);if(d){var e=k("interpolators",c,d);if(e)return e(a,b)||m(b);Fh('Missing "'+d+'" interpolator. You may need to download a plugin from [TODO]')}return Jh.number(a,b)||Jh.array(a,b)||Jh.object(a,b)||m(b)},Hh=Gh,Ih={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Hh(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)zh.call(a,g)&&(zh.call(b,g)?(c.push(g),e[g]=Hh(a[g],b[g])):f[g]=a[g]);for(g in b)zh.call(b,g)&&!zh.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},Jh=Ih,Kh=n,Lh=o;"undefined"==typeof window?Eh=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(fh,0,window),Eh=window.requestAnimationFrame);var Mh,Nh=Eh;Mh="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Oh=Mh,Ph={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.',methodDeprecated:'The method "{deprecated}" has been deprecated in favor of "{replacement}" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',noTwowayExpressions:"Two-way binding does not work with expressions. Encountered ( {expression} ) on element {element}.",computedCannotMapTo:'Computed property "{key}" cannot be mapped to "{other}" because {reason}.',notUsed:'prevents forgetting trailing "," in cut and paste of previous line :)'},Qh={warn:function(a,b){(a.debug||b)&&this.warnAlways(a)},warnAlways:function(a){this.logger(p(a),a.allowDuplicates)},error:function(a){this.errorOnly(a),a.debug||this.warn(a,!0)},errorOnly:function(a){a.debug&&this.critical(a)},critical:function(a){var b=a.err||new Error(p(a));this.thrower(b)},logger:Fh,thrower:function(a){throw a},consoleError:function(a){bh?console.error(a.err):this.thrower(a.err)}},Rh=Qh,Sh={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};r.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&Rh.warnAlways({debug:a.debug,message:this.deprecate.message||"methodDeprecated",args:this.deprecate}),b?a.fire(this.event,b):a.fire(this.event)};var Th,Uh=r,Vh={},Wh={},Xh={};"function"==typeof Promise?Th=Promise:(Th=function(a){var b,c,d,e,f,g,h=[],i=[],j=Vh;d=function(a){return function(d){j===Vh&&(b=d,j=a,c=z(j===Wh?h:i,b),y(c))}},e=d(Wh),f=d(Xh);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Th(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),A(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==Vh&&y(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Th.all=function(a){return new Th(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Th.resolve=function(a){return new Th(function(b){b(a)})},Th.reject=function(a){return new Th(function(b,c){c(a)})});var Yh,Zh,$h,_h=Th,ai={},bi=B;Yh=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Zh={},$h=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=E(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.parent=""===a?null:F(b.join(".")),this.isRoot=!a},$h.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return F(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:F(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=bi(this.str))}};var ci=F(""),di=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return ci},ei=J,fi=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};fi.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,T(this)},decrementTotal:function(){this.totalChildren-=1,T(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;w(b,a),T(this)},init:function(){this.ready=!0,T(this)},detachNodes:function(){this.decoratorQueue.forEach(O),this.detachQueue.forEach(R),this.children.forEach(S)}};var gi,hi,ii=fi,ji=[],ki=new Uh("change");hi={start:function(a,b){var c,d;return b&&(c=new _h(function(a){return d=a})),gi={previousBatch:gi,transitionManager:new ii(d,gi&&gi.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&gi.viewmodels.push(a.viewmodel),c},end:function(){U(),gi.transitionManager.init(),!gi.previousBatch&&gi.instance&&(gi.instance.viewmodel.changes=[]),gi=gi.previousBatch},addViewmodel:function(a){return gi?-1===gi.viewmodels.indexOf(a)?(gi.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=gi.transitionManager,gi.transitionManager.add(a)},registerDecorator:function(a){gi.transitionManager.addDecorator(a)},addView:function(a){gi.views.push(a)},addUnresolved:function(a){ji.push(a)},removeUnresolved:function(a){w(ji,a)},detachWhenReady:function(a){gi.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(gi){for(c=gi;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var li=hi,mi=[],ni={tick:function(){var a,b,c;for(c=Oh(),li.start(),a=0;a<mi.length;a+=1)b=mi[a],b.tick(c)||mi.splice(a--,1);li.end(),mi.length?Nh(ni.tick):ni.running=!1},add:function(a){mi.push(a),ni.running||(ni.running=!0,Nh(ni.tick))},abort:function(a,b){for(var c,d=mi.length;d--;)c=mi[d],c.root===b&&c.keypath===a&&c.stop()}},oi=ni,pi=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Hh(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};pi.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(li.start(this.root),this.root.viewmodel.set(f,this.to),li.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&Fh("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),li.start(this.root),this.root.viewmodel.set(f,c),li.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&Fh("Animation was not found"),this.root._animations.splice(a,1)}};var qi=pi,ri={stop:Ch},si=X,ti=new Uh("detach"),ui=Z,vi=$,wi=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?lh(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},xi=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},yi=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=ab(a.component||a._ractive.proxy),d=ab(b.component||b._ractive.proxy),e=c[c.length-1],f=d[d.length-1];e&&e===f;)c.pop(),d.pop(),g=e,e=c[c.length-1],f=d[d.length-1];if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},zi=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):yi(a,b)},Ai=function(){this.sort(this._isComponentQuery?yi:zi),this._dirty=!1},Bi=function(){var a=this;this._dirty||(this._dirty=!0,li.scheduleTask(function(){a._sort()}))},Ci=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},Di=bb,Ei=cb,Fi=db,Gi=eb,Hi=fb,Ii=gb,Ji={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Ki=Ji,Li=hb,Mi=kb,Ni={capture:!0,noUnwrap:!0},Oi=lb,Pi=new Uh("insert"),Qi=mb,Ri=ob,Si=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Si.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;g(a,this.value)||(this.value=a,this.defer&&this.ready?li.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Ti,Ui=Si,Vi=pb,Wi=/\*/,Xi=Array.prototype.slice;Ti=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Ti.prototype={init:function(a){var b,c;if(b=Vi(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(F(c));else this.values=b},update:function(a){var b,c=this;if(Wi.test(a.str)){b=Vi(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(F(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?void li.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?void(this.values[b]=c):(this.updating=!0,g(c,this.values[b])&&this.ready||(d=Xi.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}};var Yi,Zi,$i,_i,aj,bj,cj=Ti,dj=/\*/,ej={},fj=qb,gj=rb,hj=sb,ij=function(a){return a.trim()},jj=function(a){return""!==a},kj=tb,lj=ub,mj=vb,nj=wb,oj=Array.prototype.slice,pj=Array.prototype,qj=function(a){return function(b){var c,d,f,g,h=oj.call(arguments,1),i=[];if(b=F(I(b)),c=this.viewmodel.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=nj(c,a,h),g=pj[a].apply(c,h),f=li.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),li.end(),f}},rj=qj("pop"),sj=qj("push"),tj="/* Ractive.js component styles */\n",uj={},vj=[];ah?($i=document.createElement("style"),$i.type="text/css",_i=document.getElementsByTagName("head")[0],bj=!1,aj=$i.styleSheet,Zi=function(){var a;vj.length?(a=tj+vj.join(" "),aj?aj.cssText=a:$i.innerHTML=a,bj||(_i.appendChild($i),bj=!0)):bj&&(_i.removeChild($i),bj=!1)},Yi={add:function(a){a.css&&(uj[a._guid]||(uj[a._guid]=0,vj.push(a.css),Zi()),uj[a._guid]+=1)},remove:function(a){a.css&&(uj[a._guid]-=1,uj[a._guid]||(w(vj,a.css),li.scheduleTask(Zi)))}}):Yi=null;var wj,xj,yj,zj=Yi,Aj=new Uh("render"),Bj=new Uh("complete"),Cj=yb,Dj=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},Ej=Array.prototype.slice,Fj=[],Gj=["pop","push","reverse","shift","sort","splice","unshift"];Gj.forEach(function(a){var b=function(){var b,c,d,e,f=Ej.call(arguments);for(b=nj(this,a,f),c=Array.prototype[a].apply(this,arguments),li.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],li.addViewmodel(d.root.viewmodel),Dj(d,this,a,b);return li.end(),this._ractive.setting=!1,c};uh(Fj,a,{value:b})}),wj={},wj.__proto__?(xj=function(a){a.__proto__=Fj},yj=function(a){a.__proto__=Array.prototype}):(xj=function(a){var b,c;for(b=Gj.length;b--;)c=Gj[b],uh(a,c,{value:Fj[c],configurable:!0})},yj=function(a){var b;for(b=Gj.length;b--;)delete a[Gj[b]]}),xj.unpatch=yj;var Hj,Ij,Jj,Kj=xj;Hj={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Ij(a,b,c)}},Ij=function(a,b,c){this.root=a,this.value=b,this.keypath=F(c),b._ractive||(uh(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Kj(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},Ij.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(Jj);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(Jj);d.splice(e,1)}}else delete a._ractive,Kj.unpatch(this.value)}},Jj="Something went wrong in a rather interesting way";var Lj,Mj,Nj=Hj,Oj=/^\s*[0-9]+\s*$/,Pj=function(a){return Oj.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Lj={filter:function(a,b,c){var d,f;return b?(b=F(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(f=c.viewmodel.get(b.parent),e(f)&&/^[0-9]+$/.test(b.lastKey)?!1:f&&("object"==typeof f||"function"==typeof f))):!1},wrap:function(a,b,c){return new Mj(a,b,c)}},Mj=function(a,b,c){var d,e,f;return c=F(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?void(-1===f.indexOf(this)&&f.push(this)):void Ab(this,b,e)},Mj.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,li.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Pj(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(xh){Lj=!1}var Qj,Rj,Sj=Lj;Sj&&(Qj={filter:function(a,b,c){return Sj.filter(a,b,c)&&Nj.filter(a)},wrap:function(a,b,c){return new Rj(a,b,c)}},Rj=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=Sj.wrap(a,b,c),this.arrayWrapper=Nj.wrap(a,b,c)},Rj.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var Tj,Uj,Vj,Wj=Qj,Xj={extend:function(a,b,c){b.adapt=Bb(b.adapt,v(c.adapt))},init:function(a,b,c){function d(a){return"string"==typeof a&&(a=k("adaptors",b,a),a||Rh.critical({message:"missingPlugin",args:{plugin:"adaptor",name:a}})),a}var e,f;if(e=b.adapt.map(d),f=v(c.adapt).map(d),b.adapt=Bb(e,f),b.magic){if(!ch)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.modifyArrays&&b.adapt.push(Wj),b.adapt.push(Sj)}b.modifyArrays&&b.adapt.push(Nj)}},Yj=Xj,Zj=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,$j=/\/\*.*?\*\//g,_j=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,ak=/^@media/,bk=/\[data-ractive-css="[a-z0-9-]+"]/g,ck=Cb,dk={name:"css",extend:function(a,b,c){var d,e=b.constructor._guid;(d=Fb(c.css,c,e)||Fb(a.css,a,e))&&(b.constructor.css=d)},init:function(){}},ek=dk,fk=function(a,b,c){return c||Gb(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},gk={name:"data",extend:function(a,b,c){b.data=Hb(a,b,c)},init:function(a,b,c){var d=c.data,e=Hb(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}},reset:function(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}},hk=gk,ik=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],jk={parse:Pb,fromId:Qb,isHashedId:Rb,isParsed:Sb,getParseOptions:Tb,createHelper:Ob},kk=jk,lk={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:Xb(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=Vb(b,e),b._config.template={fn:e,result:d}),d=Xb(d,b),b.template=d.t,d.p&&Yb(b.partials,d.p)},reset:function(a){var b,c=Ub(a);return c?(b=Xb(c,a),a.template=b.t,Yb(a.partials,b.p,!0),!0):void 0}},mk=lk;Tj=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],Uj=function(a,b){this.name=a,this.useDefaults=b},Uj.prototype={constructor:Uj,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=th(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},Vj=Tj.map(function(a){return new Uj(a,"computed"===a)});var nk,ok,pk,qk,rk,sk,tk=Vj,uk=Zb,vk=bc;qk={adapt:Yj,css:ek,data:hk,template:mk},pk=Object.keys(hh),sk=ec(pk.filter(function(a){return!qk[a]})),rk=ec(pk.concat(tk.map(function(a){return a.name}))),ok=[].concat(pk.filter(function(a){return!tk[a]&&!qk[a]}),tk,qk.data,qk.template,qk.css),nk={extend:function(a,b,c){return cc("extend",a,b,c)},init:function(a,b,c){return cc("init",a,b,c)},reset:function(a){return ok.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:ok,getConstructTarget:function(a,b){return b.onconstruct?{onconstruct:uk(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a}};var wk,xk,yk,zk=nk,Ak=fc,Bk=gc,Ck=hc,Dk=ic,Ek=jc,Fk=kc,Gk=lc,Hk=mc,Ik=1,Jk=2,Kk=3,Lk=4,Mk=7,Nk=8,Ok=9,Pk=13,Qk=15,Rk=16,Sk=18,Tk=20,Uk=21,Vk=22,Wk=23,Xk=24,Yk=26,Zk=27,$k=30,_k=31,al=32,bl=33,cl=34,dl=35,el=36,fl=40,gl=50,hl=51,il=52,jl=53,kl=54,ll="Expected a JavaScript expression",ml="Expected closing paren",nl=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,ol=function(a){var b;return(b=a.matchPattern(nl))?{t:Tk,v:b}:null},pl=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Xk,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Xk,v:"false"}):null};wk=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,xk=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,yk=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var ql,rl,sl,tl,ul,vl=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(wk)||b.matchPattern(xk)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(yk),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},wl=vl('"'),xl=vl("'"),yl=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=xl(a),a.matchString('"')?{t:Uk,v:c}:(a.pos=b,null)):a.matchString("'")?(c=wl(a),a.matchString("'")?{t:Uk,v:c}:(a.pos=b,null)):null},zl=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Al=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Bl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Cl=function(a){var b;return(b=yl(a))?Bl.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=ol(a))?b.v:(b=a.matchPattern(zl))?b:void 0},Dl=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=Cl(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:Zk,k:c,v:d}):(a.pos=b,null))},El=nc,Fl=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=El(a),a.allowWhitespace(),a.matchString("}")?{t:Wk,m:c}:(a.pos=b,null)):(a.pos=b,null)},Gl=oc,Hl=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=Gl(a),a.matchString("]")?{t:Vk,m:c}:(a.pos=b,null)):(a.pos=b,null)},Il=function(a){var b=ol(a)||pl(a)||yl(a)||Fl(a)||Hl(a);return b};ql=/^\.[a-zA-Z_$0-9]+/,sl=function(a){var b=a.matchPattern(rl);return b?"."+b:null},rl=/^\[(0|[1-9][0-9]*)\]/,tl=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,ul=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Jl,Kl,Ll=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?Al:zl,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&ul.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&tl.test(d))return{t:Yk,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(ql)||sl(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:$k,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},Ml=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(ll),a.allowWhitespace(),a.matchString(")")||a.error(ml),{t:cl,x:c}):null},Nl=function(a){return Il(a)||Ll(a)||Ml(a)},Ol=pc,Pl=function(a){var b,c,d,e;if(c=Nl(a),!c)return null;for(;c;)if(b=a.pos,d=Ol(a))c={t:al,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=Gl(a),a.allowWhitespace(),a.matchString(")")||a.error(ml),c={t:fl,x:c},e&&(c.o=e)}return c};Kl=function(a,b){return function(c){var d;
return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(ll),{s:a,o:d,t:bl}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Pl,a=0,b=d.length;b>a;a+=1)c=Kl(d[a],e),e=c;Jl=e}();var Ql,Rl,Sl=Jl;Rl=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:el,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Sl,a=0,b=d.length;b>a;a+=1)c=Rl(d[a],e),e=c;Ql=e}();var Tl,Ul,Vl=Ql,Wl=function(a){var b,c,d,e;return(c=Vl(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(ll),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(ll),{t:dl,o:[c,d,e]}):(a.pos=b,c)):null},Xl=function(a){var b,c=[];return rc(a,c),b={r:c,s:sc(this,a,c)}},Yl=/^\s+/;Ul=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Ul.prototype=Error.prototype,Tl=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Tl.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return Wl(this)},flattenExpression:Xl,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Ul(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(Yl)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Tl.extend=function(a){var b,c,d=this;b=function(a,b){Tl.call(this,a,b)},b.prototype=th(d.prototype);for(c in a)zh.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Tl.extend,b};var Zl,$l,_l,am,bm,cm,dm,em=Tl;$l={"true":!0,"false":!1,undefined:void 0,"null":null},_l=new RegExp("^(?:"+Object.keys($l).join("|")+")"),am=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,bm=/\$\{([^\}]+)\}/g,cm=/^\$\{([^\}]+)\}/,dm=/^\s*$/,Zl=em.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&dm.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(cm),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(_l))?{v:$l[b]}:void 0},function(a){var b;return(b=a.matchPattern(am))?{v:+b}:void 0},function(a){var b,c=yl(a);return c&&(b=a.values)?{v:c.v.replace(bm,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=tc(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var fm,gm,hm,im,jm,km,lm,mm,nm=function(a,b){var c=new Zl(a,{values:b});return c.result},om=uc,pm=vc,qm=wc,rm=xc;fm=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,gm=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,hm={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},im=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],jm=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(hm).join("|")+"));?","g"),km=/</g,lm=/>/g,mm=/&/g;var sm=function(){return b(this.node)},tm=function(a){this.type=Ik,this.text=a.template};tm.prototype={detach:sm,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Ac(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var um=tm,vm=Bc,wm=Cc,xm=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=ei(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):li.addUnresolved(this)};xm.prototype={resolve:function(a){this.keypath&&!a&&li.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(F(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||li.removeUnresolved(this)}};var ym=xm,zm=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},Am={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};zm.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=Am[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(F("@"+d.prefix+Dc(this.cached,d)));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===il&&void 0!==(a=Dc(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback(F("@"+d.prefix+a));c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Dc(c,d)))return this.callback(F("@"+d.prefix+a.str));c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Bm=zm,Cm=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};Cm.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(F("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Dm=Cm,Em=Ec;Ec.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var Fm,Gm=Fc,Hm={},Im=Gc,Jm=Function.prototype.bind;Fm=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Gm(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},Fm.prototype={bubble:function(){this.ready&&(this.uniqueString=Ic(this.str,this.keypaths),this.keypath=Jc(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e,f=this;d=this.keypath,a=this.root.viewmodel.computations[d.str],a?this.root.viewmodel.mark(d):(e=Im(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:a.isSpecial?(b=a.value,function(){return b}):function(){var b=f.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=Lc(b,f.root)),b}}),c={deps:this.keypaths.filter(Kc),get:function(){var a=b.map(Hc);return e.apply(null,a)}},a=this.root.viewmodel.compute(d,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var Km=Fm,Lm=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===$k?this.refResolver=Gm(this,a.n,function(a){d.resolve(a)}):new Km(b,c,a,function(a){d.resolve(a)})};Lm.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Mm=Lm,Nm=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=ei(d,e,g))?this.base=f:this.baseResolver=new ym(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new Mm(a,h,g)}),this.ready=!0,this.bubble()};Nm.prototype={getKeypath:function(){var a=this.members.map(Mc);return!a.every(Nc)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(P)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=F(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Oc),this.bubble()}};var Om=Nm,Pm=Pc,Qm=Qc,Rm=Rc,Sm={getValue:wm,init:Pm,resolve:Qm,rebind:Rm},Tm=function(a){this.type=Jk,Sm.init(this,a)};Tm.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Sm.resolve,rebind:Sm.rebind,detach:sm,unbind:vm,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:Sm.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),g(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&li.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?Ac(b):b}};var Um=Tm,Vm=Sc,Wm=Tc,Xm=Uc,Ym=Vc,Zm=Wc,$m=Xc,_m=Yc,an=Zc,bn=$c,cn=function(a,b){Sm.rebind.call(this,a,b)},dn=ad,en=bd,fn=md,gn=nd,hn=od,jn=rd,kn=function(a){this.type=Lk,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===hl,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,Sm.init(this,a)};kn.prototype={bubble:Vm,detach:Wm,find:Xm,findAll:Ym,findAllComponents:Zm,findComponent:$m,findNextNode:_m,firstNode:an,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:Sm.getValue,shuffle:bn,rebind:cn,render:dn,resolve:Sm.resolve,setValue:en,toString:fn,unbind:gn,unrender:hn,update:jn};var ln,mn,nn=kn,on=sd,pn=td,qn=ud,rn=vd,sn={};try{kh("table").innerHTML="foo"}catch(xh){ln=!0,mn={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var tn=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(ln&&(e=mn[b.tagName])?(d=wd("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===dh.svg?(d=wd("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=wd(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},un=xd,vn=zd,wn=Ad,xn=Bd,yn=Cd,zn=Dd,An=function(a){this.type=Kk,Sm.init(this,a)};An.prototype={detach:on,find:pn,findAll:qn,firstNode:rn,getValue:Sm.getValue,rebind:Sm.rebind,render:vn,resolve:Sm.resolve,setValue:wn,toString:xn,unbind:vm,unrender:yn,update:zn};var Bn,Cn,Dn,En,Fn=An,Gn=function(){this.parentFragment.bubble()},Hn=Ed,In=function(a){return this.node?lh(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},Jn=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Kn=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Ln=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Mn=Fd,Nn=Gd,On=Hd,Pn=/^true|on|yes|1$/i,Qn=/^[0-9]+$/,Rn=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||Pn.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&Qn.test(c)?parseInt(c):0===c||Pn.test(c),delete b.lazy)},Sn=Id;Bn="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Cn="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Dn=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},En=Dn(Bn.concat(Cn));var Tn=function(a){var b=a.toLowerCase();return En[b]||b},Un=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==dh.html?Tn(b):b;else if(b=b.substring(c+1),a.name=Tn(b),a.namespace=dh[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},Vn=Jd,Wn=Kd,Xn=Ld,Yn={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Zn=Md,$n=Nd,_n=Pd,ao=Qd,bo=Rd,co=Sd,eo=Td,fo=Ud,go=Vd,ho=Wd,io=Xd,jo=Yd,ko=Zd,lo=$d,mo=_d,no=ae,oo=function(a){this.init(a)};oo.prototype={bubble:Sn,init:Wn,rebind:Xn,render:Zn,toString:$n,unbind:_n,update:no};var po,qo=oo,ro=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new qo({element:a,name:c,value:b[c],root:a.root}),e.push(e[c]=d));return e};"undefined"!=typeof document&&(po=kh("div"));var so=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Rr({root:a.root,owner:this,template:[b]})};so.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===dh.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=be(a,this.isSvg),this.attributes.filter(function(a){return ce(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var to=so,uo=function(a,b){return b?b.map(function(b){return new to(a,b)}):[]},vo=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return Rh.error({debug:this.root.debug,message:"noTwowayExpressions",args:{expression:c.str.slice(2,-1).replace("-","."),element:a.tagName}}),!1}else b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=de(a))&&(this.resetValue=d,e.formBindings.push(this))};vo.prototype={handleChange:function(){var a=this;li.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),li.scheduleTask(function(){return a.attribute.locked=!1}),li.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(w(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},vo.extend=function(a){var b,d=this;return b=function(a){vo.call(this,a),this.init&&this.init()},b.prototype=th(d.prototype),c(b.prototype,a),b.extend=vo.extend,b};var wo,xo=vo,yo=ee,zo=xo.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",yo,!1),this.root.lazy||(a.addEventListener("input",yo,!1),a.attachEvent&&a.addEventListener("keyup",yo,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",yo,!1),a.removeEventListener("input",yo,!1),a.removeEventListener("keyup",yo,!1)},getValue:function(){return this.element.node.innerHTML}}),Ao=zo,Bo={},Co=fe,Do=xo.extend({name:"checked",init:function(){this.siblings=Co(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",yo,!1),a.attachEvent&&a.addEventListener("click",yo,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",yo,!1),a.removeEventListener("click",yo,!1)},handleChange:function(){li.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),li.end()},getValue:function(){return this.element.node.checked},unbind:function(){w(this.siblings,this)}}),Eo=Do,Fo=xo.extend({name:"name",init:function(){this.siblings=Co(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",yo,!1),a.attachEvent&&a.addEventListener("click",yo,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",yo,!1),a.removeEventListener("click",yo,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&xo.prototype.handleChange.call(this)},rebound:function(a,b){var c;xo.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){w(this.siblings,this)}}),Go=Fo,Ho=xo.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=Co(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){w(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?t(a,b):a==b,c.name="{{"+this.keypath.str+"}}",c.checked=this.isChecked,c.addEventListener("change",yo,!1),c.attachEvent&&c.addEventListener("click",yo,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",yo,!1),a.removeEventListener("click",yo,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,xo.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ge).map(he)}}),Io=Ho,Jo=xo.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",yo,!1),a.attachEvent&&a.addEventListener("click",yo,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",yo,!1),a.removeEventListener("click",yo,!1)},getValue:function(){return this.element.node.checked}}),Ko=Jo,Lo=xo.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",yo,!1)},unrender:function(){this.element.node.removeEventListener("change",yo,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,li.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Mo=Lo,No=Mo.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",yo,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",yo,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&u(c,b)||Mo.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,li.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Oo=No,Po=xo.extend({render:function(){this.element.node.addEventListener("change",yo,!1)},unrender:function(){this.element.node.removeEventListener("change",yo,!1)},getValue:function(){return this.element.node.files}}),Qo=Po;wo=xo.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:h(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",yo,!1),a||(b.addEventListener("input",c?je:yo,!1),b.attachEvent&&b.addEventListener("keyup",c?je:yo,!1)),b.addEventListener("blur",ie,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",yo,!1),a.removeEventListener("input",yo,!1),a.removeEventListener("keyup",yo,!1),a.removeEventListener("blur",ie,!1)}});var Ro=wo,So=Ro.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),To=ke,Uo=me,Vo=ne,Wo=oe,Xo=/^event(?:\.(.+))?/,Yo=pe,Zo=te,$o={},_o={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},ap=ue,bp=we,cp=xe,dp=ye,ep=ze,fp=Ae,gp=function(a,b,c){this.init(a,b,c)};gp.prototype={bubble:Uo,fire:Vo,getAction:Wo,init:Yo,listen:ap,rebind:bp,render:cp,resolve:dp,unbind:ep,unrender:fp};var hp=gp,ip=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new hp(a,e[c],b[d]),g.push(f);return g},jp=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Rr({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Rr({template:b.d,root:c,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getArgsList(),f.ready&&f.update()}),this.fn=k("decorators",c,d),this.fn||Rh.error({debug:c.debug,message:"missingPlugin",args:{plugin:"decorator",name:d}}))};jp.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var kp,lp,mp,np=jp,op=He,pp=Ie,qp=Oe,rp=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};ah?(lp={},mp=kh("div").style,kp=function(a){var b,c,d;if(a=rp(a),!lp[a])if(void 0!==mp[a])lp[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=fh.length;b--;)if(c=fh[b],void 0!==mp[c+d]){lp[a]=c+d;break}return lp[a]}):kp=null;var sp,tp,up=kp;ah?(tp=window.getComputedStyle||legacy__default.getComputedStyle,sp=function(a){var b,c,d,f,g;if(b=tp(this.node),"string"==typeof a)return g=b[up(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[up(f)],"0px"===g&&(g=0),c[f]=g;return c}):sp=null;var vp=sp,wp=function(a,b){var c;if("string"==typeof a)this.node.style[up(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[up(c)]=a[c]);return this},xp=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(Fh('Missing easing function ("'+a.easing+'"). You may need to download a plugin from [TODO]'),b=Pe)):b="function"==typeof a.easing?a.easing:Pe,this.easing=b,this.start=Oh(),this.end=this.start+this.duration,this.running=!0,oi.add(this)};xp.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var yp,zp,Ap,Bp,Cp,Dp,Ep,Fp,Gp=xp,Hp=new RegExp("^-(?:"+fh.join("|")+")-"),Ip=function(a){return a.replace(Hp,"")},Jp=new RegExp("^(?:"+fh.join("|")+")([A-Z])"),Kp=function(a){var b;return a?(Jp.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Lp={},Mp={};ah?(zp=kh("div").style,function(){void 0!==zp.transition?(Ap="transition",Bp="transitionend",Cp=!0):void 0!==zp.webkitTransition?(Ap="webkitTransition",Bp="webkitTransitionEnd",Cp=!0):Cp=!1}(),Ap&&(Dp=Ap+"Duration",Ep=Ap+"Property",Fp=Ap+"TimingFunction"),yp=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[Ep]=d.map(up).map(Kp).join(","),a.node.style[Fp]=Kp(c.easing||"linear"),a.node.style[Dp]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(rp(Ip(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Bp,j,!1),h=!0,i())},a.node.addEventListener(Bp,j,!1),setTimeout(function(){for(var e,k,l,m,n,o=d.length,p=[];o--;)m=d[o],e=f+m,Cp&&!Mp[e]&&(a.node.style[up(m)]=b[m],Lp[e]||(k=a.getStyle(m),Lp[e]=a.getStyle(m)!=b[m],Mp[e]=!Lp[e],Mp[e]&&(a.node.style[up(m)]=k))),(!Cp||Mp[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?Fh("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],p.push({name:up(m),interpolator:Hh(parseFloat(k),parseFloat(b[m])),suffix:n}));
p.length?new Gp({root:a.root,duration:c.duration,easing:rp(c.easing||""),step:function(b){var c,d;for(d=p.length;d--;)c=p[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Bp,j,!1),h=!0,i())},0)},c.delay||0)}):yp=null;var Np,Op,Pp,Qp,Rp,Sp=yp;if("undefined"!=typeof document){if(Np="hidden",Rp={},Np in document)Pp="";else for(Qp=fh.length;Qp--;)Op=fh[Qp],Np=Op+"Hidden",Np in document&&(Pp=Op);void 0!==Pp?(document.addEventListener(Pp+"visibilitychange",Qe),Qe()):("onfocusout"in document?(document.addEventListener("focusout",Re),document.addEventListener("focusin",Se)):(window.addEventListener("pagehide",Re),window.addEventListener("blur",Re),window.addEventListener("pageshow",Se),window.addEventListener("focus",Se)),Rp.hidden=!1)}var Tp,Up,Vp,Wp=Rp;ah?(Up=window.getComputedStyle||legacy__default.getComputedStyle,Tp=function(a,b,c){var d,e=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Wp.hidden)return this.setStyle(a,b),Vp||(Vp=_h.resolve());"string"==typeof a?(d={},d[a]=b):(d=a,c=b),c||(Fh('The "'+this.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),c=this);var f=new _h(function(a){var b,f,g,h,i,j,k;if(!c.duration)return e.setStyle(d),void a();for(b=Object.keys(d),f=[],g=Up(e.node),i={},j=b.length;j--;)k=b[j],h=g[up(k)],"0px"===h&&(h=0),h!=d[k]&&(f.push(k),e.node.style[up(k)]=h);return f.length?void Sp(e,d,c,f,a):void a()});return f}):Tp=null;var Xp=Tp,Yp=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},Zp=Te,$p=function(a,b,c){this.init(a,b,c)};$p.prototype={init:qp,start:Zp,getStyle:vp,setStyle:wp,animateStyle:Xp,processParams:Yp};var _p,aq,bq=$p;_p=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},aq=function(){this.node.type&&"text/javascript"!==this.node.type||Fh("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var cq=Ve,dq=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(_e).join("")+this.conditionalAttributes.map(_e).join(""),"option"===this.name&&Ze(this)&&(a+=" selected"),"input"===this.name&&$e(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Ac(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),gm.test(this.template.e)||(a+="</"+this.template.e+">"),a)},eq=af,fq=bf,gq=function(a){this.init(a)};gq.prototype={bubble:Gn,detach:Hn,find:In,findAll:Jn,findAllComponents:Kn,findComponent:Ln,findNextNode:Mn,firstNode:Nn,getAttribute:On,init:op,rebind:pp,render:cq,toString:dq,unbind:eq,unrender:fq};var hq=gq,iq=/^\s*$/,jq=/^\s*/,kq=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&iq.test(c)&&b.shift(),d=b[b.length-1],void 0!==d&&iq.test(d)&&b.pop(),e=b.reduce(df,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},lq=ef,mq=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},nq=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=Nk,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Sm.init(this,a),!this.keypath&&(c=lq(this.root,this.name))&&(vm.call(this),this.isNamed=!0,this.setTemplate(c))};nq.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||Rm.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Sm.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=lq(this.root,""+a)),!b&&this.name&&(b=lq(this.root,this.name))&&(vm.call(this),this.isNamed=!0),b||Rh.error({debug:this.root.debug,message:"noTemplateForPartial",args:{name:this.name}}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&li.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Rr({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===Ik?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?mq(b,e[0]):b):b},unbind:function(){this.isNamed||vm.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var oq=nq,pq=jf,qq=new Uh("detach"),rq=kf,sq=lf,tq=mf,uq=nf,vq=of,wq=pf,xq=qf,yq={},zq=rf,Aq=uf,Bq=vf,Cq=yf,Dq=Df,Eq=Ef,Fq=/\$\{([^\}]+)\}/g,Gq=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:Ff(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:Ff(a.get),set:a.set}),a)},Hq=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Hq.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}};var Iq=Hq,Jq=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};Jq.prototype={constructor:Jq,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,h;if(!e)for(h=b.length;h--;)if(c=b[h],f=a.viewmodel.get(c),!g(f,d.depValues[c.str]))return d.depValues[c.str]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){Rh.warn({debug:a.debug,message:"failedComputation",args:{key:this.key,err:f.message||f}}),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Gf(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new Iq(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,li.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var Kq=Jq,Lq=Hf,Mq={FAILED_LOOKUP:!0},Nq={},Oq=If,Pq=Kf,Qq=Mf;Mf.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})};var Rq=Nf;Nf.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Qq(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var Sq=Of,Tq=Pf,Uq=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},Vq={},Wq=Qf,Xq=Tf,Yq=Vf,Zq=Wf,$q={implicit:!0},_q={noCascade:!0},ar=Yf,br=$f,cr=_f,dr=function(a,b){var c,d;this.ractive=a,this.mappings=b||th(null);for(c in b)b[c].initViewmodel(this);if(a.data&&a.parameters!==!0)for(c in a.data)(d=this.mappings[c])&&void 0===d.getValue()&&d.setValue(a.data[c]);this.cache={},this.cacheMap=th(null),this.deps={computed:th(null),"default":th(null)},this.depsMap={computed:th(null),"default":th(null)},this.patternObservers=[],this.specials=th(null),this.wrapped=th(null),this.computations=th(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={}};dr.prototype={adapt:zq,applyChanges:Cq,capture:Dq,clearCache:Eq,compute:Lq,get:Oq,init:Pq,map:Sq,mark:Tq,merge:Wq,register:Xq,release:Yq,set:Zq,smartUpdate:ar,teardown:br,unregister:cr};var er=dr;bg.prototype={constructor:bg,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?cg(this.queue,b).push(a):dg(this,a),delete this.inProcess[a._guid]}};var fr=bg,gr=new Uh("construct"),hr=new Uh("config"),ir=new fr("init"),jr=0,kr=eg,lr=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&Rh.warn({debug:i.debug,message:"defaultElSpecified",args:{name:a.name}}),j=h;j;){if(j.owner.type===Rk){k=j.owner.container;break}j=j.parent}return g=th(b.prototype),kr(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g},mr=gg;gg.prototype={bubble:function(){this.dirty||(this.dirty=!0,li.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key.str,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var nr=hg,or=mg;mg.prototype={resolve:function(a){this.resolved=!0,this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(a.isSpecial)this.parameters.addData(this.key.str,a.value);else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;a.isSpecial?(this.parameters.addData(this.key.str,a.value),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key.str]?b.reversedMappings[this.key.str].rebind(a):b.mappings[this.key.str].resolve(a)}};var pr=ng;pg.prototype={add:function(a,b){if("string"==typeof b){var c=nm(b);this.addData(a.str,c?c.value:b)}else if(0===b)this.addData(a.str);else{var d;d=qg(b)?new or(this,a,b[0]).resolver:new mr(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c;return b&&(c=this.parentViewmodel.mappings[b.str]),this.mappings[a.str]=new Rq(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var qr=rg,rr=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},sr=tg,tr=ug,ur=vg,vr=wg,wr=new Uh("teardown"),xr=xg,yr=zg,zr=function(a,b){this.init(a,b)};zr.prototype={detach:rq,find:sq,findAll:tq,findAllComponents:uq,findComponent:vq,findNextNode:wq,firstNode:xq,init:sr,rebind:tr,render:ur,toString:vr,unbind:xr,unrender:yr};var Ar=zr,Br=function(a){this.type=Ok,this.value=a.template.c};Br.prototype={detach:sm,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Cr=Br,Dr=function(a){var b,c;this.type=Rk,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new Rr({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],li.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Dr.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),w(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Er=Dr,Fr=function(a){this.declaration=a.template.a};Fr.prototype={init:Ch,render:Ch,unrender:Ch,teardown:Ch,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Gr=Fr,Hr=Ag,Ir=Bg,Jr=Dg,Kr=Eg,Lr=Fg,Mr=Ig,Nr=Kg,Or=function(a){this.init(a)};Or.prototype={bubble:Ak,detach:Bk,find:Ck,findAll:Dk,findAllComponents:Ek,findComponent:Fk,findNextNode:Gk,firstNode:Hk,getArgsList:pm,getNode:qm,getValue:rm,init:Ir,rebind:Jr,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Kr,toString:Lr,unbind:Mr,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Nr};var Pr,Qr,Rr=Or,Sr=["template","partials","components","decorators","events"],Tr=new Uh("reset"),Ur=Lg,Vr=function(a,b){function c(b,d,f){f&&f.partials[a]||b.forEach(function(b){b.type===Nk&&b.getPartialName()===a&&d.push(b),b.fragment&&c(b.fragment.items,d,f),e(b.fragments)?c(b.fragments,d,f):e(b.items)?c(b.items,d,f):b.type===Qk&&b.instance&&c(b.instance.fragment.items,d,b.instance),b.type===Mk&&(e(b.attributes)&&c(b.attributes,d,f),e(b.conditionalAttributes)&&c(b.conditionalAttributes,d,f))})}var d,f=[];return c(this.fragment.items,f),this.partials[a]=b,d=li.start(this,!0),f.forEach(function(b){b.value=void 0,b.setValue(a)}),li.end(),d},Wr=Mg,Xr=qj("reverse"),Yr=/\*/,Zr=Ng,$r=qj("shift"),_r=qj("sort"),as=qj("splice"),bs=Og,cs=new Uh("teardown"),ds=Pg,es=Rg,fs=Sg,gs=new Uh("unrender"),hs=Tg,is=qj("unshift"),js=new Uh("update"),ks=Ug,ls=Vg,ms={add:Lh,animate:si,detach:ui,find:vi,findAll:Ei,findAllComponents:Fi,findComponent:Gi,findContainer:Hi,findParent:Ii,fire:Mi,get:Oi,insert:Qi,merge:Ri,observe:gj,observeOnce:hj,off:kj,on:lj,once:mj,pop:rj,push:sj,render:Cj,reset:Ur,resetPartial:Vr,resetTemplate:Wr,reverse:Xr,set:Zr,shift:$r,sort:_r,splice:as,subtract:bs,teardown:ds,toggle:es,toHTML:fs,toHtml:fs,unrender:hs,unshift:is,update:ks,updateModel:ls},ns=Xg,os=1,ps=_g,qs=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath.str,d.index={},(c=Em(b.proxy.parentFragment))&&(d.index=Em.resolve(c)),d):d};Pr=function(a){kr(this,a)},Qr={extend:{value:ps},getNodeInfo:{value:qs},parse:{value:parse__default},Promise:{value:_h},svg:{value:eh},magic:{value:ch},VERSION:{value:"0.6.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ih},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Jh},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},vh(Pr,Qr),Pr.prototype=c(ms,hh),Pr.prototype.constructor=Pr,Pr.defaults=Pr.prototype;var rs="function";if(typeof Date.now!==rs||typeof String.prototype.trim!==rs||typeof Object.keys!==rs||typeof Array.prototype.indexOf!==rs||typeof Array.prototype.forEach!==rs||typeof Array.prototype.map!==rs||typeof Array.prototype.filter!==rs||"undefined"!=typeof window&&typeof window.addEventListener!==rs)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var ss=Pr;return ss});