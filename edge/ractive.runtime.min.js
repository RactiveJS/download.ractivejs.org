/*
	ractive.runtime.min.js v0.6.1
	2014-12-12 - commit 722e6871 

	http://ractivejs.org
	http://twitter.com/RactiveJS

	Released under the MIT License.
*/

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&"function"==typeof require?module.exports=b():a.Ractive=b()}("undefined"!=typeof window?window:this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=vh.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=vh.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===zh.call(a)}function f(a){return Ah.test(zh.call(a))}function g(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function h(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===zh.call(a)}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===zh.call(a)}function k(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=Hh.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(m),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=Jh.test(a)?a.replace(Jh,d):a.replace(Gh,"").replace(Fh,function(a,b){var c,d;return Ih.test(b)?a:(c=b.split(",").map(l),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function l(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function m(a){return a.str}function n(a,b,c){var d,e=b.constructor._guid;(d=o(c.css,c,e)||o(a.css,a,e))&&(b.constructor.css=d)}function o(a,b,c){return a?b.noCssTransform?a:Kh(a,c):void 0}function p(a,b){return"function"==typeof b&&/_super/.test(a)}function q(a,b,c){var d=c.data||{},e=u(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return v(e,d)}function r(a,b,c){b.data=q(a,b,c)}function s(a,b,c){var d=c.data,e=q(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}}function t(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}function u(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return w(a,b),v(a,b)}function v(a,b){return"function"==typeof b?z(b,a):"function"==typeof a?y(b,a):x(b,a)}function w(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function x(a,b){return a=a||{},b?(w(b,a,!0),a):a}function y(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function z(a,b){var c;return c="function"!=typeof b?function(a){x(a,b)}:function(a){return b=Nh(b,function(){},!0),b.call(this,a)||a},Nh(a,c)}function A(a,b){var c=a.map(b);return a.forEach(function(a,b){c[a]=c[b]}),c}function B(a){var b=sh(Th);return b.parse=function(b,c){return C(b,c||a)},b}function C(a,b){if(!parse__default)throw new Error(Qh.missingParser);return parse__default(a,b||this.options)}function D(a,b){var c;if(!ch){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(E(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function E(a){return a&&"#"===a.charAt(0)}function F(a){return!("string"==typeof a)}function G(a){return a.defaults&&(a=a.defaults),Sh.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function H(a){var b,c=a._config.template;if(c&&c.fn)return b=I(a,c.fn),b!==c.result?(c.result=b,b=J(b,a)):void 0}function I(a,b){var c=Uh.createHelper(Uh.getParseOptions(a));return b.call(a,a.data,c)}function J(a,b){if("string"==typeof a)"#"===a[0]&&(a=Uh.fromId(a)),a=parse__default(a,Uh.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function K(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function L(a,b){this.name=a,this.useDefaults=b}function M(a,b){var c;return b.test(a)?b.getValue(a):!a.isolated&&(c=a.parent)?M(c,b):void 0}function N(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=O(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function O(a,b){var c;return b in a?!function(){var d=a[b];c="function"==typeof d?d:function(){return d}}():c=di,c}function P(a,b,c){if(b in a){if(c in a)throw new Error(Q(b,c,!0));Eh(Q(b,c)),a[c]=a[b]}}function Q(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function R(a){P(a,"eventDefinitions","events")}function S(a){e(a.adaptors)&&P(a,"adaptors","adapt")}function T(a){P(a,"beforeInit","onconstruct"),P(a,"init","onrender"),P(a,"complete","oncomplete"),R(a),S(a)}function U(a,b,c,d,e){Xh[b][a](c,d,e)}function V(a){return a in fh&&!(a in Zh.parseOptions)&&!(a in Xh)}function W(a,b,c,d){fi(d),U(a,"data",b,c,d),Zh.parseOptions.forEach(function(a){a in d&&(c[a]=d[a])});for(var e in d)if(V(e)){var f=d[e];c[e]="function"==typeof f?ei(b.prototype,e,f):f}Zh.registries.forEach(function(e){e[a](b,c,d)}),U(a,"template",b,c,d),U(a,"css",b,c,d),X(b.prototype,c,d)}function X(a,b,c){for(var d in c)if(!(d in $h)&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=ei(a,d,e)),b[d]=e}}function Y(a){return function(){return a}}function Z(a){var b=Qh[a.message]||a.message||"";return $(b,a.args)}function $(a,b){return a.replace(/{([^{}]*)}/g,function(a,c){return b[c]})}function _(a){this.event=a,this.method="on"+a,this.deprecate=oi[a]}function ab(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function bb(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function cb(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function db(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function eb(a){setTimeout(a,0)}function fb(a,b){return function(){for(var c;c=a.shift();)c(b)}}function gb(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof pi)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,gb(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function hb(a,b,c,d){var e=a[b];if(e&&!jb(e,d)&&jb(e,c))return a[b]=mb(e,c,d),!0}function ib(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function jb(a,b){return a===b||ob(a,b)}function kb(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c]?a.viewmodel.wrapped[c].get():a.get(c);for(f in d)!d.hasOwnProperty(f)||"_ractive"===f&&e(d)||(g=c?c+"."+f:f,b.push(g));return b}var d,f,g;for(d=b.split("."),g=[""];f=d.shift();)"*"===f?g=g.reduce(c,[]):""===g[0]?g[0]=f:g=g.map(lb(f));return g}function lb(a){return function(b){return b?b+"."+a:a}}function mb(a,b,c){return a===b?void 0!==c?c:null:ob(a,b)?null===c?c:a.replace(b+".",c+"."):void 0}function nb(a){return a?a.replace(vi,".$1"):""}function ob(a,b){return a&&b&&a.substr(0,b.length+1)===b+"."}function pb(a,b,c){return b=nb(b),"~/"===b.substr(0,2)?(b=b.substring(2),sb(a,ub(b),c),b):"."===b[0]?(b=qb(wi(c),b),b&&sb(a,ub(b),c),b):rb(a,b,c)}function qb(a,b){var c;if("."===b)return a;if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),c.join(".")}return a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,"")}function rb(a,b,c,d){var e,f,g,h,i;for(f=ub(b);c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e+"."+b;return tb(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,i=rb(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function sb(a,b){var c;!a.parent||a.isolated||tb(a,b)||(c=rb(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c})}function tb(a,b){return b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function ub(a){var b=a.indexOf(".");return~b?a.slice(0,b):a}function vb(a){a.teardown()}function wb(a){a.unbind()}function xb(a){a.detach()}function yb(a){a.detachNodes()}function zb(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function Ab(){for(var a,b,c;zi.viewmodels.length;)b=zi.viewmodels.pop(),c=b.applyChanges(),c&&Di.fire(b.ractive,c);for(Bb(),a=0;a<zi.views.length;a+=1)zi.views[a].update();for(zi.views.length=0,a=0;a<zi.tasks.length;a+=1)zi.tasks[a]();return zi.tasks.length=0,zi.viewmodels.length?Ab():void 0}function Bb(){var a,b,c,d;for(a=Ci.length;a--;)b=Ci[a],b.keypath&&Ci.splice(a,1),(c=xi(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),Ci.splice(a,1));d&&d.forEach(Cb)}function Cb(a){a.item.resolve(a.keypath)}function Db(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,Gi.start(d),d.viewmodel.mark(c),Gi.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function Eb(a,b,c){var d;if("string"!=typeof b||!i(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!i(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function Fb(a,b){return Mi(this,a,void 0===b?1:+b)}function Gb(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;if(d=new ui(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:Wi,h.push(Hb(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){k(a,n)}),l&&d.then(function(a){l(a,n)}).then(null,function(a){ni.consoleError({debug:r.debug,err:a})}),q.complete=e,p=Hb(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,function(a){ni.consoleError({debug:r.debug,err:a})}),c.complete=e,g=Hb(this,a,b,c),d.stop=function(){g.stop()},d}function Hb(a,b,c,d){var e,f,h,i;return b&&(b=nb(b)),null!==b&&(i=a.viewmodel.get(b)),Ti.abort(b,a),g(i,c)?(d.complete&&d.complete(d.to),Xi):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,h=new Vi({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),Ti.add(h),a._animations.push(h),h)}function Ib(){return this.detached?this.detached:(this.el&&cb(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),Zi.fire(this),this.detached)}function Jb(a){return this.el?this.fragment.find(a):null}function Kb(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function Lb(a){var b,c;for(b=[a],c=Kb(a);c;)b.push(c),c=Kb(c);return b}function Mb(a,b,c,d){var e=[];return uh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:aj}}),c?(uh(e,{cancel:{value:bj},_root:{value:a},_sort:{value:ej},_makeDirty:{value:fj},_remove:{value:gj},_dirty:{value:!1,writable:!0}}),e):e}function Nb(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=hj(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function Ob(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=hj(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function Pb(a){return this.fragment.findComponent(a)}function Qb(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function Rb(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function Sb(a){var b,c,d,e,f,g;for(b=a.split("."),(c=pj[b.length])||(c=Tb(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function Tb(a){var b,c,d,e,f,g="";if(!pj[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}pj[a]=d}return pj[a]}function Ub(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=qj(b);Vb(a,d,c.event,c.args,!0)}}function Vb(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(oj.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=Wb(a,f,c,d)&&h);if(oj.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=qj(i),c&&(c.component=a)}Vb(a.parent,b,c,d)}}function Wb(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function Xb(a){var b={args:Array.prototype.slice.call(arguments,1)};rj(this,a,b)}function Yb(a){var b;return a=nb(a),b=this.viewmodel.get(a,tj),void 0===b&&this.parent&&!this.isolated&&xi(this,a,this.fragment)&&(b=this.viewmodel.get(a)),b}function Zb(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,$b(this)}function $b(a){vj.fire(a),a.findAllComponents("*").forEach(function(a){$b(a.instance)})}function _b(a,b,c){var d,f,g=this;return a=nb(a),d=this.viewmodel.get(a),e(d)&&e(b)?(f=Gi.start(this,!0),this.viewmodel.merge(a,d,b,c),Gi.end(),c&&c.complete&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.merge"}}),f.then(c.complete).then(null,function(a){ni.consoleError({debug:g.debug,err:a})})),f):this.set(a,b,c&&c.complete)}function ac(a,b){var c,d;return c=kb(a,b),d={},c.forEach(function(b){d[b]=a.get(b)}),d}function bc(a,b,c,d){var e,f,g;return b=nb(b),d=d||Mj,Lj.test(b)?(e=new Kj(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Aj(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function cc(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",Nj(this,a,b,c);if(f=a.split(" "),1===f.length)return Nj(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(Nj(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function dc(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function ec(a,b){var c,d=this;if(a)c=a.split(" ").map(Qj).filter(Rj),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function fc(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(Qj).filter(Rj),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function gc(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function hc(a,b,c){var d,e,f,g,h,i,j=[];if(d=ic(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function ic(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function jc(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=Gi.start(this,!0),Gi.scheduleTask(function(){return gk.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&kc(h),b.innerHTML=""}return this.constructor.css&&fk.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),Gi.end(),this.transitionsEnabled=f,d.then(function(){return hk.fire(g)}).then(null,function(a){ni.consoleError({debug:g.debug,err:a})}),d}function kc(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function lc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function mc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function nc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function oc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function pc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function qc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function rc(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function sc(){return this.items&&this.items[0]?this.items[0].firstNode():null}function tc(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function uc(a){var b,c,d,e;return b=a.pos,d=ll(a),null===d?null:(c=[d],a.matchString(",")?(e=uc(a),e?c.concat(e):(a.pos=b,null)):c)}function vc(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=vc(a),null===f&&a.error(Xk.expectedExpression),f.forEach(b)),d)}function wc(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(il.name))return{t:Lk,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(Xk.expectedExpression),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:Lk,x:d}):null}function xc(a){return JSON.stringify(String(a))}function yc(a,b){var c,d;if(a.t===Kk&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(j(d))yc(d,b);else for(c=d.length;c--;)yc(d[c],b);a.x&&yc(a.x,b),a.r&&yc(a.r,b),a.v&&yc(a.v,b)}function zc(a,b,c){var d=function(b){return zc(a,b,c)};switch(b.t){case Hk:case Ik:case Dk:return b.v;case Ek:return xc(b.v);case Fk:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Gk:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case Jk:return b.k+":"+zc(a,b.v,c);case Nk:return("typeof"===b.s?"typeof ":b.s)+zc(a,b.o,c);case Qk:return zc(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+zc(a,b.o[1],c);case Rk:return zc(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case Ok:return"("+zc(a,b.x,c)+")";case Mk:return zc(a,b.x,c)+zc(a,b.r,c);case Lk:return b.n?"."+b.n:"["+zc(a,b.x,c)+"]";case Pk:return zc(a,b.o[0],c)+"?"+zc(a,b.o[1],c)+":"+zc(a,b.o[2],c);case Kk:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function Ac(a){var b,c,d;return a.allowWhitespace(),(b=kl(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function Bc(a){var b=this;return void 0===a&&(a=Yl),function(){var c,d,e,f,g,h,i;return c=a.args,g=c?"argsList":"value",h=c?"dirtyArgs":"dirtyValue",b[h]&&(e=Cc(b.items,d={},b.root._guid),f=Xl(c?"["+e+"]":e,d),i=f?f.value:c?[b.toString()]:b.toString(),b[g]=i,b[h]=!1),b[g]}()}function Cc(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return Cc(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=(f=a.root.viewmodel.wrapped[a.keypath])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function Dc(a){return a.replace(Tl,function(a,b){var c;return c="#"!==b[0]?Rl[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(Ec(c)):a})}function Ec(a){return a?10===a?32:128>a?a:159>=a?Sl[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Fc(a){return a.replace(Wl,"&amp;").replace(Ul,"&lt;").replace(Vl,"&gt;")}function Gc(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Hc(){return this.value}function Ic(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Jc(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Kc(a,b,c){var d;return"@"===b.charAt(0)?new hm(a,b,c):(d=km(a.parentFragment,b))?new jm(a,d,c):new em(a,b,c)}function Lc(a,b){var c,d;if(nm[a])return nm[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),nm[a]=c,c}function Mc(a){return a.call()}function Nc(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":"@"===d[0]?(e=d.slice(1),i(e)?e:'"'+e+'"'):d})}function Oc(a){return"${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"}function Pc(a){return void 0!==a&&"@"!==a[0]}function Qc(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){th(a,d,{value:pm.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return th(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Rc(a){return a.value}function Sc(a){return void 0!=a}function Tc(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!==c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.key=b.key,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=mm(a,e,c)),b.template.x&&(a.resolver=new qm(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new um(a,b.template.rx,d)),a.template.n!==Tk||a.hasOwnProperty("value")||a.setValue(void 0)}function Uc(a){var b,c,d;return a&&"@"===a[0]?(this.keypath=a,void this.setValue(ib(a))):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Vc(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Wc(){this.parentFragment.bubble()}function Xc(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Yc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Zc(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function $c(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function _c(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function ad(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function bd(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function cd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Uk){if(this.shuffling=!0,Gi.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath+"."+b,h=i.keypath+"."+a,d.index=a,(j=d.registeredIndexRefs)&&j.forEach(dd),d.rebind(g,h),void(f[a]=d)))}),e=this.root.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&Gi.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function dd(a){a.rebind("","")}function ed(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function fd(a){var b,c,d=this;this.updating||(this.updating=!0,(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=pd(d.keypath,a),c.index=a,b=new ds(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):hd(this,a)&&(this.bubble(),this.rendered&&Gi.addView(this)),this.value=a,this.updating=!1)}function gd(a,b,c){if(b===Uk&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function hd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case Sk:return md(a,b,!1,c);case Tk:return md(a,b,!0,c);case Vk:return ld(a,c);case Wk:return kd(a,b,c);case Uk:if(j(b))return gd(a,a.subtype,!0),jd(a,b,c)}return a.ordered=!!f(b),a.ordered?(gd(a,Uk,!1),id(a,b,c)):j(b)||"function"==typeof b?a.template.i?(gd(a,Uk,!0),jd(a,b,c)):(gd(a,Vk,!1),ld(a,c)):(gd(a,Sk,!1),md(a,b,!1,c))}function id(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(wb);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=pd(a.keypath,d),c.index=d,f=new ds(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function jd(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(qd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=pd(a.keypath,d),c.key=d,c.index=e++,g=new ds(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function kd(a,b,c){return b?ld(a,c):nd(a)}function ld(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new ds(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function md(a,b,c,d){var e,g,h,i,k;if(g=f(b)&&0===b.length,h=!1,!f(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(wb),!0):void 0:(d.index=0,i=new ds(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):nd(a)}function nd(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(od),a.fragmentsToUnrender.forEach(wb),a.length=a.fragmentsToRender.length=0,!0):void 0}function od(a){return a.rendered}function pd(a,b){return(a?a+".":"")+b}function qd(a){a.rebind("","")}function rd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function sd(){var a=this;this.fragments.forEach(wb),this.fragmentsToRender.forEach(function(b){return cb(a.fragments,b)}),this.fragmentsToRender=[],bm.call(this),this.length=0,this.unbound=!0}function td(a){this.fragments.forEach(a?ud:vd),this.renderedFragments=[],this.rendered=!1}function ud(a){a.unrender(!0)}function vd(a){a.unrender(!1)}function wd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function xd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function yd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(ih(d,a))return d;if(e=d.querySelector(a))return e}return null}function zd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(ih(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])
}function Ad(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function Bd(a){return Zm[a]||(Zm[a]=hh(a))}function Cd(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=db(a.node.options).filter(Dd),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function Dd(a){return a.selected}function Ed(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=$m(this.value,this.parentFragment.getNode(),this.docFrag),_m(this.pElement),this.rendered=!0,this.docFrag}function Fd(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&Gi.addView(this))}function Gd(){return void 0!=this.value?Dc(""+this.value):""}function Hd(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Id(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=$m(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),_m(this.pElement)}}function Jd(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Kd(){return null}function Ld(){return this.node}function Md(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Nd(){var a=this.fragment.getValue();g(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&Gi.addView(this))}function Od(a){var b=a.fragment.items;if(1===b.length)return b[0].type===tk?b[0]:void 0}function Pd(a){return this.type=zk,this.element=a.element,this.root=a.root,An(this,a.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new ds({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Bn(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,Dn(this,a),void(this.ready=!0)):void(this.value=Pl.test(this.name)?!0:a.value||"")}function Qd(a,b){this.fragment&&this.fragment.rebind(a,b)}function Rd(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==qh.html||(b=Gn[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(Pl.test(b)||"value"===b)&&(this.useProperty=!0),"value"===b&&(this.useProperty=!0,a._ractive.value=this.value)),this.rendered=!0,this.update()}function Sd(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath||e.ref)+"}}":Pl.test(b)?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+Td(d)+'"':b)}function Td(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Ud(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Vd(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Wd(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=ab(f,d)}function Xd(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Yd(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return Gi.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Zd(){var a,b,c=this,d=c.element,f=c.node,g=c.value;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(f.checked=!0);f.checked=!1}else f.checked=g==a}function $d(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function _d(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function ae(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function be(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function ce(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function de(){this.locked||(this.node[this.propertyName]=this.value)}function ee(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):Pl.test(d)?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function fe(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=Qn:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?Ln:Kn:"textarea"===e.name?b=Tn:null!=e.getAttribute("contenteditable")?b=Sn:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?di:"radio"===a&&e.binding&&"name"===e.binding.name?Nn:Tn):this.twoway&&"name"===d?"radio"===f.type?b=Mn:"checkbox"===f.type&&(b=On):"style"===d&&f.style.setAttribute?b=Rn:"class"!==d||f.namespaceURI&&f.namespaceURI!==qh.html?this.useProperty&&(b=Un):b=Pn,b||(b=Vn),this.update=b,this.update()}function ge(a,b){var c=b?"svg":"div";return Yn.innerHTML="<"+c+" "+a+"></"+c+">",db(Yn.childNodes[0].attributes)}function he(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function ie(a){for(;a=a.parent;)if("form"===a.name)return a}function je(){this._ractive.binding.handleChange()}function ke(a,b,c){var d=a+b+c;return jo[d]||(jo[d]=[])}function le(a){return a.isChecked}function me(a){return a.element.getAttribute("value")}function ne(){var a;go.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function oe(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&go.call(b),a._timeout=void 0},a.element.lazy)}function pe(a){var b,c,d,e,f=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||f.contenteditable&&qe(f.contenteditable))&&qe(f.value)?c=io:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=qe(f.name),e=qe(f.checked),d&&e&&ni.error({message:"badRadioInputBinding"}),d?c="radio"===b?oo:qo:e&&(c="radio"===b?mo:so)):"file"===b&&qe(f.value)?c=yo:qe(f.value)&&(c="number"===b||"range"===b?Ao:zo)):"select"===a.name&&qe(f.value)?c=a.getAttribute("multiple")?wo:uo:"textarea"===a.name&&qe(f.value)&&(c=zo),c?new c(a):void 0}function qe(a){return a&&a.isBindable}function re(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function se(a){rj(this.root,this.getAction(),{event:a})}function te(){return this.action.toString().trim()}function ue(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(ni.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:a.tagName,event:b}}),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=om(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=Go.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(mm(g,a,function(a){return g.resolve(b,a)}))}),this.fire=ve):(d=c.n||c,"string"!=typeof d&&(d=new ds({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new ds({template:c.d,root:this.root,owner:this.element}),this.fire=xe):c.a&&(this.params=c.a,this.fire=we))}function ve(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),oj.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),oj.dequeue(b)}function we(a){rj(this.root,this.getAction(),{event:a,args:this.params})}function xe(a){var b=this.dynamicParams.getValue(Fo);"string"==typeof b&&(b=b.substr(1,b.length-2)),rj(this.root,this.getAction(),{event:a,args:b})}function ye(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=km(c.element.parentFragment))&&(e=km.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath,context:b.root.get(b.keypath)})}function ze(){var a,b=this.name;if(!this.invalid){if(a=hi.registries.events.find(this.root,b))this.custom=a(this.node,Ae(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(Ko[b]||ni.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:b}}));this.node.addEventListener(b,Io,!1)}this.hasListener=!0}}function Ae(a){return Jo[a]||(Jo[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath,b.context=c.root.get(c.keypath),c.events[a].fire(b)}),Jo[a]}function Be(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function Ce(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function De(a,b){this.keypaths[a]=b}function Ee(){return this.method?void this.refResolvers.forEach(wb):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Fe(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Io,!1),this.hasListener=!1}function Ge(a){var b,c,d,e,f;b=a.node,b&&(e=db(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?He(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function He(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Ie(){var a=this;this.dirty||(this.dirty=!0,Gi.scheduleTask(function(){$o(a),a.dirty=!1})),this.parentFragment.bubble()}function Je(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function Ke(a,b){a.select=ap(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Le(a){var b,c,d,e,f,g;this.type=wk,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=vn(c.e),"option"===this.name&&bp(this,c),"select"===this.name&&(this.options=[],this.bubble=_o),"form"===this.name&&(this.formBindings=[]),yn(this,c.a||{}),this.attributes=$n(this,c.a),this.conditionalAttributes=bo(this,c.m),c.f&&(this.fragment=new ds({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=Bo(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath]||(this.root._twowayBindings[e.keypath]=[]),f.push(e)),c.v&&(this.eventHandlers=Vo(this,c.v)),c.o&&(this.decorator=new Zo(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Me(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&hb(e,"keypath",a,b)}function Ne(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Oe(){var a=this._ractive.proxy;Gi.start(),a.formBindings.forEach(Pe),Gi.end()}function Pe(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Qe(a){a.node.addEventListener("reset",fp,!1)}function Re(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new ds({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new ds({template:b.d,root:d,owner:a}),this.params=f.getValue(hp),f.unbind()),this._fn=hi.registries.transitions.find(d,e),this._fn||ni.error({debug:d.debug,message:"missingPlugin",args:{plugin:"transition",name:e}}))}function Se(a){return a}function Te(){Jp.hidden=document[Fp]}function Ue(){Jp.hidden=!0}function Ve(){Jp.hidden=!1}function We(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Xe(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Xe(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function Ye(){var a,b,c=this,d=this.root;return a=Ze(this),b=this.node=hh(this.name,a),d.constructor.css&&this.parentFragment.getNode()===d.el&&this.node.setAttribute("data-ractive-css",d.constructor._guid),th(this.node,"_ractive",{value:{proxy:this,keypath:wi(this.parentFragment),events:sh(null),root:d}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=Up,this.node.text=this.fragment.toString(!1),this.fragment.unrender=di):"style"===this.name?(this.bubble=Tp,this.bubble(),this.fragment.unrender=di):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=di:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&$e(this),"img"===this.name?ep(this):"form"===this.name?gp(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&Gi.scheduleTask(function(){c.decorator.torndown||c.decorator.init()},!0),d.transitionsEnabled&&this.intro&&!function(){var a=new Vp(c,c.intro,!0);Gi.registerTransition(a),Gi.scheduleTask(function(){return a.start()},!0),c.transition=a}(),this.node.autofocus&&Gi.scheduleTask(function(){return c.node.focus()},!0),_e(this),this.node}function Ze(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?qh.svg:(d=a.parent)?"foreignObject"===d.name?qh.html:d.node.namespaceURI:a.root.el.namespaceURI}function $e(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function _e(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function af(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function bf(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function cf(a){var b=a.toString();return b?" "+b:""}function df(a){a.select&&cb(a.select.options,a)}function ef(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(wb),"option"===this.name&&Yp(this),this.attributes.forEach(wb),this.conditionalAttributes.forEach(wb)}function ff(a){a.node.removeEventListener("reset",fp,!1)}function gf(a){var b,c,d=this;this.transition&&this.transition.complete(),"option"===this.name?this.detach():a&&Gi.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.unrender()}),this.decorator&&Gi.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&!function(){var a=new Vp(d,d.outro,!1);Gi.registerTransition(a),Gi.scheduleTask(function(){return a.start()})}(),this.liveQueries&&hf(this),"form"===this.name&&$p(this)}function hf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function jf(a,b){var c=dq.exec(b)[0];return null===a||c.length<a.length?c:a}function kf(a,b){var c;if(c=lf(a,b))return c;if(c=Uh.fromId(b,{noThrow:!0})){c=eq(c);var d=Uh.parse(c,Uh.getParseOptions(a));return a.partials[b]=d.t}}function lf(a,b){var c=hi.registries.partials,d=c.findInstance(a,b);if(d){var e,f=d.partials[b];if("function"==typeof f&&(e=f.bind(d),e.isOwner=d.partials.hasOwnProperty(b),f=e(d.data,Uh)),!f&&""!==f)return void ni.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:b}});if(!Uh.isParsed(f)){var g=Uh.parse(f,Uh.getParseOptions(d));g.p&&ni.warn({debug:a.debug,message:"noNestedPartials",args:{rname:b}});var h=e?d:c.findOwner(d,b);h.partials[b]=f=g.t}return e&&(f._fn=e),f.v?f.t:f}}function mf(a,b){var c,d=hi.registries.components.findInstance(a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void ni.warn({debug:a.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:b}});"string"==typeof c&&(c=mf(a,c)),c._fn=e,d.components[b]=c}return c}function nf(){var a=this.instance.fragment.detach();return kq.fire(this.instance),a}function of(a){return this.instance.fragment.find(a)}function pf(a,b){return this.instance.fragment.findAll(a,b)}function qf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function rf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function sf(){return this.parentFragment.findNextNode(this)}function tf(){return this.rendered?this.instance.fragment.firstNode():null}function uf(a){this.hook=new qi(a),this.inProcess={},this.queue={}}function vf(a,b){return a[b._guid]||(a[b._guid]=[])}function wf(a,b){var c=vf(a.queue,b);for(a.hook.fire(b);c.length;)wf(a,c.shift());delete a.queue[b._guid]}function xf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1){if(e=g.adapt[d],"string"==typeof e){var h=hi.registries.adaptors.find(g,e);if(!h)return ni.critical({debug:g.debug,message:"missingPlugin",args:{plugin:"adaptor",name:e}});e=g.adapt[d]=h}if(e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,zf(a)),f.value=b,b}return g.magic?Hq.filter(b,a,g)?this.wrapped[a]=Hq.wrap(g,b,a):Ki.filter(b,a,g)&&(this.wrapped[a]=Ki.wrap(g,b,a)):g.modifyArrays&&Gq.filter(b,a,g)&&(this.wrapped[a]=Gq.wrap(g,b,a)),b}function yf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function zf(a){var b;return Iq[a]||(b=a?a+".":"",Iq[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?yf(c,a):c:void 0}),Iq[a]}function Af(a){var b,c,d,e,f=[""];for(b=a.length;b--;)for(c=a[b],d=c.split(".");d.length>1;)d.pop(),e=d.join("."),-1===f.indexOf(e)&&f.push(e);return f}function Bf(a){var b,c,d,e;return b=a.split("."),c=Cf(b.length),d=function(a,c){return a?"*":b[c]},e=c.map(function(a){return a.map(d).join(".")})}function Cf(a){var b,c,d,e,f,g="";if(!Lq[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}Lq[a]=d}return Lq[a]}function Df(a,b,c){var d;Ff(a,b),c||(d=Mq(b),d.forEach(function(c){Ef(a,c,b)}))}function Ef(a,b,c){var d,e,f;d=a.depsMap.patternObservers,d&&(e=d[b])&&e.forEach(function(b){var d=Nq.exec(b)[0];f=c?c+"."+d:d,Ff(a,f),Ef(a,b,f)})}function Ff(a,b){a.patternObservers.forEach(function(a){a.regex.test(b)&&a.update(b)})}function Gf(){function a(c){var d,f;e.noCascade.hasOwnProperty(c)||((f=e.deps.computed[c])&&f.forEach(function(c){c.viewmodel===e?(e.clearCache(c.key),c.invalidate(),b.push(c.key),a(c.key)):c.viewmodel.mark(c.key)}),(d=e.depsMap.computed[c])&&d.forEach(a))}var b,c,d=this,e=this,f={};return b=this.changes,b.length?(b.slice().forEach(a),c=Kq(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=e.deps.computed[a])&&(d.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return Oq(d,a,!0)}),b.forEach(function(a){return Oq(d,a)})),this.deps.observers&&(c.forEach(function(a){return Hf(d,null,a,"observers")}),Jf(this,b,"observers")),this.deps["default"]&&!function(){var a=[];c.forEach(function(b){return Hf(d,a,b,"default")}),a.length&&If(d,a,b),Jf(d,b,"default")}(),b.forEach(function(a){f[a]=d.get(a)}),this.implicitChanges={},this.noCascade={},f):void 0}function Hf(a,b,c,d){var e,f;(e=Kf(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function If(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Jf(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Kf(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Kf(a,b,c){var d=a.deps[c];return d?d[b]:null}function Lf(){this.captureGroups.push([])}function Mf(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Nf(a){var b="var __ractive=this;return("+a.replace(Sq,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function Of(a,b){var c=b.split(".")[0];return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function Pf(a,b){return b=Tq(b),this.computations[a]=new Xq(this.ractive,a,b)}function Qf(a,b){var c=this;return void 0===b&&(b=$q),function(){var d,e,f,g,h,i=c.ractive,j=c.cache;return b.capture&&(h=c.captureGroups[c.captureGroups.length-1])&&(~h.indexOf(a)||h.push(a)),(d=c.mappings[a.split(".")[0]])?d.get(a,b):"@"===a[0]?ib(a):(void 0===j[a]?((f=c.computations[a])&&!f.bypass?(e=f.get(),c.adapt(a,e)):(g=c.wrapped[a])?e=g.value:a?e=Rf(c,a):(c.adapt("",i.data),e=i.data),j[a]=e):e=j[a],!b.noUnwrap&&(g=c.wrapped[a])&&(e=g.get()),e===Zq?void 0:e)}()}function Rf(a,b){var c,d,e,f,g,h,i;return c=b.split("."),d=c.pop(),e=c.join("."),f=a.get(e),(i=a.wrapped[e])&&(f=i.get()),null!==f&&void 0!==f?((g=a.cacheMap[e])?-1===g.indexOf(b)&&g.push(b):a.cacheMap[e]=[b],"object"!=typeof f||d in f?(h=f[d],a.adapt(b,h,!1),a.cache[b]=h,h):a.cache[b]=Zq):void 0}function Sf(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(a,this.ractive.computed[a]),c.push(b),a in this.mappings&&ni.critical({message:"Cannot map to a computed property ('"+a+"')"});c.forEach(Tf)}function Tf(a){a.init()}function Uf(a,b){this.keypath=a,this.viewmodel=b}function Vf(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.trackData=b.trackData,this.resolved=!1}function Wf(a,b){var c=new cr(a,b);return c.initViewmodel(this),c}function Xf(a,b){var c;Gi.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[a]=!0),b.noCascade&&(this.noCascade[a]=!0)),(c=this.computations[a])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var d=b?b.dontTeardownWrapper:!1;this.clearCache(a,d)}function Yf(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=$f(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;Eh("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=fr(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Zf(a){return JSON.stringify(a)}function $f(a){if(a===!0)return Zf;if("string"==typeof a)return gr[a]||(gr[a]=function(b){return b[a]}),gr[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function _f(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.register(a,b,c);e=this.deps[c]||(this.deps[c]={}),f=e[a]||(e[a]=[]),f.push(b),a&&ag(this,a,c)}}function ag(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c]||(a.depsMap[c]={}),g=f[e]||(f[e]=[]),void 0===g[b]&&(g[b]=0,g.push(b)),g[b]+=1,b=e}function bg(){return this.captureGroups.pop()}function cg(a,b,c){void 0===c&&(c={});var d,e,f,h;if(!c.noMapping&&(d=this.mappings[a.split(".")[0]]))return d.set(a,b);if(e=this.computations[a]){if(e.setting)return;e.set(b),b=e.get()}g(this.cache[a],b)||(f=this.wrapped[a],f&&f.reset&&(h=f.reset(b)!==!1,h&&(b=f.get())),e||h||dg(this,a,b),c.silent?this.clearCache(a):this.mark(a))}function dg(a,b,c){var d,e,f,g,h,i,j;i=function(){g.set?g.set(e,c):(h=g.get(),j())},j=function(){h||(h=Ii(e),a.set(f,h,{silent:!0})),h[e]=c},d=b.split("."),e=d.pop(),f=d.join("."),g=a.wrapped[f],g?i():(h=a.get(f),(g=a.wrapped[f])?i():j())}function eg(a,b,c){var d,e,f=this;if(e=c.length,c.forEach(function(b,c){-1===b&&f.mark(a+"."+c,mr)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a])&&d.filter(fg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){this.mark(a+".length",lr);for(var g=e;g<b.length;g+=1)this.mark(a+"."+g);for(var g=b.length;e>g;g+=1)this.mark(a+"."+g,mr)}}function fg(a){return"function"==typeof a.shuffle}function gg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function hg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.split(".")[0]])return d.unregister(a,b,c);if(e=this.deps[c][a],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a&&ig(this,a,c)}}function ig(a,b,c){var d,e,f,g;for(d=b.split(".");d.length;)d.pop(),e=d.join("."),f=a.depsMap[c],g=f[e],g[b]-=1,g[b]||(cb(g,b),g[b]=void 0),b=e}function jg(a){return"string"==typeof a&&(a=[a]),a}function kg(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;lg(b,d),ur.fire(hi.getConstructTarget(b,c),c),hi.init(b.constructor,b,c),vr.fire(b),wr.begin(b),b.viewmodel=new tr(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new ds({template:b.template,root:b,owner:b})),wr.end(b),(e=a(b.el))&&b.render(e,b.append)}function lg(a,b){a._guid="r-"+xr++,a._subs=sh(null),a._config={},a._twowayBindings=sh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function mg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new ds({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key,this.fragment.getValue())}function ng(a,b){return b.parameters?Li&&"legacy"!==b.parameters?pg(a,b):og(a):a.data}function og(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function pg(a,b){var c=qg(a,b);return new c(a)}function qg(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=rg(a,c.defined)),c.Constructor}function rg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(Gi.start(),c.setValue(a),Gi.end()):this._data[b]=a},enumerable:!0},a},b),uh(e={},d),e.constructor=c,c.prototype=e,c}function sg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=mm(d,c.r,e):c.x?this.resolver=new qm(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new um(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function tg(a,b,c){var d,e,f;return c?(b.parameters&&(f=ug(b)),d=new vg(a,c,f),e=Br(d,b),{data:e,mappings:d.mappings}):{data:{}}}function ug(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function vg(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=sh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(a,b[a])})}function wg(a){return 1===a.length&&a[0].t===tk}function xg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&yg(a.instance,a.root,c,b[c])}function yg(a,b,c,d){"string"!=typeof d&&ni.error({debug:b.debug,message:"noComponentEventArguments"}),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),rj(b,d,{event:a,args:c}),!1})}function zg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Ak,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=Dr(this,b.prototype,a.template.a),zr(this,b,e,a.template.f,a.template.p),Er(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&Eh('The "intro", "outro" and "decorator" directives have no effect on components'),Fr(this)}function Ag(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function Bg(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function Cg(){return this.instance.fragment.toString()}function Dg(){var a=this.instance;this.resolvers.forEach(wb),Eg(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&cb(a.el.__ractive_instances__,a),Kr.fire(a)}function Eg(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function Fg(a){this.shouldDestroy=a,this.instance.unrender()}function Gg(a){if("string"==typeof a.template)return new am(a);switch(a.template.t){case tk:return"yield"===a.template.r?new Sr(a):new Am(a);case vk:return new Um(a);case uk:return new ln(a);case wk:var b;return(b=jq(a.parentFragment.root,a.template.e))?new Or(a,b):new bq(a);case xk:return new iq(a);case yk:return new Qr(a);case Ck:return new Ur(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Hg(a){var b,c=this;this.owner=a.owner,b=this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],"string"==typeof a.template?a.template=[a.template]:a.template||(a.template=[]),this.items=a.template.map(function(b,d){return Vr({parentFragment:c,pElement:a.pElement,template:b,index:d})
}).filter(function(a){return null!==a}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Ig(a,b){hb(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Jg(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Kg(a){return this.items?this.items.map(function(b){return b.toString(a)}).join(""):""}function Lg(){this.bound&&(this.items.forEach(Mg),this.bound=!1)}function Mg(a){a.unbind&&a.unbind()}function Ng(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Og(a,b){var c,d,e,f,g,h=this;if("function"!=typeof a||b?a=a||{}:(b=a,a={}),"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((d=this.viewmodel.wrapped[""])&&d.reset?d.reset(a)===!1&&(this.data=a):this.data=a,e=hi.reset(this),f=e.length;f--;)if(es.indexOf(e[f])>-1){g=!0;break}if(g){var i;this.viewmodel.mark(""),(i=this.component)&&(i.shouldDestroy=!0),this.unrender(),i&&(i.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new ds({template:this.template,root:this,owner:this})),c=this.render(this.el,this.anchor)}else c=Gi.start(this,!0),this.viewmodel.mark(""),Gi.end();return fs.fire(this,a),b&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.reset"}}),c.then(b).then(null,function(a){ni.consoleError({debug:h.debug,err:a})})),c}function Pg(a){var b,c;hi.template.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new ds({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Qg(a,b,c){var d,e,f=this;if(e=Gi.start(this,!0),j(a)){d=a,c=b;for(a in d)d.hasOwnProperty(a)&&(b=d[a],a=nb(a),this.viewmodel.set(a,b))}else a=nb(a),ks.test(a)?kb(this,a).forEach(function(a){f.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return Gi.end(),c&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.set"}}),e.then(c.bind(this)).then(null,function(a){ni.consoleError({debug:f.debug,err:a})})),e}function Rg(a,b){return Mi(this,a,void 0===b?-1:-b)}function Sg(a){var b,c=this;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&cb(this.el.__ractive_instances__,this),this.shouldDestroy=!0,b=this.fragment.rendered?this.unrender():ui.resolve(),qs.fire(this),a&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),b.then(a.bind(this)).then(null,function(a){ni.consoleError({debug:c.debug,err:a})})),this._boundFunctions.forEach(Tg),b}function Tg(a){delete a.fn[a.prop]}function Ug(a,b){var c;return"string"!=typeof a&&ni.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:a}}),c=this.get(a),this.set(a,!c,b)}function Vg(){return this.fragment.toString(!0)}function Wg(){var a,b,c=this;if(!this.fragment.rendered)return ni.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"}),ui.resolve();for(a=Gi.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){fk.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),cb(this.el.__ractive_instances__,this),us.fire(this),Gi.end(),a}function Xg(a,b){var c,d=this;return"function"==typeof a?(b=a,a=""):a=a||"",c=Gi.start(this,!0),this.viewmodel.mark(a),Gi.end(),xs.fire(this,a),b&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.teardown"}}),c.then(b.bind(this)).then(null,function(a){ni.consoleError({debug:d.debug,err:a})})),c}function Yg(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||jb(d,a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=Zg(this,e),this.set(c)}function Zg(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath]||a.changed()||(d.push(a.keypath),d[a.keypath]=a));b=a.attribute.value,e=a.getValue(),bb(b,e)||g(b,e)||(c[a.keypath]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a],e=b.attribute.value,f=b.getValue(),bb(e,f)||(c[a]=f)}),c}function $g(a){if(!(a.prototype instanceof Gs))return a;for(var b={};a;)hi.registries.forEach(function(c){_g(c.useDefaults?a.prototype:a,b,c.name)}),Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=Nh(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}}),a=a._Parent!==Gs?a._Parent:!1;return b}function _g(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function ah(a){void 0===a&&(a={});var b,c,d,e=this;return a=Bs(a),b=function(a,b){yr(this,a,b)},c=sh(e.prototype),c.constructor=b,d={_guid:{value:Cs++},defaults:{value:c},extend:{value:ah,writable:!0,configurable:!0},_Parent:{value:e}},uh(b,d),hi.extend(e,c,a),tr.extend(e,c),b.prototype=c,b}var bh,ch,dh,eh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1},fh=eh,gh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};bh="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),ch="object"==typeof document,dh="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;var hh,ih,jh,kh,lh,mh,nh,oh,ph,qh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rh=["o","ms","moz","webkit"];if(hh=bh?function(a,b){return b&&b!==qh.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==qh.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},ch){for(jh=hh("div"),kh=["matches","matchesSelector"],ph=function(a){return function(b,c){return b[a](c)}},nh=kh.length;nh--&&!ih;)if(lh=kh[nh],jh[lh])ih=ph(lh);else for(oh=rh.length;oh--;)if(mh=rh[nh]+lh.substr(0,1).toUpperCase()+lh.substring(1),jh[mh]){ih=ph(mh);break}ih||(ih=function(a,b){var c,d,e;for(d=a.parentNode,d||(jh.innerHTML="",d=jh,a=a.cloneNode(),jh.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else ih=null;var sh,th,uh,vh=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),ch&&Object.defineProperty(document.createElement("div"),"test",{value:0}),th=Object.defineProperty}catch(wh){th=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(wh){throw wh}ch&&Object.defineProperties(hh("div"),{test:{value:0}}),uh=Object.defineProperties}catch(wh){uh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&th(a,c,b[c])}}try{Object.create(null),sh=Object.create}catch(wh){sh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var xh,yh=Object.prototype.hasOwnProperty,zh=Object.prototype.toString,Ah=/^\[object (?:Array|FileList)\]$/,Bh={};xh=dh?function(a,b){if(!b){if(Bh[a])return;Bh[a]=!0}console.warn("%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);")}:function(){};var Ch,Dh,Eh=xh,Fh=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Gh=/\/\*.*?\*\//g,Hh=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Ih=/^@media/,Jh=/\[data-ractive-css="[a-z0-9-]+"]/g,Kh=k,Lh={name:"css",extend:n,init:function(){}},Mh=Lh,Nh=function(a,b,c){return c||p(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},Oh={name:"data",extend:r,init:s,reset:t},Ph=Oh,Qh={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.',methodDeprecated:'The method "{deprecated}" has been deprecated in favor of "{replacement}" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',usePromise:"{method} now returns a Promise, use {method}(...).then(callback) instead.",noTwowayExpressions:"Two-way binding does not work with expressions. Encountered ( {expression} ) on element {element}.",computedCannotMapTo:'Computed property "{key}" cannot be mapped to "{other}" because {reason}.',notUsed:'prevents forgetting trailing "," in cut and paste of previous line :)'},Rh=A;Ch=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Dh=Rh(Ch,function(a){return a});var Sh=Dh,Th={parse:C,fromId:D,isHashedId:E,isParsed:F,getParseOptions:G,createHelper:B},Uh=Th,Vh={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:J(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=I(b,e),b._config.template={fn:e,result:d}),d=J(d,b),b.template=d.t,d.p&&K(b.partials,d.p)},reset:function(a){var b,c=H(a);return c?(b=J(c,a),a.template=b.t,K(a.partials,b.p,!0),!0):void 0}},Wh=Vh;L.prototype={constructor:L,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=sh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c},findOwner:function(a,b){return a[this.name].hasOwnProperty(b)?a:this.findConstructor(a.constructor,b)},findConstructor:function(a,b){return a?a[this.name].hasOwnProperty(b)?a:this.findConstructor(a._Parent,b):void 0},find:function(a,b){var c=this;return M(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a[c.name][b]}})},findInstance:function(a,b){var c=this;return M(a,{test:function(a){return b in a[c.name]},getValue:function(a){return a}})}};var Xh,Yh,Zh,$h,_h=L,ai=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],bi=Rh(ai,function(a){return new _h(a,"computed"===a)}),ci=bi,di=function(){},ei=N,fi=T;Xh={data:Ph,template:Wh,css:Mh},Yh=Object.keys(fh).filter(function(a){return!ci[a]&&!Xh[a]&&!Sh[a]}),Zh=[].concat(Xh.data,Sh,Yh,ci,Xh.template,Xh.css);for(var gi in Xh)Zh[gi]=Xh[gi];Zh.keys=Object.keys(fh).concat(ci.map(function(a){return a.name})).concat(["css"]),$h=Zh.keys.reduce(function(a,b){return a[b]=!0,a},{}),Zh.parseOptions=Sh,Zh.registries=ci,Zh.extend=function(a,b,c){W("extend",a,b,c)},Zh.init=function(a,b,c){W("init",a,b,c)},Zh.reset=function(a){return Zh.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},Zh.getConstructTarget=function(a,b){return b.onconstruct?{onconstruct:ei(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a};var hi=Zh,ii=function(a,b,c,d){if(a===b)return Y(b);if(d){var e=hi.registries.interpolators.find(c,d);if(e)return e(a,b)||Y(b);Eh('Missing "'+d+'" interpolator. You may need to download a plugin from [TODO]')}return li.number(a,b)||li.array(a,b)||li.object(a,b)||Y(b)},ji=ii,ki={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=ji(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)yh.call(a,g)&&(yh.call(b,g)?(c.push(g),e[g]=ji(a[g],b[g])):f[g]=a[g]);for(g in b)yh.call(b,g)&&!yh.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},li=ki,mi={warn:function(a,b){(a.debug||b)&&this.warnAlways(a)},warnAlways:function(a){this.logger(Z(a),a.allowDuplicates)},error:function(a){this.errorOnly(a),a.debug||this.warn(a,!0)},errorOnly:function(a){a.debug&&this.critical(a)},critical:function(a){var b=a.err||new Error(Z(a));this.thrower(b)},logger:Eh,thrower:function(a){throw a},consoleError:function(a){dh?console.error(a.err):this.thrower(a.err)}},ni=mi,oi={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};_.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&ni.warnAlways({debug:a.debug,message:this.deprecate.message||"methodDeprecated",args:this.deprecate}),b?a.fire(this.event,b):a.fire(this.event)};var pi,qi=_,ri={},si={},ti={};"function"==typeof Promise?pi=Promise:(pi=function(a){var b,c,d,e,f,g,h=[],i=[],j=ri;d=function(a){return function(d){j===ri&&(b=d,j=a,c=fb(j===si?h:i,b),eb(c))}},e=d(si),f=d(ti);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new pi(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),gb(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==ri&&eb(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},pi.all=function(a){return new pi(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},pi.resolve=function(a){return new pi(function(b){b(a)})},pi.reject=function(a){return new pi(function(b,c){c(a)})});var ui=pi,vi=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,wi=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return""},xi=pb,yi=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};yi.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,zb(this)},decrementTotal:function(){this.totalChildren-=1,zb(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;cb(b,a),zb(this)},init:function(){this.ready=!0,zb(this)},detachNodes:function(){this.decoratorQueue.forEach(vb),this.detachQueue.forEach(xb),this.children.forEach(yb)}};var zi,Ai,Bi=yi,Ci=[],Di=new qi("change");Ai={start:function(a,b){var c,d;return b&&(c=new ui(function(a){return d=a})),zi={previousBatch:zi,transitionManager:new Bi(d,zi&&zi.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&zi.viewmodels.push(a.viewmodel),c},end:function(){Ab(),zi.transitionManager.init(),!zi.previousBatch&&zi.instance&&(zi.instance.viewmodel.changes=[]),zi=zi.previousBatch},addViewmodel:function(a){return zi?-1===zi.viewmodels.indexOf(a)?(zi.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=zi.transitionManager,zi.transitionManager.add(a)},registerDecorator:function(a){zi.transitionManager.addDecorator(a)},addView:function(a){zi.views.push(a)},addUnresolved:function(a){Ci.push(a)},removeUnresolved:function(a){cb(Ci,a)},detachWhenReady:function(a){zi.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(zi){for(c=zi;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var Ei,Fi,Gi=Ai,Hi=/^\s*[0-9]+\s*$/,Ii=function(a){return Hi.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Ei={filter:function(a,b,c){var d,f,g,h,i;return b?(d=b.split("."),f=d.pop(),g=d.join("."),(h=c.viewmodel.wrapped[g])&&!h.magic?!1:(i=c.get(g),e(i)&&/^[0-9]+$/.test(f)?!1:i&&("object"==typeof i||"function"==typeof i))):!1},wrap:function(a,b,c){return new Fi(a,b,c)}},Fi=function(a,b,c){var d,e,f,g;return this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,d=c.split("."),this.prop=d.pop(),e=d.join("."),this.obj=e?a.get(e):a.data,f=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),f&&f.set&&(g=f.set._ractiveWrappers)?void(-1===g.indexOf(this)&&g.push(this)):void Db(this,b,f)},Fi.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,Gi.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Ii(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(wh){Ei=!1}var Ji,Ki=Ei,Li=!!Ki,Mi=Eb,Ni=Fb;"undefined"==typeof window?Ji=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(rh,0,window),Ji=window.requestAnimationFrame);var Oi,Pi=Ji;Oi="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Qi=Oi,Ri=[],Si={tick:function(){var a,b,c;for(c=Qi(),Gi.start(),a=0;a<Ri.length;a+=1)b=Ri[a],b.tick(c)||Ri.splice(a--,1);Gi.end(),Ri.length?Pi(Si.tick):Si.running=!1},add:function(a){Ri.push(a),Si.running||(Si.running=!0,Pi(Si.tick))},abort:function(a,b){for(var c,d=Ri.length;d--;)c=Ri[d],c.root===b&&c.keypath===a&&c.stop()}},Ti=Si,Ui=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=ji(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};Ui.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(Gi.start(this.root),this.root.viewmodel.set(f,this.to),Gi.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&Eh("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),Gi.start(this.root),this.root.viewmodel.set(f,c),Gi.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&Eh("Animation was not found"),this.root._animations.splice(a,1)}};var Vi=Ui,Wi=function(){},Xi={stop:Wi},Yi=Gb,Zi=new qi("detach"),$i=Ib,_i=Jb,aj=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?ih(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},bj=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},cj=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=Lb(a.component||a._ractive.proxy),d=Lb(b.component||b._ractive.proxy),e=c[c.length-1],f=d[d.length-1];e&&e===f;)c.pop(),d.pop(),g=e,e=c[c.length-1],f=d[d.length-1];if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},dj=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):cj(a,b)},ej=function(){this.sort(this._isComponentQuery?cj:dj),this._dirty=!1},fj=function(){var a=this;this._dirty||(this._dirty=!0,Gi.scheduleTask(function(){a._sort()}))},gj=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},hj=Mb,ij=Nb,jj=Ob,kj=Pb,lj=Qb,mj=Rb,nj={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},oj=nj,pj={},qj=Sb,rj=Ub,sj=Xb,tj={capture:!0,noUnwrap:!0},uj=Yb,vj=new qi("insert"),wj=Zb,xj=_b,yj=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};yj.prototype={init:function(a){this.value=this.root.get(this.keypath),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;g(a,this.value)||(this.value=a,this.defer&&this.ready?Gi.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1)}};var zj,Aj=yj,Bj=ac,Cj=/\*/,Dj=Array.prototype.slice;zj=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},zj.prototype={init:function(a){var b,c;if(b=Bj(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(c);else this.values=b},update:function(a){var b,c=this;if(Cj.test(a)){b=Bj(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(a)}else if(!this.root.viewmodel.implicitChanges[a])return this.defer&&this.ready?void Gi.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d;return b=this.root.viewmodel.get(a),this.updating?void(this.values[a]=b):(this.updating=!0,g(b,this.values[a])&&this.ready||(c=Dj.call(this.regex.exec(a),1),d=[b,this.values[a],a].concat(c),this.values[a]=b,this.callback.apply(this.context,d)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a]||(this.proxies[a]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a]}};var Ej,Fj,Gj,Hj,Ij,Jj,Kj=zj,Lj=/\*/,Mj={},Nj=bc,Oj=cc,Pj=dc,Qj=function(a){return a.trim()},Rj=function(a){return""!==a},Sj=ec,Tj=fc,Uj=gc,Vj=hc,Wj=Array.prototype.slice,Xj=Array.prototype,Yj=function(a){return function(b){var c,d,f,g,h=Wj.call(arguments,1),i=[];if(c=this.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=Vj(c,a,h),g=Xj[a].apply(c,h),f=Gi.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),Gi.end(),f}},Zj=Yj("pop"),$j=Yj("push"),_j="/* Ractive.js component styles */\n",ak={},bk=[];ch?(Gj=document.createElement("style"),Gj.type="text/css",Hj=document.getElementsByTagName("head")[0],Jj=!1,Ij=Gj.styleSheet,Fj=function(){var a;bk.length?(a=_j+bk.join(" "),Ij?Ij.cssText=a:Gj.innerHTML=a,Jj||(Hj.appendChild(Gj),Jj=!0)):Jj&&(Hj.removeChild(Gj),Jj=!1)},Ej={add:function(a){a.css&&(ak[a._guid]||(ak[a._guid]=0,bk.push(a.css),Fj()),ak[a._guid]+=1)},remove:function(a){a.css&&(ak[a._guid]-=1,ak[a._guid]||(cb(bk,a.css),Gi.scheduleTask(Fj)))}}):Ej=null;var ck,dk,ek,fk=Ej,gk=new qi("render"),hk=new qi("complete"),ik=jc,jk=lc,kk=mc,lk=nc,mk=oc,nk=pc,ok=qc,pk=rc,qk=sc,rk=tc,sk=1,tk=2,uk=3,vk=4,wk=7,xk=8,yk=9,zk=13,Ak=15,Bk=16,Ck=18,Dk=20,Ek=21,Fk=22,Gk=23,Hk=24,Ik=26,Jk=27,Kk=30,Lk=31,Mk=32,Nk=33,Ok=34,Pk=35,Qk=36,Rk=40,Sk=50,Tk=51,Uk=52,Vk=53,Wk=54,Xk={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},Yk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Zk=function(a){var b;return(b=a.matchPattern(Yk))?{t:Dk,v:b}:null},$k=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Hk,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Hk,v:"false"}):null};ck=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,dk=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,ek=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var _k,al,bl,cl,dl,el=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(ck)||b.matchPattern(dk)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(ek),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},fl=el('"'),gl=el("'"),hl=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=gl(a),a.matchString('"')?{t:Ek,v:c}:(a.pos=b,null)):a.matchString("'")?(c=fl(a),a.matchString("'")?{t:Ek,v:c}:(a.pos=b,null)):null},il={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/,relaxedName:/^[a-zA-Z_$][-a-zA-Z_$0-9]*/},jl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,kl=function(a){var b;return(b=hl(a))?jl.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=Zk(a))?b.v:(b=a.matchPattern(il.name))?b:void 0},ll=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=kl(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:Jk,k:c,v:d}):(a.pos=b,null))},ml=uc,nl=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=ml(a),a.allowWhitespace(),a.matchString("}")?{t:Gk,m:c}:(a.pos=b,null)):(a.pos=b,null)},ol=vc,pl=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=ol(a),a.matchString("]")?{t:Fk,m:c}:(a.pos=b,null)):(a.pos=b,null)},ql=function(a){var b=Zk(a)||$k(a)||hl(a)||nl(a)||pl(a);return b};_k=/^\.[a-zA-Z_$0-9]+/,bl=function(a){var b=a.matchPattern(al);return b?"."+b:null},al=/^\[(0|[1-9][0-9]*)\]/,cl=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,dl=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var rl,sl,tl=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?il.relaxedName:il.name,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&dl.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&cl.test(d))return{t:Ik,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(_k)||bl(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:Kk,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},ul=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(Xk.expectedExpression),a.allowWhitespace(),a.matchString(")")||a.error(Xk.expectedParen),{t:Ok,x:c}):null},vl=function(a){return ql(a)||tl(a)||ul(a)},wl=wc,xl=function(a){var b,c,d,e;if(c=vl(a),!c)return null;for(;c;)if(b=a.pos,d=wl(a))c={t:Mk,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=ol(a),a.allowWhitespace(),a.matchString(")")||a.error(Xk.expectedParen),c={t:Rk,x:c},e&&(c.o=e)}return c};sl=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(Xk.expectedExpression),{s:a,o:d,t:Nk}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=xl,a=0,b=d.length;b>a;a+=1)c=sl(d[a],e),e=c;rl=e}();var yl,zl,Al=rl;zl=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:Qk,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Al,a=0,b=d.length;b>a;a+=1)c=zl(d[a],e),e=c;yl=e}();var Bl,Cl,Dl=yl,El=function(a){var b,c,d,e;return(c=Dl(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(Xk.expectedExpression),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(Xk.expectedExpression),{t:Pk,o:[c,d,e]}):(a.pos=b,c)):null},Fl=function(a){var b,c=[];return yc(a,c),b={r:c,s:zc(this,a,c)}},Gl=/^\s+/;Cl=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Cl.prototype=Error.prototype,Bl=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Bl.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return El(this)},flattenExpression:Fl,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;
throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Cl(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(Gl)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Bl.extend=function(a){var b,c,d=this;b=function(a,b){Bl.call(this,a,b)},b.prototype=sh(d.prototype);for(c in a)yh.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Bl.extend,b};var Hl,Il,Jl,Kl,Ll,Ml,Nl,Ol=Bl;Il={"true":!0,"false":!1,undefined:void 0,"null":null},Jl=new RegExp("^(?:"+Object.keys(Il).join("|")+")"),Kl=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Ll=/\$\{([^\}]+)\}/g,Ml=/^\$\{([^\}]+)\}/,Nl=/^\s*$/,Hl=Ol.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&Nl.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(Ml),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(Jl))?{v:Il[b]}:void 0},function(a){var b;return(b=a.matchPattern(Kl))?{v:+b}:void 0},function(a){var b,c=hl(a);return c&&(b=a.values)?{v:c.v.replace(Ll,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=Ac(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var Pl,Ql,Rl,Sl,Tl,Ul,Vl,Wl,Xl=function(a,b){var c=new Hl(a,{values:b});return c.result},Yl={},Zl=Bc;Pl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Ql=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Rl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Sl=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Tl=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Rl).join("|")+"));?","g"),Ul=/</g,Vl=/>/g,Wl=/&/g;var $l=function(){return b(this.node)},_l=function(a){this.type=sk,this.text=a.template};_l.prototype={detach:$l,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Fc(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var am=_l,bm=Gc,cm=Hc,dm=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=xi(a.root,b,a.parentFragment),void 0!==d?this.resolve(d):Gi.addUnresolved(this)};dm.prototype={resolve:function(a){this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(this.ref)},rebind:function(a,b){var c;void 0!==this.keypath&&(c=mb(this.keypath,a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||Gi.removeUnresolved(this)}};var em=dm,fm=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},gm={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};fm.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=gm[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback("@"+d.prefix+Ic(this.cached,d));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===Uk&&void 0!==(a=Ic(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback("@"+d.prefix+a);c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Ic(c,d)))return this.callback("@"+d.prefix+a);c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var hm=fm,im=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};im.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback("@"+a)},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var jm=im,km=Jc;Jc.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var lm,mm=Kc,nm={},om=Lc,pm=Function.prototype.bind;lm=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return mm(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},lm.prototype={bubble:function(){this.ready&&(this.uniqueString=Nc(this.str,this.keypaths),this.keypath=Oc(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e=this;a=this.root.viewmodel.computations[this.keypath],a?this.root.viewmodel.mark(this.keypath):(d=om(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:"@"===a[0]?(b=ib(a),function(){return b}):function(){var b=e.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=Qc(b,e.root)),b}}),c={deps:this.keypaths.filter(Pc),get:function(){var a=b.map(Mc);return d.apply(null,a)}},a=this.root.viewmodel.compute(this.keypath,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var qm=lm,rm=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===Kk?this.refResolver=mm(this,a.n,function(a){d.resolve(a)}):new qm(b,c,a,function(a){d.resolve(a)})};rm.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var sm=rm,tm=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=xi(d,e,g))?this.base=f:this.baseResolver=new em(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new sm(a,h,g)}),this.ready=!0,this.bubble()};tm.prototype={getKeypath:function(){var a=this.members.map(Rc);return!a.every(Sc)||this.baseResolver?null:this.base+"."+a.join(".")},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(wb)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(function(a){return a.forceResolution()}),this.bubble()}};var um=tm,vm=Tc,wm=Uc,xm=Vc,ym={getValue:cm,init:vm,resolve:wm,rebind:xm},zm=function(a){this.type=tk,ym.init(this,a)};zm.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:ym.resolve,rebind:ym.rebind,detach:$l,unbind:bm,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:ym.getValue,setValue:function(a){var b;(b=this.root.viewmodel.wrapped[this.keypath])&&(a=b.get()),g(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&Gi.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?Fc(b):b}};var Am=zm,Bm=Wc,Cm=Xc,Dm=Yc,Em=Zc,Fm=$c,Gm=_c,Hm=ad,Im=bd,Jm=cd,Km=function(a,b){ym.rebind.call(this,a,b)},Lm=ed,Mm=fd,Nm=rd,Om=sd,Pm=td,Qm=wd,Rm=function(a){this.type=vk,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===Tk,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,ym.init(this,a)};Rm.prototype={bubble:Bm,detach:Cm,find:Dm,findAll:Em,findAllComponents:Fm,findComponent:Gm,findNextNode:Hm,firstNode:Im,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:ym.getValue,shuffle:Jm,rebind:Km,render:Lm,resolve:ym.resolve,setValue:Mm,toString:Nm,unbind:Om,unrender:Pm,update:Qm};var Sm,Tm,Um=Rm,Vm=xd,Wm=yd,Xm=zd,Ym=Ad,Zm={};try{hh("table").innerHTML="foo"}catch(wh){Sm=!0,Tm={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var $m=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(Sm&&(e=Tm[b.tagName])?(d=Bd("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===qh.svg?(d=Bd("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=Bd(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},_m=Cd,an=Ed,bn=Fd,cn=Gd,dn=Hd,en=Id,fn=function(a){this.type=uk,ym.init(this,a)};fn.prototype={detach:Vm,find:Wm,findAll:Xm,firstNode:Ym,getValue:ym.getValue,rebind:ym.rebind,render:an,resolve:ym.resolve,setValue:bn,toString:cn,unbind:bm,unrender:dn,update:en};var gn,hn,jn,kn,ln=fn,mn=function(){this.parentFragment.bubble()},nn=Jd,on=function(a){return this.node?ih(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},pn=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},qn=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},rn=function(a){return this.fragment?this.fragment.findComponent(a):void 0},sn=Kd,tn=Ld,un=Md;gn="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),hn="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),jn=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},kn=jn(gn.concat(hn));var vn=function(a){var b=a.toLowerCase();return kn[b]||b},wn=/^true|on|yes|1$/i,xn=/^[0-9]+$/,yn=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||wn.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&xn.test(c)?parseInt(c):0===c||wn.test(c),delete b.lazy)},zn=Nd,An=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==qh.html?vn(b):b;else if(b=b.substring(c+1),a.name=vn(b),a.namespace=qh[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},Bn=Od,Cn={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Dn=function(a,b){var c;!a.pNode||a.namespace||b.pNode.namespaceURI&&b.pNode.namespaceURI!==qh.html||(c=Cn[a.name]||a.name,void 0!==b.pNode[c]&&(a.propertyName=c),(Pl.test(c)||"value"===c)&&(a.useProperty=!0))},En=Pd,Fn=Qd,Gn={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Hn=Rd,In=Sd,Jn=Ud,Kn=Vd,Ln=Wd,Mn=Xd,Nn=Yd,On=Zd,Pn=$d,Qn=_d,Rn=ae,Sn=be,Tn=ce,Un=de,Vn=ee,Wn=fe,Xn=function(a){this.init(a)};Xn.prototype={bubble:zn,init:En,rebind:Fn,render:Hn,toString:In,unbind:Jn,update:Wn};var Yn,Zn=Xn,$n=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new Zn({element:a,name:c,value:b[c],root:a.root}),e.push(e[c]=d));return e};"undefined"!=typeof document&&(Yn=hh("div"));var _n=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new ds({root:a.root,owner:this,template:[b]})};_n.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===qh.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=ge(a,this.isSvg),this.attributes.filter(function(a){return he(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var ao=_n,bo=function(a,b){return b?b.map(function(b){return new ao(a,b)}):[]},co=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c[c.length-1])return ni.error({debug:this.root.debug,message:"noTwowayExpressions",args:{expression:c.slice(2,-1).replace("-","."),element:a.tagName}}),!1}else b.resolver.forceResolution(),c=b.keypath;this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=ie(a))&&(this.resetValue=d,e.formBindings.push(this))};co.prototype={handleChange:function(){var a=this;Gi.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),Gi.scheduleTask(function(){return a.attribute.locked=!1}),Gi.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(cb(this.root._twowayBindings[b],this),this.keypath=c,a=this.root._twowayBindings[c]||(this.root._twowayBindings[c]=[]),a.push(this))},unbind:function(){}},co.extend=function(a){var b,d=this;return b=function(a){co.call(this,a),this.init&&this.init()},b.prototype=sh(d.prototype),c(b.prototype,a),b.extend=co.extend,b};var eo,fo=co,go=je,ho=fo.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",go,!1),this.root.lazy||(a.addEventListener("input",go,!1),a.attachEvent&&a.addEventListener("keyup",go,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",go,!1),a.removeEventListener("input",go,!1),a.removeEventListener("keyup",go,!1)},getValue:function(){return this.element.node.innerHTML}}),io=ho,jo={},ko=ke,lo=fo.extend({name:"checked",init:function(){this.siblings=ko(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",go,!1),a.attachEvent&&a.addEventListener("click",go,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",go,!1),a.removeEventListener("click",go,!1)},handleChange:function(){Gi.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),Gi.end()},getValue:function(){return this.element.node.checked},unbind:function(){cb(this.siblings,this)}}),mo=lo,no=fo.extend({name:"name",init:function(){this.siblings=ko(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",go,!1),a.attachEvent&&a.addEventListener("click",go,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",go,!1),a.removeEventListener("click",go,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&fo.prototype.handleChange.call(this)},rebound:function(a,b){var c;fo.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath+"}}")},unbind:function(){cb(this.siblings,this)}}),oo=no,po=fo.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.attribute.twoway=!0,this.siblings=ko(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){cb(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?ab(a,b):a==b,c.name="{{"+this.keypath+"}}",c.checked=this.isChecked,c.addEventListener("change",go,!1),c.attachEvent&&c.addEventListener("click",go,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",go,!1),a.removeEventListener("click",go,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,fo.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(le).map(me)}}),qo=po,ro=fo.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",go,!1),a.attachEvent&&a.addEventListener("click",go,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",go,!1),a.removeEventListener("click",go,!1)},getValue:function(){return this.element.node.checked}}),so=ro,to=fo.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",go,!1)},unrender:function(){this.element.node.removeEventListener("change",go,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,Gi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),uo=to,vo=uo.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",go,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",go,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&bb(c,b)||uo.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,Gi.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),wo=vo,xo=fo.extend({render:function(){this.element.node.addEventListener("change",go,!1)},unrender:function(){this.element.node.removeEventListener("change",go,!1)},getValue:function(){return this.element.node.files}}),yo=xo;eo=fo.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:h(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",go,!1),a||(b.addEventListener("input",c?oe:go,!1),b.attachEvent&&b.addEventListener("keyup",c?oe:go,!1)),b.addEventListener("blur",ne,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",go,!1),a.removeEventListener("input",go,!1),a.removeEventListener("keyup",go,!1),a.removeEventListener("blur",ne,!1)}});var zo=eo,Ao=zo.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Bo=pe,Co=re,Do=se,Eo=te,Fo={args:!0},Go=/^event(?:\.(.+))?/,Ho=ue,Io=ye,Jo={},Ko={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Lo=ze,Mo=Be,No=Ce,Oo=De,Po=Ee,Qo=Fe,Ro=function(a,b,c){this.init(a,b,c)};Ro.prototype={bubble:Co,fire:Do,getAction:Eo,init:Ho,listen:Lo,rebind:Mo,render:No,resolve:Oo,unbind:Po,unrender:Qo};var So,To,Uo=Ro,Vo=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new Uo(a,e[c],b[d]),g.push(f);return g};So={args:!0},To=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new ds({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new ds({template:b.d,root:c,owner:a}),this.params=this.fragment.getValue(So),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getValue(So),f.ready&&f.update()}),this.fn=hi.registries.decorators.find(c,d),this.fn||ni.error({debug:c.debug,message:"missingPlugin",args:{plugin:"decorator",name:d}}))},To.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var Wo,Xo,Yo,Zo=To,$o=Ge,_o=Ie,ap=Je,bp=Ke,cp=Le,dp=Me,ep=Ne,fp=Oe,gp=Qe,hp={},ip=Re,jp=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};ch?(Xo={},Yo=hh("div").style,Wo=function(a){var b,c,d;if(a=jp(a),!Xo[a])if(void 0!==Yo[a])Xo[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=rh.length;b--;)if(c=rh[b],void 0!==Yo[c+d]){Xo[a]=c+d;break}return Xo[a]}):Wo=null;var kp,lp,mp=Wo;ch?(lp=window.getComputedStyle||legacy__default.getComputedStyle,kp=function(a){var b,c,d,f,g;if(b=lp(this.node),"string"==typeof a)return g=b[mp(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[mp(f)],"0px"===g&&(g=0),c[f]=g;return c}):kp=null;var np=kp,op=function(a,b){var c;if("string"==typeof a)this.node.style[mp(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[mp(c)]=a[c]);return this},pp=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(Eh('Missing easing function ("'+a.easing+'"). You may need to download a plugin from [TODO]'),b=Se)):b="function"==typeof a.easing?a.easing:Se,this.easing=b,this.start=Qi(),this.end=this.start+this.duration,this.running=!0,Ti.add(this)};pp.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var qp,rp,sp,tp,up,vp,wp,xp,yp=pp,zp=new RegExp("^-(?:"+rh.join("|")+")-"),Ap=function(a){return a.replace(zp,"")},Bp=new RegExp("^(?:"+rh.join("|")+")([A-Z])"),Cp=function(a){var b;return a?(Bp.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Dp={},Ep={};ch?(rp=hh("div").style,function(){void 0!==rp.transition?(sp="transition",tp="transitionend",up=!0):void 0!==rp.webkitTransition?(sp="webkitTransition",tp="webkitTransitionEnd",up=!0):up=!1}(),sp&&(vp=sp+"Duration",wp=sp+"Property",xp=sp+"TimingFunction"),qp=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[wp]=d.map(mp).map(Cp).join(","),a.node.style[xp]=Cp(c.easing||"linear"),a.node.style[vp]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(jp(Ap(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(tp,j,!1),h=!0,i())},a.node.addEventListener(tp,j,!1),setTimeout(function(){for(var e,k,l,m,n,o=d.length,p=[];o--;)m=d[o],e=f+m,up&&!Ep[e]&&(a.node.style[mp(m)]=b[m],Dp[e]||(k=a.getStyle(m),Dp[e]=a.getStyle(m)!=b[m],Ep[e]=!Dp[e],Ep[e]&&(a.node.style[mp(m)]=k))),(!up||Ep[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?Eh("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],p.push({name:mp(m),interpolator:ji(parseFloat(k),parseFloat(b[m])),suffix:n}));p.length?new yp({root:a.root,duration:c.duration,easing:jp(c.easing||""),step:function(b){var c,d;for(d=p.length;d--;)c=p[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(tp,j,!1),h=!0,i())},0)},c.delay||0)}):qp=null;var Fp,Gp,Hp,Ip,Jp,Kp=qp;if("undefined"!=typeof document){if(Fp="hidden",Jp={},Fp in document)Hp="";else for(Ip=rh.length;Ip--;)Gp=rh[Ip],Fp=Gp+"Hidden",Fp in document&&(Hp=Gp);void 0!==Hp?(document.addEventListener(Hp+"visibilitychange",Te),Te()):("onfocusout"in document?(document.addEventListener("focusout",Ue),document.addEventListener("focusin",Ve)):(window.addEventListener("pagehide",Ue),window.addEventListener("blur",Ue),window.addEventListener("pageshow",Ve),window.addEventListener("focus",Ve)),Jp.hidden=!1)}var Lp,Mp,Np,Op=Jp;ch?(Mp=window.getComputedStyle||legacy__default.getComputedStyle,Lp=function(a,b,c,d){var e,f=this;
if(Op.hidden)return this.setStyle(a,b),Np||(Np=ui.resolve());"string"==typeof a?(e={},e[a]=b):(e=a,d=c,c=b),c||(Eh('The "'+this.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),c=this,d=this.complete);var g=new ui(function(a){var b,d,g,h,i,j,k;if(!c.duration)return f.setStyle(e),void a();for(b=Object.keys(e),d=[],g=Mp(f.node),i={},j=b.length;j--;)k=b[j],h=g[mp(k)],"0px"===h&&(h=0),h!=e[k]&&(d.push(k),f.node.style[mp(k)]=h);return d.length?void Kp(f,e,c,d,a):void a()});return d&&(ni.warn({debug:!0,message:"usePromise",args:{method:"t.animateStyle"}}),g.then(d).then(null,function(a){ni.consoleError({debug:!0,err:a})})),g}):Lp=null;var Pp=Lp,Qp=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},Rp=We,Sp=function(a,b,c){this.init(a,b,c)};Sp.prototype={init:ip,start:Rp,getStyle:np,setStyle:op,animateStyle:Pp,processParams:Qp};var Tp,Up,Vp=Sp;Tp=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},Up=function(){this.node.type&&"text/javascript"!==this.node.type||Eh("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var Wp=Ye,Xp=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(cf).join("")+this.conditionalAttributes.map(cf).join(""),"option"===this.name&&af(this)&&(a+=" selected"),"input"===this.name&&bf(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Fc(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),Ql.test(this.template.e)||(a+="</"+this.template.e+">"),a)},Yp=df,Zp=ef,$p=ff,_p=gf,aq=function(a){this.init(a)};aq.prototype={bubble:mn,detach:nn,find:on,findAll:pn,findAllComponents:qn,findComponent:rn,findNextNode:sn,firstNode:tn,getAttribute:un,init:cp,rebind:dp,render:Wp,toString:Xp,unbind:Zp,unrender:_p};var bq=aq,cq=/^\s*$/,dq=/^\s*/,eq=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&cq.test(c)&&b.shift(),d=b[b.length-1],void 0!==d&&cq.test(d)&&b.pop(),e=b.reduce(jf,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},fq=kf,gq=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},hq=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=xk,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,ym.init(this,a),!this.keypath&&(c=fq(this.root,this.name))&&(bm.call(this),this.isNamed=!0,this.setTemplate(c))};hq.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||xm.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:ym.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=fq(this.root,""+a)),!b&&this.name&&(b=fq(this.root,this.name))&&(bm.call(this),this.isNamed=!0),b||ni.error({debug:this.root.debug,message:"noTemplateForPartial",args:{name:this.name}}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&Gi.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new ds({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===sk?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?gq(b,e[0]):b):b},unbind:function(){this.isNamed||bm.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var iq=hq,jq=mf,kq=new qi("detach"),lq=nf,mq=of,nq=pf,oq=qf,pq=rf,qq=sf,rq=tf;uf.prototype={constructor:uf,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?vf(this.queue,b).push(a):wf(this,a),delete this.inProcess[a._guid]}};var sq,tq,uq,vq=uf,wq=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},xq=Array.prototype.slice,yq=[],zq=["pop","push","reverse","shift","sort","splice","unshift"];zq.forEach(function(a){var b=function(){var b,c,d,e,f=xq.call(arguments);for(b=Vj(this,a,f),c=Array.prototype[a].apply(this,arguments),Gi.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],Gi.addViewmodel(d.root.viewmodel),wq(d,this,a,b);return Gi.end(),this._ractive.setting=!1,c};th(yq,a,{value:b})}),sq={},sq.__proto__?(tq=function(a){a.__proto__=yq},uq=function(a){a.__proto__=Array.prototype}):(tq=function(a){var b,c;for(b=zq.length;b--;)c=zq[b],th(a,c,{value:yq[c],configurable:!0})},uq=function(a){var b;for(b=zq.length;b--;)delete a[zq[b]]}),tq.unpatch=uq;var Aq,Bq,Cq,Dq=tq;Aq={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Bq(a,b,c)}},Bq=function(a,b,c){this.root=a,this.value=b,this.keypath=c,b._ractive||(th(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Dq(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},Bq.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(Cq);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(Cq);d.splice(e,1)}}else delete a._ractive,Dq.unpatch(this.value)}},Cq="Something went wrong in a rather interesting way";var Eq,Fq,Gq=Aq;Ki&&(Eq={filter:function(a,b,c){return Ki.filter(a,b,c)&&Gq.filter(a)},wrap:function(a,b,c){return new Fq(a,b,c)}},Fq=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=Ki.wrap(a,b,c),this.arrayWrapper=Gq.wrap(a,b,c)},Fq.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var Hq=Eq,Iq={},Jq=xf,Kq=Af,Lq={},Mq=Bf,Nq=/[^\.]+$/,Oq=Df,Pq=Gf,Qq=Lf,Rq=Mf,Sq=/\$\{([^\}]+)\}/g,Tq=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:Nf(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:Nf(a.get),set:a.set}),a)},Uq=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Uq.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a]=null,this.viewmodel.register(a,this.computation,"computed")}};var Vq=Uq,Wq=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};Wq.prototype={constructor:Wq,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,h;if(!e)for(h=b.length;h--;)if(c=b[h],f=a.viewmodel.get(c),!g(f,d.depValues[c]))return d.depValues[c]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){ni.warn({debug:a.debug,message:"failedComputation",args:{key:this.key,err:f.message||f}}),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Of(this.viewmodel,d)&&!this.unresolvedDeps[d]?(f=new Vq(this,d),a.splice(b,1),this.unresolvedDeps[d]=f,Gi.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var Xq=Wq,Yq=Pf,Zq={FAILED_LOOKUP:!0},$q={},_q=Qf,ar=Sf,br=Uf;Uf.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})};var cr=Vf;Vf.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.deps=[],this.local.mappings[this.localKey]=this,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new br(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var dr=Wf,er=Xf,fr=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},gr={},hr=Yf,ir=_f,jr=bg,kr=cg,lr={implicit:!0},mr={noCascade:!0},nr=eg,or=gg,pr=hg,qr={lookup:function(a,b){var c,d=a.adapt;if(!d||!d.length)return d;if(b&&Object.keys(b).length&&(c=d.length))for(;c--;){var e=d[c];"string"==typeof e&&(d[c]=b[e]||e)}return d},combine:function(a,b){return a=jg(a),b=jg(b),a&&a.length?b&&b.length?(a.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}),b):a.slice():b}},rr=qr,sr=function(a,b){var c=this;return void 0===b&&(b=sh(null)),function(){var d,e;c.ractive=a,sr.extend(a.constructor,a),c.mappings=b;for(d in b)b[d].initViewmodel(c);if(a.data&&a.parameters!==!0)for(d in a.data)(e=c.mappings[d])&&void 0===e.getValue()&&e.setValue(a.data[d]);c.cache={},c.cacheMap=sh(null),c.deps={computed:sh(null),"default":sh(null)},c.depsMap={computed:sh(null),"default":sh(null)},c.patternObservers=[],c.specials=sh(null),c.wrapped=sh(null),c.computations=sh(null),c.captureGroups=[],c.unresolvedImplicitDependencies=[],c.changes=[],c.implicitChanges={},c.noCascade={}}()};sr.extend=function(a,b){if(b.magic&&!Li)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.adapt=rr.combine(a.prototype.adapt,b.adapt)||[],b.adapt=rr.lookup(b,b.adaptors)},sr.prototype={adapt:Jq,applyChanges:Pq,capture:Qq,clearCache:Rq,compute:Yq,get:_q,init:ar,map:dr,mark:er,merge:hr,register:ir,release:jr,set:kr,smartUpdate:nr,teardown:or,unregister:pr};var tr=sr,ur=new qi("construct"),vr=new qi("config"),wr=new vq("init"),xr=0,yr=kg,zr=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&ni.warn({debug:i.debug,message:"defaultElSpecified",args:{name:a.name}}),j=h;j;){if(j.owner.type===Bk){k=j.owner.container;break}j=j.parent}return g=sh(b.prototype),yr(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g},Ar=mg;mg.prototype={bubble:function(){this.dirty||(this.dirty=!0,Gi.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var Br=ng,Cr=sg;sg.prototype={resolve:function(a){this.resolved=!0,this.specialRef="@"===a[0],this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(this.specialRef)this.parameters.addData(this.key,ib(a));else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;this.specialRef?(this.parameters.addData(this.key,ib(a)),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key]?b.reversedMappings[this.key].rebind(a):b.mappings[this.key].resolve(a)}};var Dr=tg;vg.prototype={add:function(a,b){if("string"==typeof b){var c=Xl(b);this.addData(a,c?c.value:b)}else if(0===b)this.addData(a);else{var d;d=wg(b)?new Cr(this,a,b[0]).resolver:new Ar(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c=this.parentViewmodel.mappings[b];return this.mappings[a]=new cr(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var Er=xg,Fr=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},Gr=zg,Hr=Ag,Ir=Bg,Jr=Cg,Kr=new qi("teardown"),Lr=Dg,Mr=Fg,Nr=function(a,b){this.init(a,b)};Nr.prototype={detach:lq,find:mq,findAll:nq,findAllComponents:oq,findComponent:pq,findNextNode:qq,firstNode:rq,init:Gr,rebind:Hr,render:Ir,toString:Jr,unbind:Lr,unrender:Mr};var Or=Nr,Pr=function(a){this.type=yk,this.value=a.template.c};Pr.prototype={detach:$l,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Qr=Pr,Rr=function(a){var b,c;this.type=Bk,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new ds({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],Gi.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Rr.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),cb(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Sr=Rr,Tr=function(a){this.declaration=a.template.a};Tr.prototype={init:di,render:di,unrender:di,teardown:di,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Ur=Tr,Vr=Gg,Wr=Hg,Xr=Ig,Yr=Jg,Zr=Kg,$r=Lg,_r=Ng,as=function(a){this.init(a)};as.prototype={bubble:jk,detach:kk,find:lk,findAll:mk,findAllComponents:nk,findComponent:ok,findNextNode:pk,firstNode:qk,getNode:rk,getValue:Zl,init:Wr,rebind:Xr,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Yr,toString:Zr,unbind:$r,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:_r};var bs,cs,ds=as,es=["template","partials","components","decorators","events"],fs=new qi("reset"),gs=Og,hs=function(a,b,c){function d(b,c,f){f&&f.partials[a]||b.forEach(function(b){b.type===xk&&b.getPartialName()===a&&c.push(b),b.fragment&&d(b.fragment.items,c,f),e(b.fragments)?d(b.fragments,c,f):e(b.items)?d(b.items,c,f):b.type===Ak&&b.instance&&d(b.instance.fragment.items,c,b.instance),b.type===wk&&(e(b.attributes)&&d(b.attributes,c,f),e(b.conditionalAttributes)&&d(b.conditionalAttributes,c,f))})}var f,g=this,h=[];return d(this.fragment.items,h),this.partials[a]=b,f=Gi.start(this,!0),h.forEach(function(b){b.value=void 0,b.setValue(a)}),Gi.end(),c&&(ni.warn({debug:this.debug,message:"usePromise",args:{method:"ractive.resetPartial"}}),f.then(c.bind(this)).then(null,function(a){ni.consoleError({debug:g.debug,err:a})})),f},is=Pg,js=Yj("reverse"),ks=/\*/,ls=Qg,ms=Yj("shift"),ns=Yj("sort"),os=Yj("splice"),ps=Rg,qs=new qi("teardown"),rs=Sg,ss=Ug,ts=Vg,us=new qi("unrender"),vs=Wg,ws=Yj("unshift"),xs=new qi("update"),ys=Xg,zs=Yg,As={add:Ni,animate:Yi,detach:$i,find:_i,findAll:ij,findAllComponents:jj,findComponent:kj,findContainer:lj,findParent:mj,fire:sj,get:uj,insert:wj,merge:xj,observe:Oj,observeOnce:Pj,off:Sj,on:Tj,once:Uj,pop:Zj,push:$j,render:ik,reset:gs,resetPartial:hs,resetTemplate:is,reverse:js,set:ls,shift:ms,sort:ns,splice:os,subtract:ps,teardown:rs,toggle:ss,toHTML:ts,toHtml:ts,unrender:vs,unshift:ws,update:ys,updateModel:zs},Bs=$g,Cs=1,Ds=ah,Es=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath,d.index={},(c=km(b.proxy.parentFragment))&&(d.index=km.resolve(c)),d):d};bs=function(a){yr(this,a)},cs={extend:{value:Ds},getNodeInfo:{value:Es},parse:{value:parse__default},Promise:{value:ui},svg:{value:bh},magic:{value:Li},VERSION:{value:"0.6.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:gh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:li},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},uh(bs,cs),bs.prototype=c(As,fh),bs.prototype.constructor=bs,bs.defaults=bs.prototype;var Fs="function";if(typeof Date.now!==Fs||typeof String.prototype.trim!==Fs||typeof Object.keys!==Fs||typeof Array.prototype.indexOf!==Fs||typeof Array.prototype.forEach!==Fs||typeof Array.prototype.map!==Fs||typeof Array.prototype.filter!==Fs||"undefined"!=typeof window&&typeof window.addEventListener!==Fs)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Gs=bs;return Gs});