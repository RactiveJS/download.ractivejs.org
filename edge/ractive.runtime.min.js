!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Ractive=b()}(this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){for(var b,c,d=Ah.call(arguments,1);c=d.shift();)for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function d(a){var b=Ah.call(arguments,1);return b.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function e(a){return"[object Array]"===Fh.call(a)}function f(a){return Gh.test(Fh.call(a))}function g(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function h(a){return"number"==typeof a||"object"==typeof a&&"[object Number]"===Fh.call(a)}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===Fh.call(a)}function k(a,b){return a.replace(/%s/g,function(){return b.shift()})}function l(a){if(!fh)throw a;console.error(a)}function m(a){var b=Ih.call(arguments,1);throw a=k(a,b),new Error(a)}function n(a){var b=Ih.call(arguments,1);a=k(a,b),Dh(a,b)}function o(a){var b=Ih.call(arguments,1);a=k(a,b),Jh[a]||(Jh[a]=!0,Dh(a,b))}function p(a,b,c){var d=q(a,b,c);return d?d[a][c]:null}function q(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function r(a){return function(){return a}}function s(a,b,c){var d;if("string"!=typeof b||!i(c))throw new Error("Bad arguments");if(d=+a.get(b)||0,!i(d))throw new Error("Cannot add to a non-numeric value");return a.set(b,d+c)}function t(a,b){return s(this,a,void 0===b?1:+b)}function u(a){this.event=a,this.method="on"+a,this.deprecate=Sh[a]}function v(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function x(a,b){var c;if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function y(a){return"string"==typeof a?[a]:void 0===a?[]:a}function z(a){return a[a.length-1]}function A(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function B(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function C(a){setTimeout(a,0)}function D(a,b){return function(){for(var c;c=a.shift();)c(b)}}function E(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Th)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,E(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function F(a){var b,c,d,e,f,g;for(b=a.split("."),(c=_h[b.length])||(c=G(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function G(a){var b,c,d,e,f,g="";if(!_h[a]){for(d=[];g.length<a;)g+=1;for(b=parseInt(g,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;d[f]=Array.prototype.map.call(c,e)}_h[a]=d}return _h[a]}function H(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function I(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function J(a){return null==a?a:Yh[a]||(Yh[a]=new Zh(a))}function K(a,b){function c(b,c){var d,f,g;d=a.viewmodel.wrapped[c.str],f=d?d.get():a.viewmodel.get(c);for(g in f)!f.hasOwnProperty(g)||"_ractive"===g&&e(f)||b.push(c.join(g));return b}var d,f,g;for(d=b.split("."),g=[ai];f=d.shift();)"*"===f?g=g.reduce(c,[]):g[0]===ai?g[0]=J(f):g=g.map(L(f));return g}function L(a){return function(b){return b.join(a)}}function M(a){return a?a.replace(Xh,".$1"):""}function N(a,b,c){var d;return b=M(b),"~/"===b.substr(0,2)?(d=J(b.substring(2)),Q(a,d.firstKey,c)):"."===b[0]?(d=O(bi(c),b),d&&Q(a,d.firstKey,c)):d=P(a,J(b),c),d}function O(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return J(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),J(c.join("."))}return J(a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,""))}function P(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return R(a,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=J(f),i=P(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function Q(a,b){var c;!a.parent||a.isolated||R(a,b)||(b=J(b),(c=P(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function R(a,b){return""===b||b in a.data||b in a.viewmodel.computations||b in a.viewmodel.mappings}function S(a){a.teardown()}function T(a){a.unbind()}function U(a){a.unrender()}function V(a){a.detach()}function W(a){a.detachNodes()}function X(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function Y(){for(var a,b,c;di.viewmodels.length;)b=di.viewmodels.pop(),c=b.applyChanges(),c&&gi.fire(b.ractive,c);for(Z(),a=0;a<di.views.length;a+=1)di.views[a].update();for(di.views.length=0,a=0;a<di.tasks.length;a+=1)di.tasks[a]();return di.tasks.length=0,di.viewmodels.length?Y():void 0}function Z(){var a,b,c,d;for(a=fi.length;a--;)b=fi[a],b.keypath?fi.splice(a,1):(c=N(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),fi.splice(a,1));d&&d.forEach($)}function $(a){a.item.resolve(a.keypath)}function _(a,b,c){var d,e,f,g,h,i,j,k,m,n,o,p,q,r;if(d=new $h(function(a){e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,m=c.complete,(k||m)&&(o={},c.step=null,c.complete=null,n=function(a){return function(b,c){o[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||m)&&(p=n(f),c={easing:i,duration:j},k&&(c.step=p)),c.complete=m?p:Hh,h.push(ab(this,f,a[f],c)));return r={easing:i,duration:j},k&&(r.step=function(a){k(a,o)}),m&&d.then(function(a){m(a,o)}).then(null,l),r.complete=e,q=ab(this,null,null,r),h.push(q),d.stop=function(){for(var a;a=h.pop();)a.stop();q&&q.stop()},d}return c=c||{},c.complete&&d.then(c.complete).then(null,l),c.complete=e,g=ab(this,a,b,c),d.stop=function(){g.stop()},d}function ab(a,b,c,d){var e,f,h,i;return b&&(b=J(M(b))),null!==b&&(i=a.viewmodel.get(b)),ji.abort(b,a),g(i,c)?(d.complete&&d.complete(d.to),li):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,h=new ki({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),ji.add(h),a._animations.push(h),h)}function bb(){return this.detached?this.detached:(this.el&&A(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),mi.fire(this),this.detached)}function cb(a){return this.el?this.fragment.find(a):null}function db(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function eb(a){var b,c;for(b=[a],c=db(a);c;)b.push(c),c=db(c);return b}function fb(a,b,c,d){var e=[];return zh(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:ni}}),c?(zh(e,{cancel:{value:oi},_root:{value:a},_sort:{value:ri},_makeDirty:{value:si},_remove:{value:ti},_dirty:{value:!1,writable:!0}}),e):e}function gb(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=fb(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function hb(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=fb(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function ib(a){return this.fragment.findComponent(a)}function jb(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function kb(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function lb(a,b,c){if(void 0===c&&(c={}),b){c.event?c.event.name=b:c.event={name:b,context:a.data,keypath:"",_noArg:!0};var d=J(b).wildcardMatches();mb(a,d,c.event,c.args,!0)}}function mb(a,b,c,d,e){void 0===e&&(e=!1);var f,g,h=!0;for(ui.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=nb(a,f,c,d)&&h);if(ui.dequeue(a),a.parent&&h){if(e&&a.component){var i=a.component.name+"."+b[b.length-1];b=J(i).wildcardMatches(),c&&(c.component=a)}mb(a.parent,b,c,d)}}function nb(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function ob(a){var b={args:Array.prototype.slice.call(arguments,1)};lb(this,a,b)}function pb(a){var b;return a=J(M(a)),b=this.viewmodel.get(a,vi),void 0===b&&this.parent&&!this.isolated&&N(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function qb(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,rb(this)}function rb(a){wi.fire(a),a.findAllComponents("*").forEach(function(a){rb(a.instance)})}function sb(a,b,c){var d,f;return a=J(M(a)),d=this.viewmodel.get(a),e(d)&&e(b)?(f=ei.start(this,!0),this.viewmodel.merge(a,d,b,c),ei.end(),f):this.set(a,b,c&&c.complete)}function tb(a,b){var c,d;return c=K(a,b.str),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function ub(a,b,c,d){var e,f,g;return b=J(M(b)),d=d||Ii,Hi.test(b.str)?(e=new yi(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new xi(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function vb(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",ub(this,a,b,c);if(f=a.split(" "),1===f.length)return ub(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(ub(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function wb(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function xb(a,b){var c,d=this;if(a)c=a.split(" ").map(Ji).filter(Ki),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function yb(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(Ji).filter(Ki),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function zb(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Ab(a,b,c){var d,e,f,g,h,i,j=[];if(d=Bb(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return j}function Bb(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}function Cb(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=ei.start(this,!0),ei.scheduleTask(function(){return Xi.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Db(h),b.innerHTML=""}return this.constructor.css&&Wi.add(this.constructor),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),ei.end(),this.transitionsEnabled=f,d.then(function(){return Yi.fire(g)}).then(null,l),d}function Db(a){try{a.splice(0,a.length).forEach(function(a){return a.teardown()})}catch(b){}}function Eb(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,ei.start(d),d.viewmodel.mark(c),ei.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function Fb(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Gb(a,b){var c,d,e;return d='[data-ractive-css="'+b+'"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=rj.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(Ib),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=tj.test(a)?a.replace(tj,d):a.replace(qj,"").replace(pj,function(a,b){var c,d;return sj.test(b)?a:(c=b.split(",").map(Hb),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Hb(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Ib(a){return a.str}function Jb(a,b,c){return a?b.noCssTransform?a:Gb(a,c):void 0}function Kb(a,b){return"function"==typeof b&&/_super/.test(a)}function Lb(a,b,c){var d=c.data||{},e=Mb(a.prototype.data);if("object"!=typeof d&&"function"!=typeof d)throw new TypeError('data option must be an object or a function, "'+d+'" is not valid');return Nb(e,d)}function Mb(a){if("function"!=typeof a||!Object.keys(a).length)return a;var b={};return Ob(a,b),Nb(a,b)}function Nb(a,b){return"function"==typeof b?Rb(b,a):"function"==typeof a?Qb(b,a):Pb(b,a)}function Ob(a,b,c){for(var d in a)!(b._mappings&&b._mappings[d]&&b._mappings[d].updatable)&&c&&d in b||(b[d]=a[d])}function Pb(a,b){return a=a||{},b?(Ob(b,a,!0),a):a}function Qb(a,b){return function(c){var d;if(a){d=[];for(var e in a)c&&e in c||d.push(e)}return c=b.call(this,c)||c,d&&d.length&&(c=c||{},d.forEach(function(b){c[b]=a[b]})),c}}function Rb(a,b){var c;return c="function"!=typeof b?function(a){Pb(a,b)}:function(a){return b=vj(b,function(){},!0),b.call(this,a)||a},vj(a,c)}function Sb(a){var b=xh(yj);return b.parse=function(b,c){return Tb(b,c||a)},b}function Tb(a,b){if(!undefined__default)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return undefined__default(a,b||this.options)}function Ub(a,b){var c;if(!eh){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Vb(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.innerHTML}function Vb(a){return a&&"#"===a.charAt(0)}function Wb(a){return!("string"==typeof a)}function Xb(a){return a.defaults&&(a=a.defaults),xj.reduce(function(b,c){return b[c]=a[c],b},{ractive:a})}function Yb(a){var b,c=a._config.template;if(c&&c.fn)return b=Zb(a,c.fn),b!==c.result?(c.result=b,b=_b(b,a)):void 0}function Zb(a,b){var c=$b(zj.getParseOptions(a));return b.call(a,a.data,c)}function $b(a){var b=xh(zj);return b.parse=function(b,c){return zj.parse(b,c||a)},b}function _b(a,b){if("string"==typeof a)"#"===a[0]&&(a=zj.fromId(a)),a=undefined__default(a,zj.getParseOptions(b));else if(2!==a.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return a}function ac(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function bc(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=cc(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function cc(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=Hh,d}function dc(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function ec(a,b,c){if(b in a){if(c in a)throw new Error(dc(b,c,!0));n(dc(b,c)),a[c]=a[b]}}function fc(a){ec(a,"beforeInit","onconstruct"),ec(a,"init","onrender"),ec(a,"complete","oncomplete"),ec(a,"eventDefinitions","events"),e(a.adaptors)&&ec(a,"adaptors","adapt")}function gc(a,b,c,d){fc(d);for(var e in d)if(Gj[e]){var f=d[e];"function"==typeof f&&(f=bc(b.prototype,e,f)),c[e]=f}nj.forEach(function(e){e[a](b,c,d)}),oj[a](b,c,d),wj[a](b,c,d),Aj[a](b,c,d),uj[a](b,c,d),hc(b.prototype,c,d)}function hc(a,b,c){for(var d in c)if(!Fj[d]&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=bc(a,d,e)),b[d]=e}}function ic(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function jc(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function kc(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function lc(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function mc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function nc(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function oc(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function pc(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function qc(){return this.items&&this.items[0]?this.items[0].firstNode():null}function rc(a){var b,c,d,e;return b=a.pos,d=Fk(a),null===d?null:(c=[d],a.matchString(",")?(e=rc(a),e?c.concat(e):(a.pos=b,null)):c)}function sc(a){function b(a){d.push(a)}var c,d,e,f;return c=a.pos,a.allowWhitespace(),e=a.readExpression(),null===e?null:(d=[e],a.allowWhitespace(),a.matchString(",")&&(f=sc(a),null===f&&a.error(nk),f.forEach(b)),d)}function tc(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(Bk))return{t:bk,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(nk),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:bk,x:d}):null}function uc(a){return JSON.stringify(String(a))}function vc(a,b){var c,d;if(a.t===ak&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(j(d))vc(d,b);else for(c=d.length;c--;)vc(d[c],b);a.x&&vc(a.x,b),a.r&&vc(a.r,b),a.v&&vc(a.v,b)}function wc(a,b,c){var d=function(b){return wc(a,b,c)};switch(b.t){case Zj:case $j:case Vj:return b.v;case Wj:return uc(b.v);case Xj:return"["+(b.m?b.m.map(d).join(","):"")+"]";case Yj:return"{"+(b.m?b.m.map(d).join(","):"")+"}";case _j:return b.k+":"+wc(a,b.v,c);case dk:return("typeof"===b.s?"typeof ":b.s)+wc(a,b.o,c);case gk:return wc(a,b.o[0],c)+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+wc(a,b.o[1],c);case hk:return wc(a,b.x,c)+"("+(b.o?b.o.map(d).join(","):"")+")";case ek:return"("+wc(a,b.x,c)+")";case ck:return wc(a,b.x,c)+wc(a,b.r,c);case bk:return b.n?"."+b.n:"["+wc(a,b.x,c)+"]";case fk:return wc(a,b.o[0],c)+"?"+wc(a,b.o[1],c)+":"+wc(a,b.o[2],c);case ak:return"_"+c.indexOf(b.n);default:a.error("Expected legal JavaScript")}}function xc(a){var b,c,d;return a.allowWhitespace(),(b=Ek(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function yc(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return yc(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function zc(){var a,b,c,d;return this.dirtyArgs&&(b=yc(this.items,a={},this.root._guid),c=jl("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function Ac(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function Bc(){var a,b,c,d;return this.dirtyValue&&(b=yc(this.items,a={},this.root._guid),c=jl(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function Cc(a){return a.replace(fl,function(a,b){var c;return c="#"!==b[0]?dl[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(Dc(c)):a})}function Dc(a){return a?10===a?32:128>a?a:159>=a?el[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Ec(a){return a.replace(il,"&amp;").replace(gl,"&lt;").replace(hl,"&gt;")}function Fc(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Gc(){return this.value}function Hc(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Ic(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Jc(a,b,c){var d;return"@"===b.charAt(0)?new nl(a,b,c):(d=Ic(a.parentFragment,b))?new pl(a,d,c):new ml(a,b,c)}function Kc(a,b){var c,d;if(rl[a])return rl[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),rl[a]=c,c}function Lc(a){return a.call()}function Mc(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str})}function Nc(a){return J("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Oc(a){return void 0!==a&&"@"!==a[0]}function Pc(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){yh(a,d,{value:sl.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return yh(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Qc(a){return a.value}function Rc(a){return void 0!=a}function Sc(a){a.forceResolution()}function Tc(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Jc(a,e,c)),b.template.x&&(a.resolver=new ql(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new ul(a,b.template.rx,d)),a.template.n!==jk||a.hasOwnProperty("value")||a.setValue(void 0)}function Uc(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,void this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Vc(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Wc(){this.parentFragment.bubble()}function Xc(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Yc(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Zc(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function $c(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function _c(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function ad(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function bd(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function cd(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===kk){if(this.shuffling=!0,ei.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath.join(b),h=i.keypath.join(a),d.index=a,(j=d.registeredIndexRefs)&&j.forEach(dd),d.rebind(g,h),void(f[a]=d)))}),e=this.root.viewmodel.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&ei.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function dd(a){a.rebind("","")}function ed(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function fd(a){var b,c,d=this;this.updating||(this.updating=!0,this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f,root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=d.keypath.join(a),c.index=a,b=new Fn(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):hd(this,a)&&(this.bubble(),this.rendered&&ei.addView(this)),this.value=a,this.updating=!1)}function gd(a,b,c){if(b===kk&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function hd(a,b){var c={template:a.template.f,root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.subtype)switch(a.subtype){case ik:return md(a,b,!1,c);case jk:return md(a,b,!0,c);case lk:return ld(a,c);case mk:return kd(a,b,c);case kk:if(j(b))return gd(a,a.subtype,!0),jd(a,b,c)}return a.ordered=!!f(b),a.ordered?(gd(a,kk,!1),id(a,b,c)):j(b)||"function"==typeof b?a.template.i?(gd(a,kk,!0),jd(a,b,c)):(gd(a,lk,!1),ld(a,c)):(gd(a,ik,!1),md(a,b,!1,c))}function id(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(T);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new Fn(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function jd(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(pd));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new Fn(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function kd(a,b,c){return b?ld(a,c):nd(a)}function ld(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Fn(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function md(a,b,c,d){var e,g,h,i,k;if(g=f(b)&&0===b.length,h=!1,!f(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?g||h||!b:b&&!g&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(T),!0):void 0:(d.index=0,i=new Fn(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):nd(a)}function nd(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(od),a.fragmentsToUnrender.forEach(T),a.length=a.fragmentsToRender.length=0,!0):void 0}function od(a){return a.rendered}function pd(a){a.rebind("","")}function qd(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function rd(){var a=this;this.fragments.forEach(T),this.fragmentsToRender.forEach(function(b){return A(a.fragments,b)}),this.fragmentsToRender=[],Fc.call(this),this.length=0,this.unbound=!0}function sd(a){this.fragments.forEach(a?td:ud),this.renderedFragments=[],this.rendered=!1}function td(a){a.unrender(!0)}function ud(a){a.unrender(!1)}function vd(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function wd(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function xd(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(ph(d,a))return d;if(e=d.querySelector(a))return e}return null}function yd(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(ph(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function zd(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function Ad(a){return Bl[a]||(Bl[a]=oh(a))
}function Bd(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=B(a.node.options).filter(Cd),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function Cd(a){return a.selected}function Dd(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Cl(this.value,this.parentFragment.getNode(),this.docFrag),Bd(this.pElement),this.rendered=!0,this.docFrag}function Ed(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&ei.addView(this))}function Fd(){return void 0!=this.value?Cc(""+this.value):""}function Gd(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Hd(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=Cl(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Bd(this.pElement)}}function Id(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Jd(){return null}function Kd(){return this.node}function Ld(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Md(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();g(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&ei.addView(this))}function Nd(a){var b=a.fragment.items;if(1===b.length)return b[0].type===Lj?b[0]:void 0}function Od(a){return this.type=Rj,this.element=a.element,this.root=a.root,Rl(this,a.name),this.isBoolean=bl.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Fn({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Nd(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:a.value||"")}function Pd(a,b){this.fragment&&this.fragment.rebind(a,b)}function Qd(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==hh.html||(b=Sl[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function Rd(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;return"value"===b&&("select"===this.element.name||"textarea"===this.element.name)||"value"===b&&void 0!==this.element.getAttribute("contenteditable")?void 0:"name"===b&&"input"===this.element.name&&e?"name={{"+(e.keypath.str||e.ref)+"}}":this.isBoolean?d?b:"":(f&&(d=f.toString()),c&&(b=c+":"+b),d?b+'="'+Sd(d)+'"':b)}function Sd(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Td(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Ud(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Vd(){var a,b,c,d,f=this.value;for(e(f)||(f=[f]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=w(f,d)}function Wd(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Xd(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return ei.addViewmodel(b.root.viewmodel),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Yd(){var a,b,c=this,d=c.element,f=c.node,g=c.value,h=d.binding;if(a=d.getAttribute("value"),e(g)){for(b=g.length;b--;)if(a==g[b])return void(h.isChecked=f.checked=!0);h.isChecked=f.checked=!1}else h.isChecked=f.checked=g==a}function Zd(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.className=b}function $d(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function _d(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function ae(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function be(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function ce(){this.locked||(this.node[this.propertyName]=this.value)}function de(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function ee(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=$d:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?Vd:Ud:"textarea"===e.name?b=be:null!=e.getAttribute("contenteditable")?b=ae:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?Hh:"radio"===a&&e.binding&&"name"===e.binding.name?Xd:be):this.isTwoway&&"name"===d?"radio"===f.type?b=Wd:"checkbox"===f.type&&(b=Yd):"style"===d&&f.style.setAttribute?b=_d:"class"!==d||f.namespaceURI&&f.namespaceURI!==hh.html?this.useProperty&&(b=ce):b=Zd,b||(b=de),this.update=b,this.update()}function fe(a,b){var c=b?"svg":"div";return Ul.innerHTML="<"+c+" "+a+"></"+c+">",B(Ul.childNodes[0].attributes)}function ge(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function he(a){for(;a=a.parent;)if("form"===a.name)return a}function ie(){this._ractive.binding.handleChange()}function je(a,b,c){var d=a+b+c;return am[d]||(am[d]=[])}function ke(a){return a.isChecked}function le(a){return a.element.getAttribute("value")}function me(){var a;ie.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function ne(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&ie.call(b),a._timeout=void 0},a.element.lazy)}function oe(a){var b,c,d,e,f,g=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||g.contenteditable&&pe(g.contenteditable))&&pe(g.value)?c=_l:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=pe(g.name),e=pe(g.checked),d&&e&&n("A radio input can have two-way binding on its name attribute, or its checked attribute - not both"),d?c="radio"===b?cm:dm:e&&(c="radio"===b?bm:em)):"file"===b&&pe(g.value)?c=hm:pe(g.value)&&(c="number"===b||"range"===b?im:Zl)):"select"===a.name&&pe(g.value)?c=a.getAttribute("multiple")?gm:fm:"textarea"===a.name&&pe(g.value)&&(c=Zl),c&&(f=new c(a))&&f.keypath?f:void 0}function pe(a){return a&&a.isBindable}function qe(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function re(a){lb(this.root,this.getAction(),{event:a})}function se(){return this.action.toString().trim()}function te(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&((this.root.debug?m:n)('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=Kc(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c;(c=jm.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Jc(g,a,function(a){return g.resolve(b,a)}))}),this.fire=ue):(d=c.n||c,"string"!=typeof d&&(d=new Fn({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new Fn({template:c.d,root:this.root,owner:this.element}),this.fire=we):c.a&&(this.params=c.a,this.fire=ve))}function ue(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),ui.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),ui.dequeue(b)}function ve(a){lb(this.root,this.getAction(),{event:a,args:this.params})}function we(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),lb(this.root,this.getAction(),{event:a,args:b})}function xe(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=Ic(c.element.parentFragment))&&(e=Ic.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function ye(){var a,b=this.name;if(!this.invalid){if(a=p("events",this.root,b))this.custom=a(this.node,ze(b));else{if(!("on"+b in this.node||window&&"on"+b in window))return void(lm[b]||o(Nh(b,"event")));this.node.addEventListener(b,xe,!1)}this.hasListener=!0}}function ze(a){return km[a]||(km[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),km[a]}function Ae(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function Be(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Ce(a,b){this.keypaths[a]=b}function De(){return this.method?void this.refResolvers.forEach(T):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Ee(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,xe,!1),this.hasListener=!1}function Fe(){var a=this;this.dirty||(this.dirty=!0,ei.scheduleTask(function(){Ge(a),a.dirty=!1})),this.parentFragment.bubble()}function Ge(a){var b,c,d,e,f;b=a.node,b&&(e=B(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?He(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function He(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Ie(a,b){a.select=Ke(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Je(a){a.select&&A(a.select.options,a)}function Ke(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function Le(a){var b,c,d,e,f,g;this.type=Oj,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=Ql(c.e),"option"===this.name&&Ie(this,c),"select"===this.name&&(this.options=[],this.bubble=Fe),"form"===this.name&&(this.formBindings=[]),Pl(this,c.a||{}),this.attributes=Vl(this,c.a),this.conditionalAttributes=Xl(this,c.m),c.f&&(this.fragment=new Fn({template:c.f,root:d,owner:this,pElement:this})),g=d.twoway,this.twoway===!1?g=!1:this.twoway===!0&&(g=!0),g&&(e=oe(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=nm(this,c.v)),c.o&&(this.decorator=new om(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Me(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&H(e,"keypath",a,b)}function Ne(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Oe(a){a.node.addEventListener("reset",Qe,!1)}function Pe(a){a.node.removeEventListener("reset",Qe,!1)}function Qe(){var a=this._ractive.proxy;ei.start(),a.formBindings.forEach(Re),ei.end()}function Re(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Se(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Fn({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Fn({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=p("transitions",d,e),this._fn||o(Nh(e,"transition")))}function Te(a){return a}function Ue(){Qm.hidden=document[Mm]}function Ve(){Qm.hidden=!0}function We(){Qm.hidden=!1}function Xe(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Ye(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Ye(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function Ze(){var a,b,c,d=this,e=this.root;return a=$e(this),b=this.node=oh(this.name,a),e.constructor.css&&this.parentFragment.getNode()===e.el&&this.node.setAttribute("data-ractive-css",e.constructor._guid),yh(this.node,"_ractive",{value:{proxy:this,keypath:bi(this.parentFragment),events:xh(null),root:e}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=Xm,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Hh):"style"===this.name?(this.bubble=Wm,this.bubble(),this.fragment.unrender=Hh):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Hh:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"option"===this.name&&_e(this),"img"===this.name?Ne(this):"form"===this.name?Oe(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&ei.scheduleTask(function(){d.decorator.torndown||d.decorator.init()},!0),e.transitionsEnabled&&this.intro&&(c=new Vm(this,this.intro,!0),ei.registerTransition(c),ei.scheduleTask(function(){return c.start()},!0),this.transition=c),this.node.autofocus&&ei.scheduleTask(function(){return d.node.focus()},!0),af(this),this.node}function $e(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?hh.svg:(d=a.parent)?"foreignObject"===d.name?hh.html:d.node.namespaceURI:a.root.el.namespaceURI}function _e(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&e(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function af(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function bf(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&e(c))for(d=c.length;d--;)if(c[d]==b)return!0}function cf(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function df(a){var b=a.toString();return b?" "+b:""}function ef(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(T),"option"===this.name&&Je(this),this.attributes.forEach(T),this.conditionalAttributes.forEach(T)}function ff(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&ei.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(U),this.decorator&&ei.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new Vm(this,this.outro,!1),ei.registerTransition(d),ei.scheduleTask(function(){return d.start()})),this.liveQueries&&gf(this),"form"===this.name&&Pe(this)}function gf(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function hf(a,b){var c=_m.exec(b)[0];return null===a||c.length<a.length?c:a}function jf(a,b){var c;if(c=kf(a,b))return c;if(c=zj.fromId(b,{noThrow:!0})){c=an(c);var d=zj.parse(c,zj.getParseOptions(a));return a.partials[b]=d.t}}function kf(a,b){var c=q("partials",a,b);if(c){var d,e=c.partials[b];if("function"==typeof e&&(d=e.bind(c),d.isOwner=c.partials.hasOwnProperty(b),e=d(c.data,zj)),!e&&""!==e)return void n(Mh,b,"partial","partial");if(!zj.isParsed(e)){var f=zj.parse(e,zj.getParseOptions(c));f.p&&n("Partials ({{>%s}}) cannot contain nested inline partials",b);var g=d?c:lf(c,b);g.partials[b]=e=f.t}return d&&(e._fn=d),e.v?e.t:e}}function lf(a,b){return a.partials.hasOwnProperty(b)?a:mf(a.constructor,b)}function mf(a,b){return a?a.partials.hasOwnProperty(b)?a:mf(a._Parent,b):void 0}function nf(a,b){var c,d=q("components",a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(d.data),!c)return void(a.debug&&n(Mh,b,"component","component"));"string"==typeof c&&(c=nf(a,c)),c._fn=e,d.components[b]=c}return c}function of(){var a=this.instance.fragment.detach();return dn.fire(this.instance),a}function pf(a){return this.instance.fragment.find(a)}function qf(a,b){return this.instance.fragment.findAll(a,b)}function rf(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function sf(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function tf(){return this.parentFragment.findNextNode(this)}function uf(){return this.rendered?this.instance.fragment.firstNode():null}function vf(a,b){var c,d,e,f,g=this.ractive;for(c=g.adapt.length,d=0;c>d;d+=1)if(e=g.adapt[d],e.filter(b,a,g))return f=this.wrapped[a]=e.wrap(g,b,a,xf(a)),f.value=b,b;return b}function wf(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function xf(a){var b;return en[a]||(b=a?a+".":"",en[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?wf(c,a):c:void 0}),en[a]}function yf(a){var b,c,d=[ai];for(b=a.length;b--;)for(c=a[b].parent;c&&!c.isRoot;)v(d,c),c=c.parent;return d}function zf(a,b,c){var d;Bf(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){Af(a,c,b)}))}function Af(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),Bf(a,f),Af(a,b,f)})}function Bf(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function Cf(){function a(c){var d,e;f.noCascade.hasOwnProperty(c.str)||((e=f.deps.computed[c.str])&&e.forEach(function(c){var d=c.key;c.viewmodel===f?(f.clearCache(d.str),c.invalidate(),b.push(d),a(d)):c.viewmodel.mark(d)}),(d=f.depsMap.computed[c.str])&&d.forEach(a))}var b,c,d,e=this,f=this,g={};return b=this.changes,b.length?(b.slice().forEach(a),c=yf(b),c.forEach(function(a){var c;-1===b.indexOf(a)&&(c=f.deps.computed[a.str])&&(e.changes.push(a),c.forEach(function(a){a.viewmodel.mark(a.key)}))}),this.changes=[],this.patternObservers.length&&(c.forEach(function(a){return zf(e,a,!0)}),b.forEach(function(a){return zf(e,a)})),this.deps.observers&&(c.forEach(function(a){return Df(e,null,a,"observers")}),Ff(this,b,"observers")),this.deps["default"]&&(d=[],c.forEach(function(a){return Df(e,d,a,"default")}),d.length&&Ef(this,d,b),Ff(this,b,"default")),b.forEach(function(a){g[a.str]=e.get(a)}),this.implicitChanges={},this.noCascade={},g):void 0}function Df(a,b,c,d){var e,f;(e=Gf(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function Ef(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Ff(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Gf(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b.str])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Gf(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function Hf(){this.captureGroups.push([])}function If(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Jf(a){var b="var __ractive=this;return("+a.replace(fn,function(a,b){return'__ractive.get("'+b+'")'})+")";return new Function(b)}function Kf(a,b){var c=b.firstKey;return!(c in a.ractive.data||c in a.computations||c in a.mappings)}function Lf(a,b){return b=gn(b),this.computations[a.str]=new jn(this.ractive,a,b)}function Mf(a,b){var c,d,e,f,g,h=this.ractive,i=this.cache,j=a.str;return b=b||ln,b.capture&&(g=z(this.captureGroups))&&(~g.indexOf(a)||g.push(a)),(c=this.mappings[a.firstKey])?c.get(a,b):a.isSpecial?a.value:(void 0===i[j]?((e=this.computations[j])&&!e.bypass?(d=e.get(),this.adapt(j,d)):(f=this.wrapped[j])?d=f.value:a.isRoot?(this.adapt("",h.data),d=h.data):d=Nf(this,a),i[j]=d):d=i[j],!b.noUnwrap&&(f=this.wrapped[j])&&(d=f.get()),d===kn?void 0:d)}function Nf(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=kn):void 0}function Of(){var a,b,c=[];for(a in this.ractive.computed)b=this.compute(J(a),this.ractive.computed[a]),c.push(b),a in this.mappings&&m("Cannot map to a computed property ('%s')",a);c.forEach(Pf)}function Pf(a){a.init()}function Qf(a,b){this.keypath=a,this.viewmodel=b}function Rf(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.deps=[],this.unresolved=[],this.trackData=b.trackData,this.resolved=!1}function Sf(a,b){var c=this.mappings[a.str]=new Rf(a,b);return c.initViewmodel(this),c}function Tf(a,b){var c,d=a.str;ei.addViewmodel(this),b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var e=b?b.dontTeardownWrapper:!1;this.clearCache(d,e)}function Uf(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=Wf(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){if(this.debug)throw i;n("Merge operation: comparison failed. Falling back to identity checking"),e=b,f=c}}else e=b,f=c;h=mn(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Vf(a){return JSON.stringify(a)}function Wf(a){if(a===!0)return Vf;if("string"==typeof a)return nn[a]||(nn[a]=function(b){return b[a]}),nn[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Xf(a,b,c){void 0===c&&(c="default");var d,e,f;b.isStatic||((d=this.mappings[a.firstKey])?d.register(a,b,c):(e=this.deps[c]||(this.deps[c]={}),f=e[a.str]||(e[a.str]=[]),f.push(b),a.isRoot||Yf(this,a,c)))}function Yf(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c]||(a.depsMap[c]={}),e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function Zf(){return this.captureGroups.pop()}function $f(a,b,c){void 0===c&&(c={});var d,e,f,h;if(!c.noMapping&&(d=this.mappings[a.firstKey]))return d.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;e.set(b),b=e.get()}g(this.cache[a.str],b)||(f=this.wrapped[a.str],f&&f.reset&&(h=f.reset(b)!==!1,h&&(b=f.get())),e||h||_f(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))}function _f(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=ij(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function ag(a,b,c){var d,e,f,g=this;if(e=c.length,c.forEach(function(b,c){-1===b&&g.mark(a.join(c),pn)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a.str])&&d.filter(bg).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){for(this.mark(a.join("length"),on),f=e;f<b.length;f+=1)this.mark(a.join(f));for(f=b.length;e>f;f+=1)this.mark(a.join(f),pn)}}function bg(a){return"function"==typeof a.shuffle}function cg(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function dg(a,b,c){void 0===c&&(c="default");var d,e,f;if(!b.isStatic){if(d=this.mappings[a.firstKey])return d.unregister(a,b,c);if(e=this.deps[c][a.str],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a.isRoot||eg(this,a,c)}}function eg(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(A(e,b),e["_"+b.str]=void 0),b=b.parent}function fg(a){this.hook=new u(a),this.inProcess={},this.queue={}}function gg(a,b){return a[b._guid]||(a[b._guid]=[])}function hg(a,b){var c=gg(a.queue,b);for(a.hook.fire(b);c.length;)hg(a,c.shift());delete a.queue[b._guid]}function ig(b,c,d){void 0===c&&(c={}),void 0===d&&(d={});var e;if(jg(b,d),rn.fire(Bj.getConstructTarget(b,c),c),Bj.init(b.constructor,b,c),b.magic&&!gh)throw new Error("Getters and setters (magic mode) are not supported in this browser");sn.fire(b),tn.begin(b),b.viewmodel=new qn(b,d.mappings),b.viewmodel.init(),b.template&&(b.fragment=new Fn({template:b.template,root:b,owner:b})),tn.end(b),(e=a(b.el))&&b.render(e,b.append)}function jg(a,b){a._guid="r-"+un++,a._subs=xh(null),a._config={},a._twowayBindings=xh(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function kg(a,b,c){this.parameters=a,this.parentFragment=a.component.parentFragment,this.key=b,this.fragment=new Fn({template:c,root:a.component.root,owner:this}),this.parameters.addData(this.key.str,this.fragment.getValue())}function lg(a,b){return b.parameters?gh&&"legacy"!==b.parameters?ng(a,b):mg(a):a.data}function mg(a){var b,c=a.mappings;for(b in c){var d=c[b];d.trackData=!0,d.updatable||a.addData(b,d.getValue())}return a.data}function ng(a,b){var c=og(a,b);return new c(a)}function og(a,b){var c=b._parameters;return(!c.Constructor||a.newKeys.length)&&(c.Constructor=pg(a,c.defined)),c.Constructor}function pg(a,b){function c(a){this._mappings=a.mappings,this._data=a.data||{}}var d,e;return d=a.keys.reduce(function(a,b){return a[b]={get:function(){var a=this._mappings[b];return a?a.getValue():this._data[b]},set:function(a){var c=this._mappings[b];c?(ei.start(),c.setValue(a),ei.end()):this._data[b]=a},enumerable:!0},a},b),zh(e={toJSON:qg},d),e.constructor=c,c.prototype=e,c}function qg(){var a,b={};for(a in this)-1===xn.indexOf(a)&&(b[a]=this[a]);return b}function rg(a,b,c){var d,e;this.parameters=a,this.key=b,this.resolved=this.ready=!1,d=a.component,e=this.resolve.bind(this),c.r?this.resolver=Jc(d,c.r,e):c.x?this.resolver=new ql(d,d.parentFragment,c.x,e):c.rx&&(this.resolver=new ul(d,c.rx,e)),this.resolved||a.addMapping(b),this.ready=!0}function sg(a,b,c){var d,e,f;return c?(b.parameters&&(f=tg(b)),d=new ug(a,c,f),e=lg(d,b),{data:e,mappings:d.mappings}):{data:{}}}function tg(a){return a._parameters?a._parameters.defined||(a._parameters.defined={}):a._parameters={defined:{}},a._parameters.defined}function ug(a,b,c){var d=this;this.component=a,this.parentViewmodel=a.root.viewmodel,this.data={},this.mappings=xh(null),this.newKeys=[],this.keys=Object.keys(b),this.keys.forEach(function(a){c&&!c[a]&&d.newKeys.push(a),d.add(J(a),b[a])})}function vg(a){return 1===a.length&&a[0].t===Lj}function wg(a,b){var c;for(c in b)b.hasOwnProperty(c)&&xg(a.instance,a.root,c,b[c])}function xg(a,b,c,d){"string"!=typeof d&&n("Components currently only support simple events - you cannot include arguments. Sorry!"),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),lb(b,d,{event:a,args:c}),!1})}function yg(a,b){var c,d,e;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Sj,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],e=sg(this,b.prototype,a.template.a),wn(this,b,e,a.template.f,a.template.p),wg(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&n('The "intro", "outro" and "decorator" directives have no effect on components'),yn(this)}function zg(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function Ag(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function Bg(){return this.instance.fragment.toString()}function Cg(){var a=this.instance;this.resolvers.forEach(T),Dg(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&A(a.el.__ractive_instances__,a),zn.fire(a)}function Dg(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function Eg(a){this.shouldDestroy=a,this.instance.unrender()}function Fg(a){var b=this;this.owner=a.owner,this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],this.items=a.template.map(function(c,d){return Gg({parentFragment:b,pElement:a.pElement,template:c,index:d})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Gg(a){if("string"==typeof a.template)return new ll(a);switch(a.template.t){case Lj:return"yield"===a.template.r?new Dn(a):new wl(a);case Nj:return new yl(a);case Mj:return new Dl(a);case Oj:var b;return(b=nf(a.parentFragment.root,a.template.e))?new Bn(a,b):new Zm(a);case Pj:return new cn(a);case Qj:return new Cn(a);case Uj:return new En(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Hg(a,b){H(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Ig(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Jg(a){return this.items?this.items.map(a?Lg:Kg).join(""):""
}function Kg(a){return a.toString()}function Lg(a){return a.toString(!0)}function Mg(){this.bound&&(this.items.forEach(Ng),this.bound=!1)}function Ng(a){a.unbind&&a.unbind()}function Og(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Pg(a){var b,c,d,e,f;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&(this.data=a):this.data=a,d=Bj.reset(this),e=d.length;e--;)if(In.indexOf(d[e])>-1){f=!0;break}if(f){var g;this.viewmodel.mark(ai),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Fn({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)}else b=ei.start(this,!0),this.viewmodel.mark(ai),ei.end();return Jn.fire(this,a),b}function Qg(a){var b,c;Aj.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Fn({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Rg(a,b){var c,d,e=this;if(d=ei.start(this,!0),j(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],a=J(M(a)),this.viewmodel.set(a,b))}else a=J(M(a)),Mn.test(a.str)?K(this,a.str).forEach(function(a){e.viewmodel.set(a,b)}):this.viewmodel.set(a,b);return ei.end(),d}function Sg(a,b){return s(this,a,void 0===b?-1:-b)}function Tg(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&A(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():$h.resolve(),Qn.fire(this),this._boundFunctions.forEach(Ug),a}function Ug(a){delete a.fn[a.prop]}function Vg(a){if("string"!=typeof a)throw new TypeError(Lh);return this.set(a,!this.get(a))}function Wg(){return this.fragment.toString(!0)}function Xg(){var a,b,c=this;if(!this.fragment.rendered)return n("ractive.unrender() was called on a Ractive instance that was not rendered"),$h.resolve();for(a=ei.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&a.then(function(){Wi.remove(c.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),A(this.el.__ractive_instances__,this),Rn.fire(this),ei.end(),a}function Yg(a){var b;return a=J(a)||ai,b=ei.start(this,!0),this.viewmodel.mark(a),ei.end(),Tn.fire(this,a),b}function Zg(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||J(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=$g(this,e),this.set(c)}function $g(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a));b=a.attribute.value,e=a.getValue(),x(b,e)||g(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),x(e,f)||(c[a.str]=f)}),c}function _g(a){for(var b={};a;)ah(a,b),ch(a,b),a=a._Parent!==Gn?a._Parent:!1;return b}function ah(a,b){nj.forEach(function(c){bh(c.useDefaults?a.prototype:a,b,c.name)})}function bh(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function ch(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e,f=d._method;f&&(d=d._method),e=vj(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}})}function dh(a){void 0===a&&(a={});var b,c,d=this;return a.prototype instanceof Gn&&(a=_g(a)),b=function(a){vn(this,a)},c=xh(d.prototype),c.constructor=b,zh(b,{_guid:{value:Vn++},defaults:{value:c},extend:{value:dh,writable:!0,configurable:!0},_Parent:{value:d}}),Bj.extend(d,c,a),b.prototype=c,b}var eh,fh,gh,hh,ih,jh,kh={el:void 0,append:!1,template:{v:2,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,parameters:!0,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1,debug:!1},lh=kh,mh={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};eh="object"==typeof document,fh="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),gh=!0}catch(nh){gh=!1}hh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ih="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),jh=["o","ms","moz","webkit"];var oh,ph,qh,rh,sh,th,uh,vh,wh;if(oh=ih?function(a,b){return b&&b!==hh.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==hh.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},eh){for(qh=oh("div"),rh=["matches","matchesSelector"],wh=function(a){return function(b,c){return b[a](c)}},uh=rh.length;uh--&&!ph;)if(sh=rh[uh],qh[sh])ph=wh(sh);else for(vh=jh.length;vh--;)if(th=jh[uh]+sh.substr(0,1).toUpperCase()+sh.substring(1),qh[th]){ph=wh(th);break}ph||(ph=function(a,b){var c,d,e;for(d=a.parentNode,d||(qh.innerHTML="",d=qh,a=a.cloneNode(),qh.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else ph=null;var xh,yh,zh,Ah=Array.prototype.slice;try{Object.defineProperty({},"test",{value:0}),eh&&Object.defineProperty(document.createElement("div"),"test",{value:0}),yh=Object.defineProperty}catch(Bh){yh=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Bh){throw Bh}eh&&Object.defineProperties(oh("div"),{test:{value:0}}),zh=Object.defineProperties}catch(Bh){zh=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&yh(a,c,b[c])}}try{Object.create(null),xh=Object.create}catch(Bh){xh=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var Ch,Dh,Eh=Object.prototype.hasOwnProperty,Fh=Object.prototype.toString,Gh=/^\[object (?:Array|FileList)\]$/,Hh=function(){},Ih=Array.prototype.slice,Jh={};fh?(Dh=function(a,b){console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(b))},Ch=function(){console.log.apply(console,arguments)}):Dh=Ch=Hh;var Kh,Lh="Bad arguments",Mh='A function was specified for "%s" %s, but no %s was returned',Nh=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"},Oh=function(a,b,c,d){if(a===b)return r(b);if(d){var e=p("interpolators",c,d);if(e)return e(a,b)||r(b);o(Nh(d,"interpolator"))}return Ph.number(a,b)||Ph.array(a,b)||Ph.object(a,b)||r(b)},Ph={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,f,g;if(!e(a)||!e(b))return null;for(c=[],d=[],g=f=Math.min(a.length,b.length);g--;)d[g]=Oh(a[g],b[g]);for(g=f;g<a.length;g+=1)c[g]=a[g];for(g=f;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=f;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)Eh.call(a,g)&&(Eh.call(b,g)?(c.push(g),e[g]=Oh(a[g],b[g])):f[g]=a[g]);for(g in b)Eh.call(b,g)&&!Eh.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}};"undefined"==typeof window?Kh=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(jh,0,window),Kh=window.requestAnimationFrame.bind(window));var Qh,Rh=Kh;Qh="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Sh={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};u.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?n(this.deprecate.message):n('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),b?a.fire(this.event,b):a.fire(this.event)};var Th,Uh={},Vh={},Wh={};"function"==typeof $h?Th=$h:(Th=function(a){var b,c,d,e,f,g,h=[],i=[],j=Uh;d=function(a){return function(d){j===Uh&&(b=d,j=a,c=D(j===Vh?h:i,b),C(c))}},e=d(Vh),f=d(Wh);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new Th(function(e,f){var g=function(a,b,c){b.push("function"==typeof a?function(b){var c;try{c=a(b),E(d,c,e,f)}catch(g){f(g)}}:c)};g(a,h,e),g(b,i,f),j!==Uh&&C(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},Th.all=function(a){return new Th(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(e){a[e].then(function(a){g[e]=a,--d||b(g)},c)},d=e=a.length;e--;)f(e)})},Th.resolve=function(a){return new Th(function(b){b(a)})},Th.reject=function(a){return new Th(function(b,c){c(a)})});var Xh,Yh,Zh,$h=Th,_h={};Xh=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Yh={},Zh=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=I(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.parent=""===a?null:J(b.join(".")),this.isRoot=!a},Zh.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return J(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:J(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=F(this.str))}};var ai=J(""),bi=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return ai},ci=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};ci.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,X(this)},decrementTotal:function(){this.totalChildren-=1,X(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;A(b,a),X(this)},init:function(){this.ready=!0,X(this)},detachNodes:function(){this.decoratorQueue.forEach(S),this.detachQueue.forEach(V),this.children.forEach(W)}};var di,ei,fi=[],gi=new u("change");ei={start:function(a,b){var c,d;return b&&(c=new $h(function(a){return d=a})),di={previousBatch:di,transitionManager:new ci(d,di&&di.transitionManager),views:[],tasks:[],viewmodels:[],instance:a},a&&di.viewmodels.push(a.viewmodel),c},end:function(){Y(),di.transitionManager.init(),!di.previousBatch&&di.instance&&(di.instance.viewmodel.changes=[]),di=di.previousBatch},addViewmodel:function(a){return di?-1===di.viewmodels.indexOf(a)?(di.viewmodels.push(a),!0):!1:(a.applyChanges(),!1)},registerTransition:function(a){a._manager=di.transitionManager,di.transitionManager.add(a)},registerDecorator:function(a){di.transitionManager.addDecorator(a)},addView:function(a){di.views.push(a)},addUnresolved:function(a){fi.push(a)},removeUnresolved:function(a){A(fi,a)},detachWhenReady:function(a){di.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(di){for(c=di;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var hi=[],ii={tick:function(){var a,b,c;for(c=Qh(),ei.start(),a=0;a<hi.length;a+=1)b=hi[a],b.tick(c)||hi.splice(a--,1);ei.end(),hi.length?Rh(ii.tick):ii.running=!1},add:function(a){hi.push(a),ii.running||(ii.running=!0,Rh(ii.tick))},abort:function(a,b){for(var c,d=hi.length;d--;)c=hi[d],c.root===b&&c.keypath===a&&c.stop()}},ji=ii,ki=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Oh(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ki.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(ei.start(this.root),this.root.viewmodel.set(f,this.to),ei.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&n("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),ei.start(this.root),this.root.viewmodel.set(f,c),ei.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&n("Animation was not found"),this.root._animations.splice(a,1)}};var li={stop:Hh},mi=new u("detach"),ni=function(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?ph(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0},oi=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},pi=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=eb(a.component||a._ractive.proxy),d=eb(b.component||b._ractive.proxy),e=z(c),f=z(d);e&&e===f;)c.pop(),d.pop(),g=e,e=z(c),f=z(d);if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},qi=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):pi(a,b)},ri=function(){this.sort(this._isComponentQuery?pi:qi),this._dirty=!1},si=function(){var a=this;this._dirty||(this._dirty=!0,ei.scheduleTask(function(){a._sort()}))},ti=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},ui={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},vi={capture:!0,noUnwrap:!0},wi=new u("insert"),xi=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};xi.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;g(a,this.value)||(this.value=a,this.defer&&this.ready?ei.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var yi,zi=/\*/,Ai=Array.prototype.slice;yi=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},yi.prototype={init:function(a){var b,c;if(b=tb(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(J(c));else this.values=b},update:function(a){var b,c=this;if(zi.test(a.str)){b=tb(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(J(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?void ei.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?void(this.values[b]=c):(this.updating=!0,g(c,this.values[b])&&this.ready||(d=Ai.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}};var Bi,Ci,Di,Ei,Fi,Gi,Hi=/\*/,Ii={},Ji=function(a){return a.trim()},Ki=function(a){return""!==a},Li=Array.prototype.slice,Mi=Array.prototype,Ni=function(a){return function(b){var c,d,f,g,h=Li.call(arguments,1),i=[];if(b=J(M(b)),c=this.viewmodel.get(b),d=c.length,!e(c))throw new Error("Called ractive."+a+"('"+b+"'), but '"+b+"' does not refer to an array");return i=Ab(c,a,h),g=Mi[a].apply(c,h),f=ei.start(this,!0).then(function(){return g}),i?this.viewmodel.smartUpdate(b,c,i):this.viewmodel.mark(b),ei.end(),f}},Oi=Ni("pop"),Pi=Ni("push"),Qi="/* Ractive.js component styles */\n",Ri={},Si=[];eh?(Di=document.createElement("style"),Di.type="text/css",Ei=document.getElementsByTagName("head")[0],Gi=!1,Fi=Di.styleSheet,Ci=function(){var a;Si.length?(a=Qi+Si.join(" "),Fi?Fi.cssText=a:Di.innerHTML=a,Gi||(Ei.appendChild(Di),Gi=!0)):Gi&&(Ei.removeChild(Di),Gi=!1)},Bi={add:function(a){a.css&&(Ri[a._guid]||(Ri[a._guid]=0,Si.push(a.css),Ci()),Ri[a._guid]+=1)},remove:function(a){a.css&&(Ri[a._guid]-=1,Ri[a._guid]||(A(Si,a.css),ei.scheduleTask(Ci)))}}):Bi=null;var Ti,Ui,Vi,Wi=Bi,Xi=new u("render"),Yi=new u("complete"),Zi=function(a,b,c,d){var e=a.root,f=a.keypath;return"sort"===c||"reverse"===c?void e.viewmodel.set(f,b):void e.viewmodel.smartUpdate(f,b,d)},$i=Array.prototype.slice,_i=[],aj=["pop","push","reverse","shift","sort","splice","unshift"];aj.forEach(function(a){var b=function(){var b,c,d,e,f=$i.call(arguments);for(b=Ab(this,a,f),c=Array.prototype[a].apply(this,arguments),ei.start(),this._ractive.setting=!0,e=this._ractive.wrappers.length;e--;)d=this._ractive.wrappers[e],ei.addViewmodel(d.root.viewmodel),Zi(d,this,a,b);return ei.end(),this._ractive.setting=!1,c};yh(_i,a,{value:b})}),Ti={},Ti.__proto__?(Ui=function(a){a.__proto__=_i},Vi=function(a){a.__proto__=Array.prototype}):(Ui=function(a){var b,c;for(b=aj.length;b--;)c=aj[b],yh(a,c,{value:_i[c],configurable:!0})},Vi=function(a){var b;for(b=aj.length;b--;)delete a[aj[b]]}),Ui.unpatch=Vi;var bj,cj,dj,ej=Ui;bj={filter:function(a){return e(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new cj(a,b,c)}},cj=function(a,b,c){this.root=a,this.value=b,this.keypath=J(c),b._ractive||(yh(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),ej(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},cj.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(dj);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(dj);d.splice(e,1)}}else delete a._ractive,ej.unpatch(this.value)}},dj="Something went wrong in a rather interesting way";var fj,gj,hj=/^\s*[0-9]+\s*$/,ij=function(a){return hj.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),fj={filter:function(a,b,c){var d,f;return b?(b=J(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(f=c.viewmodel.get(b.parent),e(f)&&/^[0-9]+$/.test(b.lastKey)?!1:f&&("object"==typeof f||"function"==typeof f))):!1},wrap:function(a,b,c){return new gj(a,b,c)}},gj=function(a,b,c){var d,e,f;return c=J(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?void(-1===f.indexOf(this)&&f.push(this)):void Eb(this,b,e)},gj.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,ei.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath,{dontTeardownWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=ij(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(Bh){fj=!1}var jj,kj;fj&&(jj={filter:function(a,b,c){return fj.filter(a,b,c)&&bj.filter(a)},wrap:function(a,b,c){return new kj(a,b,c)}},kj=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=fj.wrap(a,b,c),this.arrayWrapper=bj.wrap(a,b,c)},kj.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var lj,mj,nj,oj={extend:function(a,b,c){b.adapt=Fb(b.adapt,y(c.adapt))},init:function(a,b,c){function d(a){return"string"==typeof a&&(a=p("adaptors",b,a),a||m(Nh(a,"adaptor"))),a}var e,f;if(e=b.adapt.map(d),f=y(c.adapt).map(d),b.adapt=Fb(e,f),b.magic){if(!gh)throw new Error("Getters and setters (magic mode) are not supported in this browser");b.modifyArrays&&b.adapt.push(jj),b.adapt.push(fj)}b.modifyArrays&&b.adapt.push(bj)}},pj=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,qj=/\/\*.*?\*\//g,rj=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,sj=/^@media/,tj=/\[data-ractive-css="[a-z0-9-]+"]/g,uj={name:"css",extend:function(a,b,c){var d,e=b.constructor._guid;(d=Jb(c.css,c,e)||Jb(a.css,a,e))&&(b.constructor.css=d)},init:function(){}},vj=function(a,b,c){return c||Kb(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},wj={name:"data",extend:function(a,b,c){b.data=Lb(a,b,c)},init:function(a,b,c){var d=c.data,e=Lb(a,b,c);return"function"==typeof e&&(e=e.call(b,d)||d),b.data=e||{}},reset:function(a){var b=this.init(a.constructor,a,a);return b?(a.data=b,!0):void 0}},xj=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],yj={parse:Tb,fromId:Ub,isHashedId:Vb,isParsed:Wb,getParseOptions:Xb,createHelper:Sb},zj=yj,Aj={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:_b(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=Zb(b,e),b._config.template={fn:e,result:d}),d=_b(d,b),b.template=d.t,d.p&&ac(b.partials,d.p)},reset:function(a){var b,c=Yb(a);return c?(b=_b(c,a),a.template=b.t,ac(a.partials,b.p,!0),!0):void 0}};lj=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],mj=function(a,b){this.name=a,this.useDefaults=b},mj.prototype={constructor:mj,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,b,c)},configure:function(a,b,c){var d,e=this.name,f=c[e];d=xh(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},nj=lj.map(function(a){return new mj(a,"computed"===a)});var Bj,Cj,Dj,Ej,Fj,Gj;Ej={adapt:oj,css:uj,data:wj,template:Aj},Dj=Object.keys(lh),Gj=ic(Dj.filter(function(a){return!Ej[a]})),Fj=ic(Dj.concat(nj.map(function(a){return a.name}))),Cj=[].concat(Dj.filter(function(a){return!nj[a]&&!Ej[a]}),nj,Ej.data,Ej.template,Ej.css),Bj={extend:function(a,b,c){return gc("extend",a,b,c)},init:function(a,b,c){return gc("init",a,b,c)},reset:function(a){return Cj.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:Cj,getConstructTarget:function(a,b){return b.onconstruct?{onconstruct:bc(a,"onconstruct",b.onconstruct).bind(a),fire:a.fire.bind(a)}:a}};var Hj,Ij,Jj,Kj=1,Lj=2,Mj=3,Nj=4,Oj=7,Pj=8,Qj=9,Rj=13,Sj=15,Tj=16,Uj=18,Vj=20,Wj=21,Xj=22,Yj=23,Zj=24,$j=26,_j=27,ak=30,bk=31,ck=32,dk=33,ek=34,fk=35,gk=36,hk=40,ik=50,jk=51,kk=52,lk=53,mk=54,nk="Expected a JavaScript expression",ok="Expected closing paren",pk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,qk=function(a){var b;return(b=a.matchPattern(pk))?{t:Vj,v:b}:null},rk=function(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Zj,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Zj,v:"false"}):null};Hj=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Ij=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Jj=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var sk,tk,uk,vk,wk,xk=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(Hj)||b.matchPattern(Ij)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(Jj),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},yk=xk('"'),zk=xk("'"),Ak=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=zk(a),a.matchString('"')?{t:Wj,v:c}:(a.pos=b,null)):a.matchString("'")?(c=yk(a),a.matchString("'")?{t:Wj,v:c}:(a.pos=b,null)):null},Bk=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Ck=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Dk=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Ek=function(a){var b;return(b=Ak(a))?Dk.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=qk(a))?b.v:(b=a.matchPattern(Bk))?b:void 0},Fk=function(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=Ek(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=a.readExpression(),null===d?(a.pos=b,null):{t:_j,k:c,v:d}):(a.pos=b,null))},Gk=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=rc(a),a.allowWhitespace(),a.matchString("}")?{t:Yj,m:c}:(a.pos=b,null)):(a.pos=b,null)},Hk=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=sc(a),a.matchString("]")?{t:Xj,m:c}:(a.pos=b,null)):(a.pos=b,null)},Ik=function(a){var b=qk(a)||rk(a)||Ak(a)||Gk(a)||Hk(a);return b};sk=/^\.[a-zA-Z_$0-9]+/,uk=function(a){var b=a.matchPattern(tk);return b?"."+b:null},tk=/^\[(0|[1-9][0-9]*)\]/,vk=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,wk=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Jk,Kk,Lk=function(a){var b,c,d,e,f,g,h,i;if(b=a.pos,a.matchString("~/"))c="~/";else for(c="";a.matchString("../");)c+="../";if(c||(e=a.matchString("./")||a.matchString(".")||""),i=a.relaxedNames?Ck:Bk,d=a.matchPattern(/^@(?:keypath|index|key)/)||a.matchPattern(i)||"",!a.relaxedNames&&!e&&!c&&wk.test(d))return a.pos=b,null;if(!c&&!e&&!a.relaxedNames&&vk.test(d))return{t:$j,v:d};if(f=(c||e)+d,!f)return null;for(;g=a.matchPattern(sk)||uk(a);)f+=g;return a.matchString("(")&&(h=f.lastIndexOf("."),-1!==h?(f=f.substr(0,h),a.pos=b+f.length):a.pos-=1),{t:ak,n:f.replace(/^this\./,"./").replace(/^this$/,".")}},Mk=function(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=a.readExpression(),c||a.error(nk),a.allowWhitespace(),a.matchString(")")||a.error(ok),{t:ek,x:c}):null},Nk=function(a){return Ik(a)||Lk(a)||Mk(a)},Ok=function(a){var b,c,d,e;if(c=Nk(a),!c)return null;for(;c;)if(b=a.pos,d=tc(a))c={t:ck,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=sc(a),a.allowWhitespace(),a.matchString(")")||a.error(ok),c={t:hk,x:c},e&&(c.o=e)}return c};Kk=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=c.readExpression(),d||c.error(nk),{s:a,o:d,t:dk}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=Ok,a=0,b=d.length;b>a;a+=1)c=Kk(d[a],e),e=c;Jk=e}();var Pk,Qk;Qk=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:gk,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Jk,a=0,b=d.length;b>a;a+=1)c=Qk(d[a],e),e=c;Pk=e}();var Rk,Sk,Tk=function(a){var b,c,d,e;return(c=Pk(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=a.readExpression(),d||a.error(nk),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=a.readExpression(),e||a.error(nk),{t:fk,o:[c,d,e]}):(a.pos=b,c)):null},Uk=function(a){var b,c=[];return vc(a,c),b={r:c,s:wc(this,a,c)}},Vk=/^\s+/;Sk=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},Sk.prototype=Error.prototype,Rk=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},Rk.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},readExpression:function(){return Tk(this)},flattenExpression:Uk,getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b,c,d,e,f,g;throw b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=e+"\n"+new Array(b[1]).join(" ")+"^----",g=new Sk(a+" at line "+c+" character "+d+":\n"+f),g.line=b[0],g.character=b[1],g.shortMessage=a,g},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0
},allowWhitespace:function(){this.matchPattern(Vk)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Rk.extend=function(a){var b,c,d=this;b=function(a,b){Rk.call(this,a,b)},b.prototype=xh(d.prototype);for(c in a)Eh.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=Rk.extend,b};var Wk,Xk,Yk,Zk,$k,_k,al;Xk=function(a){return a["true"]=!0,a["false"]=!1,a.undefined=void 0,a["null"]=null,a}({}),Yk=new RegExp("^(?:"+Object.keys(Xk).join("|")+")"),Zk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,$k=/\$\{([^\}]+)\}/g,_k=/^\$\{([^\}]+)\}/,al=/^\s*$/,Wk=Rk.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&al.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(_k),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(Yk))?{v:Xk[b]}:void 0},function(a){var b;return(b=a.matchPattern(Zk))?{v:+b}:void 0},function(a){var b,c=Ak(a);return c&&(b=a.values)?{v:c.v.replace($k,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=xc(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var bl,cl,dl,el,fl,gl,hl,il,jl=function(a,b){var c=new Wk(a,{values:b});return c.result};bl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,cl=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,dl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},el=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],fl=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(dl).join("|")+"));?","g"),gl=/</g,hl=/>/g,il=/&/g;var kl=function(){return b(this.node)},ll=function(a){this.type=Kj,this.text=a.template};ll.prototype={detach:kl,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Ec(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var ml=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=N(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):ei.addUnresolved(this)};ml.prototype={resolve:function(a){this.keypath&&!a&&ei.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(J(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||ei.removeUnresolved(this)}};var nl=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},ol={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};nl.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=ol[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(J("@"+d.prefix+Hc(this.cached,d)));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===kk&&void 0!==(a=Hc(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback(J("@"+d.prefix+a));c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Hc(c,d)))return this.callback(J("@"+d.prefix+a.str));c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var pl=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};pl.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(J("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},Ic.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var ql,rl={},sl=Function.prototype.bind;ql=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Jc(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},ql.prototype={bubble:function(){this.ready&&(this.uniqueString=Mc(this.str,this.keypaths),this.keypath=Nc(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e,f=this;d=this.keypath,a=this.root.viewmodel.computations[d.str],a?this.root.viewmodel.mark(d):(e=Kc(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:a.isSpecial?(b=a.value,function(){return b}):function(){var b=f.root.viewmodel.get(a,{noUnwrap:!0});return"function"==typeof b&&(b=Pc(b,f.root)),b}}),c={deps:this.keypaths.filter(Oc),get:function(){var a=b.map(Lc);return e.apply(null,a)}},a=this.root.viewmodel.compute(d,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var tl=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===ak?this.refResolver=Jc(this,a.n,function(a){d.resolve(a)}):new ql(b,c,a,function(a){d.resolve(a)})};tl.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var ul=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=N(d,e,g))?this.base=f:this.baseResolver=new ml(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new tl(a,h,g)}),this.ready=!0,this.bubble()};ul.prototype={getKeypath:function(){var a=this.members.map(Qc);return!a.every(Rc)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(T)},rebind:function(a,b){var c;this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=J(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Sc),this.bubble()}};var vl={getValue:Gc,init:Tc,resolve:Uc,rebind:Vc},wl=function(a){this.type=Lj,vl.init(this,a)};wl.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:vl.resolve,rebind:vl.rebind,detach:kl,unbind:Fc,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(a){a&&b(this.node)},getValue:vl.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),g(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&ei.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=void 0!=this.value?""+this.value:"";return a?Ec(b):b}};var xl=function(a,b){vl.rebind.call(this,a,b)},yl=function(a){this.type=Nj,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===jk,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,vl.init(this,a)};yl.prototype={bubble:Wc,detach:Xc,find:Yc,findAll:Zc,findAllComponents:$c,findComponent:_c,findNextNode:ad,firstNode:bd,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:vl.getValue,shuffle:cd,rebind:xl,render:ed,resolve:vl.resolve,setValue:fd,toString:qd,unbind:rd,unrender:sd,update:vd};var zl,Al,Bl={};try{oh("table").innerHTML="foo"}catch(Bh){zl=!0,Al={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Cl=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(zl&&(e=Al[b.tagName])?(d=Ad("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===hh.svg?(d=Ad("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=Ad(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},Dl=function(a){this.type=Mj,vl.init(this,a)};Dl.prototype={detach:wd,find:xd,findAll:yd,firstNode:zd,getValue:vl.getValue,rebind:vl.rebind,render:Dd,resolve:vl.resolve,setValue:Ed,toString:Fd,unbind:Fc,unrender:Gd,update:Hd};var El,Fl,Gl,Hl,Il=function(){this.parentFragment.bubble()},Jl=function(a){return this.node?ph(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},Kl=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Ll=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Ml=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Nl=/^true|on|yes|1$/i,Ol=/^[0-9]+$/,Pl=function(a,b){var c;c=b.twoway,void 0!==c&&(a.twoway=0===c||Nl.test(c),delete b.twoway),c=b.lazy,void 0!==c&&(a.lazy=0!==c&&Ol.test(c)?parseInt(c):0===c||Nl.test(c),delete b.lazy)};El="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Fl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Gl=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},Hl=Gl(El.concat(Fl));var Ql=function(a){var b=a.toLowerCase();return Hl[b]||b},Rl=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==hh.html?Ql(b):b;else if(b=b.substring(c+1),a.name=Ql(b),a.namespace=hh[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},Sl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Tl=function(a){this.init(a)};Tl.prototype={bubble:Md,init:Od,rebind:Pd,render:Qd,toString:Rd,unbind:Td,update:ee};var Ul,Vl=function(a,b){var c,d,e=[];for(c in b)b.hasOwnProperty(c)&&(d=new Tl({element:a,name:c,value:b[c],root:a.root}),e[c]=d,"value"!==c&&e.push(d));return(d=e.value)&&e.push(d),e};"undefined"!=typeof document&&(Ul=oh("div"));var Wl=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Fn({root:a.root,owner:this,template:[b]})};Wl.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===hh.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=fe(a,this.isSvg),this.attributes.filter(function(a){return ge(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var Xl=function(a,b){return b?b.map(function(b){return new Wl(a,b)}):[]},Yl=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return n("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name),!1}else b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=he(a))&&(this.resetValue=d,e.formBindings.push(this))};Yl.prototype={handleChange:function(){var a=this;ei.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),ei.scheduleTask(function(){return a.attribute.locked=!1}),ei.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(A(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},Yl.extend=function(a){var b,d=this;return b=function(a){Yl.call(this,a),this.init&&this.init()},b.prototype=xh(d.prototype),c(b.prototype,a),b.extend=Yl.extend,b};var Zl,$l=Yl,_l=$l.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",ie,!1),this.root.lazy||(a.addEventListener("input",ie,!1),a.attachEvent&&a.addEventListener("keyup",ie,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",ie,!1),a.removeEventListener("input",ie,!1),a.removeEventListener("keyup",ie,!1)},getValue:function(){return this.element.node.innerHTML}}),am={},bm=$l.extend({name:"checked",init:function(){this.siblings=je(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",ie,!1),a.attachEvent&&a.addEventListener("click",ie,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",ie,!1),a.removeEventListener("click",ie,!1)},handleChange:function(){ei.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),ei.end()},getValue:function(){return this.element.node.checked},unbind:function(){A(this.siblings,this)}}),cm=$l.extend({name:"name",init:function(){this.siblings=je(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",ie,!1),a.attachEvent&&a.addEventListener("click",ie,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",ie,!1),a.removeEventListener("click",ie,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&$l.prototype.handleChange.call(this)},rebound:function(a,b){var c;$l.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){A(this.siblings,this)}}),dm=$l.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=je(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){A(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),this.isChecked=e(a)?w(a,b):a==b,c.name="{{"+this.keypath.str+"}}",c.checked=this.isChecked,c.addEventListener("change",ie,!1),c.attachEvent&&c.addEventListener("click",ie,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",ie,!1),a.removeEventListener("click",ie,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,$l.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ke).map(le)}}),em=$l.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",ie,!1),a.attachEvent&&a.addEventListener("click",ie,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",ie,!1),a.removeEventListener("click",ie,!1)},getValue:function(){return this.element.node.checked}}),fm=$l.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",ie,!1)},unrender:function(){this.element.node.removeEventListener("change",ie,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,ei.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),gm=fm.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",ie,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",ie,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&x(c,b)||fm.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,ei.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),hm=$l.extend({render:function(){this.element.node.addEventListener("change",ie,!1)},unrender:function(){this.element.node.removeEventListener("change",ie,!1)},getValue:function(){return this.element.node.files}});Zl=$l.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:h(this.element.lazy)&&(a=!1,c=this.element.lazy),b.addEventListener("change",ie,!1),a||(b.addEventListener("input",c?ne:ie,!1),b.attachEvent&&b.addEventListener("keyup",c?ne:ie,!1)),b.addEventListener("blur",me,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",ie,!1),a.removeEventListener("input",ie,!1),a.removeEventListener("keyup",ie,!1),a.removeEventListener("blur",me,!1)}});var im=Zl.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),jm=/^event(?:\.(.+))?/,km={},lm={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},mm=function(a,b,c){this.init(a,b,c)};mm.prototype={bubble:qe,fire:re,getAction:se,init:te,listen:ye,rebind:Ae,render:Be,resolve:Ce,unbind:De,unrender:Ee};var nm=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new mm(a,e[c],b[d]),g.push(f);return g},om=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new Fn({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Fn({template:b.d,root:c,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getArgsList(),f.ready&&f.update()}),this.fn=p("decorators",c,d),this.fn||n(Nh(d,"decorator")))};om.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var pm,qm,rm,sm=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};eh?(qm={},rm=oh("div").style,pm=function(a){var b,c,d;if(a=sm(a),!qm[a])if(void 0!==rm[a])qm[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=jh.length;b--;)if(c=jh[b],void 0!==rm[c+d]){qm[a]=c+d;break}return qm[a]}):pm=null;var tm,um,vm=pm;eh?(um=window.getComputedStyle||undefined__default.getComputedStyle,tm=function(a){var b,c,d,f,g;if(b=um(this.node),"string"==typeof a)return g=b[vm(a)],"0px"===g&&(g=0),g;if(!e(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)f=a[d],g=b[vm(f)],"0px"===g&&(g=0),c[f]=g;return c}):tm=null;var wm=function(a,b){var c;if("string"==typeof a)this.node.style[vm(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[vm(c)]=a[c]);return this},xm=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(o(Nh(a.easing,"easing")),b=Te)):b="function"==typeof a.easing?a.easing:Te,this.easing=b,this.start=Qh(),this.end=this.start+this.duration,this.running=!0,ji.add(this)};xm.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var ym,zm,Am,Bm,Cm,Dm,Em,Fm,Gm=new RegExp("^-(?:"+jh.join("|")+")-"),Hm=function(a){return a.replace(Gm,"")},Im=new RegExp("^(?:"+jh.join("|")+")([A-Z])"),Jm=function(a){var b;return a?(Im.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Km={},Lm={};eh?(zm=oh("div").style,function(){void 0!==zm.transition?(Am="transition",Bm="transitionend",Cm=!0):void 0!==zm.webkitTransition?(Am="webkitTransition",Bm="webkitTransitionEnd",Cm=!0):Cm=!1}(),Am&&(Dm=Am+"Duration",Em=Am+"Property",Fm=Am+"TimingFunction"),ym=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[Em]=d.map(vm).map(Jm).join(","),a.node.style[Fm]=Jm(c.easing||"linear"),a.node.style[Dm]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(sm(Hm(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Bm,j,!1),h=!0,i())},a.node.addEventListener(Bm,j,!1),setTimeout(function(){for(var e,k,l,m,o,p=d.length,q=[];p--;)m=d[p],e=f+m,Cm&&!Lm[e]&&(a.node.style[vm(m)]=b[m],Km[e]||(k=a.getStyle(m),Km[e]=a.getStyle(m)!=b[m],Lm[e]=!Km[e],Lm[e]&&(a.node.style[vm(m)]=k))),(!Cm||Lm[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?n("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!"):d.splice(l,1),o=/[^\d]*$/.exec(b[m])[0],q.push({name:vm(m),interpolator:Oh(parseFloat(k),parseFloat(b[m])),suffix:o}));q.length?new xm({root:a.root,duration:c.duration,easing:sm(c.easing||""),step:function(b){var c,d;for(d=q.length;d--;)c=q[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Bm,j,!1),h=!0,i())},0)},c.delay||0)}):ym=null;var Mm,Nm,Om,Pm,Qm;if("undefined"!=typeof document){if(Mm="hidden",Qm={},Mm in document)Om="";else for(Pm=jh.length;Pm--;)Nm=jh[Pm],Mm=Nm+"Hidden",Mm in document&&(Om=Nm);void 0!==Om?(document.addEventListener(Om+"visibilitychange",Ue),Ue()):("onfocusout"in document?(document.addEventListener("focusout",Ve),document.addEventListener("focusin",We)):(window.addEventListener("pagehide",Ve),window.addEventListener("blur",Ve),window.addEventListener("pageshow",We),window.addEventListener("focus",We)),Qm.hidden=!1)}var Rm,Sm,Tm;eh?(Sm=window.getComputedStyle||undefined__default.getComputedStyle,Rm=function(a,b,c){var d,e=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Qm.hidden)return this.setStyle(a,b),Tm||(Tm=$h.resolve());"string"==typeof a?(d={},d[a]=b):(d=a,c=b),c||(n('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);var f=new $h(function(a){var b,f,g,h,i,j,k;if(!c.duration)return e.setStyle(d),void a();for(b=Object.keys(d),f=[],g=Sm(e.node),i={},j=b.length;j--;)k=b[j],h=g[vm(k)],"0px"===h&&(h=0),h!=d[k]&&(f.push(k),e.node.style[vm(k)]=h);return f.length?void ym(e,d,c,f,a):void a()});return f}):Rm=null;var Um=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),d({},a,b)},Vm=function(a,b,c){this.init(a,b,c)};Vm.prototype={init:Se,start:Xe,getStyle:tm,setStyle:wm,animateStyle:Rm,processParams:Um};var Wm,Xm;Wm=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},Xm=function(){this.node.type&&"text/javascript"!==this.node.type||n("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)};var Ym=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(df).join("")+this.conditionalAttributes.map(df).join(""),"option"===this.name&&bf(this)&&(a+=" selected"),"input"===this.name&&cf(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Ec(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),cl.test(this.template.e)||(a+="</"+this.template.e+">"),a)
},Zm=function(a){this.init(a)};Zm.prototype={bubble:Il,detach:Id,find:Jl,findAll:Kl,findAllComponents:Ll,findComponent:Ml,findNextNode:Jd,firstNode:Kd,getAttribute:Ld,init:Le,rebind:Me,render:Ze,toString:Ym,unbind:ef,unrender:ff};var $m=/^\s*$/,_m=/^\s*/,an=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&$m.test(c)&&b.shift(),d=z(b),void 0!==d&&$m.test(d)&&b.pop(),e=b.reduce(hf,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},bn=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},cn=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=Pj,this.index=a.index,this.name=a.template.r,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,vl.init(this,a),!this.keypath&&(c=jf(this.root,this.name))&&(Fc.call(this),this.isNamed=!0,this.setTemplate(c))};cn.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||Vc.call(this,a,b),this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:vl.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=jf(this.root,""+a)),!b&&this.name&&(b=jf(this.root,this.name))&&(Fc.call(this),this.isNamed=!0),b||(this.root.debug?m:o)('Could not find template for partial "%s"',this.name),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&ei.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.fragmentToUnrender=this.fragment),this.fragment=new Fn({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===Kj?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?bn(b,e[0]):b):b},unbind:function(){this.isNamed||Fc.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var dn=new u("detach"),en={},fn=/\$\{([^\}]+)\}/g,gn=function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:Jf(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:Jf(a.get),set:a.set}),a)},hn=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};hn.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}};var jn=function(a,b,c){var d=this;this.ractive=a,this.viewmodel=a.viewmodel,this.key=b,this.getter=c.get,this.setter=c.set,this.hardDeps=c.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this.hardDeps&&this.hardDeps.forEach(function(b){return a.viewmodel.register(b,d,"computed")}),this._dirty=this._firstRun=!0};jn.prototype={constructor:jn,init:function(){var a;this.bypass=!0,a=this.ractive.viewmodel.get(this.key),this.ractive.viewmodel.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==a&&this.set(a)},invalidate:function(){this._dirty=!0},get:function(){var a,b,c,d=this,e=!1;if(!this.getting){if(this.getting=!0,this._dirty){if(a=this.ractive,this._firstRun||!this.hardDeps.length&&!this.softDeps.length?e=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,f,h;if(!e)for(h=b.length;h--;)if(c=b[h],f=a.viewmodel.get(c),!g(f,d.depValues[c.str]))return d.depValues[c.str]=f,void(e=!0)}),e){a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(f){a.debug&&(n('Failed to compute "%s"',this.key.str),Ch(f.stack||f)),this.value=void 0}b=a.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){d.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value}},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Kf(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new hn(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,ei.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var kn={FAILED_LOOKUP:!0},ln={};Qf.prototype.setValue=function(a){this.viewmodel.set(this.keypath,a,{noMapping:!0})},Rf.prototype={get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){if(!this.resolved)throw new Error("Something very odd happened. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.trackData&&(this.tracker=new Qf(this.localKey,this.local),this.origin.register(this.keypath,this.tracker)),this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group),b.dep.setValue(a.origin.get(c))}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker)},unregister:function(a,b,c){for(var d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}};var mn=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},nn={},on={implicit:!0},pn={noCascade:!0},qn=function(a,b){var c,d;this.ractive=a,this.mappings=b||xh(null);for(c in b)b[c].initViewmodel(this);if(a.data&&a.parameters!==!0)for(c in a.data)(d=this.mappings[c])&&void 0===d.getValue()&&d.setValue(a.data[c]);this.cache={},this.cacheMap=xh(null),this.deps={computed:xh(null),"default":xh(null)},this.depsMap={computed:xh(null),"default":xh(null)},this.patternObservers=[],this.specials=xh(null),this.wrapped=xh(null),this.computations=xh(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={}};qn.prototype={adapt:vf,applyChanges:Cf,capture:Hf,clearCache:If,compute:Lf,get:Mf,init:Of,map:Sf,mark:Tf,merge:Uf,register:Xf,release:Zf,set:$f,smartUpdate:ag,teardown:cg,unregister:dg},fg.prototype={constructor:fg,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?gg(this.queue,b).push(a):hg(this,a),delete this.inProcess[a._guid]}};var rn=new u("construct"),sn=new u("config"),tn=new fg("init"),un=0,vn=ig,wn=function(a,b,d,e,f){var g,h,i,j,k,l={};for(h=a.parentFragment,i=a.root,f=f||{},c(l,f||{}),f.content=e||[],l[""]=f.content,b.defaults.el&&n("The <%s/> component has a default `el` property; it has been disregarded",a.name),j=h;j;){if(j.owner.type===Tj){k=j.owner.container;break}j=j.parent}return g=xh(b.prototype),vn(g,{el:null,append:!0,data:d.data,partials:f,magic:i.magic||b.defaults.magic,modifyArrays:i.modifyArrays,adapt:i.adapt},{parent:i,component:a,container:k,mappings:d.mappings,inlinePartials:l}),g};kg.prototype={bubble:function(){this.dirty||(this.dirty=!0,ei.addView(this))},update:function(){var a=this.parameters.component.instance.viewmodel;this.parameters.addData(this.key.str,this.fragment.getValue()),a.mark(this.key),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var xn=["_data","_mappings"];rg.prototype={resolve:function(a){this.resolved=!0,this.ready?this.readyResolve(a):this.notReadyResolve(a)},notReadyResolve:function(a){if(a.isSpecial)this.parameters.addData(this.key.str,a.value);else{var b=this.parameters.addMapping(this.key,a);void 0===b.getValue()&&(b.updatable=!0)}},readyResolve:function(a){var b=this.parameters.component.instance.viewmodel;a.isSpecial?(this.parameters.addData(this.key.str,a.value),b.mark(this.key)):b.reversedMappings&&b.reversedMappings[this.key.str]?b.reversedMappings[this.key.str].rebind(a):b.mappings[this.key.str].resolve(a)}},ug.prototype={add:function(a,b){if("string"==typeof b){var c=jl(b);this.addData(a.str,c?c.value:b)}else if(0===b)this.addData(a.str);else{var d;d=vg(b)?new rg(this,a,b[0]).resolver:new kg(this,a,b),this.component.resolvers.push(d)}},addData:function(a,b){this.data[a]=b},addMapping:function(a,b){var c;return b&&(c=this.parentViewmodel.mappings[b.str]),this.mappings[a.str]=new Rf(a,{origin:c?c.origin:this.parentViewmodel,keypath:c?c.keypath:b})}};var yn=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},zn=new u("teardown"),An=function(a,b){this.init(a,b)};An.prototype={detach:of,find:pf,findAll:qf,findAllComponents:rf,findComponent:sf,findNextNode:tf,firstNode:uf,init:yg,rebind:zg,render:Ag,toString:Bg,unbind:Cg,unrender:Eg};var Bn=An,Cn=function(a){this.type=Qj,this.value=a.template.c};Cn.prototype={detach:kl,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Dn=function(a){var b,c;this.type=Tj,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.yn||"";this.fragment=new Fn({owner:this,root:b.parent,template:b._inlinePartials[d]||[],pElement:this.containerFragment.pElement}),e(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],ei.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Dn.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),A(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var En=function(a){this.declaration=a.template.a};En.prototype={init:Hh,render:Hh,unrender:Hh,teardown:Hh,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Fn=function(a){this.init(a)};Fn.prototype={bubble:jc,detach:kc,find:lc,findAll:mc,findAllComponents:nc,findComponent:oc,findNextNode:pc,firstNode:qc,getArgsList:zc,getNode:Ac,getValue:Bc,init:Fg,rebind:Hg,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Ig,toString:Jg,unbind:Mg,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Og};var Gn,Hn,In=["template","partials","components","decorators","events"],Jn=new u("reset"),Kn=function(a,b){function c(b,d,f){f&&f.partials[a]||b.forEach(function(b){b.type===Pj&&b.getPartialName()===a&&d.push(b),b.fragment&&c(b.fragment.items,d,f),e(b.fragments)?c(b.fragments,d,f):e(b.items)?c(b.items,d,f):b.type===Sj&&b.instance&&c(b.instance.fragment.items,d,b.instance),b.type===Oj&&(e(b.attributes)&&c(b.attributes,d,f),e(b.conditionalAttributes)&&c(b.conditionalAttributes,d,f))})}var d,f=[];return c(this.fragment.items,f),this.partials[a]=b,d=ei.start(this,!0),f.forEach(function(b){b.value=void 0,b.setValue(a)}),ei.end(),d},Ln=Ni("reverse"),Mn=/\*/,Nn=Ni("shift"),On=Ni("sort"),Pn=Ni("splice"),Qn=new u("teardown"),Rn=new u("unrender"),Sn=Ni("unshift"),Tn=new u("update"),Un={add:t,animate:_,detach:bb,find:cb,findAll:gb,findAllComponents:hb,findComponent:ib,findContainer:jb,findParent:kb,fire:ob,get:pb,insert:qb,merge:sb,observe:vb,observeOnce:wb,off:xb,on:yb,once:zb,pop:Oi,push:Pi,render:Cb,reset:Pg,resetPartial:Kn,resetTemplate:Qg,reverse:Ln,set:Rg,shift:Nn,sort:On,splice:Pn,subtract:Sg,teardown:Tg,toggle:Vg,toHTML:Wg,toHtml:Wg,unrender:Xg,unshift:Sn,update:Yg,updateModel:Zg},Vn=1,Wn=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath.str,d.index={},(c=Ic(b.proxy.parentFragment))&&(d.index=Ic.resolve(c)),d):d};Gn=function(a){vn(this,a)},Hn={extend:{value:dh},getNodeInfo:{value:Wn},parse:{value:undefined__default},Promise:{value:$h},svg:{value:ih},magic:{value:gh},VERSION:{value:"<%= pkg.version %>"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:mh},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ph},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},zh(Gn,Hn),Gn.prototype=c(Un,lh),Gn.prototype.constructor=Gn,Gn.defaults=Gn.prototype;var Xn="function";if(typeof Date.now!==Xn||typeof String.prototype.trim!==Xn||typeof Object.keys!==Xn||typeof Array.prototype.indexOf!==Xn||typeof Array.prototype.forEach!==Xn||typeof Array.prototype.map!==Xn||typeof Array.prototype.filter!==Xn||"undefined"!=typeof window&&typeof window.addEventListener!==Xn)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return Gn});