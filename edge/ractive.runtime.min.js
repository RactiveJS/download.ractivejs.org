!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(){return Gr.createDocumentFragment()}function e(t){var e;if(t&&"boolean"!=typeof t)return Yr&&Gr&&t?t.nodeType?t:"string"==typeof t&&(e=Gr.getElementById(t),!e&&Gr.querySelector&&(e=Gr.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function n(t){return null!=t&&t.toString?""+t:""}function i(t){for(var e,n,i=arguments.length,r=Array(i>1?i-1:0),o=1;i>o;o++)r[o-1]=arguments[o];for(;n=r.shift();)for(e in n)Oo.call(n,e)&&(t[e]=n[e]);return t}function r(t){return"[object Array]"===xo.call(t)}function o(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function s(t){return!isNaN(parseFloat(t))&&isFinite(t)}function a(t){return t&&"[object Object]"===xo.call(t)}function u(t,e){return t.replace(/%s/g,function(){return e.shift()})}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];throw t=u(t,n),new Error(t)}function h(){Qr.DEBUG&&wo.apply(null,arguments)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=u(t,n),_o(t,n)}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=u(t,n),ko[t]||(ko[t]=!0,_o(t,n))}function f(){Qr.DEBUG&&p.apply(null,arguments)}function d(){Qr.DEBUG&&l.apply(null,arguments)}function m(t,e,n){var i=v(t,e,n);return i?i[t][n]:null}function v(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function g(t){return function(){return t}}function y(t){return t?t.replace(Ro,".$1"):""}function b(t){return y(t).split(".")}function w(t,e,n){if("string"!=typeof e||!s(n))throw new Error("Bad arguments");if(/\*/.test(e)){var i=function(){var i={};return t.viewmodel.findMatches(b(e)).forEach(function(t){var e=t.get();if(!s(e))throw new Error(Vo);i[t.getKeypath()]=e+n}),{v:t.set(i)}}();if("object"==typeof i)return i.v}var r=t.get(e);if(!s(r))throw new Error(Vo);return t.set(e,+r+n)}function _(t,e){return Io(this,t,void 0===e?1:+e)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function x(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function j(t,e){var n;if(!r(t)||!r(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function k(t){return"string"==typeof t?[t]:void 0===t?[]:t}function T(t){return t[t.length-1]}function C(t,e){if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function A(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function P(t){setTimeout(t,0)}function S(t,e){return function(){for(var n;n=t.shift();)n(e)}}function F(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Uo)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(o){return void i(o)}if("function"==typeof r){var s,a,u;a=function(e){s||(s=!0,F(t,e,n,i))},u=function(t){s||(s=!0,i(t))};try{r.call(e,a,u)}catch(o){if(!s)return i(o),void(s=!0)}}else n(e)}}function N(t){t.bind()}function R(t){t.cancel()}function I(t){t.handleChange()}function V(t){t.mark()}function B(t){t.render()}function L(t){t.rebind()}function M(t){t.teardown()}function D(t){t.unbind()}function K(t){t.unrender()}function U(t){t.unrender(!0)}function q(t){t.update()}function Q(t){return t.toString()}function H(t){return t.toString(!0)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t){t.detach()}function z(t){t.detachNodes()}function Y(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function G(t){t.dispatch()}function Z(){var t,e;for(Yo.immediateObservers.forEach(G),t=Yo.fragments.length;t--;){e=Yo.fragments[t];var n=e.ractive;zo.fire(n,n.viewmodel.changes),n.viewmodel.changes={},e.update()}Yo.fragments.length=0,Yo.transitionManager.start(),Yo.deferredObservers.forEach(G);var i=Yo.tasks;for(Yo.tasks=[],t=0;t<i.length;t+=1)i[t]();return Yo.fragments.length?Z():void 0}function J(t,e,n){var i,r,o,s,a,u,c,h,p,l,f,d,m,v;if(i=new Wo(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,c=n.duration,a=[],h=n.step,p=n.complete,(h||p)&&(f={},n.step=null,n.complete=null,l=function(t){return function(e,n){f[t]=n}});for(o in t)t.hasOwnProperty(o)&&((h||p)&&(d=l(o),n={easing:u,duration:c},h&&(n.step=d)),n.complete=p?d:jo,a.push(X(this,o,t[o],n)));return v={easing:u,duration:c},h&&(v.step=function(t){return h(t,f)}),p&&i.then(function(t){return p(t,f)}),v.complete=r,m=X(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,s=X(this,t,e,n),i.stop=function(){return s.stop()},i}function X(t,e,n,i){var r,s,a,u,c=void 0;return e&&(c=t.viewmodel.joinAll(y(e).split(".")),u=c.get(),Xo.abort(c,t)),o(u,n)?(i.complete&&i.complete(i.to),us):(i.easing&&(r="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof r&&(r=null)),s=void 0===i.duration?400:i.duration,a=new ts({model:c,from:u,to:n,root:t,duration:s,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),Xo.add(a),t._animations.push(a),a)}function tt(){return this.isDetached?this.el:(this.el&&C(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,hs.fire(this),this.el)}function et(t){return this.el?this.fragment.find(t):null}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){if(t.compareDocumentPosition){var n=t.compareDocumentPosition(e);return 2&n?1:-1}return rt(t,e)}function rt(t,e){for(var n=st(t.component||t._ractive.proxy),i=st(e.component||e._ractive.proxy),r=T(n),o=T(i),s=void 0;r&&r===o;)n.pop(),i.pop(),s=r,r=T(n),o=T(i);r=r.component||r,o=o.component||o;var a=r.parentFragment,u=o.parentFragment;if(a===u){var c=a.items.indexOf(r),h=u.items.indexOf(o);return c-h||n.length-i.length}var p=s.iterations;if(p){var c=p.indexOf(a),h=p.indexOf(u);return c-h||n.length-i.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!")}function ot(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function st(t){var e,n;for(e=[t],n=ot(t);n;)e.push(n),n=ot(n);return e}function at(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=new ls(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i.init(),i.result)):[]}function ut(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=new ls(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i.init(),i.result)}function ct(t){return this.fragment.findComponent(t)}function ht(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function pt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function lt(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function ft(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}function dt(t){var e,n,i,r,o,s;for(e=t.split("."),(n=ys[e.length])||(n=mt(e.length)),o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)s=n[r].map(i).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function mt(t){var e,n,i,r,o,s,a,u,c="";if(!ys[t]){for(i=[];c.length<t;)c+=1;for(e=parseInt(c,2),r=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(r(n[s]));i[o]=u}ys[t]=i}return ys[t]}function vt(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=gt(e);yt(t,i,n.event,n.args,!0)}}function gt(t){return bs.hasOwnProperty(t)?bs[t]:bs[t]=dt(t)}function yt(t,e,n,i){var r,o,s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=!0;for(lt(t,n),o=e.length;o>=0;o--)r=t._subs[e[o]],r&&(a=bt(t,r,n,i)&&a);if(ft(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=gt(u),n&&(n.component=t)}yt(t.parent,e,n,i)}}function bt(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,i)===!1&&(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}function wt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];vt(this,t,{args:n})}function _t(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function Et(t,e){var n=t.findContext().root,i=e.split("."),r=i[0],o=n.mappings.hasOwnProperty(r)?n.mappings[r]:n.computations.hasOwnProperty(r)?n.computations[r]:null;if(o)return i.length>1?o.joinAll(i.slice(1)):o;for(var s=void 0,a=void 0;t;){if(t.isIteration){if(r===t.parent.keyRef)return i.length>1&&_t(r),t.context.getKeyModel();if(r===t.parent.indexRef)return i.length>1&&_t(r),t.context.getIndexModel(t.index)}if(t.context&&((!t.isRoot||t.ractive.component)&&(s=!0),t.context.has(r)))return a&&n.map(r,t.context.joinKey(r)),t.context.joinAll(i);t.componentParent&&!t.ractive.isolated?(t=t.componentParent,a=!0):t=t.parent}return s?void 0:n.joinAll(i)}function Ot(t,e){var n=t.findContext();if("."===e||"this"===e)return n;if("@keypath"===e)return n.getKeypathModel();if("@index"===e){var i=t.findRepeatingFragment();return i.context.getIndexModel(i.index)}if("@key"===e)return t.findRepeatingFragment().context.getKeyModel();if("~"===e[0])return n.root.joinAll(e.slice(2).split("."));if("."===e[0]){for(var r=e.split("/");"."===r[0]||".."===r[0];){var o=r.shift();".."===o&&(n=n.parent)}return e=r.join("/"),"."===e[0]&&(e=e.slice(1)),n.joinAll(e.split("."))}return Et(t,e)}function xt(t){if(!t)return this.viewmodel.get(!0);var e=b(t),n=e[0],i=void 0;return this.viewmodel.has(n)||this.component&&(i=Ot(this.component.parentFragment,n),i&&this.viewmodel.map(n,i)),i=this.viewmodel.joinAll(e),i.get(!0)}function jt(t,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,kt(this)}function kt(t){Os.fire(t),t.findAllComponents("*").forEach(function(t){kt(t.instance)})}function Tt(t){if(!t)return null;if(t===!0)return JSON.stringify;if("function"==typeof t)return t;if("string"==typeof t)return js[t]||(js[t]=function(e){return e[t]});throw new Error("If supplied, options.compare must be a string, function, or `true`")}function Ct(t,e,n){var i=this.viewmodel.joinAll(b(t)),o=Go.start(this,!0),s=i.get();if(e===s)throw new Error("You cannot merge an array with itself");if(!r(s)||!r(e))throw new Error("You cannot merge an array with a non-array");var a=Tt(n&&n.compare);return i.merge(e,a),Go.end(),o}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e,n){var i=this,r=[];if(a(t))!function(){var o=t;n=e||{},Object.keys(o).forEach(function(t){var e=o[t];t.split(" ").forEach(function(t){r.push(St(i,t,e,n))})})}();else{var o=void 0;"function"==typeof t?(n=e,e=t,o=[""]):o=t.split(" "),o.forEach(function(t){r.push(St(i,t,e,n||{}))})}return this._observers.push.apply(this._observers,r),{cancel:function(){r.forEach(R)}}}function St(t,e,n,i){var r=t.viewmodel,o=b(e),s=o.indexOf("*");if(!~s){var a=o[0];if(!r.has(a)&&t.component){var u=Ot(t.component.parentFragment,a);u&&r.map(a,u)}var c=r.joinAll(o);return new ks(t,c,n,i)}var h=0===s?r:r.joinAll(o.slice(0,s));return new Ts(t,h,o.splice(s),n,i)}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e,n){if("string"!=typeof t)throw new Error("ractive.observeList() must be passed a string as its first argument");var i=this.viewmodel.joinAll(b(t)),r=new Cs(this,i,e,n||{});return this._observers.push(r),{cancel:function(){r.cancel()}}}function Rt(){return-1}function It(t,e,n){return a(t)||"function"==typeof t?(n=i(e||{},As),this.observe(t,n)):(n=i(n||{},As),this.observe(t,e,n))}function Vt(t,e){var n,i=this;if(t)n=t.split(" ").map(Ps).filter(Ss),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e),-1!==r&&n.splice(r,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Bt(t,e){var n,i,r,o=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(Ps).filter(Ss),r.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Lt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Mt(t,e,n){var i,r,o,s,a,u=[];if(i=Dt(t,e,n),!i)return null;for(s=i.length-2-i[1],r=Math.min(t,i[0]),o=r+i[1],a=0;r>a;a+=1)u.push(a);for(;o>a;a+=1)u.push(-1);for(;t>a;a+=1)u.push(a+s);return 0!==s?u.touchedFrom=i[0]:u.touchedFrom=t,u}function Dt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t));n.length<2;)n.push(t-n[0]);return n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}function Kt(t,n,i){var r=t.transitionsEnabled;t.noIntro&&(t.transitionsEnabled=!1);var o=Go.start(t,!0);if(Go.scheduleTask(function(){return $s.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(i=e(i)||t.anchor,t.el=n,t.anchor=i,t.cssId&&Hs.apply(),n)if((n.__ractive_instances__||(n.__ractive_instances__=[])).push(t),i){var s=Gr.createDocumentFragment();t.fragment.render(s),n.insertBefore(s,i)}else t.fragment.render(n);return Go.end(),t.transitionsEnabled=r,o.then(function(){return zs.fire(t)})}function Ut(t,n){if(t=e(t)||this.el,!this.append&&t){var i=t.__ractive_instances__;i&&i.length&&qt(i),t.innerHTML=""}return Ws(this,t,n)}function qt(t){t.splice(0,t.length).forEach(M)}function Qt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Ht(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,s,a,u,c=[];for(e=[];n=Xs.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map($t),u=e.length;u--;)a=o.slice(),r=e[u],a[u]=r.base+i+r.modifiers||"",s=o.slice(),s[u]=i+" "+s[u],c.push(a.join(" "),s.join(" "));return c.join(", ")},n=ea.test(t)?t.replace(ea,i):t.replace(Js,"").replace(Zs,function(t,e){var n,i;return ta.test(e)?t:(n=e.split(",").map(Wt),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function Wt(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function $t(t){return t.str}function zt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?c("data option must be an object or a function, `"+t+"` is not valid"):f("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Yt(t,e){zt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?Gt(e,this):e,o=n?Gt(t,this):t;return Zt(r,o)}:Zt(e,t)}function Gt(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&c("Data function must return an object"),n.constructor!==Object&&d("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Zt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Jt(t){var e=mo(aa);return e.parse=function(e,n){return Xt(e,n||t)},e}function Xt(t,e){if(!oa)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return oa(t,e||this.options)}function te(t,e){var n;if(!Gr){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(ee(t)&&(t=t.substring(1)),!(n=Gr.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function ee(t){return t&&"#"===t[0]}function ne(t){return!("string"==typeof t)}function ie(t){return t.defaults&&(t=t.defaults),sa.reduce(function(e,n){return e[n]=t[n],e},{})}function re(t){var e,n=t._config.template;if(n&&n.fn)return e=oe(t,n.fn),e!==n.result?(n.result=e,e=ae(e,t)):void 0}function oe(t,e){var n=se(ua.getParseOptions(t));return e.call(t,n)}function se(t){var e=mo(ua);return e.parse=function(e,n){return ua.parse(e,n||t)},e}function ae(t,e){if("string"==typeof t)"#"===t[0]&&(t=ua.fromId(t)),t=oa(t,ua.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==Hr)throw new Error("Mismatched template version (expected "+Hr+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function ue(t,e,n){if(e)for(var i in e)(n||!t.hasOwnProperty(i))&&(t[i]=e[i])}function ce(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=he(i._parent,e),o="_super"in this,s=this._super;return this._super=r,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i}function he(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=jo,i}function pe(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function le(t,e,n){if(e in t){if(n in t)throw new Error(pe(e,n,!0));f(pe(e,n)),t[n]=t[e]}}function fe(t){le(t,"beforeInit","onconstruct"),le(t,"init","onrender"),le(t,"complete","oncomplete"),le(t,"eventDefinitions","events"),r(t.adaptors)&&le(t,"adaptors","adapt")}function de(t,e,n,i){fe(i);for(var r in i)if(ma.hasOwnProperty(r)){var o=i[r];"el"!==r&&"function"==typeof o?f(r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=o}Qs.forEach(function(r){r[t](e,n,i)}),Gs[t](e,n,i),ca[t](e,n,i),ia[t](e,n,i),me(e.prototype,n,i)}function me(t,e,n){for(var i in n)if(!da[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=va(t,i,r)),e[i]=r}}function ve(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function ge(t){if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");t=ra.init(this.constructor,this,{data:t});var e=Go.start(this,!0),n=this.viewmodel.wrapper;n&&n.reset?n.reset(t)===!1&&this.viewmodel.set(t):this.viewmodel.set(t);for(var i=ha.reset(this),r=void 0,o=i.length;o--;)if(ya.indexOf(i[o])>-1){r=!0;break}return r&&(Ea.fire(this),this.fragment.resetTemplate(this.template),_a.fire(this),ba.fire(this)),Go.end(),wa.fire(this,t),e}function ye(t,e,n){t.forEach(function(t){if(t.type===Ca&&t.name===e)return void n.push(t);if(t.fragment)ye(t.fragment.iterations||t.fragment.items,e,n);else if(r(t.items))ye(t.items,e,n);else if(t.type===Aa&&t.instance){if(t.instance.partials[e])return;ye(t.instance.fragment.items,e,n)}t.type===Ta&&(r(t.attributes)&&ye(t.attributes,e,n),r(t.conditionalAttributes)&&ye(t.conditionalAttributes,e,n))})}function be(t){t.forceResetTemplate()}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e,n){if(t.set&&t.set.__magic)return t.set.__magic.dependants.push({ractive:e,keypath:n}),t;var i=void 0,r=[{ractive:e,keypath:n}],o={get:function(){return"value"in t?t.value:t.get()},set:function(e){i||("value"in t?t.value=e:t.set(e),i=!0,r.forEach(function(t){var n=t.ractive,i=t.keypath;n.set(i,e)}),i=!1)},enumerable:!0};return o.set.__magic={dependants:r,originalDescriptor:t},o}function xe(t,e,n){if(!t.set||!t.set.__magic)return!0;for(var i=t.set.__magic,r=i.length;r--;){var o=i[r];if(o.ractive===e&&o.keypath===n)return i.splice(r,1),!1}}function je(){ru.push(ou=[])}function ke(){return ru.pop()}function Te(t){ou&&ou.push(t)}function Ce(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function Ae(t){var e;return su[t]||(e=t?t+".":"",su[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?Ce(n,t):n:void 0}),su[t]}function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t){t.updateFromBindings(!0)}function Re(t){t.updateKeypathDependants()}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Be(t){var e=t.replace(/^\t+/gm,function(t){return t.split("	").join("  ")}).split("\n"),n=e.length<2?0:e.slice(1).reduce(function(t,e){return Math.min(t,/^\s*/.exec(e)[0].length)},1/0);return e.map(function(t,e){return"    "+(e?t.substring(n):t)}).join("\n")}function Le(t){if(!t)return"";for(var e=t.split("\n"),n=lu.name+".getValue",i=[],r=e.length,o=1;r>o;o+=1){var s=e[o];if(~s.indexOf(n))return i.join("\n");i.push(s)}}function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ke(t,e){var n,i,r;return n="return ("+e.replace(du,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function Ue(t,e){return/this/.test(t.toString())?t.bind(e):t}function qe(t,e,n){var i=void 0,r=void 0,o=void 0,s=void 0,a=void 0;return"function"==typeof n&&(i=Ue(n,t),o=n.toString(),s=!0),"string"==typeof n&&(i=Ke(t,n),o=n),"object"==typeof n&&("string"==typeof n.get?(i=Ke(t,n.get),o=n.get):"function"==typeof n.get?(i=Ue(n.get,t),o=n.get.toString(),s=!0):c("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=Ue(n.set,t),a=n.set.toString())),{getter:i,setter:r,getterString:o,setterString:a,getterUseStack:s}}function Qe(t,e){Qr.DEBUG&&Eo(),$e(t),vo(t,"data",{get:ze}),mu.fire(t,e),vu.forEach(function(n){t[n]=i(mo(t.constructor[n]||null),e[n])});var n=new fu({adapt:We(t,t.adapt,e),data:ra.init(t.constructor,t,e),ractive:t});t.viewmodel=n;var r=i(mo(t.constructor.prototype.computed),e.computed);for(var o in r){var s=qe(t,o,r[o]);n.compute(o,s)}}function He(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function We(t,e,n){function i(e){return"string"==typeof e&&(e=m("adaptors",t,e),e||c(Po(e,"adaptor"))),e}var r,o,s;if(e=e.map(i),r=k(n.adapt).map(i),r=He(e,r),o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,o){if(!Xr)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&r.push(Xa),r.push(Ja)}return s&&r.push(Ga),r}function $e(t){t._guid="r-"+gu++,t._subs=mo(null),t._config={},t._animations=[],t.nodes={},t.event=null,t._eventQueue=[],t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],t.root=t,t.parent=t.container=null}function ze(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ge(t,e){return t[e._guid]||(t[e._guid]=[])}function Ze(t,e){var n=Ge(t.queue,e);for(t.hook.fire(e);n.length;)Ze(t,n.shift());delete t.queue[e._guid]}function Je(t,n,i){if(Object.keys(t.viewmodel.computations).forEach(function(e){var n=t.viewmodel.computations[e];t.viewmodel.value.hasOwnProperty(e)&&n.set(t.viewmodel.value[e]),n.init()}),ha.init(t.constructor,t,n),bu.fire(t),wu.begin(t),t.template){var r=void 0;(i.cssIds||t.cssId)&&(r=i.cssIds?i.cssIds.slice():[],t.cssId&&r.push(t.cssId)),t.fragment=new Oh({owner:t,template:t.template,cssIds:r,indexRefs:i.indexRefs||{},keyRefs:i.keyRefs||{}})}if(wu.end(t),t.fragment){t.fragment.bind(t.viewmodel);var o=e(t.el);if(o){var s=t.render(o,t.append);Qr.DEBUG_PROMISES&&s["catch"](function(e){throw d("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),f("An error happened during rendering",{ractive:t}),e.stack&&h(e.stack),e})}}}function Xe(t,e){if(_u[t])return _u[t];for(var n=new Array(e);e--;)n[e]="_"+e;var i=new Function(n.join(","),"return ("+t+")");return _u[t]=i}function tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function nn(t,e,n){if(t.__ractive_nowrap)return t;var i="__ractive_"+n;if(t[i])return t[i];if(!/\bthis\b/.test(t))return vo(t,"__ractive_nowrap",{value:!0}),t;vo(t,i,{value:t.bind(e),configurable:!0});for(var r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}function rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function on(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function sn(t,e){return e.r?Ot(t,e.r):e.x?new Eu(t,e.x):new Ou(t,e.rx)}function an(t){var e;return(e=t.matchPattern(Du))?{t:Fa,v:e}:null}function un(t){var e;return(e=Mu(t))?Uu.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=an(t))?e.v:(e=t.matchPattern(Ku))?e:void 0}function cn(t){var e,n,i;return t.allowWhitespace(),(e=un(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function hn(t){var e=t.ractive;do for(var n=e._liveComponentQueries,i=n.length;i--;){var r=n[i],o=n["_"+r];o.test(t)&&(o.add(t.instance),t.liveQueries.push(o))}while(e=e.parent)}function pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function fn(t){for(var e=t.ractive;e;){var n=e._liveComponentQueries["_"+t.name];n&&n.remove(t),e=e.parent}}function dn(t){t.makeDirty()}function mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function gn(t){var e=t.element,n=t.name;if("id"===n)return yn;if("value"===n){if("select"===e.name&&"value"===n)return e.getAttribute("multiple")?bn:wn;if("textarea"===e.name)return On;if(null!=e.getAttribute("contenteditable"))return _n;if("input"===e.name){var i=e.getAttribute("type");if("file"===i)return jo;if("radio"===i&&e.binding&&"name"===e.binding.attribute.name)return En}return On}var r=e.node;if(t.isTwoway&&"name"===n){if("radio"===r.type)return xn;if("checkbox"===r.type)return jn}return"style"===n&&r.style.setAttribute?kn:"class"!==n||r.namespaceURI&&r.namespaceURI!==lo?t.useProperty?Cn:An:Tn}function yn(){var t=this.node,e=this.getValue();delete this.ractive.nodes[t.id],this.ractive.nodes[e]=t,t.id=e}function bn(){var t=this.getValue();r(t)||(t=[t]);for(var e=this.node.options,n=e.length;n--;){var i=e[n],o=i._ractive?i._ractive.value:i.value;i.selected=x(t,o)}}function wn(){var t=this.getValue();if(!this.locked){this.node._ractive.value=t;for(var e=this.node.options,n=e.length;n--;){var i=e[n],r=i._ractive?i._ractive.value:i.value;if(r==t){i.selected=!0;break}}}}function _n(){var t=this.getValue();this.locked||(this.node.innerHTML=void 0===t?"":t)}function En(){var t=this.node,e=t.checked,n=this.getValue();t.value=this.node._ractive.value=n,t.checked=n===this.element.getAttribute("name"),e&&!t.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function On(){if(!this.locked){var t=this.getValue();this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",t)}}function xn(){this.node.checked=this.getValue()==this.node._ractive.value}function jn(){var t=this.element,e=this.node,n=t.binding,i=this.getValue(),o=t.getAttribute("value");if(r(i)){for(var s=i.length;s--;)if(o==i[s])return void(n.isChecked=e.checked=!0);n.isChecked=e.checked=!1}else n.isChecked=e.checked=i==o}function kn(){this.node.style.setAttribute("cssText",this.getValue()||"")}function Tn(){this.node.className=n(this.getValue())}function Cn(){this.locked||(this.node[this.propertyName]=this.getValue())}function An(){this.node.setAttribute(this.name,n(this.getString()))}function Pn(t){return t.replace(ic,function(t,e){var n;return n="#"!==e[0]?ec[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Fn(n)):t})}function Sn(t){return t.replace(sc,"&amp;").replace(rc,"&lt;").replace(oc,"&gt;")}function Fn(t){return t?10===t?32:128>t?t:159>=t?nc[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,
enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Bn(t,e){var n=e?"svg":"div";return uc.innerHTML="<"+n+" "+t+"></"+n+">",A(uc.childNodes[0].attributes)}function Ln(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kn(t){var e=this._ractive.events[t.type];e.fire({node:this,original:t})}function Un(){mc=!Gr[vc]}function qn(){mc=!1}function Qn(){mc=!0}function Hn(t){return t}function Wn(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function $n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t){var e=t.node,n=t.ractive;do for(var i=n._liveQueries,r=i.length;r--;){var o=i[r],s=i["_"+o];s.test(e)&&(s.add(e),t.liveQueries.push(s))}while(n=n.parent)}function Yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gn(t){for(;t=t.parent;)if("form"===t.name)return t}function Zn(t,e){d("The "+t+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:e})}function Jn(){this._ractive.binding.handleChange()}function Xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e,n,i){var r=t+e+n.getKeypath();return Qc[r]||(Qc[r]=new Hc(n,i))}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ri(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function oi(t){return t.node.checked}function si(t){return t.element.getAttribute("value")}function ai(){return this.bindings.filter(oi).map(si)}function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function di(){var t;Jn.call(this),t=this._ractive.binding.model.get(),this.value=void 0==t?"":t}function mi(t){var e=void 0;return function(){var n=this;e&&clearTimeout(e),e=setTimeout(function(){var t=n._ractive.binding;t.rendered&&Jn.call(n),e=null},t)}}function vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ei(t){return Xc[t]||(Xc[t]=[])}function Oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ji(){for(var t=this.bindings.length;t--;){var e=this.bindings[t];if(e.node.checked)return e.element.getAttribute("value")}}function ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ti(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ci(t){return t&&1===t.template.length&&t.template[0].t===xa&&!t.template[0].s}function Ai(t){var e=t.attributeByName;if(t.getAttribute("contenteditable")||Ci(e.contenteditable))return Ci(e.value)?zc:null;if("input"===t.name){var n=t.getAttribute("type");if("radio"===n||"checkbox"===n){var i=Ci(e.name),r=Ci(e.checked);if(i&&r&&f("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i)return"radio"===n?eh:$c;if(r)return"radio"===n?th:qc}return"file"===n&&Ci(e.value)?Yc:Ci(e.value)?"number"===n||"range"===n?Jc:Gc:null}return"select"===t.name&&Ci(e.value)?t.getAttribute("multiple")?Zc:nh:"textarea"===t.name&&Ci(e.value)?Gc:void 0}function Pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Si(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Fi(t){t.makeDirty()}function Ni(t){var e=t.attributeByName,n=e.type,i=e.value,r=e.name;return n&&"radio"===n.value&&i&&r.interpolator&&i.getValue()===r.interpolator.model.get()?!0:void 0}function Ri(t){var e=t.toString();return e?" "+e:""}function Ii(t){for(var e=t.liveQueries.length;e--;){var n=t.liveQueries[e];n.remove(t.node)}}function Vi(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return fo;var n=t.parent;return n?"foreignobject"===n.name?lo:n.node.namespaceURI:t.ractive.el.namespaceURI}function Bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Li(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Mi(){var t=this._ractive.proxy;Go.start(),t.formBindings.forEach(Di),Go.end()}function Di(t){t.model.set(t.resetValue)}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ui(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function $i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Yi(t){for(;t;){if("select"===t.name)return t;t=t.parent}}function Gi(t,e,n){var i;if(i=Zi(t,e,n||{}))return i;if(i=ua.fromId(e,{noThrow:!0})){var r=ua.parse(i,ua.getParseOptions(t));return t.partials[e]=r.t}}function Zi(t,e,n){var i=void 0,r=tr(e,n.owner);if(r)return r;var o=v("partials",t,e);if(o){if(r=o.partials[e],"function"==typeof r&&(i=r.bind(o),i.isOwner=o.partials.hasOwnProperty(e),r=i.call(t,ua)),!r&&""!==r)return void f(Ao,e,"partial","partial",{ractive:t});if(!ua.isParsed(r)){var s=ua.parse(r,ua.getParseOptions(o));s.p&&f("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=i?o:Ji(o,e);a.partials[e]=r=s.t}return i&&(r._fn=i),r.v?r.t:r}}function Ji(t,e){return t.partials.hasOwnProperty(e)?t:Xi(t.constructor,e)}function Xi(t,e){return t?t.partials.hasOwnProperty(e)?t:Xi(t._Parent,e):void 0}function tr(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return tr(t,e.parentFragment.owner)}}function er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ir(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rr(t,e,n){var i=void 0;return t?(i={},Object.keys(n).forEach(function(t){i[t]=n[t]}),i[t]=e):i=n,i}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ar(t){return!t||r(t)&&0===t.length||a(t)&&0===Object.keys(t).length}function ur(t,e){return e||r(t)?Ba:a(t)||"function"==typeof t?La:void 0===t?null:Ia}function cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function pr(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function dr(t){return mh[t]||(mh[t]=eo(t))}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function br(t,e){var n,i=v("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),n=r(),!n)return void f(Ao,e,"component","component",{ractive:t});"string"==typeof n&&(n=br(t,n)),n._fn=r,i.components[e]=n}return n}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t){if("string"==typeof t.template)return new dh(t);if(t.template.t===Ta){var e=br(t.parentFragment.ractive,t.template.e);if(e)return new Gu(t,e);var n=t.template.e.toLowerCase(),i=_h[n]||ih;return new i(t)}var r=wh[t.template.t];if(!r)throw new Error("Unrecognised item type "+t.template.t);return new r(t)}function Er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];return t.map(function(t){if(t.type===Oa)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return Or(t.items,e,n,i)}).join(""):Or(t.fragment.items,e,n,i);var r=n+"-"+i++;return e[r]=t.model?t.model.wrapper?t.model.wrapper.value:t.model.get():void 0,"${"+r+"}"}).join("")}function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jr(t){t.unrender(!0)}function kr(t){var e,n;ca.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Oh({template:this.template,root:this,owner:this}),this.fragment.bind(this.viewmodel),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Tr(t,e){var n,i;if(i=Go.start(this,!0),a(t)){n=t;for(t in n)n.hasOwnProperty(t)&&Cr(this,t,n[t])}else Cr(this,t,e);return Go.end(),i}function Cr(t,e,n){if(/\*/.test(e))t.viewmodel.findMatches(b(e)).forEach(function(t){t.set(n)});else{var i=t.viewmodel.joinAll(b(e));i.set(n)}}function Ar(t,e){return Io(this,t,void 0===e?-1:-e)}function Pr(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(R),this.fragment.rendered&&this.el.__ractive_instances__&&C(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():Wo.resolve(),Fh.fire(this),this._boundFunctions.forEach(Sr),t}function Sr(t){delete t.fn[t.prop]}function Fr(t){if("string"!=typeof t)throw new TypeError(Co);var e=void 0;return/\*/.test(t)?(e={},this.viewmodel.findMatches(b(t)).forEach(function(t){e[t.getKeypath()]=!t.get()}),this.set(e)):this.set(t,!this.get(t))}function Nr(){return this.fragment.toString(!0)}function Rr(){var t,e;if(!this.fragment.rendered)return f("ractive.unrender() was called on a Ractive instance that was not rendered"),Wo.resolve();for(t=Go.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),C(this.el.__ractive_instances__,this),Vh.fire(this),Go.end(),t}function Ir(t){var e,n;return n=t?this.viewmodel.joinAll(b(t)):this.viewmodel,e=Go.start(this,!0),n.mark(),Go.end(),Mh.fire(this,n),e}function Vr(t,e){var n=Go.start(this,!0);return t?this.viewmodel.joinAll(b(t)).updateFromBindings(e!==!1):this.viewmodel.updateFromBindings(!0),Go.end(),n}function Br(t,e){return"function"==typeof e&&/_super/.test(t)}function Lr(t){for(var e={};t;)Mr(t,e),Kr(t,e),t=t._Parent!==Qr?t._Parent:!1;return e}function Mr(t,e){Qs.forEach(function(n){Dr(n.useDefaults?t.prototype:t,e,n.name)})}function Dr(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function Kr(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,o=i._method;o&&(i=i._method),r=Uh(e[n]._method,i),o&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}})}function Ur(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(qr,this):qr(this)}function qr(t){var e,n,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Qr&&(r=qh(r)),e=function(t){return this instanceof e?(Qe(this,t||{}),void Je(this,t||{},{})):new e(t)},n=mo(t.prototype),n.constructor=e,go(e,{defaults:{value:n},extend:{value:Ur,writable:!0,configurable:!0},_Parent:{value:t}}),ha.extend(t,n,r),ra.extend(t,n,r),r.computed&&(n.computed=i(mo(t.prototype.computed),r.computed)),e.prototype=n,e}function Qr(t){return this instanceof Qr?(Qe(this,t||{}),void Je(this,t||{},{})):new Qr(t)}var Hr=3,Wr={el:void 0,append:!1,template:{v:Hr,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},$r=Wr,zr={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},Yr="undefined"!=typeof window?window:null,Gr=Yr?document:null,Zr=!!Gr,Jr=("undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply),Xr=void 0;try{Object.defineProperty({},"test",{value:0}),Xr=!0}catch(to){Xr=!1}var eo,no,io,ro,oo,so,ao,uo,co,ho=Gr?Gr.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,po=["o","ms","moz","webkit"],lo="http://www.w3.org/1999/xhtml",fo="http://www.w3.org/2000/svg";if(eo=ho?function(t,e){return e&&e!==lo?Gr.createElementNS(e,t):Gr.createElement(t)}:function(t,e){if(e&&e!==lo)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return Gr.createElement(t)},Zr){for(io=eo("div"),ro=["matches","matchesSelector"],co=function(t){return function(e,n){return e[t](n)}},ao=ro.length;ao--&&!no;)if(oo=ro[ao],io[oo])no=co(oo);else for(uo=po.length;uo--;)if(so=po[ao]+oo.substr(0,1).toUpperCase()+oo.substring(1),io[so]){no=co(so);break}no||(no=function(t,e){var n,i,r;for(i=t.parentNode,i||(io.innerHTML="",i=io,t=t.cloneNode(),io.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else no=null;var mo,vo,go,yo=null;try{Object.defineProperty({},"test",{value:0}),Gr&&Object.defineProperty(eo("div"),"test",{value:0}),vo=Object.defineProperty}catch(bo){vo=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(bo){throw bo}Gr&&Object.defineProperties(eo("div"),{test:{value:0}}),go=Object.defineProperties}catch(bo){go=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&vo(t,n,e[n])}}try{Object.create(null),mo=Object.create}catch(bo){mo=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var wo,_o,Eo,Oo=Object.prototype.hasOwnProperty,xo=Object.prototype.toString,jo=function(){},ko={};Jr?!function(){var t=["%cRactive.js %c0.8.0-edge %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.8.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Eo=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),Eo=jo},_o=function(t,e){if(Eo(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r=void 0;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var o=void 0;(o=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},wo=function(){console.log.apply(console,arguments)}}():_o=wo=Eo=jo;var To,Co="Bad arguments",Ao='A function was specified for "%s" %s, but no %s was returned',Po=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},So=function(t,e,n,i){if(t===e)return g(e);if(i){var r=m("interpolators",n,i);if(r)return r(t,e)||g(e);c(Po(i,"interpolator"))}return No.number(t,e)||No.array(t,e)||No.object(t,e)||g(e)},Fo={number:function(t,e){var n;return s(t)&&s(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,o,s;if(!r(t)||!r(e))return null;for(n=[],i=[],s=o=Math.min(t.length,e.length);s--;)i[s]=So(t[s],e[s]);for(s=o;s<t.length;s+=1)n[s]=t[s];for(s=o;s<e.length;s+=1)n[s]=e[s];return function(t){for(var e=o;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,s;if(!a(t)||!a(e))return null;n=[],o={},r={};for(s in t)Oo.call(t,s)&&(Oo.call(e,s)?(n.push(s),r[s]=So(t[s],e[s])):o[s]=t[s]);for(s in e)Oo.call(e,s)&&!Oo.call(t,s)&&(o[s]=e[s]);return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],o[e]=r[e](t);return o}}},No=Fo,Ro=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Io=w,Vo="Cannot add to a non-numeric value",Bo=_;Yr?(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o})}}(po,0,Yr),To=Yr.requestAnimationFrame):To=null;var Lo=To,Mo=Yr&&Yr.performance&&"function"==typeof Yr.performance.now?function(){return Yr.performance.now()}:function(){return Date.now()},Do={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}},Ko=function(){function t(e){E(this,t),this.event=e,this.method="on"+e,this.deprecate=Do[e]}return t.prototype.call=function(t,e,n){return e[t]?(n?e[t](n):e[t](),!0):void 0},t.prototype.fire=function(t,e){this.call(this.method,t,e),!t[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,t,e)&&(this.deprecate.message?f(this.deprecate.message):f('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)},t}();Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;i>o;o++)if(o in n&&(e=n[o],t.call(r,e,o,n)))return e;return void 0});var Uo,qo={},Qo={},Ho={};"function"==typeof Promise?Uo=Promise:(Uo=function(t){var e,n,i,r,o,s,a=[],u=[],c=qo;i=function(t){return function(i){c===qo&&(e=i,c=t,n=S(c===Qo?a:u,e),P(n))}},r=i(Qo),o=i(Ho);try{t(r,o)}catch(h){o(h)}return s={then:function(t,e){var i=new Uo(function(r,o){var s=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),F(i,n,r,o)}catch(s){o(s)}}):e.push(n)};s(t,a,r),s(e,u,o),c!==qo&&P(n)});return i}},s["catch"]=function(t){return this.then(null,t)},s},Uo.all=function(t){return new Uo(function(e,n){var i,r,o,s=[];if(!t.length)return void e(s);for(o=function(t,r){t&&"function"==typeof t.then?t.then(function(t){s[r]=t,--i||e(s)},n):(s[r]=t,--i||e(s))},i=r=t.length;r--;)o(t[r],r)})},Uo.resolve=function(t){return new Uo(function(e){e(t)})},Uo.reject=function(t){return new Uo(function(e,n){n(t)})});var Wo=Uo,$o=function(){function t(e,n){W(this,t),this.callback=e,this.parent=n,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,n&&n.addChild(this)}return t.prototype.add=function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},t.prototype.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},t.prototype.addDecorator=function(t){this.decoratorQueue.push(t)},t.prototype.decrementOutros=function(){this.outroChildren-=1,Y(this)},t.prototype.decrementTotal=function(){this.totalChildren-=1,Y(this)},t.prototype.detachNodes=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.decoratorQueue.forEach(M),this.detachQueue.forEach($),this.children.forEach(z)}),t.prototype.init=function(){this.ready=!0,Y(this)},t.prototype.remove=function(t){var e=t.isIntro?this.intros:this.outros;C(e,t),Y(this)},t.prototype.start=function(){this.intros.concat(this.outros).forEach(function(t){return t.start()})},t}(),zo=new Ko("change"),Yo=void 0,Go={start:function(t,e){var n,i;return e&&(n=new Wo(function(t){return i=t})),Yo={previousBatch:Yo,transitionManager:new $o(i,Yo&&Yo.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],instance:t},n},end:function(){Z(),Yo.transitionManager.init(),Yo=Yo.previousBatch},addFragment:function(t){O(Yo.fragments,t)},addObserver:function(t,e){O(e?Yo.deferredObservers:Yo.immediateObservers,t)},registerTransition:function(t){t._manager=Yo.transitionManager,Yo.transitionManager.add(t)},registerDecorator:function(t){Yo.transitionManager.addDecorator(t)},detachWhenReady:function(t){Yo.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(Yo){for(n=Yo;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}},Zo=[],Jo={tick:function(){var t,e,n;for(n=Mo(),Go.start(),t=0;t<Zo.length;t+=1)e=Zo[t],e.tick(n)||Zo.splice(t--,1);Go.end(),Zo.length?Lo(Jo.tick):Jo.running=!1},add:function(t){Zo.push(t),Jo.running||(Jo.running=!0,Lo(Jo.tick))},abort:function(t,e){for(var n,i=Zo.length;i--;)n=Zo[i],n.root===e&&n.model===t&&n.stop()}},Xo=Jo,ts=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=So(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ts.prototype={tick:function(){var t,e,n,i,r,o;return o=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==o&&(Go.start(this.root),this.model&&this.model.set(this.to),Go.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),-1===r&&f("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(n=this.interpolator(e),Go.start(this.root),this.model&&this.model.set(n),Go.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&f("Animation was not found"),this.root._animations.splice(t,1)}};var es,ns,is,rs,os,ss,as=J,us={stop:jo},cs=tt,hs=new Ko("detach"),ps=et,ls=function(){function t(e,n,i,r){nt(this,t),this.ractive=e,this.selector=n,this.live=i,this.isComponentQuery=r,this.result=[],this.dirty=!0}return t.prototype.add=function(t){this.result.push(t),this.makeDirty()},t.prototype.cancel=function(){var t,e,n;t=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},t.prototype.init=function(){this.dirty=!1},t.prototype.makeDirty=function(){var t=this;this.dirty||(this.dirty=!0,Go.scheduleTask(function(){return t.update()}))},t.prototype.remove=function(t){var e=this.result.indexOf(this.isComponentQuery?t.instance:t);-1!==e&&this.result.splice(e,1)},t.prototype.update=function(){this.result.sort(this.isComponentQuery?rt:it),this.dirty=!1},t.prototype.test=function(t){return this.isComponentQuery?!this.selector||t.name===this.selector:t?no(t,this.selector):null},t}(),fs=at,ds=ut,ms=ct,vs=ht,gs=pt,ys={},bs={},ws=wt,_s=xt,Es=jt,Os=new Ko("insert"),xs=Ct,js={},ks=function(){function t(e,n,i,r){At(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=i,this.oldValue=void 0,this.newValue=n.get(),this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,r.init!==!1?this.dispatch():this.oldValue=this.newValue,n.register(this)}return t.prototype.cancel=function(){this.model.unregister(this);
},t.prototype.dispatch=function(){this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.newValue,this.dirty=!1},t.prototype.handleChange=function(){if(!this.dirty){if(this.newValue=this.model.get(),this.strict&&this.newValue===this.oldValue)return;Go.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel()}},t}(),Ts=function(){function t(e,n,i,r,o){var s=this;At(this,t),this.context=e,this.baseModel=n,this.keys=i,this.callback=r;var a=i.join("\\.").replace(/\*/g,"(.+)"),u=n.getKeypath();this.pattern=new RegExp("^"+(u?u+".":"")+a+"$"),this.oldValues={},this.newValues={},this.defer=o.defer,this.once=o.once,this.strict=o.strict,this.dirty=!1,this.baseModel.findMatches(this.keys).forEach(function(t){s.newValues[t.getKeypath()]=t.get()}),o.init!==!1?this.dispatch():this.oldValues=this.newValues,n.register(this)}return t.prototype.cancel=function(){this.baseModel.unregister(this)},t.prototype.dispatch=function(){var t=this;Object.keys(this.newValues).forEach(function(e){var n=t.newValues[e],i=t.oldValues[e];if(!(t.strict&&n===i||o(n,i))){var r=t.pattern.exec(e).slice(1),s=[n,i,e].concat(r);t.callback.apply(t.context,s)}}),this.oldValues=this.newValues,this.dirty=!1},t.prototype.handleChange=function(){var t=this;this.dirty||(this.newValues={},this.baseModel.findMatches(this.keys).forEach(function(e){var n=e.getKeypath();t.newValues[n]=e.get()}),Go.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel())},t}(),Cs=function(){function t(e,n,i,r){Ft(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=i,this.pending=null,n.register(this),r.init!==!1?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()}return t.prototype.handleChange=function(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(Rt)),this.handleChange())},t.prototype.shuffle=function(t){var e=this,n=this.slice(),i=[],r=[],o=void 0,s={};t.forEach(function(t,n){s[t]=!0,t!==n&&void 0===o&&(o=n),-1===t&&r.push(e.sliced[n])}),void 0===o&&(o=t.length);for(var a=n.length,u=0;a>u;u+=1)s[u]||i.push(n[u]);this.pending={inserted:i,deleted:r,start:o},this.sliced=n},t.prototype.slice=function(){var t=this.model.get();return r(t)?t.slice():[]},t}(),As={init:!1,once:!0},Ps=function(t){return t.trim()},Ss=function(t){return""!==t},Fs=Vt,Ns=Bt,Rs=Lt,Is=Array.prototype,Vs=function(t){return function(e){var n=this.viewmodel.joinAll(y(e).split(".")),i=n.get();if(!r(i))throw new Error("shuffle array method "+t+" called on non-array at "+e.getKeypath());for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;o>a;a++)s[a-1]=arguments[a];var u=Mt(i.length,t,s),c=Is[t].apply(i,s),h=Go.start(this,!0).then(function(){return c});return u?n.shuffle(u):n.set(c),Go.end(),h}},Bs=Vs("pop"),Ls=Vs("push"),Ms="/* Ractive.js component styles */\n",Ds=[],Ks=!1;Gr?(is=Gr.createElement("style"),is.type="text/css",rs=Gr.getElementsByTagName("head")[0],ss=!1,os=is.styleSheet,ns=function(){var t=Ms+Ds.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");os?os.cssText=t:is.innerHTML=t,ss||(rs.appendChild(is),ss=!0)},es={add:function(t){Ds.push(t),Ks=!0},apply:function(){Ks&&(ns(),Ks=!1)}}):es={add:jo,apply:jo};var Us,qs,Qs,Hs=es,Ws=Kt,$s=new Ko("render"),zs=new Ko("complete"),Ys=Ut,Gs={extend:function(t,e,n){e.adapt=Qt(e.adapt,k(n.adapt))},init:function(){}},Zs=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Js=/\/\*.*?\*\//g,Xs=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,ta=/^@media/,ea=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,na=1,ia={name:"css",extend:function(t,e,n){if(n.css){var i=na++,r=n.noCssTransform?n.css:Ht(n.css,i);e.cssId=i,Hs.add({id:i,styles:r})}},init:function(){}},ra={name:"data",extend:function(t,e,n){var i=void 0,o=void 0;if(n.data&&a(n.data))for(i in n.data)o=n.data[i],o&&"object"==typeof o&&(a(o)||r(o))&&f("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Yt(e.data,n.data)},init:function(t,e,n){var i=Yt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},oa=null,sa=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],aa={fromId:te,isHashedId:ee,isParsed:ne,getParseOptions:ie,createHelper:Jt,parse:Xt},ua=aa,ca={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,"function"==typeof i?e.template=i:e.template=ae(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(r=i,i=oe(e,r),e._config.template={fn:r,result:i}),i=ae(i,e),e.template=i.t,i.p&&ue(e.partials,i.p)},reset:function(t){var e,n=re(t);return n?(e=ae(n,t),t.template=e.t,ue(t.partials,e.p,!0),!0):void 0}};Us=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],qs=function(t,e){this.name=t,this.useDefaults=e},qs.prototype={constructor:qs,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,o=n[r];i=mo(t[r]);for(var s in o)i[s]=o[s];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},Qs=Us.map(function(t){return new qs(t,"computed"===t)});var ha,pa,la,fa,da,ma,va=ce;fa={adapt:Gs,css:ia,data:ra,template:ca},la=Object.keys($r),ma=ve(la.filter(function(t){return!fa[t]})),da=ve(la.concat(Qs.map(function(t){return t.name}))),pa=[].concat(la.filter(function(t){return!Qs[t]&&!fa[t]}),Qs,fa.template,fa.css),ha={extend:function(t,e,n){return de("extend",t,e,n)},init:function(t,e,n){return de("init",t,e,n)},reset:function(t){return pa.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:pa};var ga=ge,ya=["template","partials","components","decorators","events"],ba=new Ko("complete"),wa=new Ko("reset"),_a=new Ko("render"),Ea=new Ko("unrender"),Oa=1,xa=2,ja=3,ka=4,Ta=7,Ca=8,Aa=15,Pa=16,Sa=18,Fa=20,Na=21,Ra=30,Ia=50,Va=51,Ba=52,La=53,Ma=54,Da=function(t,e){var n=[];ye(this.fragment.items,t,n);var i=Go.start(this,!0);return this.partials[t]=e,n.forEach(be),Go.end(),i},Ka=function(){function t(e){we(this,t),this.parentFragment=e.parentFragment,this.ractive=e.parentFragment.ractive,this.template=e.template,this.index=e.index,this.type=e.template.t,this.dirty=!1}return t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},t.prototype.find=function(){return null},t.prototype.findAll=function(){},t.prototype.findComponent=function(){return null},t.prototype.findAllComponents=function(){},t.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)},t}(),Ua=Ka,qa=function(t,e,n,i){var r=t.__model;i&&r.shuffle(i)},Qa=["pop","push","reverse","shift","sort","splice","unshift"],Ha=[];Qa.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];var r=Mt(this.length,t,n),o=Array.prototype[t].apply(this,arguments);Go.start(),this._ractive.setting=!0;for(var s=this._ractive.wrappers.length;s--;)qa(this._ractive.wrappers[s],this,t,r);return Go.end(),this._ractive.setting=!1,o};vo(Ha,t,{value:e})});var Wa=void 0,$a=void 0;({}).__proto__?(Wa=function(t){return t.__proto__=Ha},$a=function(t){return t.__proto__=Array.prototype}):(Wa=function(t){for(var e=Qa.length;e--;){var n=Qa[e];vo(t,n,{value:Ha[n],configurable:!0})}},$a=function(t){for(var e=Qa.length;e--;)delete t[Qa[e]]}),Wa.unpatch=$a;var za=Wa,Ya="Something went wrong in a rather interesting way",Ga={filter:function(t){return r(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Za(t,e,n)}},Za=function(){function t(e,n){_e(this,t),this.root=e,this.value=n,this.__model=null,n._ractive||(vo(n,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),za(n)),n._ractive.instances[e._guid]||(n._ractive.instances[e._guid]=0,n._ractive.instances.push(e)),n._ractive.instances[e._guid]+=1,n._ractive.wrappers.push(this)}return t.prototype.get=function(){return this.value},t.prototype.teardown=function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(Ya);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(Ya);i.splice(r,1)}}else delete t._ractive,za.unpatch(this.value)},t}(),Ja=void 0;try{Object.defineProperty({},"test",{value:0}),Ja={filter:function(t){return t&&"object"==typeof t},wrap:function(t,e,n){return new eu(t,e,n)}}}catch(bo){Ja=!1}var Xa,tu,eu=function(){function t(e,n,i){var r=this;Ee(this,t),this.ractive=e,this.value=n,this.keypath=i,this.originalDescriptors={},Object.keys(n).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r.value,t);r.originalDescriptors[t]=n;var o=i?i+"."+t:t,s=Oe(n,e,o);Object.defineProperty(r.value,t,s)})}return t.prototype.get=function(){return this.value},t.prototype.reset=function(){throw new Error("TODO magic adaptor reset")},t.prototype.set=function(t,e){this.value[t]=e},t.prototype.teardown=function(){var t=this;Object.keys(this.value).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t.value,e);n.set&&n.set.__magic&&(xe(n),1===n.set.__magic.dependants.length&&Object.defineProperty(t.value,e,n.set.__magic.originalDescriptor))})},t}();Ja&&(Xa={filter:function(t,e,n){return Ja.filter(t,e,n)&&Ga.filter(t)},wrap:function(t,e,n){return new tu(t,e,n)}},tu=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Ja.wrap(t,e,n),this.arrayWrapper=Ga.wrap(t,e,n),Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(t){this.arrayWrapper.__model=t}})},tu.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var nu,iu,ru=[],ou=void 0,su={},au=function(){function t(e){Pe(this,t),this.value=e,this.isReadonly=!0,this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.getKeypath=function(){return this.value},t.prototype.rebind=function(t){this.value=t,this.dependants.forEach(I)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){C(this.dependants,t)},t}(),uu=function(){function t(e){Se(this,t),this.parent=e,this.value=e.getKeypath(),this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.handleChange=function(){this.value=this.parent.getKeypath(),this.dependants.forEach(I)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){C(this.dependants,t)},t}(),cu=Object.prototype.hasOwnProperty,hu=null,pu=function(){function t(e,n){Fe(this,t),this.deps=[],this.children=[],this.childByKey={},this.indexModels=[],this.unresolved=[],this.unresolvedByKey={},this.bindings=[],this.value=void 0,e&&(this.parent=e,this.root=e.root,this.key=n,e.value&&(this.value=e.value[this.key],this.adapt()))}return t.prototype.adapt=function(){var t=this.root.adaptors,e=this.value,n=t.length,i=this.root.ractive,r=this.getKeypath(),o=void 0;for(o=0;n>o;o+=1){var s=t[o];if(s.filter(e,r,i)){this.wrapper=s.wrap(i,e,r,Ae(r)),this.wrapper.value=this.value,this.wrapper.__model=this,this.value=this.wrapper.get();break}}},t.prototype.addUnresolved=function(t,e){this.unresolvedByKey[t]||(this.unresolved.push(t),this.unresolvedByKey[t]=[]),this.unresolvedByKey[t].push(e)},t.prototype.clearUnresolveds=function(t){for(var e=this.unresolved.length;e--;){var n=this.unresolved[e];if(!t||n===t){for(var i=this.unresolvedByKey[n],r=this.has(n),o=i.length;o--;)r&&i[o].attemptResolution(),i[o].resolved&&i.splice(o,1);i.length||(this.unresolved.splice(e,1),this.unresolvedByKey[n]=null)}}},t.prototype.createBranch=function(t){var e=s(t)?[]:{};return this.set(e),e},t.prototype.discard=function(){var t=this;this.deps.forEach(function(e){e.boundsSensitive&&t.unregister(e)})},t.prototype.findMatches=function(t){var e=t.length,n=[this],i=void 0,o=void 0,s=function(){var e=t[o];"*"===e?(i=[],n.forEach(function(t){r(t.value)?(hu&&hu.parent===t&&"length"===hu.key&&i.push(hu),t.value.forEach(function(e,n){i.push(t.joinKey(n))})):(a(t.value)||"function"==typeof t.value)&&(Object.keys(t.value).forEach(function(e){i.push(t.joinKey(e))}),t.isRoot&&Object.keys(t.computations).forEach(function(e){i.push(t.joinKey(e))}))})):i=n.map(function(t){return t.joinKey(e)}),n=i};for(o=0;e>o;o+=1)s();return i},t.prototype.get=function(t){return t&&Te(this),this.value},t.prototype.getIndexModel=function(t){var e=this.parent.indexModels;return"string"==typeof this.key&&void 0!==t?new au(t):(e[this.key]||(e[this.key]=new au(this.key)),e[this.key])},t.prototype.getKeyModel=function(){return new au(this.key)},t.prototype.getKeypathModel=function(){return this.keypathModel||(this.keypathModel=new uu(this))},t.prototype.getKeypath=function(){return this.parent.isRoot?this.key:this.parent.getKeypath()+"."+this.key},t.prototype.has=function(t){return this.value&&cu.call(this.value,t)},t.prototype.joinKey=function(e){if(void 0===e||""===e)return this;if(!this.childByKey.hasOwnProperty(e)){var n=new t(this,e);this.children.push(n),this.childByKey[e]=n}return this.childByKey[e]},t.prototype.joinAll=function(t){for(var e=this,n=0;n<t.length;n+=1)e=e.joinKey(t[n]);return e},t.prototype.mark=function(){var t=this.retrieve();o(t,this.value)||(this.value=t,this.children.forEach(V),this.deps.forEach(I),this.clearUnresolveds())},t.prototype.merge=function(t,e){var n=e?this.value.map(e):this.value,i=e?t.map(e):t,r=n.length,o={},s=0,a=n.map(function(t){var e=void 0,n=s;do{if(e=i.indexOf(t,n),-1===e)return-1;n=e+1}while(o[e]===!0&&r>n);return e===s&&(s+=1),o[e]=!0,e});this.parent.value[this.key]=t,this._merged=!0,this.shuffle(a)},t.prototype.register=function(t){this.deps.push(t)},t.prototype.registerTwowayBinding=function(t){this.bindings.push(t)},t.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},t.prototype.set=function(t){if(!o(t,this.value)){if(this.root.changes[this.getKeypath()]=t,this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key];else if(this.wrapper){var e=!this.wrapper.reset||this.wrapper.reset(t)===!1;e?(this.wrapper.teardown(),this.wrapper=null,this.parent.value[this.key]=this.value=t,this.adapt()):this.value=this.wrapper.get()}else{var n=this.parent.value||this.parent.createBranch(this.key);n[this.key]=t,this.value=t,this.adapt()}this.parent.clearUnresolveds(),this.clearUnresolveds();var i=hu;hu=this,this.children.forEach(V),this.deps.forEach(I);for(var r=this.parent;r;)r.deps.forEach(I),r=r.parent;hu=i}},t.prototype.shuffle=function(t){var e=this,n=[],i=0,r=void 0;for(t.forEach(function(t,r){if(t>i&&(i=t),~t){var o=e.indexModels[r];o&&(n[t]=o,t!==r&&o.rebind(t))}});r=this.childByKey[++i];)"function"==typeof r.discard&&r.discard();this.indexModels=n,this.deps.forEach(function(e){e.shuffle&&e.shuffle(t)}),this.updateKeypathDependants(),this.mark(),this.deps.forEach(function(t){t.shuffle||t.handleChange()})},t.prototype.teardown=function(){this.children.forEach(M),this.wrapper&&this.wrapper.teardown()},t.prototype.unregister=function(t){C(this.deps,t)},t.prototype.unregisterTwowayBinding=function(t){C(this.bindings,t)},t.prototype.updateFromBindings=function(t){for(var e=this.bindings.length;e--;){var n=this.bindings[e].getValue();n!==this.value&&this.set(n)}t&&this.children.forEach(Ne)},t.prototype.updateKeypathDependants=function(){this.children.forEach(Re),this.keypathModel&&this.keypathModel.handleChange()},t}(),lu=function(t){function e(n,i,r){Ie(this,e),t.call(this,null,null),this.root=this.parent=n,this.signature=i,this.key=r,this.isReadonly=!this.signature.setter,this.context=n.computationContext,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.boundsSensitive=!0,this.dirty=!0}return Ve(e,t),e.prototype.get=function(t){return t&&Te(this),this.dirty&&(this.value=this.getValue(),this.adapt(),this.dirty=!1),this.value},e.prototype.getValue=function(){je();var t=void 0;try{t=this.signature.getter.call(this.context)}catch(e){f("Failed to compute "+this.getKeypath()+": "+(e.message||e)),console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var n=Be(this.signature.getterString),i=this.signature.getterUseStack?"\n\n"+Le(e.stack):"";console.error(e.name+": "+e.message+"\n\n"+n+i),console.groupCollapsed&&console.groupEnd()}var r=ke();return this.setDependencies(r),t},e.prototype.handleChange=function(){this.dirty=!0,this.deps.forEach(I),this.children.forEach(V),this.clearUnresolveds()},e.prototype.init=function(){},e.prototype.mark=function(){this.handleChange()},e.prototype.register=function(t){this.deps.push(t)},e.prototype.set=function(t){if(!this.signature.setter)throw new Error("Cannot set read-only computed property '"+this.key+"'");this.signature.setter(t)},e.prototype.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var n=t[e];~this.dependencies.indexOf(n)||n.register(this)}this.dependencies=t},e.prototype.unregister=function(t){C(this.deps,t)},e}(pu),fu=function(t){function e(n){Me(this,e),t.call(this,null,null),this.changes={},this.isRoot=!0,this.root=this,this.ractive=n.ractive,this.value=n.data,this.adaptors=n.adapt,this.adapt(),this.mappings={},this.computationContext=n.ractive,this.computations={}}return De(e,t),e.prototype.applyChanges=function(){return this._changeHash={},this.flush(),this._changeHash},e.prototype.compute=function(t,e){var n=new lu(this,e,t);return this.computations[t]=n,n},e.prototype.get=function(t){var e=this;t&&Te(this);var n=i({},this.value);return Object.keys(this.mappings).forEach(function(t){n[t]=e.mappings[t].value}),Object.keys(this.computations).forEach(function(t){"@"!==t[0]&&(n[t]=e.computations[t].value)}),n},e.prototype.getKeypath=function(){return""},e.prototype.has=function(e){return e in this.mappings||e in this.computations||t.prototype.has.call(this,e)},e.prototype.joinKey=function(e){return this.mappings.hasOwnProperty(e)?this.mappings[e]:this.computations.hasOwnProperty(e)?this.computations[e]:t.prototype.joinKey.call(this,e)},e.prototype.map=function(t,e){this.mappings[t]=e},e.prototype.set=function(t){var e=this.wrapper;if(e){var n=!e.reset||e.reset(t)===!1;n&&(e.teardown(),this.wrapper=null,this.value=t,this.adapt())}else this.value=t,this.adapt();this.deps.forEach(I),this.children.forEach(V),this.clearUnresolveds()},e.prototype.retrieve=function(){return this.value},e.prototype.update=function(){},e.prototype.updateFromBindings=function(e){var n=this;t.prototype.updateFromBindings.call(this,e),e&&Object.keys(this.mappings).forEach(function(t){var i=n.mappings[t];i.updateFromBindings(e)})},e}(pu),du=/\$\{([^\}]+)\}/g,mu=new Ko("construct"),vu=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],gu=0,yu=function(){function t(e){Ye(this,t),this.hook=new Ko(e),this.inProcess={},this.queue={}}return t.prototype.begin=function(t){this.inProcess[t._guid]=!0},t.prototype.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?Ge(this.queue,e).push(t):Ze(this,t),delete this.inProcess[t._guid]},t}(),bu=new Ko("config"),wu=new yu("init"),_u={},Eu=function(t){function e(n,i){var r=this;tn(this,e),t.call(this,n.ractive.viewmodel,null),this.fragment=n,this.template=i,this.isReadonly=!0,this.fn=Xe(i.s,i.r.length),this.computation=null,this.resolvers=[],this.models=i.r.map(function(t,e){var i=Ot(n,t);return i||!function(){var i=n.resolve(t,function(t){C(r.resolvers,i),r.models[e]=t,r.bubble()});r.resolvers.push(i)}(),i}),this.bubble()}return en(e,t),e.prototype.bubble=function(){var t=this,e=this.fragment.ractive,n="@"+this.template.s.replace(/_(\d+)/g,function(e,n){if(n>=t.models.length)return e;var i=t.models[n];return i?i.getKeypath():"@undefined"}),i={getter:function(){var n=t.models.map(function(t){var n=t.get(!0);return"function"==typeof n?nn(n,e,e._guid):n});return t.fn.apply(e,n)},getterString:n},r=e.viewmodel.compute(n,i);r.init(),this.value=r.get(),this.computation&&this.computation.unregister(this),this.computation=r,r.register(this)},e.prototype.get=function(){return this.computation.get()},e.prototype.getKeypath=function(){return this.computation?this.computation.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.unbind=function(){this.resolvers.forEach(D)},e}(pu),Ou=function(t){function e(n,i){var r=this;rn(this,e),t.call(this,null,null),this.root=n.ractive.viewmodel,this.resolvers=[],this.base=xu(n,i),this.base||!function(){var t=n.resolve(i.r,function(e){r.base=e,r.bubble(),C(r.resolvers,t)});r.resolvers.push(t)}();var o={handleChange:function(){return r.bubble()}};this.members=i.m.map(function(t,e){if("string"==typeof t)return{get:function(){return t}};var i=void 0;return t.t===Ra?(i=Ot(n,t.n),i?i.register(o):!function(){var i=n.resolve(t.n,function(t){r.members[e]=t,t.register(o),r.bubble(),C(r.resolvers,i)});r.resolvers.push(i)}(),i):(i=new Eu(n,t),i.register(o),i)}),this.isUnresolved=!0,this.bubble()}return on(e,t),e.prototype.bubble=function(){if(this.base){for(var t=this.members.length;t--;)if(!this.members[t]||void 0===this.members[t].get())return;this.isUnresolved=!1;var e=this.members.map(function(t){return t.get()}),n=this.base.joinAll(e);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=n,this.parent=n.parent,n.register(this),n.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange(),this.mark()}},e.prototype.forceResolution=function(){this.resolvers.forEach(function(t){return t.forceResolution()}),this.bubble()},e.prototype.get=function(){return this.model?this.model.get():void 0},e.prototype.getValue=function(){for(var t=this.bindings.length;t--;){var e=this.bindings[t].getValue();if(e!==this.value)return e}return this.value},e.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.set=function(t){if(!this.model)throw new Error("Unresolved reference expression. This should not happen!");this.model.set(t)},e.prototype.unbind=function(){this.resolvers.forEach(D)},e}(pu),xu=sn,ju=/^\s+/;iu=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},iu.prototype=Error.prototype,nu=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},nu.prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;i>n;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],o=0,s=r.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new iu(t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(ju)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},nu.extend=function(t){var e,n,i=this;e=function(t,e){nu.call(this,t,e)},e.prototype=mo(i.prototype);for(n in t)Oo.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=nu.extend,e};var ku,Tu,Cu;ku=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Tu=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Cu=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Au,Pu,Su,Fu,Nu,Ru,Iu,Vu=function(t){return function(e){var n,i,r,o;for(n=e.pos,i='"',r=!1;!r;)o=e.matchPattern(ku)||e.matchPattern(Tu)||e.matchString(t),o?i+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.matchPattern(Cu),o?i+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},Bu=Vu('"'),Lu=Vu("'"),Mu=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=Lu(t),t.matchString('"')?{t:Na,v:n}:(t.pos=e,null)):t.matchString("'")?(n=Bu(t),t.matchString("'")?{t:Na,v:n}:(t.pos=e,null)):null},Du=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Ku=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Uu=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;Pu={"true":!0,"false":!1,undefined:void 0,"null":null},Su=new RegExp("^(?:"+Object.keys(Pu).join("|")+")"),Fu=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Nu=/\$\{([^\}]+)\}/g,Ru=/^\$\{([^\}]+)\}/,Iu=/^\s*$/,Au=nu.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Iu.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Ru),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(Su))?{v:Pu[e]}:void 0},function(t){var e;return(e=t.matchPattern(Fu))?{v:+e}:void 0},function(t){var e,n=Mu(t);return n&&(e=t.values)?{v:n.v.replace(Nu,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=cn(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var qu,Qu,Hu,Wu=function(t,e){var n=new Au(t,{values:e});return n.result},$u=hn,zu=new Ko("teardown"),Yu=function(t){function e(n,i){pn(this,e),t.call(this,n),this.type=Aa;var r=mo(i.prototype);this.instance=r,this.name=n.template.e,this.parentFragment=n.parentFragment,this.complexMappings=[],this.liveQueries=[],r.el&&f("The <"+this.name+"> component has a default 'el' property; it has been disregarded");var o=n.template.p||{};"content"in o||(o.content=n.template.f||[]),this._partials=o,this.yielders={},Qe(this.instance,{partials:o});for(var s=n.parentFragment,a=void 0;s;){if(s.owner.type===Pa){a=s.owner.container;break}s=s.parent}r.parent=this.parentFragment.ractive,r.container=a||null,r.root=r.parent.root,r.component=this,r._inlinePartials=o,this.template.v&&this.setupEvents()}return ln(e,t),e.prototype.bind=function(){var t=this,e=this.instance.viewmodel,n=e.value;this.template.a&&Object.keys(this.template.a).forEach(function(i){var o=t.template.a[i];if(0===o)e.joinKey(i).set(!0);else if("string"==typeof o){var s=Wu(o);e.joinKey(i).set(s?s.value:o)}else if(r(o))if(1===o.length&&o[0].t===xa){var a=xu(t.parentFragment,o[0]);a||(d("The "+i+"='{{"+o[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(i),a=t.parentFragment.findContext().joinKey(i)),e.map(i,a),void 0===a.get()&&i in n&&a.set(n[i])}else!function(){var n=new Oh({owner:t,template:o}).bind(),r=e.joinKey(i);r.set(n.valueOf()),n.bubble=function(){Oh.prototype.bubble.call(n),r.set(n.valueOf())},t.complexMappings.push(n)}()}),Je(this.instance,{partials:this._partials},{indexRefs:this.instance.isolated?{}:this.parentFragment.indexRefs,keyRefs:this.instance.isolated?{}:this.parentFragment.keyRefs,cssIds:this.parentFragment.cssIds})},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},e.prototype.checkYielders=function(){var t=this;Object.keys(this.yielders).forEach(function(e){if(t.yielders[e].length>1)throw Go.end(),new Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time")})},e.prototype.detach=function(){return this.instance.fragment.detach()},e.prototype.find=function(t){return this.instance.fragment.find(t)},e.prototype.findAll=function(t,e){this.instance.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t):void 0:this.instance},e.prototype.findAllComponents=function(t,e){e.test(this)&&(e.add(this.instance),e.live&&this.liveQueries.push(e)),this.instance.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.instance.fragment.firstNode()},e.prototype.rebind=function(){var t=this;this.complexMappings.forEach(L),this.liveQueries.forEach(dn),this.template.a&&!function(){var e=t.instance.viewmodel;Object.keys(t.template.a).forEach(function(n){var i=t.template.a[n];if(r(i)&&1===i.length&&i[0].t===xa){var o=xu(t.parentFragment,i[0]);o||(d("The "+n+"='{{"+i[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(n),o=t.parentFragment.findContext().joinKey(n)),e.map(n,o)}})}(),this.instance.fragment.rebind(this.instance.viewmodel)},e.prototype.render=function(t){Ws(this.instance,t,null),this.checkYielders(),$u(this),this.rendered=!0},e.prototype.setupEvents=function(){var t=this;Object.keys(this.template.v).forEach(function(e){var n=t.template.v[e];"string"!=typeof n&&c("Components currently only support simple events - you cannot include arguments. Sorry!");var i=t.ractive;t.instance.on(e,function(){var t=void 0;arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments));var e=Array.prototype.slice.call(arguments);return vt(i,n,{event:t,args:e}),!1})})},e.prototype.toString=function(){return this.instance.toHTML()},e.prototype.unbind=function(){this.complexMappings.forEach(D);var t=this.instance;t.viewmodel.teardown(),t.fragment.unbind(),t._observers.forEach(R),fn(this),t.fragment.rendered&&t.el.__ractive_instances__&&C(t.el.__ractive_instances__,t),zu.fire(t)},e.prototype.unrender=function(t){var e=this;this.shouldDestroy=t,this.instance.unrender(),this.liveQueries.forEach(function(t){return t.remove(e.instance)})},e.prototype.update=function(){this.instance.fragment.update(),this.checkYielders(),this.dirty=!1},e}(Ua),Gu=Yu,Zu=function(t){function e(){mn(this,e),t.apply(this,arguments)}return vn(e,t),e.prototype.bind=function(){},e.prototype.render=function(){},e.prototype.teardown=function(){},e.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e.prototype.unbind=function(){},e.prototype.unrender=function(){},e}(Ua),Ju={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",
rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Xu=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,tc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,ec={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},nc=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],ic=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(ec).join("|")+"));?","g"),rc=/</g,oc=/>/g,sc=/&/g,ac=function(t){function e(n){Nn(this,e),t.call(this,n),this.name=n.name,this.element=n.element,this.parentFragment=n.element.parentFragment,this.ractive=this.parentFragment.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.value=null,r(n.template)?this.fragment=new Oh({owner:this,template:n.template}):(this.value=n.template,0===this.value&&(this.value="")),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===xa&&this.fragment.items[0]}return Rn(e,t),e.prototype.bind=function(){this.fragment&&this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)},e.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""},e.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():Xu.test(this.name)?!0:this.value},e.prototype.rebind=function(){this.unbind(),this.bind()},e.prototype.render=function(){var t=this.element.node;if(this.node=t,!t.namespaceURI||t.namespaceURI===lo){var e=Ju[this.name]||this.name;void 0!==t[e]&&(this.propertyName=e),(Xu.test(this.name)||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)}this.rendered=!0,this.updateDelegate=gn(this),this.updateDelegate()},e.prototype.toString=function(){var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator)return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(Xu.test(this.name))return t?this.name:"";if(null==t)return"";var e=n(this.getString()).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return e?this.name+'="'+e+'"':this.name}},e.prototype.unbind=function(){this.fragment&&this.fragment.unbind()},e.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.dirty=!1)},e}(Ua),uc=Gr?eo("div"):null,cc=function(t){function e(n){In(this,e),t.call(this,n),this.attributes=[],this.owner=n.owner,this.fragment=new Oh({ractive:this.ractive,owner:this,template:[this.template]}),this.dirty=!1}return Vn(e,t),e.prototype.bind=function(){this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},e.prototype.rebind=function(){throw new Error("ConditionalAttribute$rebind is not yet implemented")},e.prototype.render=function(){this.node=this.owner.node,this.isSvg=this.node.namespaceURI===fo,this.rendered=!0,this.dirty=!0,this.update()},e.prototype.toString=function(){return this.fragment.toString()},e.prototype.unbind=function(){this.fragment.unbind()},e.prototype.unrender=function(){this.rendered=!1},e.prototype.update=function(){var t=this;this.dirty&&(this.fragment.update(),this.rendered&&!function(){var e=t.fragment.toString(),n=Bn(e,t.isSvg);t.attributes.filter(function(t){return Ln(n,t)}).forEach(function(e){t.node.removeAttribute(e.name)}),n.forEach(function(e){t.node.setAttribute(e.name,e.value)}),t.attributes=n}(),this.dirty=!1)},e}(Ua),hc={update:jo,teardown:jo},pc=function(){function t(e,n){Mn(this,t),this.owner=e,this.template=n,this.parentFragment=e.parentFragment,this.ractive=e.ractive,this.dynamicName="object"==typeof n.n,this.dynamicArgs=!!n.d,this.dynamicName?this.nameFragment=new Oh({owner:this,template:n.n}):this.name=n.n||n,this.dynamicArgs?this.argsFragment=new Oh({owner:this,template:n.d}):this.args=n.a||[],this.node=null,this.intermediary=null}return t.prototype.bind=function(){this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString()),this.dynamicArgs&&this.argsFragment.bind()},t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},t.prototype.rebind=function(){this.dynamicName&&this.nameFragment.rebind(),this.dynamicArgs&&this.argsFragment.rebind()},t.prototype.render=function(){var t=m("decorators",this.ractive,this.name);if(!t)return Po(this.name,"decorators"),void(this.intermediary=hc);this.node=this.owner.node;var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;if(this.intermediary=t.apply(this.ractive,[this.node].concat(e)),!this.intermediary||!this.intermediary.teardown)throw new Error("The '"+this.name+"' decorator must return an object with a teardown method")},t.prototype.unbind=function(){this.dynamicName&&this.nameFragment.unbind(),this.dynamicArgs&&this.argsFragment.unbind()},t.prototype.unrender=function(){this.intermediary.teardown()},t.prototype.update=function(){if(this.dynamicName){var t=this.nameFragment.toString();t!==this.name&&(this.name=t,this.unrender(),this.render())}else if(this.intermediary.update){var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;this.intermediary.update.apply(this.ractive,e)}else this.unrender(),this.render()},t}(),lc=function(){function t(e,n,i){Dn(this,t),-1!==n.indexOf("*")&&c('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+n+'="..."/> is not valid'),this.owner=e,this.name=n,this.template=i,this.ractive=e.parentFragment.ractive,this.parentFragment=e.parentFragment,this.node=null}return t.prototype.bind=function(){for(var t=this,e=this.parentFragment;!e.context;)e=e.parent;this.context=e.context;var n=this.template;n.m?(this.method=n.m,this.resolvers=[],this.models=n.a.r.map(function(e,n){if(/^event(?:\.(.+))?$/.test(e))return{event:!0,keys:e.length>5?e.slice(6).split("."):[],unbind:jo};var i=Ot(t.parentFragment,e);return i||!function(){var i=t.parentFragment.resolve(e,function(e){t.models[n]=e,C(t.resolvers,i)});t.resolvers.push(i)}(),i}),this.argsFn=Xe(n.a.s,n.a.r.length)):(this.action="string"==typeof n?n:"string"==typeof n.n?n.n:new Oh({owner:this,template:n.n}),this.args=n.a?"string"==typeof n.a?[n.a]:n.a:n.d?new Oh({owner:this,template:n.d}):[]),this.template.n&&"string"!=typeof this.template.n&&this.action.bind(),this.template.d&&this.args.bind()},t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},t.prototype.fire=function(t){if(t.keypath=this.context.getKeypath(),t.context=this.context.get(),t.index=this.parentFragment.indexRefs,this.method){if("function"!=typeof this.ractive[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');var e=this.models.map(function(e){if(!e)return void 0;if(e.event){for(var n=t,i=e.keys.slice();i.length;)n=n[i.shift()];return n}return e.wrapper?e.wrapper.value:e.get()}),n=this.ractive.event;this.ractive.event=t;var i=this.argsFn.apply(null,e);this.ractive[this.method].apply(this.ractive,i),this.ractive.event=n}else{var r=this.action.toString(),i=this.template.d?this.args.getArgsList():this.args;t.name=r,vt(this.ractive,r,{event:t,args:i})}},t.prototype.rebind=function(){throw new Error("EventHandler$rebind not yet implemented!")},t.prototype.render=function(){var t=this;this.node=this.owner.node;var e=m("events",this.ractive,this.name);if(e){var n=function(e){return t.fire(e)};this.customHandler=e(this.node,n)}else"on"+this.name in this.node||Po(this.name,"events"),this.node._ractive.events[this.name]=this,this.node.addEventListener(this.name,Kn,!1)},t.prototype.unbind=function(){var t=this.template;t.m?(this.resolvers.forEach(D),this.resolvers=[],this.models.forEach(function(t){t&&t.unbind()})):(this.action.unbind&&this.action.unbind(),this.args.unbind&&this.args.unbind())},t.prototype.unrender=function(){this.customHandler?this.customHandler.teardown():(this.node.removeEventListener(this.name,Kn,!1),this.node._ractive.events[this.name]=null)},t.prototype.update=function(){this.method||(this.action.update&&this.action.update(),this.template.d&&this.args.update())},t}(),fc=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Zr?(Qu={},Hu=eo("div").style,qu=function(t){var e,n,i;if(t=fc(t),!Qu[t])if(void 0!==Hu[t])Qu[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=po.length;e--;)if(n=po[e],void 0!==Hu[n+i]){Qu[t]=n+i;break}return Qu[t]}):qu=null;var dc=qu,mc=void 0,vc="hidden";if(Gr){var gc=void 0;if(vc in Gr)gc="";else for(var yc=po.length;yc--;){var bc=po[yc];if(vc=bc+"Hidden",vc in Gr){gc=bc,Gr.addEventListener(gc+"visibilitychange",Un),Un();break}}void 0===gc&&("onfocusout"in Gr?(Gr.addEventListener("focusout",qn),Gr.addEventListener("focusin",Qn)):(Yr.addEventListener("pagehide",qn),Yr.addEventListener("blur",qn),Yr.addEventListener("pageshow",Qn),Yr.addEventListener("focus",Qn)),mc=!0)}var wc=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(d(Po(t.easing,"easing")),e=Hn)):e="function"==typeof t.easing?t.easing:Hn,this.easing=e,this.start=Mo(),this.end=this.start+this.duration,this.running=!0,Xo.add(this)};wc.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var _c,Ec,Oc,xc,jc,kc,Tc,Cc,Ac=new RegExp("^-(?:"+po.join("|")+")-"),Pc=function(t){return t.replace(Ac,"")},Sc=new RegExp("^(?:"+po.join("|")+")([A-Z])"),Fc=function(t){var e;return t?(Sc.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},Nc={},Rc={};Zr?(Ec=eo("div").style,function(){void 0!==Ec.transition?(Oc="transition",xc="transitionend",jc=!0):void 0!==Ec.webkitTransition?(Oc="webkitTransition",xc="webkitTransitionEnd",jc=!0):jc=!1}(),Oc&&(kc=Oc+"Duration",Tc=Oc+"Property",Cc=Oc+"TimingFunction"),_c=function(t,e,n,i,r){setTimeout(function(){var o,s,a,u,c;u=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Tc]=i.map(dc).map(Fc).join(","),t.node.style[Cc]=Fc(n.easing||"linear"),t.node.style[kc]=n.duration/1e3+"s",c=function(e){var n;n=i.indexOf(fc(Pc(e.propertyName))),-1!==n&&i.splice(n,1),i.length||(t.node.removeEventListener(xc,c,!1),a=!0,u())},t.node.addEventListener(xc,c,!1),setTimeout(function(){for(var r,h,p,l,d,m=i.length,v=[];m--;)l=i[m],r=o+l,jc&&!Rc[r]&&(t.node.style[dc(l)]=e[l],Nc[r]||(h=t.getStyle(l),Nc[r]=t.getStyle(l)!=e[l],Rc[r]=!Nc[r],Rc[r]&&(t.node.style[dc(l)]=h))),(!jc||Rc[r])&&(void 0===h&&(h=t.getStyle(l)),p=i.indexOf(l),-1===p?f("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(p,1),d=/[^\d]*$/.exec(e[l])[0],v.push({name:dc(l),interpolator:So(parseFloat(h),parseFloat(e[l])),suffix:d}));v.length?new wc({root:t.root,duration:n.duration,easing:fc(n.easing||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,u()}}):s=!0,i.length||(t.node.removeEventListener(xc,c,!1),a=!0,u())},0)},n.delay||0)}):_c=null;var Ic,Vc,Bc=Yr&&(Yr.getComputedStyle||yo.getComputedStyle),Lc=Wo.resolve(),Mc=function(){function t(e,n,i){$n(this,t),this.owner=e,this.isIntro=i,this.ractive=e.ractive;var r=e.ractive,o=n.n||n;if("string"!=typeof o){var s=new Oh({owner:e,template:o}).bind();if(o=s.toString(),s.unbind(),""===o)return}if(this.name=o,n.a)this.params=n.a;else if(n.d){var s=new Oh({owner:e,template:n.d}).bind();this.params=s.getArgsList(),s.unbind()}this._fn=m("transitions",r,o),this._fn||d(Po(o,"transition"),{ractive:r})}return t.prototype.animateStyle=function(t,e,n){var i=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!mc)return this.setStyle(t,e),Lc;var r=void 0;"string"==typeof t?(r={},r[t]=e):(r=t,n=e),n||(d('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new Wo(function(t){var e,o,s,a,u,c,h;if(!n.duration)return i.setStyle(r),void t();for(e=Object.keys(r),o=[],s=Bc(i.node),u={},c=e.length;c--;)h=e[c],a=s[dc(h)],"0px"===a&&(a=0),a!=r[h]&&(o.push(h),i.node.style[dc(h)]=a);return o.length?void _c(i,r,n,o,t):void t()});return o},t.prototype.getStyle=function(t){var e,n,i,o,s;if(e=Bc(this.node),"string"==typeof t)return s=e[dc(t)],"0px"===s&&(s=0),s;if(!r(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)o=t[i],s=e[dc(o)],"0px"===s&&(s=0),n[o]=s;return n},t.prototype.processParams=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),i({},e,t)},t.prototype.setStyle=function(t,e){var n;if("string"==typeof t)this.node.style[dc(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[dc(n)]=t[n]);return this},t.prototype.start=function(){var t,e,n,i=this;return t=this.node=this.owner.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&Wn(t,e),i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()},t}(),Dc=zn,Kc=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?"value":arguments[1];Yn(this,t),this.element=e,this.ractive=e.ractive,this.attribute=e.attributeByName[n];var i=this.attribute.interpolator;i.twowayBinding=this;var r=i.model;if(r){if(r.isUnresolved)r.forceResolution(),Zn("expression",this.ractive);else if(r.isReadonly){var o=r.getKeypath().replace(/^@/,"");return d("Cannot use two-way binding on <"+e.name+"> element: "+o+" is read-only. To suppress this warning use <"+e.name+" twoway='false'...>",{ractive:this.ractive}),!1}}else i.resolver.forceResolution(),r=i.model,Zn("'"+i.template.r+"' reference",this.ractive);this.attribute.isTwoway=!0,this.model=r;var s=r.get();void 0===s&&this.getInitialValue&&(s=this.getInitialValue(),r.set(s));var a=Gn(e);a&&(this.resetValue=s,a.formBindings.push(this))}return t.prototype.bind=function(){this.model.registerTwowayBinding(this)},t.prototype.handleChange=function(){var t=this;Go.start(this.root),this.attribute.locked=!0,this.model.set(this.getValue()),Go.scheduleTask(function(){return t.attribute.locked=!1}),Go.end()},t.prototype.rebind=function(){this.unbind(),this.model=this.attribute.interpolator.model,this.bind()},t.prototype.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)},t.prototype.unrender=function(){},t}(),Uc=Kc,qc=function(t){function e(n){Xn(this,e),t.call(this,n,"checked")}return ti(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jn,!1),this.node.attachEvent&&this.node.addEventListener("click",Jn,!1)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jn,!1),this.node.removeEventListener("click",Jn,!1)},e.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")},e.prototype.getValue=function(){return this.node.checked},e}(Uc),Qc={},Hc=function(){function t(e,n){ei(this,t),this.model=e,this.getValue=n,this.bindings=[]}return t.prototype.add=function(t){this.bindings.push(t)},t.prototype.bind=function(){this.model.registerTwowayBinding(this),this.bound=!0},t.prototype.remove=function(t){C(this.bindings,t),this.bindings.length||this.unbind()},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1},t}(),Wc=[].push,$c=function(t){function e(n){ii(this,e),t.call(this,n,"name");var i,r;this.checkboxName=!0,this.group=ni(this.ractive._guid,"checkboxes",this.model,ai),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(i=this.model.get(),r=this.element.getAttribute("value"),Wc.call(i,r))}return ri(e,t),e.prototype.bind=function(){this.group.bound||this.group.bind()},e.prototype.changed=function(){var t=!!this.isChecked;return this.isChecked=this.node.checked,this.isChecked===t},e.prototype.getInitialValue=function(){return this.noInitialValue=!0,[]},e.prototype.getValue=function(){return this.group.getValue()},e.prototype.handleChange=function(){this.isChecked=this.element.node.checked,t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node,n=this.model.get(),i=this.element.getAttribute("value");r(n)?this.isChecked=x(n,i):this.isChecked=n==i,e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.isChecked,e.addEventListener("change",Jn,!1),e.attachEvent&&e.addEventListener("click",Jn,!1)},e.prototype.unbind=function(){this.group.remove(this)},e.prototype.unrender=function(){var t=this.element.node;t.removeEventListener("change",Jn,!1),t.removeEventListener("click",Jn,!1)},e}(Uc),zc=function(t){function e(){ui(this,e),t.apply(this,arguments)}return ci(e,t),e.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.addEventListener("change",Jn,!1),e.addEventListener("blur",Jn,!1),this.ractive.lazy||(e.addEventListener("input",Jn,!1),e.attachEvent&&e.addEventListener("keyup",Jn,!1))},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("blur",Jn,!1),t.removeEventListener("change",Jn,!1),t.removeEventListener("input",Jn,!1),t.removeEventListener("keyup",Jn,!1)},e.prototype.getValue=function(){return this.element.node.innerHTML},e}(Uc),Yc=function(t){function e(){hi(this,e),t.apply(this,arguments)}return pi(e,t),e}(Uc),Gc=function(t){function e(){li(this,e),t.apply(this,arguments)}return fi(e,t),e.prototype.getInitialValue=function(){return""},e.prototype.getValue=function(){return this.node.value},e.prototype.render=function(){t.prototype.render.call(this);var e=this.ractive.lazy,n=!1;this.element.template.a&&"lazy"in this.element.template.a&&(e=this.element.template.a.lazy,0===e&&(e=!0)),"false"===e&&(e=!1),s(e)&&(n=+e,e=!1),this.handler=n?mi(n):Jn;var i=this.node;i.addEventListener("change",Jn,!1),e||(i.addEventListener("input",this.handler,!1),i.attachEvent&&i.addEventListener("keyup",this.handler,!1)),i.addEventListener("blur",di,!1)},e.prototype.unrender=function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Jn,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",di,!1)},e}(Uc),Zc=function(t){function e(){vi(this,e),t.apply(this,arguments)}return gi(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Go.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.prototype.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;e>i;i+=1){var r=t[i];if(r.selected){var o=r._ractive?r._ractive.value:r.value;n.push(o)}}return n},e.prototype.handleChange=function(){var e=this.attribute,n=e.getValue(),i=this.getValue();return void 0!==n&&j(i,n)||t.prototype.handleChange.call(this),this},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jn,!1),void 0===this.model.get()&&this.handleChange()},e.prototype.setValue=function(){throw new Error("TODO not implemented yet")},e.prototype.unrender=function(){this.node.removeEventListener("change",Jn,!1)},e.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)},e}(Uc),Jc=function(t){function e(){yi(this,e),t.apply(this,arguments)}return bi(e,t),e.prototype.getInitialValue=function(){return void 0},e.prototype.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},e}(Gc),Xc={},th=function(t){function e(n){wi(this,e),t.call(this,n,"checked"),this.siblings=Ei(this.ractive._guid+this.element.getAttribute("name")),this.siblings.push(this)}return _i(e,t),e.prototype.getValue=function(){return this.node.checked},e.prototype.handleChange=function(){Go.start(this.root),this.siblings.forEach(function(t){t.model.set(t.getValue())}),Go.end()},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jn,!1),this.node.attachEvent&&this.node.addEventListener("click",Jn,!1)},e.prototype.unbind=function(){C(this.siblings,this)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jn,!1),this.node.removeEventListener("click",Jn,!1)},e}(Uc),eh=function(t){function e(n){Oi(this,e),t.call(this,n,"name"),this.group=ni(this.ractive._guid,"radioname",this.model,ji),this.group.add(this)}return xi(e,t),e.prototype.bind=function(){var t=this;this.group.bound||this.group.bind(),this.nameAttributeBinding={handleChange:function(){return t.node.name="{{"+t.model.getKeypath()+"}}"}},this.model.getKeypathModel().register(this.nameAttributeBinding)},e.prototype.getInitialValue=function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},e.prototype.getValue=function(){return this.element.getAttribute("value")},e.prototype.handleChange=function(){this.node.checked&&t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.model.get()==this.element.getAttribute("value"),e.addEventListener("change",Jn,!1),e.attachEvent&&e.addEventListener("click",Jn,!1)},e.prototype.unbind=function(){this.group.remove(this),this.model.getKeypathModel().unregister(this.nameAttributeBinding)},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("change",Jn,!1),t.removeEventListener("click",Jn,!1)},e}(Uc),nh=function(t){function e(){ki(this,e),t.apply(this,arguments)}return Ti(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Go.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n=void 0,i=void 0,r=e;r--;){var o=t[r];if(o.getAttribute("selected")){o.getAttribute("disabled")||(n=o.getAttribute("value")),i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},e.prototype.getValue=function(){var t,e,n,i,r;for(t=this.node.options,n=t.length,e=0;n>e;e+=1)if(i=t[e],t[e].selected&&!t[e].disabled)return r=i._ractive?i._ractive.value:i.value},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Jn,!1)},e.prototype.setValue=function(t){this.model.set(t)},e.prototype.unrender=function(){this.node.removeEventListener("change",Jn,!1)},e}(Uc),ih=function(t){function e(n){var i=this;Pi(this,e),t.call(this,n),this.liveQueries=[],this.name=n.template.e.toLowerCase(),this.isVoid=tc.test(this.name);for(var r=this.parentFragment;r;){if(r.owner.type===Ta){this.parent=r.owner;break}r=r.parent}this.attributeByName={},this.attributes=[],this.template.a&&(Object.keys(this.template.a).forEach(function(t){if("twoway"!==t&&"lazy"!==t){var e=new ac({name:t,element:i,parentFragment:i.parentFragment,template:i.template.a[t]});i.attributeByName[t]=e,"value"!==t&&"type"!==t&&i.attributes.push(e)}}),this.attributeByName.type&&this.attributes.unshift(this.attributeByName.type),this.attributeByName.value&&this.attributes.push(this.attributeByName.value)),this.conditionalAttributes=(this.template.m||[]).map(function(t){return new cc({owner:i,parentFragment:i.parentFragment,template:t})}),this.template.o&&(this.decorator=new pc(this,this.template.o)),this.eventHandlers=[],this.template.v&&Object.keys(this.template.v).forEach(function(t){var e=t.split("-"),n=i.template.v[t];e.forEach(function(t){i.eventHandlers.push(new lc(i,t,n))})}),n.template.f&&(this.fragment=new Oh({template:n.template.f,owner:this,cssIds:null})),this.binding=null}return Si(e,t),e.prototype.bind=function(){this.attributes.forEach(N),this.conditionalAttributes.forEach(N),this.eventHandlers.forEach(N),this.decorator&&this.decorator.bind(),this.fragment&&this.fragment.bind(),(this.binding=this.createTwowayBinding())&&this.binding.bind()},e.prototype.createTwowayBinding=function(){var t=this.template.a;if(!t)return null;var e="twoway"in t?0===t.twoway||"true"===t.twoway:this.ractive.twoway;if(!e)return null;var n=Ai(this);if(!n)return null;var i=new n(this);return i&&i.model?i:null},e.prototype.detach=function(){this.decorator&&this.decorator.unrender();var t=this.node.parentNode;return t&&t.removeChild(this.node),this.node},e.prototype.find=function(t){return no(this.node,t)?this.node:this.fragment?this.fragment.find(t):void 0},e.prototype.findAll=function(t,e){var n=e.test(this.node);n&&(e.add(this.node),e.live&&this.liveQueries.push(e)),this.fragment&&this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},e.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},e.prototype.findNextNode=function(){return null},e.prototype.firstNode=function(){return this.node},e.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():void 0},e.prototype.rebind=function(){this.attributes.forEach(L),this.conditionalAttributes.forEach(L),this.decorator&&this.decorator.rebind(),this.fragment&&this.fragment.rebind(),this.binding&&this.binding.rebind(),this.liveQueries.forEach(Fi)},e.prototype.render=function(t){var e=this;this.namespace=Vi(this);var n=eo(this.template.e,this.namespace);this.node=n;var i=this.parentFragment.findContext();vo(n,"_ractive",{value:{proxy:this,ractive:this.ractive,fragment:this.parentFragment,events:{},context:i,keypath:i.getKeypath()}}),this.parentFragment.cssIds&&n.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.fragment&&this.fragment.render(n),this.attributes.forEach(B),this.conditionalAttributes.forEach(B),this.decorator&&Go.scheduleTask(function(){return e.decorator.render()},!0),this.binding&&this.binding.render(),this.eventHandlers.forEach(B),Dc(this);var r=this.template.t0||this.template.t1;if(r&&this.ractive.transitionsEnabled){var o=new Mc(this,r,!0);Go.registerTransition(o),this._introTransition=o}t.appendChild(n),this.rendered=!0},e.prototype.toString=function(){var t=this.template.e,e=this.attributes.map(Ri).join("")+this.conditionalAttributes.map(Ri).join("");"option"===this.name&&this.isSelected()&&(e+=" selected"),"input"===this.name&&Ni(this)&&(e+=" checked");var n="<"+t+e+">";return this.isVoid?n:("textarea"===this.name&&void 0!==this.getAttribute("value")?n+=Sn(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(n+=this.getAttribute("value")||""),this.fragment&&(n+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),n+="</"+t+">")},e.prototype.unbind=function(){this.attributes.forEach(D),this.conditionalAttributes.forEach(D),this.decorator&&this.decorator.unbind(),this.fragment&&this.fragment.unbind()},e.prototype.unrender=function(t){if(this.rendered){this.rendered=!1;var e=this._introTransition;e&&e.complete(),"option"===this.name?this.detach():t&&Go.detachWhenReady(this),this.fragment&&this.fragment.unrender(),this.eventHandlers.forEach(K),this.binding&&this.binding.unrender(),!t&&this.decorator&&this.decorator.unrender();var n=this.template.t0||this.template.t2;if(n&&this.ractive.transitionsEnabled){var i=new Mc(this,n,!1);Go.registerTransition(i)}var r=this.attributeByName.id;r&&delete this.ractive.nodes[r.getValue()],Ii(this)}},e.prototype.update=function(){this.dirty&&(this.attributes.forEach(q),this.conditionalAttributes.forEach(q),this.eventHandlers.forEach(q),this.decorator&&this.decorator.update(),this.fragment&&this.fragment.update(),this.dirty=!1)},e}(Ua),rh=function(t){function e(n){Bi(this,e),t.call(this,n),this.formBindings=[]}return Li(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.addEventListener("reset",Mi,!1)},e.prototype.unrender=function(){this.node.removeEventListener("reset",Mi,!1)},e}(ih),oh=function(t){function e(n){Ki(this,e),t.call(this,n),this.parentFragment=n.parentFragment,this.template=n.template,this.index=n.index,this.isStatic=!!n.template.s,this.model=null,this.dirty=!1;
}return Ui(e,t),e.prototype.bind=function(){var t=this,e=xu(this.parentFragment,this.template),n=e?e.get():void 0;return this.isStatic?void(this.model={get:function(){return n}}):void(e?(e.register(this),this.model=e):this.resolver=this.parentFragment.resolve(this.template.r,function(e){t.model=e,e.register(t),t.handleChange(),t.resolver=null}))},e.prototype.handleChange=function(){this.bubble()},e.prototype.rebind=function(){if(!this.isStatic&&this.model){var t=xu(this.parentFragment,this.template);if(t!==this.model){var e=this.model.get();this.model.unregister(this),t.register(this),this.model=t,t.get()!==e&&this.handleChange()}}},e.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.resolver&&this.resolver.unbind())},e}(Ua),sh=function(t){function e(){qi(this,e),t.apply(this,arguments)}return Qi(e,t),e.prototype.detach=function(){return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.getString=function(){return this.model?n(this.model.get()):""},e.prototype.render=function(t){this.rendered=!0,this.node=Gr.createTextNode(this.getString()),t.appendChild(this.node)},e.prototype.toString=function(t){var e=this.getString();return t?Sn(e):e},e.prototype.unrender=function(t){t&&this.detach(),this.rendered=!1},e.prototype.update=function(){this.dirty&&(this.rendered&&(this.node.data=this.getString()),this.dirty=!1)},e.prototype.valueOf=function(){return this.model?this.model.get():void 0},e}(oh),ah=function(t){function e(){Hi(this,e),t.apply(this,arguments)}return Wi(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.defaultValue=this.node.value},e}(ih),uh=function(t){function e(n){$i(this,e);var i=n.template;i.a||(i.a={}),void 0!==i.a.value||"disabled"in i||(i.a.value=i.f),t.call(this,n),this.select=Yi(this.parent)}return zi(e,t),e.prototype.bind=function(){if(!this.select)return void t.prototype.bind.call(this);var e=this.attributeByName.selected;if(e&&void 0!==this.select.getAttribute("value")){var n=this.attributes.indexOf(e);this.attributes.splice(n,1),delete this.attributeByName.selected}t.prototype.bind.call(this),this.select.options.push(this)},e.prototype.isSelected=function(){var t=this.getAttribute("value");if(void 0===t||!this.select)return!1;var e=this.select.getAttribute("value");if(e==t)return!0;if(this.select.getAttribute("multiple")&&r(e))for(var n=e.length;n--;)if(e[n]==t)return!0},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.select&&C(this.select.options,this)},e}(ih),ch=function(t){function e(){er(this,e),t.apply(this,arguments)}return nr(e,t),e.prototype.bind=function(){t.prototype.bind.call(this);var e=this.template.r?Gi(this.ractive,this.template.r,this.parentFragment)||null:null;e?(this.named=!0,this.setTemplate(this.template.r,e)):this.model&&"string"==typeof this.model.get()||!this.template.r?this.setTemplate(this.model.get()):this.setTemplate(this.template.r,e),this.fragment=new Oh({owner:this,template:this.partialTemplate}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.forceResetTemplate=function(){this.partialTemplate=Gi(this.ractive,this.name,this.parentFragment),this.partialTemplate||(d("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]),this.fragment.resetTemplate(this.partialTemplate),this.bubble()},e.prototype.rebind=function(){t.prototype.unbind.call(this),t.prototype.bind.call(this),this.fragment.rebind()},e.prototype.render=function(t){this.fragment.render(t)},e.prototype.setTemplate=function(t,e){this.name=t,e||null===e||(e=Gi(this.ractive,t,this.parentFragment)),e||d("Could not find template for partial '"+t+"'"),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.fragment.unbind()},e.prototype.unrender=function(t){this.fragment.unrender(t)},e.prototype.update=function(){this.dirty&&(this.named||this.model&&"string"==typeof this.model.get()&&this.model.get()!==this.name&&(this.setTemplate(this.model.get()),this.fragment.resetTemplate(this.partialTemplate)),this.fragment.update(),this.dirty=!1)},e}(oh),hh=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ph=function(){function e(t){ir(this,e),this.parent=t.owner.parentFragment,this.parentFragment=this,this.owner=t.owner,this.ractive=this.parent.ractive,this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.indexByKey=null}return e.prototype.bind=function(t){var e=this;this.context=t;var n=t.get();if(r(n)){this.iterations=[];for(var i=0;i<n.length;i+=1)this.iterations[i]=this.createIteration(i,i)}else if(a(n)){if(this.indexRef){var o=this.indexRef.split(","),s=hh(o,2),u=s[0],c=s[1];this.keyRef=u,this.indexRef=c}this.indexByKey={},this.iterations=Object.keys(n).map(function(t,n){return e.indexByKey[t]=n,e.createIteration(t,n)})}return this},e.prototype.bubble=function(){this.owner.bubble()},e.prototype.createIteration=function(t,e){var n=this.owner.parentFragment,i=rr(this.keyRef,t,n.keyRefs),r=rr(this.indexRef,e,n.indexRefs),o=new Oh({owner:this,template:this.template,indexRefs:r,keyRefs:i});o.key=t,o.index=e,o.isIteration=!0;var s=this.context.joinKey(t);return o.bind(s)},e.prototype.detach=function(){var e=t();return this.iterations.forEach(function(t){return e.appendChild(t.detach())}),e},e.prototype.find=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var i=this.iterations[n].find(t);if(i)return i}},e.prototype.findAll=function(t,e){var n=this.iterations.length,i=void 0;for(i=0;n>i;i+=1)this.iterations[i].findAll(t,e)},e.prototype.findComponent=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var i=this.iterations[n].findComponent(t);if(i)return i}},e.prototype.findAllComponents=function(t,e){var n=this.iterations.length,i=void 0;for(i=0;n>i;i+=1)this.iterations[i].findAllComponents(t,e)},e.prototype.findNextNode=function(t){return t.index<this.iterations.length-1?this.iterations[t.index+1].firstNode():this.owner.findNextNode()},e.prototype.firstNode=function(){return this.iterations[0]?this.iterations[0].firstNode():null},e.prototype.rebind=function(t){this.context=t,r(t.get())&&this.iterations.forEach(function(e,n){e.rebind(t.joinKey(n))})},e.prototype.render=function(t){this.iterations&&this.iterations.forEach(function(e){return e.render(t)}),this.rendered=!0},e.prototype.shuffle=function(t){var e=this;if(this.pendingNewIndices)throw new Error("Section was already shuffled!");this.pendingNewIndices=t,this.previousIterations=this.iterations.slice();var n=[];t.forEach(function(t,i){if(-1!==t){var r=e.iterations[i];n[t]=r,t!==i&&(r.dirty=!0)}}),this.iterations=n,this.bubble()},e.prototype.toString=function(t){return this.iterations?this.iterations.map(t?H:Q).join(""):""},e.prototype.unbind=function(){return this.iterations.forEach(D),this},e.prototype.unrender=function(t){this.iterations.forEach(t?U:K),this.rendered=!1},e.prototype.update=function(){var e=this;if(this.pendingNewIndices)return void this.updatePostShuffle();var n=this.context.get(),i=void 0,o=void 0;if(r(n))this.iterations.length>n.length&&(i=this.iterations.splice(n.length));else if(a(n)){i=[],o={};for(var s=this.iterations.length;s--;){var u=this.iterations[s];u.key in n?o[u.key]=!0:(this.iterations.splice(s,1),i.push(u))}}else i=this.iterations,this.iterations=[];i&&i.forEach(function(t){t.unbind(),t.unrender(!0)}),this.iterations.forEach(q);var c=r(n)?n.length:a(n)?Object.keys(n).length:0;c>this.iterations.length&&!function(){var i=e.rendered?t():null,s=e.iterations.length;if(r(n))for(;s<n.length;){var u=e.createIteration(s,s);e.iterations.push(u),e.rendered&&u.render(i),s+=1}else a(n)&&Object.keys(n).forEach(function(t){if(!(t in o)){var n=e.createIteration(t,s);e.iterations.push(n),e.rendered&&n.render(i),s+=1}});if(e.rendered){var c=e.parent.findParentNode(),h=e.parent.findNextNode(e);c.insertBefore(i,h)}}()},e.prototype.updatePostShuffle=function(){var e=this,n=this.pendingNewIndices,i=-1,r=null;n.forEach(function(t,n){var o=e.previousIterations[n];-1===t?o.unbind().unrender(!0):(o.index=t,o.rebind(e.context.joinKey(t)),null===r&&t!==i+1&&(r=n)),i=t});var o=this.rendered?t():null,s=this.rendered?this.parent.findParentNode():null,a=this.context.get().length,u=void 0;for(u=0;a>u;u+=1){var c=this.iterations[u];this.rendered&&(c?null!==r&&u>=r?o.appendChild(c.detach()):o.childNodes.length&&s.insertBefore(o,c.firstNode()):(this.iterations[u]=this.createIteration(u,u),this.iterations[u].render(o))),this.rendered||c||(this.iterations[u]=this.createIteration(u,u))}this.rendered&&o.childNodes.length&&s.insertBefore(o,this.owner.findNextNode()),this.iterations.forEach(q),this.pendingNewIndices=null},e}(),lh=function(e){function n(t){or(this,n),e.call(this,t),this.sectionType=t.template.n||null,this.fragment=null}return sr(n,e),n.prototype.bind=function(){if(e.prototype.bind.call(this),this.model){var t=this.model.value,n=void 0;if(this.sectionType||(this.sectionType=ur(t,this.template.i)),ar(t)&&this.sectionType!==La)return void(this.sectionType===Va&&(this.fragment=new Oh({owner:this,template:this.template.f}).bind()));if(this.sectionType===Va)return;n=this.sectionType===Ia?new Oh({owner:this,template:this.template.f}).bind():this.sectionType===La||this.sectionType===Ma?new Oh({owner:this,template:this.template.f}).bind(this.model):new ph({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model),this.fragment=n}},n.prototype.detach=function(){return this.fragment?this.fragment.detach():t()},n.prototype.find=function(t){return this.fragment?this.fragment.find(t):void 0},n.prototype.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},n.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},n.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},n.prototype.firstNode=function(){return this.fragment&&this.fragment.firstNode()},n.prototype.rebind=function(){e.prototype.rebind.call(this),this.fragment&&this.fragment.rebind(this.sectionType===Ia?null:this.model)},n.prototype.render=function(t){this.rendered=!0,this.fragment&&this.fragment.render(t)},n.prototype.shuffle=function(t){this.fragment&&this.sectionType===Ba&&this.fragment.shuffle(t)},n.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},n.prototype.unbind=function(){e.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},n.prototype.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},n.prototype.update=function(){if(this.dirty&&this.model){var e=this.model.value;null===this.sectionType&&(this.sectionType=ur(e,this.template.i));var n=void 0;if(this.sectionType===Ba)this.fragment?this.fragment.update():n=new ph({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model);else if(this.sectionType===La)this.fragment?this.fragment.update():n=new Oh({owner:this,template:this.template.f}).bind(this.model);else if(this.sectionType===Ma)this.fragment?ar(e)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update():ar(e)||(n=new Oh({owner:this,template:this.template.f}).bind(this.model));else{var i=this.sectionType===Va?ar(e):!!e;this.fragment?i?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):i&&(n=new Oh({owner:this,template:this.template.f}).bind(null))}if(n){if(this.rendered){var r=this.parentFragment.findParentNode(),o=this.parentFragment.findNextNode(this);if(o){var s=t();n.render(s),o.parentNode.insertBefore(s,o)}else n.render(r)}this.fragment=n}this.dirty=!1}},n}(oh),fh=function(t){function e(n){cr(this,e),t.call(this,n),this.options=[]}return hr(e,t),e.prototype.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&Go.scheduleTask(function(){t.sync(),t.dirty=!1}),this.parentFragment.bubble())},e.prototype.render=function(e){t.prototype.render.call(this,e),this.sync();for(var n=this.node,i=n.options.length;i--;)n.options[i].defaultSelected=n.options[i].selected;this.rendered=!0},e.prototype.sync=function(){var t=this.node;if(t){var e=A(t.options),n=this.getAttribute("value"),i=this.getAttribute("multiple");if(void 0!==n){var r=void 0;e.forEach(function(t){var e=t._ractive?t._ractive.value:t.value,o=i?pr(n,e):n==e;o&&(r=!0),t.selected=o}),r||i||(e[0]&&(e[0].selected=!0),this.binding&&this.binding.forceUpdate())}else this.binding&&this.binding.forceUpdate()}},e.prototype.update=function(){t.prototype.update.call(this),this.sync()},e}(ih),dh=function(t){function e(n){lr(this,e),t.call(this,n),this.type=Oa}return fr(e,t),e.prototype.bind=function(){},e.prototype.detach=function(){if(!this.node.parentNode)throw new Error("TODO an unexpected situation arose");return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.rebind=function(){},e.prototype.render=function(t){this.node=Gr.createTextNode(this.template),t.appendChild(this.node),this.rendered=!0},e.prototype.toString=function(t){return t?Sn(this.template):this.template},e.prototype.unbind=function(){},e.prototype.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},e.prototype.update=function(){},e.prototype.valueOf=function(){return this.template},e}(Ua),mh={};try{eo("table").innerHTML="foo"}catch(bo){Ic=!0,Vc={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var vh,gh=function(t,e,n){var i,r,o,s,a,u=[];if(null!=t&&""!==t){for(Ic&&(r=Vc[e.tagName])?(i=dr("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(o=i.options[i.selectedIndex])):e.namespaceURI===fo?(i=dr("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=dr(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(o=i.options[i.selectedIndex]));s=i.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1)}return u},yh=function(e){function n(t){mr(this,n),e.call(this,t)}return vr(n,e),n.prototype.detach=function(){var e=t();return this.nodes.forEach(function(t){return e.appendChild(t)}),e},n.prototype.find=function(t){var e=this.nodes.length,n=void 0;for(n=0;e>n;n+=1){var i=this.nodes[n];if(1===i.nodeType){if(no(i,t))return i;var r=i.querySelector(t);if(r)return r}}return null},n.prototype.findAll=function(t,e){var n=this.nodes.length,i=void 0;for(i=0;n>i;i+=1){var r=this.nodes[i];if(1===r.nodeType){e.test(r)&&e.add(r);var o=r.querySelectorAll(t);if(o){var s=o.length,a=void 0;for(a=0;s>a;a+=1)e.add(o[a])}}}},n.prototype.findComponent=function(){return null},n.prototype.firstNode=function(){return this.nodes[0]},n.prototype.render=function(t){var e=this.model?this.model.get():"";this.nodes=gh(e,this.parentFragment.findParentNode(),t),this.rendered=!0},n.prototype.toString=function(){return this.model&&null!=this.model.get()?Pn(""+this.model.get()):""},n.prototype.unrender=function(){this.nodes&&this.nodes.forEach(function(t){return t.parentNode.removeChild(t)}),this.rendered=!1},n.prototype.update=function(){if(this.rendered&&this.dirty){this.unrender();var e=t();this.render(e);var n=this.parentFragment.findParentNode(),i=this.parentFragment.findNextNode(this);n.insertBefore(e,i),this.dirty=!1}},n}(oh),bh=function(t){function e(n){gr(this,e),t.call(this,n),this.container=n.parentFragment.ractive,this.component=this.container.component,this.containerFragment=n.parentFragment,this.parentFragment=this.component.parentFragment,this.name=n.template.n||""}return yr(e,t),e.prototype.bind=function(){var t=this.name;(this.component.yielders[t]||(this.component.yielders[t]=[])).push(this);var e=this.container._inlinePartials[t||"content"];"string"==typeof e&&(e=oa(e).t),e||(f('Could not find template for partial "'+t+'"',{ractive:this.ractive}),e=[]),this.fragment=new Oh({owner:this,ractive:this.container.parent,template:e}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.find(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.rebind=function(){throw new Error("Yielder$rebind is not yet implemented!")},e.prototype.render=function(t){return this.fragment.render(t)},e.prototype.setTemplate=function(t){var e=this.parentFragment.ractive.partials[t];"string"==typeof e&&(e=oa(e).t),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){this.fragment.unbind(),C(this.component.yielders[this.name],this)},e.prototype.unrender=function(t){this.fragment.unrender(t)},e}(Ua),wh=(vh={},wr(vh,Sa,Zu),wr(vh,xa,sh),wr(vh,Ca,ch),wr(vh,ka,lh),wr(vh,ja,yh),wr(vh,Pa,bh),vh),_h={doctype:Zu,form:rh,input:ah,option:uh,select:fh,textarea:ah},Eh=function(){function t(e,n,i){for(Er(this,t),this.fragment=e,this.reference=y(n),this.callback=i,this.keys=n.split("."),this.resolved=!1;e;)e.context&&e.context.addUnresolved(this.keys[0],this),e=e.componentParent||e.parent}return t.prototype.attemptResolution=function(){if(!this.resolved){var t=Et(this.fragment,this.reference);t&&(this.resolved=!0,this.callback(t))}},t.prototype.forceResolution=function(){if(!this.resolved){var t=this.fragment.findContext().joinAll(this.keys);this.callback(t),this.resolved=!0}},t.prototype.unbind=function(){C(this.fragment.unresolved,this)},t}(),Oh=function(){function e(t){xr(this,e),this.owner=t.owner,this.isRoot=!t.owner.parentFragment,this.parent=this.isRoot?null:this.owner.parentFragment,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null,this.context=null,this.rendered=!1,this.indexRefs=t.indexRefs||(this.parent?this.parent.indexRefs:[]),this.keyRefs=t.keyRefs||(this.parent?this.parent.keyRefs:{}),this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.resolvers=[],this.dirty=!1,this.dirtyArgs=this.dirtyValue=!0,this.template=t.template||[],this.createItems()}return e.prototype.bind=function(t){return this.context=t,this.items.forEach(N),this.bound=!0,this.dirty&&this.update(),this},e.prototype.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&Go.addFragment(this):this.owner.bubble())},e.prototype.createItems=function(){var t=this;this.items=this.template.map(function(e,n){return _r({parentFragment:t,template:e,index:n})})},e.prototype.detach=function(){var e=t();return this.items.forEach(function(t){return e.appendChild(t.detach())}),e},e.prototype.find=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var i=this.items[n].find(t);if(i)return i}},e.prototype.findAll=function(t,e){if(this.items){var n=this.items.length,i=void 0;for(i=0;n>i;i+=1){var r=this.items[i];r.findAll&&r.findAll(t,e)}}return e},e.prototype.findComponent=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var i=this.items[n].findComponent(t);if(i)return i}},e.prototype.findAllComponents=function(t,e){if(this.items){var n=this.items.length,i=void 0;for(i=0;n>i;i+=1){var r=this.items[i];r.findAllComponents&&r.findAllComponents(t,e)}}return e},e.prototype.findContext=function(){for(var t=this;!t.context;)t=t.parent;return t.context},e.prototype.findNextNode=function(t){var e=this.items[t.index+1];return e?e.firstNode():this.isRoot?this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null:this.owner.findNextNode(this)},e.prototype.findParentNode=function(){var t=this;do{if(t.owner.type===Ta)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el;t=t.componentParent||t.parent}while(t);throw new Error("Could not find parent node")},e.prototype.findRepeatingFragment=function(){for(var t=this;t.parent&&!t.isIteration;)t=t.parent||t.componentParent;return t},e.prototype.firstNode=function(){return this.items[0]?this.items[0].firstNode():this.parent.findNextNode(this.owner)},e.prototype.getArgsList=function(){if(this.dirtyArgs){var t={},e=Or(this.items,t,this.ractive._guid),n=Wu("["+e+"]",t);this.argsList=n?n.value:[this.toString()],this.dirtyArgs=!1}return this.argsList},e.prototype.rebind=function(t){this.context=t,this.items.forEach(L)},e.prototype.render=function(t){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0,this.items.forEach(function(e){return e.render(t)})},e.prototype.resetTemplate=function(e){var n=this.bound,i=this.rendered;if(n&&(i&&this.unrender(!0),this.unbind()),this.template=e,this.createItems(),n&&(this.bind(this.context),i)){var r=this.findParentNode(),o=this.parent?this.parent.findNextNode(this.owner):null;if(o){var s=t();this.render(s),r.insertBefore(s,o)}else this.render(r)}},e.prototype.resolve=function(t,e){if(!this.context)return this.parent.resolve(t,e);var n=new Eh(this,t,e);return this.resolvers.push(n),n},e.prototype.toHtml=function(){return this.toString()},e.prototype.toString=function(t){return this.items.map(t?H:Q).join("")},e.prototype.unbind=function(){return this.items.forEach(D),this.bound=!1,this},e.prototype.unrender=function(t){this.items.forEach(t?jr:K),this.rendered=!1},e.prototype.update=function(){this.dirty&&(this.items.forEach(q),this.dirty=!1)},e.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var t={},e=Or(this.items,t,this.ractive._guid),n=Wu(e,t);this.value=n?n.value:this.toString(),this.dirtyValue=!1}return this.value},e}(),xh=kr,jh=Vs("reverse"),kh=Tr,Th=Vs("shift"),Ch=Vs("sort"),Ah=Vs("splice"),Ph=Ar,Sh=Pr,Fh=new Ko("teardown"),Nh=Fr,Rh=Nr,Ih=Rr,Vh=new Ko("unrender"),Bh=Vs("unshift"),Lh=Ir,Mh=new Ko("update"),Dh=Vr,Kh={add:Bo,animate:as,detach:cs,find:ps,findAll:fs,findAllComponents:ds,findComponent:ms,findContainer:vs,findParent:gs,fire:ws,get:_s,insert:Es,merge:xs,observe:Pt,observeList:Nt,observeOnce:It,off:Fs,on:Ns,once:Rs,pop:Bs,push:Ls,render:Ys,reset:ga,resetPartial:Da,resetTemplate:xh,reverse:jh,set:kh,shift:Th,sort:Ch,splice:Ah,subtract:Ph,teardown:Sh,toggle:Nh,toHTML:Rh,toHtml:Rh,unrender:Ih,unshift:Bh,update:Lh,updateModel:Dh},Uh=function(t,e,n){return n||Br(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t},qh=Lr,Qh=Ur,Hh=function(t){if(!t||!t._ractive)return{};var e=t._ractive;return{ractive:e.ractive,keypath:e.context.getKeypath(),index:i({},e.fragment.indexRefs),key:i({},e.fragment.keyRefs)}},Wh="function";if(typeof Date.now!==Wh||typeof String.prototype.trim!==Wh||typeof Object.keys!==Wh||typeof Array.prototype.indexOf!==Wh||typeof Array.prototype.forEach!==Wh||typeof Array.prototype.map!==Wh||typeof Array.prototype.filter!==Wh||Yr&&typeof Yr.addEventListener!==Wh)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return i(Qr.prototype,Kh,$r),Qr.prototype.constructor=Qr,Qr.defaults=Qr.prototype,go(Qr,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Qh},getNodeInfo:{value:Hh},parse:{value:oa},Promise:{value:Wo},svg:{value:ho},magic:{value:Xr},VERSION:{value:"0.8.0-edge"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:zr},events:{writable:!0,value:{}},interpolators:{writable:!0,value:No},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),Qr});
//# sourceMappingURL=ractive.runtime.min.js.map
