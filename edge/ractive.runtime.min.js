!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(){}function e(t,e){return t.replace(/%s/g,function(){return e.shift()})}function n(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];throw t=e(t,r),new Error(t)}function r(){ds.DEBUG&&Os.apply(null,arguments)}function i(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];t=e(t,r),js(t,r)}function o(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];t=e(t,r),Ts[t]||(Ts[t]=!0,js(t,r))}function s(){ds.DEBUG&&i.apply(null,arguments)}function a(){ds.DEBUG&&o.apply(null,arguments)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t){return"[object Array]"===Ns.call(t)}function h(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function l(t){return!isNaN(parseFloat(t))&&isFinite(t)}function p(t){return t&&"[object Object]"===Ns.call(t)}function f(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function d(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function m(t,e){var n;if(!c(t)||!c(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function v(t){return"string"==typeof t?[t]:void 0===t?[]:t}function g(t){return t[t.length-1]}function y(t,e){if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function b(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function w(t){t.bind()}function E(t){t.cancel()}function _(t){t.handleChange()}function x(t){t.mark()}function O(t){t.render()}function j(t){t.rebind()}function k(t){t.teardown()}function S(t){t.unbind()}function A(t){t.unrender()}function T(t){t.unrender(!0)}function C(t){t.update()}function P(t){return t.toString()}function F(t){return t.toString(!0)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t){t.detach()}function R(t){t.detachNodes()}function L(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function D(t){setTimeout(t,0)}function V(t,e){return function(){for(var n;n=t.shift();)n(e)}}function B(t,e,n,r){var i;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Cs)e.then(n,r);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{i=e.then}catch(o){return void r(o)}if("function"==typeof i){var s,a,u;a=function(e){s||(s=!0,B(t,e,n,r))},u=function(t){s||(s=!0,r(t))};try{i.call(e,a,u)}catch(o){if(!s)return r(o),void(s=!0)}}else n(e)}}function M(t){t.dispatch()}function W(){var t,e;for(Ks.immediateObservers.forEach(M),t=Ks.fragments.length;t--;){e=Ks.fragments[t];var n=e.ractive;Ws.fire(n,n.viewmodel.changes),n.viewmodel.changes={},e.update()}Ks.fragments.length=0,Ks.transitionManager.start(),Ks.deferredObservers.forEach(M);var r=Ks.tasks;for(Ks.tasks=[],t=0;t<r.length;t+=1)r[t]();return Ks.fragments.length?W():void 0}function K(t){return t?t.replace($s,".$1"):""}function z(t){return K(t).split(".")}function $(t,e){var n=zs.start(this,!0);return t?this.viewmodel.joinAll(z(t)).updateFromBindings(e!==!1):this.viewmodel.updateFromBindings(!0),zs.end(),n}function U(t){var e,n;return n=t?this.viewmodel.joinAll(z(t)):this.viewmodel,e=zs.start(this,!0),n.mark(),zs.end(),Us.fire(this,n),e}function q(t,e,n){var r,i,o,s,a,u=[];if(r=H(t,e,n),!r)return null;for(s=r.length-2-r[1],i=Math.min(t,r[0]),o=i+r[1],a=0;i>a;a+=1)u.push(a);for(;o>a;a+=1)u.push(-1);for(;t>a;a+=1)u.push(a+s);return 0!==s?u.touchedFrom=r[0]:u.touchedFrom=t,u}function H(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t));n.length<2;)n.push(t-n[0]);return n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}function Q(t){return function(e){var n=this.viewmodel.joinAll(K(e).split(".")),r=n.get();if(!c(r))throw new Error("shuffle array method "+t+" called on non-array at "+e.getKeypath());for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;i>s;s++)o[s-1]=arguments[s];var a=q(r.length,t,o),u=qs[t].apply(r,o),h=zs.start(this,!0).then(function(){return u});return a?n.shuffle(a):n.set(u),zs.end(),h}}function Z(){var t,e;if(!this.fragment.rendered)return s("ractive.unrender() was called on a Ractive instance that was not rendered"),Cs.resolve();for(t=zs.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),y(this.el.__ractive_instances__,this),Qs.fire(this),zs.end(),t}function Y(){return this.fragment.toString(!0)}function G(t){if("string"!=typeof t)throw new TypeError(Zs);var e=void 0;return/\*/.test(t)?(e={},this.viewmodel.findMatches(z(t)).forEach(function(t){e[t.getKeypath()]=!t.get()}),this.set(e)):this.set(t,!this.get(t))}function J(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(E),this.fragment.rendered&&this.el.__ractive_instances__&&y(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():Cs.resolve(),Js.fire(this),this._boundFunctions.forEach(X),t}function X(t){delete t.fn[t.prop]}function tt(t,e,n){if("string"!=typeof e||!l(n))throw new Error("Bad arguments");if(/\*/.test(e)){var r=function(){var r={};return t.viewmodel.findMatches(z(e)).forEach(function(t){var e=t.get();if(!l(e))throw new Error(Xs);r[t.getKeypath()]=e+n}),{v:t.set(r)}}();if("object"==typeof r)return r.v}var i=t.get(e);if(!l(i))throw new Error(Xs);return t.set(e,+i+n)}function et(t,e){return tt(this,t,void 0===e?-1:-e)}function nt(t,e){var n,r;if(r=zs.start(this,!0),p(t)){n=t;for(t in n)n.hasOwnProperty(t)&&rt(this,t,n[t])}else rt(this,t,e);return zs.end(),r}function rt(t,e,n){if(/\*/.test(e))t.viewmodel.findMatches(z(e)).forEach(function(t){t.set(n)});else{var r=t.viewmodel.joinAll(z(e));r.set(n)}}function it(t){return function(e){var n,r,i,o;for(n=e.pos,r='"',i=!1;!i;)o=e.matchPattern(Vs)||e.matchPattern(Bs)||e.matchString(t),o?r+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.matchPattern(Ms),o?r+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):i=!0);return r+='"',JSON.parse(r)}}function ot(t){var e,n;return e=t.pos,t.matchString('"')?(n=Ja(t),t.matchString('"')?{t:Ta,v:n}:(t.pos=e,null)):t.matchString("'")?(n=Ga(t),t.matchString("'")?{t:Ta,v:n}:(t.pos=e,null)):null}function st(){return bs.createDocumentFragment()}function at(t){var e;if(t&&"boolean"!=typeof t)return ys&&bs&&t?t.nodeType?t:"string"==typeof t&&(e=bs.getElementById(t),!e&&bs.querySelector&&(e=bs.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function ut(t){return null!=t&&t.toString?""+t:""}function ct(t){for(var e,n,r=arguments.length,i=Array(r>1?r-1:0),o=1;r>o;o++)i[o-1]=arguments[o];for(;n=i.shift();)for(e in n)lu.call(n,e)&&(t[e]=n[e]);return t}function ht(t){var e;return(e=t.matchPattern(Eu))?{t:Aa,v:e}:null}function lt(t){var e;return(e=ot(t))?_u.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=ht(t))?e.v:(e=t.matchPattern(wu))?e:void 0}function pt(t){var e,n,r;return t.allowWhitespace(),(e=lt(t))?(r={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(r.value=n.v,r):null):null):null}function ft(t,e){var n=new fu(t,{values:e});return n.result}function dt(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];return t.map(function(t){if(t.type===fa)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return dt(t.items,e,n,r)}).join(""):dt(t.fragment.items,e,n,r);var i=n+"-"+r++;return e[i]=t.model?t.model.wrapper?t.model.wrapper.value:t.model.get():void 0,"${"+i+"}"}).join("")}function mt(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function vt(t,e){var n=t.findContext().root,r=e.split("."),i=r[0],o=n.mappings.hasOwnProperty(i)?n.mappings[i]:n.computations.hasOwnProperty(i)?n.computations[i]:null;if(o)return r.length>1?o.joinAll(r.slice(1)):o;for(var s=void 0,a=void 0;t;){if(t.isIteration){if(i===t.parent.keyRef)return r.length>1&&mt(i),t.context.getKeyModel();if(i===t.parent.indexRef)return r.length>1&&mt(i),t.context.getIndexModel(t.index)}if(t.context&&((!t.isRoot||t.ractive.component)&&(s=!0),t.context.has(i)))return a&&n.map(i,t.context.joinKey(i)),t.context.joinAll(r);t.componentParent&&!t.ractive.isolated?(t=t.componentParent,a=!0):t=t.parent}return s?void 0:n.joinAll(r)}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(){Cu.push(Pu=[])}function Ot(){return Cu.pop()}function jt(t){Pu&&Pu.push(t)}function kt(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function St(t){var e;return Fu[t]||(e=t?t+".":"",Fu[t]=function(n,r){var i;return"string"==typeof n?(i={},i[e+n]=r,i):"object"==typeof n?e?kt(n,t):n:void 0}),Fu[t]}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t){t.updateFromBindings(!0)}function Ct(t){t.updateKeypathDependants()}function Pt(t,e){var n=t.findContext();if("."===e||"this"===e)return n;if("@keypath"===e)return n.getKeypathModel();if("@index"===e){var r=t.findRepeatingFragment();return r.context.getIndexModel(r.index)}if("@key"===e)return t.findRepeatingFragment().context.getKeyModel();if("~"===e[0])return n.root.joinAll(e.slice(2).split("."));if("."===e[0]){for(var i=e.split("/");"."===i[0]||".."===i[0];){var o=i.shift();".."===o&&(n=n.parent)}return e=i.join("/"),"."===e[0]&&(e=e.slice(1)),n.joinAll(e.split("."))}return vt(t,e)}function Ft(t,e){if(Lu[t])return Lu[t];for(var n=new Array(e);e--;)n[e]="_"+e;var r=new Function(n.join(","),"return ("+t+")");return Lu[t]=r}function Nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Rt(t,e,n){if(t.__ractive_nowrap)return t;var r="__ractive_"+n;if(t[r])return t[r];if(!/\bthis\b/.test(t))return su(t,"__ractive_nowrap",{value:!0}),t;su(t,r,{value:t.bind(e),configurable:!0});for(var i in t)t.hasOwnProperty(i)&&(t[r][i]=t[i]);return e._boundFunctions.push({fn:t,prop:r}),t[r]}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Vt(t,e){return e.r?Pt(t,e.r):e.x?new Du(t,e.x):new Vu(t,e.rx)}function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Wt(t){return t.replace($u,function(t,e){var n;return n="#"!==e[0]?Ku[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(zt(n)):t})}function Kt(t){return t.replace(Hu,"&amp;").replace(Uu,"&lt;").replace(qu,"&gt;")}function zt(t){return t?10===t?32:128>t?t:159>=t?zu[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ut(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function qt(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),-1!==n?(t.pos+=n+e.close.length,{t:Ea}):void 0):null}function Ht(t){function e(t){switch(t.t){case Fa:case Ia:case Aa:case Na:return t.v;case Ta:return JSON.stringify(String(t.v));case Ca:return"["+(t.m?t.m.map(e).join(","):"")+"]";case Pa:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case Ra:return t.k+":"+e(t.v);case Ba:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case Ka:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case za:return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case Ma:return"("+e(t.x)+")";case Va:return e(t.x)+e(t.r);case Da:return t.n?"."+t.n:"["+e(t.x)+"]";case Wa:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case La:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return Qt(t,n=[]),{r:n,s:e(t)}}function Qt(t,e){var n,r;if(t.t===La&&-1===e.indexOf(t.n)&&e.unshift(t.n),r=t.o||t.m)if(p(r))Qt(r,e);else for(n=r.length;n--;)Qt(r[n],e);t.x&&Qt(t.x,e),t.r&&Qt(t.r,e),t.v&&Qt(t.v,e)}function Zt(t,e){var n;if(t){for(;t.t===Ma&&t.x;)t=t.x;return t.t===La?e.r=t.n:t.t===Aa&&Zu.test(t.v)?e.r=t.v:(n=Yt(t))?e.rx=n:e.x=Ht(t),e}}function Yt(t){for(var e,n=[];t.t===Va&&t.r.t===Da;)e=t.r,e.x?e.x.t===La?n.unshift(e.x):n.unshift(Ht(e.x)):n.unshift(e.n),t=t.x;return t.t!==La?null:{r:t.n,m:n}}function Gt(t){var e,n,r,i,o,s;return e=t.pos,r=t.matchPattern(/^@(?:keypath|index|key)/),r||(n=t.matchPattern(Yu)||"",r=!n&&t.relaxedNames&&t.matchPattern(tc)||t.matchPattern(Xu),r||"."!==n||(n="",r=".")),r?n||t.relaxedNames||!Ou.test(r)?!n&&xu.test(r)?(i=xu.exec(r)[0],t.pos=e+i.length,{t:Ia,v:i}):(o=(n||"")+K(r),t.matchString("(")&&(s=o.lastIndexOf("."),-1!==s?(o=o.substr(0,s),t.pos=e+o.length):t.pos-=1),{t:La,n:o.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function Jt(t){function e(t){r.push(t)}var n,r,i,o;return n=t.pos,t.allowWhitespace(),i=le(t),null===i?null:(r=[i],t.allowWhitespace(),t.matchString(",")&&(o=Jt(t),null===o&&t.error(ec),o.forEach(e)),r)}function Xt(t){var e,n,r;if(e=t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),n=t.matchPattern(wu))return{t:Da,n:n};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),r=le(t),r||t.error(ec),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:Da,x:r}):null}function te(t){var e,n;return e=t.pos,t.matchString("(")?(t.allowWhitespace(),n=le(t),n||t.error(ec),t.allowWhitespace(),t.matchString(")")||t.error(nc),{t:Ma,x:n}):null}function ee(t){var e;return(e=t.matchPattern(rc))?{t:Na,v:e}:null}function ne(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=Jt(t),t.matchString("]")?{t:Ca,m:n}:(t.pos=e,null)):(t.pos=e,null)}function re(t){var e,n,r;return e=t.pos,t.allowWhitespace(),n=lt(t),null===n?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),r=le(t),null===r?(t.pos=e,null):{t:Ra,k:n,v:r}):(t.pos=e,null))}function ie(t){var e,n,r,i;return e=t.pos,r=re(t),null===r?null:(n=[r],t.matchString(",")?(i=ie(t),i?n.concat(i):(t.pos=e,null)):n)}function oe(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=ie(t),t.allowWhitespace(),t.matchString("}")?{t:Pa,m:n}:(t.pos=e,null)):(t.pos=e,null)}function se(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:Fa,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:Fa,v:"false"}):null}function ae(t){return ht(t)||se(t)||ot(t)||oe(t)||ne(t)||ee(t)}function ue(t){return ae(t)||Gt(t)||te(t)}function ce(t){var e,n,r,i;if(n=ue(t),!n)return null;for(;n;)if(e=t.pos,r=Xt(t))n={t:Va,x:n,r:r};else{if(!t.matchString("("))break;t.allowWhitespace(),i=Jt(t),t.allowWhitespace(),t.matchString(")")||t.error(nc),n={t:za,x:n},i&&(n.o=i)}return n}function he(t){var e,n,r,i;return(n=ic(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),r=le(t),r||t.error(ec),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),i=le(t),i||t.error(ec),{t:Wa,o:[n,r,i]}):(t.pos=e,n)):null}function le(t){return he(t)}function pe(t,e){var n,r,i;if(n=t.pos,r=le(t),!r)return null;for(i=0;i<e.length;i+=1)if(t.remaining().substr(0,e[i].length)===e[i])return r;return t.pos=n,Gt(t)}function fe(t,e){var n,r,i,o;n=t.pos;try{r=pe(t,[e.close])}catch(s){o=s}if(!r){if("!"===t.str.charAt(n))return t.pos=n,null;if(o)throw o}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!r)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return i={t:da},Zt(r,i),i}function de(t,e){var n,r,i;return t.matchPattern(ac)?(n=t.pos,r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),i={t:ja},r&&(i.n=r),i):null}function me(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(cc)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Za}):(t.pos=n,null):null}function ve(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(hc))return t.pos=n,null;var r=le(t);return t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Ya,x:r}}function ge(t,e){var n,r,i,o;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),r=t.remaining(),i=r.indexOf(e.close),-1!==i?(o={t:ya,r:r.substr(0,i).split(" ")[0]},t.pos+=i,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o):(t.pos=n,null)):(t.pos=n,null)):null}function ye(t,e){var n,r,i,o,s,a,u,c,h,l,p,f;if(n=t.pos,t.matchString("^"))i={t:va,f:[],n:Ua};else{if(!t.matchString("#"))return null;i={t:va,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(u=t.matchPattern(fc))&&(f=u,i.n=uc[u])}if(t.allowWhitespace(),r=le(t),r||t.error("Expected expression"),p=t.matchPattern(lc)){var d=void 0;(d=t.matchPattern(pc))?i.i=p+","+d:i.i=p}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,s=i.f,h=[];do if(o=ge(t,e))f&&o.r!==f&&t.error("Expected "+e.open+"/"+f+e.close),t.sectionDepth-=1,l=!0;else if(o=ve(t,e))i.n===Ua&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),c||(c=be(r,i.n)),c.f.push({t:va,n:$a,x:Ht(Ee(h.concat(o.x))),f:s=[]}),h.push(we(o.x));else if(o=me(t,e))i.n===Ua&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,c?c.f.push({t:va,n:$a,x:Ht(Ee(h)),f:s=[]}):(c=be(r,i.n),s=c.f);else{if(o=t.read(Yc),!o)break;s.push(o)}while(!l);return c&&(i.n===Ha&&(i.n=Qa),i.l=c),Zt(r,i),i.f.length||delete i.f,i}function be(t,e){var n={t:va,n:Ua,f:[]};return Zt(t,n),n}function we(t){return t.t===Ba&&"!"===t.s?t.o:{t:Ba,s:"!",o:_e(t)}}function Ee(t){return 1===t.length?t[0]:{t:Ka,s:"&&",o:[_e(t[0]),_e(Ee(t.slice(1)))]}}function _e(t){return{t:Ma,x:t}}function xe(t,e){var n,r;return t.matchString("&")?(t.allowWhitespace(),(n=le(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r={t:ma},Zt(n,r),r):null):null}function Oe(t,e){var n,r,i,o,s;return n=t.pos,t.matchString(">")?(t.allowWhitespace(),r=t.pos,t.relaxedNames=!0,i=le(t),t.relaxedNames=!1,t.allowWhitespace(),o=le(t),t.allowWhitespace(),i?(s={t:wa},Zt(i,s),t.allowWhitespace(),o&&(s={t:va,n:Ha,f:[s]},Zt(o,s)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):null):null}function je(t,e){var n,r=le(t);return r?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:ma},Zt(r,n),n):null}function ke(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1}function Se(t){var e,n,r,i;return n=t.remaining(),i=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(i):(r=t.tags.map(function(t){return t.open}),r=r.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?r.push('"',"'","=","<",">","`"):t.inAttribute?r.push(t.inAttribute):r.push(i),e=ke(n,r)),e?(-1===e&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):Wt(n.substr(0,e))):null}function Ae(t,e,n){var r;e&&(r=t[0],"string"==typeof r&&(r=r.replace(e,""),r?t[0]=r:t.shift())),n&&(r=g(t),"string"==typeof r&&(r=r.replace(n,""),r?t[t.length-1]=r:t.pop()))}function Te(t){var e,n,r,i,o;for(e=1;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e-2],Ce(n)&&Pe(r)&&Ce(i)&&mc.test(i)&&dc.test(n)&&(t[e-2]=i.replace(mc,"\n"),t[e]=n.replace(dc,"")),Fe(n)&&Ce(r)&&mc.test(r)&&Ce(n.f[0])&&dc.test(n.f[0])&&(t[e-1]=r.replace(mc,"\n"),n.f[0]=n.f[0].replace(dc,"")),Ce(n)&&Fe(r)&&(o=g(r.f),Ce(o)&&mc.test(o)&&dc.test(n)&&(r.f[r.f.length-1]=o.replace(mc,"\n"),t[e]=n.replace(dc,"")));return t}function Ce(t){return"string"==typeof t}function Pe(t){return t.t===Ea||t.t===_a}function Fe(t){return(t.t===va||t.t===ga)&&t.f}function Ne(t,e,n,r,i){var o,s,a,u,h,l,p,f;for(Te(t),o=t.length;o--;)s=t[o],s.exclude?t.splice(o,1):e&&s.t===Ea&&t.splice(o,1);for(Ae(t,r?yc:null,i?bc:null),o=t.length;o--;){if(s=t[o],s.f){var d=s.t===ba&&gc.test(s.e);h=n||d,!n&&d&&Ae(s.f,wc,Ec),h||(a=t[o-1],u=t[o+1],(!a||"string"==typeof a&&bc.test(a))&&(l=!0),(!u||"string"==typeof u&&yc.test(u))&&(p=!0)),Ne(s.f,e,h,l,p)}if(s.l&&(Ne(s.l.f,e,n,l,p),t.splice(o+1,0,s.l),delete s.l),s.a)for(f in s.a)s.a.hasOwnProperty(f)&&"string"!=typeof s.a[f]&&Ne(s.a[f],e,n,l,p);if(s.m&&Ne(s.m,e,n,l,p),s.v)for(f in s.v)s.v.hasOwnProperty(f)&&(c(s.v[f].n)&&Ne(s.v[f].n,e,n,l,p),c(s.v[f].d)&&Ne(s.v[f].d,e,n,l,p))}for(o=t.length;o--;)"string"==typeof t[o]&&("string"==typeof t[o+1]&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(vc," ")),""===t[o]&&t.splice(o,1))}function Ie(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(_c))?t.inside&&n!==t.inside?(t.pos=e,null):{t:xa,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function Re(t,e){var n,r,i,o,s,a,u,c,h;if("string"==typeof t){if(r=xc.exec(t)){var l=t.lastIndexOf(")");return Oc.test(t)||e.error("Invalid input after method call expression '"+t.slice(l+1)+"'"),n={m:r[1]},o="["+t.slice(n.m.length+1,l)+"]",i=new sc(o),n.a=Ht(i.result[0]),n}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(n={},u=[],c=[],t){for(;t.length;)if(s=t.shift(),"string"==typeof s){if(a=s.indexOf(":"),-1!==a){a&&u.push(s.substr(0,a)),s.length>a+1&&(c[0]=s.substring(a+1));break}u.push(s)}else u.push(s);c=c.concat(t)}return u.length?c.length||"string"!=typeof u?(n={n:1===u.length&&"string"==typeof u[0]?u[0]:u},1===c.length&&"string"==typeof c[0]?(h=ft("["+c[0]+"]"),n.a=h?h.value:[c[0].trim()]):n.d=c):n=u:n="",n}function Le(t){var e,n,r;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(kc))?t.matchPattern(Sc)?(r=t.matchPattern(kc))?(t.allowWhitespace(),t.matchString("=")?[n,r]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function De(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=Ve(t,t.tags[n]))return e}function Ve(t,e){var n,r,i,o;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(r=Le(t))return t.matchString(e.close)?(e.open=r[0],e.close=r[1],t.sortMustacheTags(),Ac):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var s=t.pos;ee(t)?t.pos=s:(t.pos=s-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(o=0;o<e.readers.length;o+=1)if(i=e.readers[o],r=i(t,e))return e.isStatic&&(r.s=!0),t.includeLinePositions&&(r.p=t.getLinePos(n)),r;return t.pos=n,null}function Be(t){var e,n,r;return t.allowWhitespace(),(n=t.matchPattern(Tc))?(e={name:n},r=Me(t),null!=r&&(e.value=r),e):null}function Me(t){var e,n,r,i;return e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,r=t.sectionDepth,i=ze(t,"'")||ze(t,'"')||Ke(t),null===i&&t.error("Expected valid attribute value"),t.sectionDepth!==r&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),i.length?1===i.length&&"string"==typeof i[0]?Wt(i[0]):i:""):(t.pos=e,null)}function We(t){var e,n,r,i,o;return e=t.pos,(n=t.matchPattern(Cc))?(r=n,i=t.tags.map(function(t){return t.open}),-1!==(o=ke(r,i))&&(n=n.substr(0,o),t.pos=e+n.length),n):null}function Ke(t){var e,n;for(t.inAttribute=!0,e=[],n=De(t)||We(t);null!==n;)e.push(n),n=De(t)||We(t);return e.length?(t.inAttribute=!1,e):null}function ze(t,e){var n,r,i;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,r=[],i=De(t)||$e(t,e);null!==i;)r.push(i),i=De(t)||$e(t,e);return t.matchString(e)?(t.inAttribute=!1,r):(t.pos=n,null)}function $e(t,e){var n,r,i,o;return n=t.pos,i=t.remaining(),o=t.tags.map(function(t){return t.open}),o.push(e),r=ke(i,o),-1===r&&t.error("Quoted attribute value must have a closing quote"),r?(t.pos+=r,i.substr(0,r)):null}function Ue(t){var e,n,r,i,o,s,a,u,c,h,l,p,f,d,m,v;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=Sa,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=ba,n.e=t.matchPattern(Pc),!n.e)return null;for(Fc.test(t.nextChar())||t.error("Illegal tag name"),o=function(e,r){var i=r.n||r;Rc.test(i)&&(t.pos-=i.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=r},t.allowWhitespace();s=De(t)||Be(t);)s.name?(r=Lc[s.name])?n[r]=Re(s.value,t):(i=Ic.exec(s.name))?(n.v||(n.v={}),a=Re(s.value,t),o(i[1],a)):t.sanitizeEventAttributes&&Nc.test(s.name)||(n.a||(n.a={}),n.a[s.name]=s.value||(""===s.value?"":0)):(n.m||(n.m=[]),n.m.push(s)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(u=!0),!t.matchString(">"))return null;var g=n.e.toLowerCase(),y=t.preserveWhitespace;if(!u&&!Wu.test(n.e)){t.elementStack.push(g),("script"===g||"style"===g)&&(t.inside=g),c=[],h=ou(null);do if(d=t.pos,m=t.remaining(),qe(g,m))if(v=Ie(t)){f=!0;var b=v.e.toLowerCase();if(b!==g&&(t.pos=d,!~t.elementStack.indexOf(b))){var w="Unexpected closing tag";Wu.test(b)&&(w+=" (<"+b+"> is a void element - it cannot contain children)"),t.error(w)}}else(p=ge(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(f=!0,t.pos=d):(p=t.read(Gc))?(h[p.n]&&(t.pos=d,t.error("Duplicate partial definition")),Ne(p.f,t.stripComments,y,!y,!y),h[p.n]=p.f,l=!0):(p=t.read(Yc))?c.push(p):f=!0;else f=!0;while(!f);c.length&&(n.f=c),l&&(n.p=h),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(g)?Dc:n}function qe(t,e){var n,r;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),r=jc[t],n&&r?!~r.indexOf(n[1].toLowerCase()):!0}function He(t){var e,n,r,i,o;return e=t.pos,t.matchString(Bc)?(r=t.remaining(),i=r.indexOf(Mc),-1===i&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=r.substr(0,i),t.pos+=i+3,o={t:Ea,c:n},t.includeLinePositions&&(o.p=t.getLinePos(e)),o):null}function Qe(t){var e,n,r,i,o;e=t.pos;var s=t.standardDelimiters;if(!t.matchString(s[0]))return null;if(!t.matchPattern(Wc))return t.pos=e,null;n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/),n||t.error("expected legal partial name"),t.matchString(s[1])||t.error("Expected closing delimiter '"+s[1]+"'"),r=[];do(i=ge(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!i.r&&t.error("Expected "+s[0]+"/partial"+s[1]),o=!0):(i=t.read(Yc),i||t.error("Expected "+s[0]+"/partial"+s[1]),r.push(i));while(!o);return{t:ka,n:n,f:r}}function Ze(t){return t.replace(Kc,"\\$&")}function Ye(t){var e=t.pos,n=t.standardDelimiters[0],r=t.standardDelimiters[1],i=void 0,o=void 0;if(!t.matchPattern(zc)||!t.matchString(n))return t.pos=e,null;var s=t.matchPattern($c);if(a("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+s+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+s+"}} --> ... <!-- {{/"+s+"}} -->'"),!t.matchString(r)||!t.matchPattern(Uc))return t.pos=e,null;i=[];var u=new RegExp("^<!--\\s*"+Ze(n)+"\\s*\\/\\s*"+s+"\\s*"+Ze(r)+"\\s*-->");do t.matchPattern(u)?o=!0:(Vc=t.read(Yc),Vc||t.error("expected closing comment ('<!-- "+n+"/"+s+r+" -->')"),i.push(Vc));while(!o);return{t:ka,f:i,n:s}}function Ge(t){for(var e=[],n=ou(null),r=!1,i=t.preserveWhitespace;t.pos<t.str.length;){var o=t.pos,s=void 0,a=void 0;(a=t.read(Gc))?(n[a.n]&&(t.pos=o,t.error("Duplicated partial definition")),Ne(a.f,t.stripComments,i,!i,!i),n[a.n]=a.f,r=!0):(s=t.read(Yc))?e.push(s):t.error("Unexpected template content")}var u={v:vs,t:e};return r&&(u.p=n),u}function Je(t,e){return new Zc(t,e||{}).result}function Xe(t){var e=ou(eh);return e.parse=function(e,n){return tn(e,n||t)},e}function tn(t,e){if(!Je)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Je(t,e||this.options)}function en(t,e){var n;if(!bs){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(nn(t)&&(t=t.substring(1)),!(n=bs.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function nn(t){return t&&"#"===t[0]}function rn(t){return!("string"==typeof t)}function on(t){return t.defaults&&(t=t.defaults),th.reduce(function(e,n){return e[n]=t[n],e},{})}function sn(t,e,n){var r=an(t,e,n);return r?r[t][n]:null}function an(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function un(t,e,n){var r;if(r=cn(t,e,n||{}))return r;if(r=eh.fromId(e,{noThrow:!0})){var i=eh.parse(r,eh.getParseOptions(t));return t.partials[e]=i.t}}function cn(t,e,n){var r=void 0,i=pn(e,n.owner);if(i)return i;var o=an("partials",t,e);if(o){if(i=o.partials[e],"function"==typeof i&&(r=i.bind(o),r.isOwner=o.partials.hasOwnProperty(e),i=r.call(t,eh)),!i&&""!==i)return void s(Ys,e,"partial","partial",{ractive:t});if(!eh.isParsed(i)){var a=eh.parse(i,eh.getParseOptions(o));a.p&&s("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var u=r?o:hn(o,e);u.partials[e]=i=a.t}return r&&(i._fn=r),i.v?i.t:i}}function hn(t,e){return t.partials.hasOwnProperty(e)?t:ln(t.constructor,e)}function ln(t,e){return t?t.partials.hasOwnProperty(e)?t:ln(t._Parent,e):void 0}function pn(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return pn(t,e.parentFragment.owner);
}}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vn(t,e,n){var r=void 0;return t?(r={},Object.keys(n).forEach(function(t){r[t]=n[t]}),r[t]=e):r=n,r}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function bn(t){return!t||c(t)&&0===t.length||p(t)&&0===Object.keys(t).length}function wn(t,e){return e||c(t)?qa:p(t)||"function"==typeof t?Ha:void 0===t?null:$a}function En(t,e,n){var r,i,o,s,a,u=[];if(null!=t&&""!==t){for(Jc&&(i=Xc[e.tagName])?(r=_n("DIV"),r.innerHTML=i[0]+t+i[1],r=r.querySelector(".x"),"SELECT"===r.tagName&&(o=r.options[r.selectedIndex])):e.namespaceURI===eu?(r=_n("DIV"),r.innerHTML='<svg class="x">'+t+"</svg>",r=r.querySelector(".x")):(r=_n(e.tagName),r.innerHTML=t,"SELECT"===r.tagName&&(o=r.options[r.selectedIndex]));s=r.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1)}return u}function _n(t){return sh[t]||(sh[t]=ia(t))}function xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function On(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Sn(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function An(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})}function Tn(t){return t}function Cn(t){return function(){return t}}function Pn(t){return t.replace(Ah,"")}function Fn(t){var e;return t?(Th.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""}function Nn(){Fh=!bs[Nh]}function In(){Fh=!1}function Rn(){Fh=!0}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t){var e=t.node,n=t.ractive;do for(var r=n._liveQueries,i=r.length;i--;){var o=r[i],s=r["_"+o];s.test(e)&&(s.add(e),t.liveQueries.push(s))}while(n=n.parent)}function Vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bn(t){for(;t=t.parent;)if("form"===t.name)return t}function Mn(t,e){a("The "+t+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:e})}function Wn(){this._ractive.binding.handleChange()}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function $n(){var t;Wn.call(this),t=this._ractive.binding.model.get(),this.value=void 0==t?"":t}function Un(t){var e=void 0;return function(){var n=this;e&&clearTimeout(e),e=setTimeout(function(){var t=n._ractive.binding;t.rendered&&Wn.call(n),e=null},t)}}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function er(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ir(t){return Xh[t]||(Xh[t]=[])}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sr(t,e,n,r){var i=t+e+n.getKeypath();return el[i]||(el[i]=new nl(n,r))}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function cr(t){return t.node.checked}function hr(t){return t.element.getAttribute("value")}function lr(){return this.bindings.filter(cr).map(hr)}function pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function dr(){for(var t=this.bindings.length;t--;){var e=this.bindings[t];if(e.node.checked)return e.element.getAttribute("value")}}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function gr(t){return t&&1===t.template.length&&t.template[0].t===da&&!t.template[0].s}function yr(t){var e=t.attributeByName;if(t.getAttribute("contenteditable")||gr(e.contenteditable))return gr(e.value)?sl:null;if("input"===t.name){var n=t.getAttribute("type");if("radio"===n||"checkbox"===n){var r=gr(e.name),i=gr(e.checked);if(r&&i&&s("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),r)return"radio"===n?ol:il;if(i)return"radio"===n?tl:Jh}return"file"===n&&gr(e.value)?Gh:gr(e.value)?"number"===n||"range"===n?Yh:Hh:null}return"select"===t.name&&gr(e.value)?t.getAttribute("multiple")?Zh:Qh:"textarea"===t.name&&gr(e.value)?Hh:void 0}function br(t){var e,n,r,i,o,s;for(e=t.split("."),(n=al[e.length])||(n=wr(e.length)),o=[],r=function(t,n){return t?"*":e[n]},i=n.length;i--;)s=n[i].map(r).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function wr(t){var e,n,r,i,o,s,a,u,c="";if(!al[t]){for(r=[];c.length<t;)c+=1;for(e=parseInt(c,2),i=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(i(n[s]));r[o]=u}al[t]=r}return al[t]}function Er(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function _r(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}function xr(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var r=Or(e);jr(t,r,n.event,n.args,!0)}}function Or(t){return ul.hasOwnProperty(t)?ul[t]:ul[t]=br(t)}function jr(t,e,n,r){var i,o,s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=!0;for(Er(t,n),o=e.length;o>=0;o--)i=t._subs[e[o]],i&&(a=kr(t,i,n,r)&&a);if(_r(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=Or(u),n&&(n.component=t)}jr(t.parent,e,n,r)}}function kr(t,e,n,r){var i=null,o=!1;n&&!n._noArg&&(r=[n].concat(r)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,r)===!1&&(o=!0);return n&&!n._noArg&&o&&(i=n.original)&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),!o}function Sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ar(t){var e=this._ractive.events[t.type];e.fire({node:this,original:t})}function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Fr(t,e){var n=e?"svg":"div";return pl.innerHTML="<"+n+" "+t+"></"+n+">",b(pl.childNodes[0].attributes)}function Nr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function Ir(e){var n=e.element,r=e.name;e.namespace;if("id"===r)return Rr;if("value"===r){if("select"===n.name&&"value"===r)return n.getAttribute("multiple")?Lr:Dr;if("textarea"===n.name)return Mr;if(null!=n.getAttribute("contenteditable"))return Vr;if("input"===n.name){var i=n.getAttribute("type");if("file"===i)return t;if("radio"===i&&n.binding&&"name"===n.binding.attribute.name)return Br}return Mr}var o=n.node;if(e.isTwoway&&"name"===r){if("radio"===o.type)return Wr;if("checkbox"===o.type)return Kr}return"style"===r&&o.style.setAttribute?zr:"class"!==r||o.namespaceURI&&o.namespaceURI!==Xa?e.useProperty?Ur:e.namespace?Hr:qr:$r}function Rr(){var t=this.node,e=this.getValue();delete this.ractive.nodes[t.id],this.ractive.nodes[e]=t,t.id=e}function Lr(){var t=this.getValue();c(t)||(t=[t]);for(var e=this.node.options,n=e.length;n--;){var r=e[n],i=r._ractive?r._ractive.value:r.value;r.selected=d(t,i)}}function Dr(){var t=this.getValue();if(!this.locked){this.node._ractive.value=t;for(var e=this.node.options,n=e.length;n--;){var r=e[n],i=r._ractive?r._ractive.value:r.value;if(i==t){r.selected=!0;break}}}}function Vr(){var t=this.getValue();this.locked||(this.node.innerHTML=void 0===t?"":t)}function Br(){var t=this.node,e=t.checked,n=this.getValue();t.value=this.node._ractive.value=n,t.checked=n===this.element.getAttribute("name"),e&&!t.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function Mr(){if(!this.locked){var t=this.getValue();this.node.value=this.node._ractive.value=t,this.node.setAttribute("value",t)}}function Wr(){this.node.checked=this.getValue()==this.node._ractive.value}function Kr(){var t=this.element,e=this.node,n=t.binding,r=this.getValue(),i=t.getAttribute("value");if(c(r)){for(var o=r.length;o--;)if(i==r[o])return void(n.isChecked=e.checked=!0);n.isChecked=e.checked=!1}else n.isChecked=e.checked=r==i}function zr(){this.node.style.setAttribute("cssText",this.getValue()||"")}function $r(){this.node.className=ut(this.getValue())}function Ur(){this.locked||(this.node[this.propertyName]=this.getValue())}function qr(){this.node.setAttribute(this.name,ut(this.getString()))}function Hr(){this.node.setAttributeNS(this.namespace,this.name,ut(this.getString()))}function Qr(t,e){var n,r;if(n=e.indexOf(":"),-1===n||(r=e.substr(0,n),"xmlns"===r))t.name=e;else if(e=e.substring(n+1),t.name=e,t.namespace=ms[r.toLowerCase()],t.namespacePrefix=r,!t.namespace)throw'Unknown namespace ("'+r+'")'}function Zr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Xr(t){t.makeDirty()}function ti(t){var e=t.attributeByName,n=e.type,r=e.value,i=e.name;return n&&"radio"===n.value&&r&&i.interpolator&&r.getValue()===i.interpolator.model.get()?!0:void 0}function ei(t){var e=t.toString();return e?" "+e:""}function ni(t){for(var e=t.liveQueries.length;e--;){var n=t.liveQueries[e];n.remove(t.node)}}function ri(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return eu;var n=t.parent;return n?"foreignobject"===n.name?Xa:n.node.namespaceURI:t.ractive.el.namespaceURI}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function si(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ai(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ui(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function li(t){for(;t;){if("select"===t.name)return t;t=t.parent}}function pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function di(){var t=this._ractive.proxy;zs.start(),t.formBindings.forEach(mi),zs.end()}function mi(t){t.model.set(t.resetValue)}function vi(t){var e=t.ractive;do for(var n=e._liveComponentQueries,r=n.length;r--;){var i=n[r],o=n["_"+i];o.test(t)&&(o.add(t.instance),t.liveQueries.push(o))}while(e=e.parent)}function gi(t,e,n){var r=t.transitionsEnabled;t.noIntro&&(t.transitionsEnabled=!1);var i=zs.start(t,!0);if(zs.scheduleTask(function(){return Sl.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(n=at(n)||t.anchor,t.el=e,t.anchor=n,t.cssId&&Dh.apply(),e)if((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),n){var o=bs.createDocumentFragment();t.fragment.render(o),e.insertBefore(o,n)}else t.fragment.render(e);return zs.end(),t.transitionsEnabled=r,i.then(function(){return Al.fire(t)})}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bi(t,e){return t[e._guid]||(t[e._guid]=[])}function wi(t,e){var n=bi(t.queue,e);for(t.hook.fire(e);n.length;)wi(t,n.shift());delete t.queue[e._guid]}function Ei(t){var e,n=t._config.template;if(n&&n.fn)return e=_i(t,n.fn),e!==n.result?(n.result=e,e=Oi(e,t)):void 0}function _i(t,e){var n=xi(eh.getParseOptions(t));return e.call(t,n)}function xi(t){var e=ou(eh);return e.parse=function(e,n){return eh.parse(e,n||t)},e}function Oi(t,e){if("string"==typeof t)"#"===t[0]&&(t=eh.fromId(t)),t=Je(t,eh.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==vs)throw new Error("Mismatched template version (expected "+vs+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function ji(t,e,n){if(e)for(var r in e)(n||!t.hasOwnProperty(r))&&(t[r]=e[r])}function ki(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?n("data option must be an object or a function, `"+t+"` is not valid"):s("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Si(t,e){ki(e);var n="function"==typeof t,r="function"==typeof e;return e||n||(e={}),n||r?function(){var i=r?Ai(e,this):e,o=n?Ai(t,this):t;return Ti(i,o)}:Ti(e,t)}function Ai(t,e){var r=t.call(e);if(r)return"object"!=typeof r&&n("Data function must return an object"),r.constructor!==Object&&a("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),r}function Ti(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Ci(t,e){var n,r,i;return r='[data-ractive-css~="{'+e+'}"]',i=function(t){var e,n,i,o,s,a,u,c=[];for(e=[];n=Il.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(Fi),u=e.length;u--;)a=o.slice(),i=e[u],a[u]=i.base+r+i.modifiers||"",s=o.slice(),s[u]=r+" "+s[u],c.push(a.join(" "),s.join(" "));return c.join(", ")},n=Ll.test(t)?t.replace(Ll,r):t.replace(Nl,"").replace(Fl,function(t,e){var n,r;return Rl.test(e)?t:(n=e.split(",").map(Pi),r=n.map(i).join(", ")+" ",t.replace(e,r))})}function Pi(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Fi(t){return t.str}function Ni(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function Ii(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function Ri(t,e,n){if(e in t){if(n in t)throw new Error(Ii(e,n,!0));s(Ii(e,n)),t[n]=t[e]}}function Li(t){Ri(t,"beforeInit","onconstruct"),Ri(t,"init","onrender"),Ri(t,"complete","oncomplete"),Ri(t,"eventDefinitions","events"),c(t.adaptors)&&Ri(t,"adaptors","adapt")}function Di(t,e,n){if(!/_super/.test(n))return n;var r=function(){var t,i=Vi(r._parent,e),o="_super"in this,s=this._super;return this._super=i,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return r._parent=t,r._method=n,r}function Vi(e,n){var r,i;return n in e?(r=e[n],i="function"==typeof r?r:function(){return r}):i=t,i}function Bi(t,e,n,r){Li(r);for(var i in r)if(Ul.hasOwnProperty(i)){var o=r[i];"el"!==i&&"function"==typeof o?s(i+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[i]=o}kl.forEach(function(i){i[t](e,n,r)}),Bl[t](e,n,r),Cl[t](e,n,r),Vl[t](e,n,r),Mi(e.prototype,n,r)}function Mi(t,e,n){for(var r in n)if(!$l[r]&&n.hasOwnProperty(r)){var i=n[r];"function"==typeof i&&(i=Di(t,r,i)),e[r]=i}}function Wi(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function Ki(t,e,n){if(Object.keys(t.viewmodel.computations).forEach(function(e){var n=t.viewmodel.computations[e];t.viewmodel.value.hasOwnProperty(e)&&n.set(t.viewmodel.value[e]),n.init()}),Ml.init(t.constructor,t,e),ql.fire(t),Hl.begin(t),t.template){var i=void 0;(n.cssIds||t.cssId)&&(i=n.cssIds?n.cssIds.slice():[],t.cssId&&i.push(t.cssId)),t.fragment=new vp({owner:t,template:t.template,cssIds:i,indexRefs:n.indexRefs||{},keyRefs:n.keyRefs||{}})}if(Hl.end(t),t.fragment){t.fragment.bind(t.viewmodel);var o=at(t.el);if(o){var u=t.render(o,t.append);ds.DEBUG_PROMISES&&u["catch"](function(e){throw a("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),s("An error happened during rendering",{ractive:t}),e.stack&&r(e.stack),e})}}}function zi(t,e){var n,r,i;return n="return ("+e.replace(Ql,function(t,e){return r=!0,'__ractive.get("'+e+'")'})+");",r&&(n="var __ractive = this; "+n),i=new Function(n),r?i.bind(t):i}function $i(t,e){return/this/.test(t.toString())?t.bind(e):t}function Ui(t,e,r){var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0;return"function"==typeof r&&(i=$i(r,t),s=r.toString(),a=!0),"string"==typeof r&&(i=zi(t,r),s=r),"object"==typeof r&&("string"==typeof r.get?(i=zi(t,r.get),s=r.get):"function"==typeof r.get?(i=$i(r.get,t),s=r.get.toString(),a=!0):n("`%s` computation must have a `get()` method",e),"function"==typeof r.set&&(o=$i(r.set,t),u=r.set.toString())),{getter:i,setter:o,getterString:s,setterString:u,getterUseStack:a}}function qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Qi(t){var e=t.replace(/^\t+/gm,function(t){return t.split("	").join("  ")}).split("\n"),n=e.length<2?0:e.slice(1).reduce(function(t,e){return Math.min(t,/^\s*/.exec(e)[0].length)},1/0);return e.map(function(t,e){return"    "+(e?t.substring(n):t)}).join("\n")}function Zi(t){if(!t)return"";for(var e=t.split("\n"),n=Zl.name+".getValue",r=[],i=e.length,o=1;i>o;o+=1){var s=e[o];if(~s.indexOf(n))return r.join("\n");r.push(s)}}function Yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ji(t,e,n,r){var i=t.__model;r&&i.shuffle(r)}function Xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function to(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eo(t,e,n){if(t.set&&t.set.__magic)return t.set.__magic.dependants.push({ractive:e,keypath:n}),t;var r=void 0,i=[{ractive:e,keypath:n}],o={get:function(){return"value"in t?t.value:t.get()},set:function(e){r||("value"in t?t.value=e:t.set(e),r=!0,i.forEach(function(t){var n=t.ractive,r=t.keypath;n.set(r,e)}),r=!1)},enumerable:!0};return o.set.__magic={dependants:i,originalDescriptor:t},o}function no(t,e,n){if(!t.set||!t.set.__magic)return!0;for(var r=t.set.__magic,i=r.length;i--;){var o=r[i];if(o.ractive===e&&o.keypath===n)return r.splice(i,1),!1}}function ro(t,e){ds.DEBUG&&ks(),so(t),su(t,"data",{get:ao}),up.fire(t,e),cp.forEach(function(n){t[n]=ct(ou(t.constructor[n]||null),e[n])});var n=new Yl({adapt:oo(t,t.adapt,e),data:Pl.init(t.constructor,t,e),ractive:t});t.viewmodel=n;var r=ct(ou(t.constructor.prototype.computed),e.computed);for(var i in r){var o=Ui(t,i,r[i]);n.compute(i,o)}}function io(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function oo(t,e,r){function i(e){return"string"==typeof e&&(e=sn("adaptors",t,e),e||n(Gs(e,"adaptor"))),e}var o,s,a;if(e=e.map(i),o=v(r.adapt).map(i),o=io(e,o),s="magic"in r?r.magic:t.magic,a="modifyArrays"in r?r.modifyArrays:t.modifyArrays,s){if(!_s)throw new Error("Getters and setters (magic mode) are not supported in this browser");a&&o.push(op),o.push(ip)}return a&&o.push(np),o}function so(t){t._guid="r-"+hp++,t._subs=ou(null),t._config={},t._animations=[],t.nodes={},t.event=null,t._eventQueue=[],t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],t.root=t,t.parent=t.container=null}function ao(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function uo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function co(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ho(t){for(var e=t.ractive;e;){var n=e._liveComponentQueries["_"+t.name];n&&n.remove(t),e=e.parent}}function lo(t){t.makeDirty()}function po(t,e){var n,r=an("components",t,e);if(r&&(n=r.components[e],!n._Parent)){var i=n.bind(r);if(i.isOwner=r.components.hasOwnProperty(e),n=i(),!n)return void s(Ys,e,"component","component",{ractive:t});"string"==typeof n&&(n=po(t,n)),n._fn=i,r.components[e]=n}return n}function fo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function vo(t){if("string"==typeof t.template)return new fp(t);if(t.template.t===ba){var e=po(t.parentFragment.ractive,t.template.e);if(e)return new pp(t,e);var n=t.template.e.toLowerCase(),r=mp[n]||vl;return new r(t)}var i=dp[t.template.t];if(!i)throw new Error("Unrecognised item type "+t.template.t);return new i(t)}function go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yo(t){t.unrender(!0)}function bo(t){var e,n;Cl.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new vp({template:this.template,root:this,owner:this}),this.fragment.bind(this.viewmodel),this.render(this.el,this.anchor),this.transitionsEnabled=e}function wo(t,e,n){t.forEach(function(t){if(t.type===wa&&t.name===e)return void n.push(t);if(t.fragment)wo(t.fragment.iterations||t.fragment.items,e,n);else if(c(t.items))wo(t.items,e,n);else if(t.type===Oa&&t.instance){if(t.instance.partials[e])return;wo(t.instance.fragment.items,e,n)}t.type===ba&&(c(t.attributes)&&wo(t.attributes,e,n),c(t.conditionalAttributes)&&wo(t.conditionalAttributes,e,n))})}function Eo(t){t.forceResetTemplate()}function _o(t,e){var n=[];wo(this.fragment.items,t,n);var r=zs.start(this,!0);return this.partials[t]=e,n.forEach(Eo),zs.end(),r}function xo(t){if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");t=Pl.init(this.constructor,this,{data:t});var e=zs.start(this,!0),n=this.viewmodel.wrapper;n&&n.reset?n.reset(t)===!1&&this.viewmodel.set(t):this.viewmodel.set(t);for(var r=Ml.reset(this),i=void 0,o=r.length;o--;)if(gp.indexOf(r[o])>-1){i=!0;break}return i&&(Ep.fire(this),this.fragment.resetTemplate(this.template),wp.fire(this),yp.fire(this)),zs.end(),bp.fire(this,t),e}function Oo(t,e){if(t=at(t)||this.el,!this.append&&t){var n=t.__ractive_instances__;n&&n.length&&jo(n),t.innerHTML=""}return gi(this,t,e)}function jo(t){t.splice(0,t.length).forEach(k)}function ko(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function So(t){return""!==t}function Ao(t){return t.trim()}function To(t,e){var n,r,i,o=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&n.push(this.on(r,t[r]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return i=t.split(" ").map(Ao).filter(So),i.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Co(t,e){var n,r=this;if(t)n=t.split(" ").map(Ao).filter(So),n.forEach(function(t){var n,i;(n=r._subs[t])&&(e?(i=n.indexOf(e),-1!==i&&n.splice(i,1)):r._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Po(t,e,n){return p(t)||"function"==typeof t?(n=ct(e||{},Op),this.observe(t,n)):(n=ct(n||{},Op),this.observe(t,e,n))}function Fo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function No(t,e,n){if("string"!=typeof t)throw new Error("ractive.observeList() must be passed a string as its first argument");var r=this.viewmodel.joinAll(z(t)),i=new jp(this,r,e,n||{});return this._observers.push(i),{cancel:function(){i.cancel()}}}function Io(){return-1}function Ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lo(t,e,n){var r=this,i=[];if(p(t))!function(){var o=t;n=e||{},Object.keys(o).forEach(function(t){var e=o[t];t.split(" ").forEach(function(t){i.push(Do(r,t,e,n))})})}();else{var o=void 0;"function"==typeof t?(n=e,e=t,o=[""]):o=t.split(" "),o.forEach(function(t){i.push(Do(r,t,e,n||{}))})}return this._observers.push.apply(this._observers,i),{cancel:function(){i.forEach(E)}}}function Do(t,e,n,r){var i=t.viewmodel,o=z(e),s=o.indexOf("*");if(!~s){var a=o[0];if(!i.has(a)&&t.component){var u=Pt(t.component.parentFragment,a);
u&&i.map(a,u)}var c=i.joinAll(o);return new kp(t,c,n,r)}var h=0===s?i:i.joinAll(o.slice(0,s));return new Sp(t,h,o.splice(s),n,r)}function Vo(t){if(!t)return null;if(t===!0)return JSON.stringify;if("function"==typeof t)return t;if("string"==typeof t)return Ap[t]||(Ap[t]=function(e){return e[t]});throw new Error("If supplied, options.compare must be a string, function, or `true`")}function Bo(t,e,n){var r=this.viewmodel.joinAll(z(t)),i=zs.start(this,!0),o=r.get();if(e===o)throw new Error("You cannot merge an array with itself");if(!c(o)||!c(e))throw new Error("You cannot merge an array with a non-array");var s=Vo(n&&n.compare);return r.merge(e,s),zs.end(),i}function Mo(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=at(t),e=at(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,Wo(this)}function Wo(t){Tp.fire(t),t.findAllComponents("*").forEach(function(t){Wo(t.instance)})}function Ko(t){if(!t)return this.viewmodel.get(!0);var e=z(t),n=e[0],r=void 0;return this.viewmodel.has(n)||this.component&&(r=Pt(this.component.parentFragment,n),r&&this.viewmodel.map(n,r)),r=this.viewmodel.joinAll(e),r.get(!0)}function zo(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];xr(this,t,{args:n})}function $o(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function Uo(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function qo(t){return this.fragment.findComponent(t)}function Ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qo(t,e){if(t.compareDocumentPosition){var n=t.compareDocumentPosition(e);return 2&n?1:-1}return Zo(t,e)}function Zo(t,e){for(var n=Go(t.component||t._ractive.proxy),r=Go(e.component||e._ractive.proxy),i=g(n),o=g(r),s=void 0;i&&i===o;)n.pop(),r.pop(),s=i,i=g(n),o=g(r);i=i.component||i,o=o.component||o;var a=i.parentFragment,u=o.parentFragment;if(a===u){var c=a.items.indexOf(i),h=u.items.indexOf(o);return c-h||n.length-r.length}var l=s.iterations;if(l){var c=l.indexOf(a),h=l.indexOf(u);return c-h||n.length-r.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!")}function Yo(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function Go(t){var e,n;for(e=[t],n=Yo(t);n;)e.push(n),n=Yo(n);return e}function Jo(t,e){var n,r;return e=e||{},n=this._liveComponentQueries,(r=n[t])?e&&e.live?r:r.slice():(r=new Cp(this,t,!!e.live,!0),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAllComponents(t,r),r.init(),r.result)}function Xo(t,e){var n,r;return this.el?(e=e||{},n=this._liveQueries,(r=n[t])?e&&e.live?r:r.slice():(r=new Cp(this,t,!!e.live,!1),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAll(t,r),r.init(),r.result)):[]}function ts(t){return this.el?this.fragment.find(t):null}function es(){return this.isDetached?this.el:(this.el&&y(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,Pp.fire(this),this.el)}function ns(e,n,r){var i,o,s,a,u,c,h,l,p,f,d,m,v,g;if(i=new Cs(function(t){return o=t}),"object"==typeof e){r=n||{},c=r.easing,h=r.duration,u=[],l=r.step,p=r.complete,(l||p)&&(d={},r.step=null,r.complete=null,f=function(t){return function(e,n){d[t]=n}});for(s in e)e.hasOwnProperty(s)&&((l||p)&&(m=f(s),r={easing:c,duration:h},l&&(r.step=m)),r.complete=p?m:t,u.push(rs(this,s,e[s],r)));return g={easing:c,duration:h},l&&(g.step=function(t){return l(t,d)}),p&&i.then(function(t){return p(t,d)}),g.complete=o,v=rs(this,null,null,g),u.push(v),i.stop=function(){for(var t;t=u.pop();)t.stop();v&&v.stop()},i}return r=r||{},r.complete&&i.then(r.complete),r.complete=o,a=rs(this,e,n,r),i.stop=function(){return a.stop()},i}function rs(t,e,n,r){var i,o,s,a,u=void 0;return e&&(u=t.viewmodel.joinAll(K(e).split(".")),a=u.get(),vh.abort(u,t)),h(a,n)?(r.complete&&r.complete(r.to),Np):(r.easing&&(i="function"==typeof r.easing?r.easing:t.easing[r.easing],"function"!=typeof i&&(i=null)),o=void 0===r.duration?400:r.duration,s=new Fp({model:u,from:a,to:n,root:t,duration:o,easing:i,interpolator:r.interpolator,step:r.step,complete:r.complete}),vh.add(s),t._animations.push(s),s)}function is(t,e){return tt(this,t,void 0===e?1:+e)}function os(t){if(!t||!t._ractive)return{};var e=t._ractive;return{ractive:e.ractive,keypath:e.context.getKeypath(),index:ct({},e.fragment.indexRefs),key:ct({},e.fragment.keyRefs)}}function ss(t,e,n){return n||as(t,e)?function(){var n,r="_super"in this,i=this._super;return this._super=e,n=t.apply(this,arguments),r&&(this._super=i),n}:t}function as(t,e){return"function"==typeof e&&/_super/.test(t)}function us(t){for(var e={};t;)cs(t,e),ls(t,e),t=t._Parent!==ds?t._Parent:!1;return e}function cs(t,e){kl.forEach(function(n){hs(n.useDefaults?t.prototype:t,e,n.name)})}function hs(t,e,n){var r,i=Object.keys(t[n]);i.length&&((r=e[n])||(r=e[n]={}),i.filter(function(t){return!(t in r)}).forEach(function(e){return r[e]=t[n][e]}))}function ls(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var r=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof r&&e[n]._method){var i=void 0,o=r._method;o&&(r=r._method),i=ss(e[n]._method,r),o&&(i._method=i),e[n]=i}}else e[n]=r._method?r._method:r}})}function ps(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(fs,this):fs(this)}function fs(t){var e,n,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof ds&&(r=us(r)),e=function(t){return this instanceof e?(ro(this,t||{}),void Ki(this,t||{},{})):new e(t)},n=ou(t.prototype),n.constructor=e,au(e,{defaults:{value:n},extend:{value:ps,writable:!0,configurable:!0},_Parent:{value:t}}),Ml.extend(t,n,r),Pl.extend(t,n,r),r.computed&&(n.computed=ct(ou(t.prototype.computed),r.computed)),e.prototype=n,e}function ds(t){return this instanceof ds?(ro(this,t||{}),void Ki(this,t||{},{})):new ds(t)}var ms={get html(){return Xa},get mathml(){return tu},get svg(){return eu},get xlink(){return nu},get xml(){return ru},get xmlns(){return iu}},vs=3,gs={el:void 0,append:!1,template:{v:vs,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ys="undefined"!=typeof window?window:null,bs=ys?document:null,ws=!!bs,Es="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply,_s=void 0;try{Object.defineProperty({},"test",{value:0}),_s=!0}catch(xs){_s=!1}var Os,js,ks,Ss=bs?bs.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,As=["o","ms","moz","webkit"],Ts={};Es?!function(){var e=["%cRactive.js %c<@version@> %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],n="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";ks=function(){var r=!!console.groupCollapsed;console[r?"groupCollapsed":"log"].apply(console,e),console.log(n),r&&console.groupEnd(e),ks=t},js=function(t,e){if(ks(),"object"==typeof e[e.length-1]){var n=e.pop(),r=n?n.ractive:null;if(r){var i=void 0;r.component&&(i=r.component.name)&&(t="<"+i+"> "+t);var o=void 0;(o=n.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Os=function(){console.log.apply(console,arguments)}}():js=Os=ks=t;var Cs,Ps={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}},Fs=function(){function t(e){u(this,t),this.event=e,this.method="on"+e,this.deprecate=Ps[e]}return t.prototype.call=function(t,e,n){return e[t]?(n?e[t](n):e[t](),!0):void 0},t.prototype.fire=function(t,e){this.call(this.method,t,e),!t[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,t,e)&&(this.deprecate.message?s(this.deprecate.message):s('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)},t}(),Ns=Object.prototype.toString,Is=function(){function t(e,n){N(this,t),this.callback=e,this.parent=n,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,n&&n.addChild(this)}return t.prototype.add=function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},t.prototype.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},t.prototype.addDecorator=function(t){this.decoratorQueue.push(t)},t.prototype.decrementOutros=function(){this.outroChildren-=1,L(this)},t.prototype.decrementTotal=function(){this.totalChildren-=1,L(this)},t.prototype.detachNodes=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.decoratorQueue.forEach(k),this.detachQueue.forEach(I),this.children.forEach(R)}),t.prototype.init=function(){this.ready=!0,L(this)},t.prototype.remove=function(t){var e=t.isIntro?this.intros:this.outros;y(e,t),L(this)},t.prototype.start=function(){this.intros.concat(this.outros).forEach(function(t){return t.start()})},t}(),Rs={},Ls={},Ds={};"function"==typeof Promise?Cs=Promise:(Cs=function(t){var e,n,r,i,o,s,a=[],u=[],c=Rs;r=function(t){return function(r){c===Rs&&(e=r,c=t,n=V(c===Ls?a:u,e),D(n))}},i=r(Ls),o=r(Ds);try{t(i,o)}catch(h){o(h)}return s={then:function(t,e){var r=new Cs(function(i,o){var s=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),B(r,n,i,o)}catch(s){o(s)}}):e.push(n)};s(t,a,i),s(e,u,o),c!==Rs&&D(n)});return r}},s["catch"]=function(t){return this.then(null,t)},s},Cs.all=function(t){return new Cs(function(e,n){var r,i,o,s=[];if(!t.length)return void e(s);for(o=function(t,i){t&&"function"==typeof t.then?t.then(function(t){s[i]=t,--r||e(s)},n):(s[i]=t,--r||e(s))},r=i=t.length;i--;)o(t[i],i)})},Cs.resolve=function(t){return new Cs(function(e){e(t)})},Cs.reject=function(t){return new Cs(function(e,n){n(t)})});var Vs,Bs,Ms,Ws=new Fs("change"),Ks=void 0,zs={start:function(t,e){var n,r;return e&&(n=new Cs(function(t){return r=t})),Ks={previousBatch:Ks,transitionManager:new Is(r,Ks&&Ks.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],instance:t},n},end:function(){W(),Ks.transitionManager.init(),Ks=Ks.previousBatch},addFragment:function(t){f(Ks.fragments,t)},addObserver:function(t,e){f(e?Ks.deferredObservers:Ks.immediateObservers,t)},registerTransition:function(t){t._manager=Ks.transitionManager,Ks.transitionManager.add(t)},registerDecorator:function(t){Ks.transitionManager.addDecorator(t)},detachWhenReady:function(t){Ks.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(Ks){for(n=Ks;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}},$s=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Us=new Fs("update"),qs=Array.prototype,Hs=Q("unshift"),Qs=new Fs("unrender"),Zs="Bad arguments",Ys='A function was specified for "%s" %s, but no %s was returned',Gs=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Js=new Fs("teardown"),Xs="Cannot add to a non-numeric value",ta=Q("splice"),ea=Q("sort"),na=Q("shift"),ra=Q("reverse");Vs=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Bs=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Ms=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var ia,oa,sa,aa,ua,ca,ha,la,pa,fa=1,da=2,ma=3,va=4,ga=5,ya=6,ba=7,wa=8,Ea=9,_a=10,xa=14,Oa=15,ja=16,ka=17,Sa=18,Aa=20,Ta=21,Ca=22,Pa=23,Fa=24,Na=25,Ia=26,Ra=27,La=30,Da=31,Va=32,Ba=33,Ma=34,Wa=35,Ka=36,za=40,$a=50,Ua=51,qa=52,Ha=53,Qa=54,Za=60,Ya=61,Ga=it('"'),Ja=it("'"),Xa="http://www.w3.org/1999/xhtml",tu="http://www.w3.org/1998/Math/MathML",eu="http://www.w3.org/2000/svg",nu="http://www.w3.org/1999/xlink",ru="http://www.w3.org/XML/1998/namespace",iu="http://www.w3.org/2000/xmlns/";if(ia=Ss?function(t,e,n){return e&&e!==Xa?n?bs.createElementNS(e,t,n):bs.createElementNS(e,t):n?bs.createElement(t,n):bs.createElement(t)}:function(t,e,n){if(e&&e!==namespaces.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return n?bs.createElement(t,n):bs.createElement(t)},ws){for(sa=ia("div"),aa=["matches","matchesSelector"],pa=function(t){return function(e,n){return e[t](n)}},ha=aa.length;ha--&&!oa;)if(ua=aa[ha],sa[ua])oa=pa(ua);else for(la=As.length;la--;)if(ca=As[ha]+ua.substr(0,1).toUpperCase()+ua.substring(1),sa[ca]){oa=pa(ca);break}oa||(oa=function(t,e){var n,r,i;for(r=t.parentNode,r||(sa.innerHTML="",r=sa,t=t.cloneNode(),sa.appendChild(t)),n=r.querySelectorAll(e),i=n.length;i--;)if(n[i]===t)return!0;return!1})}else oa=null;var ou,su,au;try{Object.defineProperty({},"test",{value:0}),bs&&Object.defineProperty(ia("div"),"test",{value:0}),su=Object.defineProperty}catch(uu){su=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(uu){throw uu}bs&&Object.defineProperties(ia("div"),{test:{value:0}}),au=Object.defineProperties}catch(uu){au=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&su(t,n,e[n])}}try{Object.create(null),ou=Object.create}catch(uu){ou=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}var cu,hu,lu=Object.prototype.hasOwnProperty,pu=/^\s+/;hu=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},hu.prototype=Error.prototype,cu=function(t,e){var n,r,i=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},cu.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},getLinePos:function(t){for(var e,n=0,r=0;t>=this.lineEnds[n];)r=this.lineEnds[n],n+=1;return e=t-r,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],r=e[1],i=this.lines[e[0]-1],o=0,s=i.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new hu(t+" at line "+n+" character "+r+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(pu)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},cu.extend=function(t){var e,n,r=this;e=function(t,e){cu.call(this,t,e)},e.prototype=ou(r.prototype);for(n in t)lu.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=cu.extend,e};var fu,du,mu,vu,gu,yu,bu,wu=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Eu=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,_u=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;du={"true":!0,"false":!1,undefined:void 0,"null":null},mu=new RegExp("^(?:"+Object.keys(du).join("|")+")"),vu=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,gu=/\$\{([^\}]+)\}/g,yu=/^\$\{([^\}]+)\}/,bu=/^\s*$/,fu=cu.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&bu.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(yu),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(mu))?{v:du[e]}:void 0},function(t){var e;return(e=t.matchPattern(vu))?{v:+e}:void 0},function(t){var e,n=ot(t);return n&&(e=t.values)?{v:n.v.replace(gu,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=pt(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var xu,Ou,ju=function(){function t(e,n,r){for(gt(this,t),this.fragment=e,this.reference=K(n),this.callback=r,this.keys=n.split("."),this.resolved=!1;e;)e.context&&e.context.addUnresolved(this.keys[0],this),e=e.componentParent||e.parent}return t.prototype.attemptResolution=function(){if(!this.resolved){var t=vt(this.fragment,this.reference);t&&(this.resolved=!0,this.callback(t))}},t.prototype.forceResolution=function(){if(!this.resolved){var t=this.fragment.findContext().joinAll(this.keys);this.callback(t),this.resolved=!0}},t.prototype.unbind=function(){y(this.fragment.unresolved,this)},t}(),ku=function(){function t(e){yt(this,t),this.parentFragment=e.parentFragment,this.ractive=e.parentFragment.ractive,this.template=e.template,this.index=e.index,this.type=e.template.t,this.dirty=!1}return t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},t.prototype.find=function(){return null},t.prototype.findAll=function(){},t.prototype.findComponent=function(){return null},t.prototype.findAllComponents=function(){},t.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)},t}(),Su=function(t){function e(){bt(this,e),t.apply(this,arguments)}return wt(e,t),e.prototype.bind=function(){},e.prototype.render=function(){},e.prototype.teardown=function(){},e.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e.prototype.unbind=function(){},e.prototype.unrender=function(){},e}(ku),Au=function(){function t(e){Et(this,t),this.parent=e,this.value=e.getKeypath(),this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.handleChange=function(){this.value=this.parent.getKeypath(),this.dependants.forEach(_)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){y(this.dependants,t)},t}(),Tu=function(){function t(e){_t(this,t),this.value=e,this.isReadonly=!0,this.dependants=[]}return t.prototype.get=function(){return this.value},t.prototype.getKeypath=function(){return this.value},t.prototype.rebind=function(t){this.value=t,this.dependants.forEach(_)},t.prototype.register=function(t){this.dependants.push(t)},t.prototype.unregister=function(t){y(this.dependants,t)},t}(),Cu=[],Pu=void 0,Fu={},Nu=Object.prototype.hasOwnProperty,Iu=null,Ru=function(){function t(e,n){At(this,t),this.deps=[],this.children=[],this.childByKey={},this.indexModels=[],this.unresolved=[],this.unresolvedByKey={},this.bindings=[],this.value=void 0,e&&(this.parent=e,this.root=e.root,this.key=n,e.value&&(this.value=e.value[this.key],this.adapt()))}return t.prototype.adapt=function(){var t=this.root.adaptors,e=this.value,n=t.length,r=this.root.ractive,i=this.getKeypath(),o=void 0;for(o=0;n>o;o+=1){var s=t[o];if(s.filter(e,i,r)){this.wrapper=s.wrap(r,e,i,St(i)),this.wrapper.value=this.value,this.wrapper.__model=this,this.value=this.wrapper.get();break}}},t.prototype.addUnresolved=function(t,e){this.unresolvedByKey[t]||(this.unresolved.push(t),this.unresolvedByKey[t]=[]),this.unresolvedByKey[t].push(e)},t.prototype.clearUnresolveds=function(t){for(var e=this.unresolved.length;e--;){var n=this.unresolved[e];if(!t||n===t){for(var r=this.unresolvedByKey[n],i=this.has(n),o=r.length;o--;)i&&r[o].attemptResolution(),r[o].resolved&&r.splice(o,1);r.length||(this.unresolved.splice(e,1),this.unresolvedByKey[n]=null)}}},t.prototype.createBranch=function(t){var e=l(t)?[]:{};return this.set(e),e},t.prototype.discard=function(){var t=this;this.deps.forEach(function(e){e.boundsSensitive&&t.unregister(e)})},t.prototype.findMatches=function(t){var e=t.length,n=[this],r=void 0,i=void 0,o=function(){var e=t[i];"*"===e?(r=[],n.forEach(function(t){c(t.value)?(Iu&&Iu.parent===t&&"length"===Iu.key&&r.push(Iu),t.value.forEach(function(e,n){r.push(t.joinKey(n))})):(p(t.value)||"function"==typeof t.value)&&(Object.keys(t.value).forEach(function(e){r.push(t.joinKey(e))}),t.isRoot&&Object.keys(t.computations).forEach(function(e){r.push(t.joinKey(e))}))})):r=n.map(function(t){return t.joinKey(e)}),n=r};for(i=0;e>i;i+=1)o();return r},t.prototype.get=function(t){return t&&jt(this),this.value},t.prototype.getIndexModel=function(t){var e=this.parent.indexModels;return"string"==typeof this.key&&void 0!==t?new Tu(t):(e[this.key]||(e[this.key]=new Tu(this.key)),e[this.key])},t.prototype.getKeyModel=function(){return new Tu(this.key)},t.prototype.getKeypathModel=function(){return this.keypathModel||(this.keypathModel=new Au(this))},t.prototype.getKeypath=function(){return this.parent.isRoot?this.key:this.parent.getKeypath()+"."+this.key},t.prototype.has=function(t){return this.value&&Nu.call(this.value,t)},t.prototype.joinKey=function(e){if(void 0===e||""===e)return this;if(!this.childByKey.hasOwnProperty(e)){var n=new t(this,e);this.children.push(n),this.childByKey[e]=n}return this.childByKey[e]},t.prototype.joinAll=function(t){for(var e=this,n=0;n<t.length;n+=1)e=e.joinKey(t[n]);return e},t.prototype.mark=function(){var t=this.retrieve();h(t,this.value)||(this.value=t,this.children.forEach(x),this.deps.forEach(_),this.clearUnresolveds())},t.prototype.merge=function(t,e){var n=e?this.value.map(e):this.value,r=e?t.map(e):t,i=n.length,o={},s=0,a=n.map(function(t){var e=void 0,n=s;do{if(e=r.indexOf(t,n),-1===e)return-1;n=e+1}while(o[e]===!0&&i>n);return e===s&&(s+=1),o[e]=!0,e});this.parent.value[this.key]=t,this._merged=!0,this.shuffle(a)},t.prototype.register=function(t){this.deps.push(t)},t.prototype.registerTwowayBinding=function(t){this.bindings.push(t)},t.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},t.prototype.set=function(t){if(!h(t,this.value)){if(this.root.changes[this.getKeypath()]=t,this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key];else if(this.wrapper){var e=!this.wrapper.reset||this.wrapper.reset(t)===!1;e?(this.wrapper.teardown(),this.wrapper=null,this.parent.value[this.key]=this.value=t,this.adapt()):this.value=this.wrapper.get()}else{var n=this.parent.value||this.parent.createBranch(this.key);n[this.key]=t,this.value=t,this.adapt()}this.parent.clearUnresolveds(),this.clearUnresolveds();var r=Iu;Iu=this,this.children.forEach(x),this.deps.forEach(_);for(var i=this.parent;i;)i.deps.forEach(_),i=i.parent;Iu=r}},t.prototype.shuffle=function(t){var e=this,n=[],r=0,i=void 0;for(t.forEach(function(t,i){if(t>r&&(r=t),~t){var o=e.indexModels[i];o&&(n[t]=o,t!==i&&o.rebind(t))}});i=this.childByKey[++r];)"function"==typeof i.discard&&i.discard();this.indexModels=n,this.deps.forEach(function(e){e.shuffle&&e.shuffle(t)}),this.updateKeypathDependants(),this.mark(),this.deps.forEach(function(t){t.shuffle||t.handleChange()})},t.prototype.teardown=function(){this.children.forEach(k),this.wrapper&&this.wrapper.teardown()},t.prototype.unregister=function(t){y(this.deps,t)},t.prototype.unregisterTwowayBinding=function(t){y(this.bindings,t)},t.prototype.updateFromBindings=function(t){for(var e=this.bindings.length;e--;){var n=this.bindings[e].getValue();n!==this.value&&this.set(n)}t&&this.children.forEach(Tt)},t.prototype.updateKeypathDependants=function(){this.children.forEach(Ct),this.keypathModel&&this.keypathModel.handleChange()},t}(),Lu={},Du=function(t){function e(n,r){var i=this;Nt(this,e),t.call(this,n.ractive.viewmodel,null),this.fragment=n,this.template=r,this.isReadonly=!0,this.fn=Ft(r.s,r.r.length),this.computation=null,this.resolvers=[],this.models=r.r.map(function(t,e){var r=Pt(n,t);return r||!function(){var r=n.resolve(t,function(t){y(i.resolvers,r),i.models[e]=t,i.bubble()});i.resolvers.push(r)}(),r}),this.bubble()}return It(e,t),e.prototype.bubble=function(){var t=this,e=this.fragment.ractive,n="@"+this.template.s.replace(/_(\d+)/g,function(e,n){if(n>=t.models.length)return e;var r=t.models[n];return r?r.getKeypath():"@undefined"}),r={getter:function(){var n=t.models.map(function(t){if(!t)return void 0;var n=t.get(!0);return"function"==typeof n?Rt(n,e,e._guid):n});return t.fn.apply(e,n)},getterString:n},i=e.viewmodel.compute(n,r);i.init(),this.value=i.get(),this.computation&&this.computation.unregister(this),this.computation=i,i.register(this)},e.prototype.get=function(){return this.computation.get()},e.prototype.getKeypath=function(){return this.computation?this.computation.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.unbind=function(){this.resolvers.forEach(S)},e}(Ru),Vu=function(t){function e(n,r){var i=this;Lt(this,e),t.call(this,null,null),this.root=n.ractive.viewmodel,this.resolvers=[],this.base=Vt(n,r),this.base||!function(){var t=n.resolve(r.r,function(e){i.base=e,i.bubble(),y(i.resolvers,t)});i.resolvers.push(t)}();var o={handleChange:function(){return i.bubble()}};this.members=r.m.map(function(t,e){if("string"==typeof t)return{get:function(){return t}};var r=void 0;return t.t===La?(r=Pt(n,t.n),r?r.register(o):!function(){var r=n.resolve(t.n,function(t){i.members[e]=t,t.register(o),i.bubble(),y(i.resolvers,r)});i.resolvers.push(r)}(),r):(r=new Du(n,t),r.register(o),r)}),this.isUnresolved=!0,this.bubble()}return Dt(e,t),e.prototype.bubble=function(){if(this.base){for(var t=this.members.length;t--;)if(!this.members[t]||void 0===this.members[t].get())return;this.isUnresolved=!1;var e=this.members.map(function(t){return t.get()}),n=this.base.joinAll(e);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=n,this.parent=n.parent,n.register(this),n.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange(),this.mark()}},e.prototype.forceResolution=function(){this.resolvers.forEach(function(t){return t.forceResolution()}),this.bubble()},e.prototype.get=function(){return this.model?this.model.get():void 0},e.prototype.getValue=function(){for(var t=this.bindings.length;t--;){var e=this.bindings[t].getValue();if(e!==this.value)return e}return this.value},e.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.mark()},e.prototype.retrieve=function(){return this.get()},e.prototype.set=function(t){if(!this.model)throw new Error("Unresolved reference expression. This should not happen!");this.model.set(t)},e.prototype.unbind=function(){this.resolvers.forEach(S)},e}(Ru),Bu=function(t){function e(n){Bt(this,e),t.call(this,n),this.parentFragment=n.parentFragment,this.template=n.template,this.index=n.index,this.isStatic=!!n.template.s,this.model=null,this.dirty=!1}return Mt(e,t),e.prototype.bind=function(){var t=this,e=Vt(this.parentFragment,this.template),n=e?e.get():void 0;return this.isStatic?void(this.model={get:function(){return n}}):void(e?(e.register(this),this.model=e):this.resolver=this.parentFragment.resolve(this.template.r,function(e){t.model=e,e.register(t),t.handleChange(),t.resolver=null}))},e.prototype.handleChange=function(){this.bubble()},e.prototype.rebind=function(){if(!this.isStatic&&this.model){var t=Vt(this.parentFragment,this.template);if(t!==this.model){var e=this.model.get();this.model.unregister(this),t.register(this),this.model=t,t.get()!==e&&this.handleChange()}}},e.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.resolver&&this.resolver.unbind())},e}(ku),Mu=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Wu=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Ku={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,
upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},zu=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],$u=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Ku).join("|")+"));?","g"),Uu=/</g,qu=/>/g,Hu=/&/g,Qu=function(t){function e(){$t(this,e),t.apply(this,arguments)}return Ut(e,t),e.prototype.detach=function(){return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.getString=function(){return this.model?ut(this.model.get()):""},e.prototype.render=function(t){this.rendered=!0,this.node=bs.createTextNode(this.getString()),t.appendChild(this.node)},e.prototype.toString=function(t){var e=this.getString();return t?Kt(e):e},e.prototype.unrender=function(t){t&&this.detach(),this.rendered=!1},e.prototype.update=function(){this.dirty&&(this.rendered&&(this.node.data=this.getString()),this.dirty=!1)},e.prototype.valueOf=function(){return this.model?this.model.get():void 0},e}(Bu),Zu=/^[0-9][1-9]*$/,Yu=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;xu=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Ou=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Gu,Ju,Xu=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,tc=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,ec="Expected a JavaScript expression",nc="Expected closing paren",rc=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;Ju=function(t,e){return function(n){var r;return(r=e(n))?r:n.matchString(t)?(n.allowWhitespace(),r=le(n),r||n.error(ec),{s:t,o:r,t:Ba}):null}},function(){var t,e,n,r,i;for(r="! ~ + - typeof".split(" "),i=ce,t=0,e=r.length;e>t;t+=1)n=Ju(r[t],i),i=n;Gu=i}();var ic,oc;oc=function(t,e){return function(n){var r,i,o;if(i=e(n),!i)return null;for(;;){if(r=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=r,i;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=r,i;if(n.allowWhitespace(),o=e(n),!o)return n.pos=r,i;i={t:Ka,s:t,o:[i,o]}}}},function(){var t,e,n,r,i;for(r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=Gu,t=0,e=r.length;e>t;t+=1)n=oc(r[t],i),i=n;ic=i}();var sc,ac=/^yield\s*/,uc={each:qa,"if":$a,"if-with":Qa,"with":Ha,unless:Ua},cc=/^\s*else\s*/,hc=/^\s*elseif\s+/,lc=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,pc=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,fc=new RegExp("^("+Object.keys(uc).join("|")+")\\b"),dc=/^\s*\r?\n/,mc=/\r?\n\s*$/,vc=/[ \t\f\r\n]+/g,gc=/^(?:pre|script|style|textarea)$/i,yc=/^[ \t\f\r\n]+/,bc=/[ \t\f\r\n]+$/,wc=/^(?:\r\n|\r|\n)/,Ec=/(?:\r\n|\r|\n)$/,_c=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,xc=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Oc=/\)\s*$/;sc=cu.extend({converters:[le]});var jc,kc=/^[^\s=]+/,Sc=/^\s+/,Ac={t:_a,exclude:!0},Tc=/^[^\s"'>\/=]+/,Cc=/^[^\s"'=<>`]+/,Pc=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Fc=/^[\s\n\/>]/,Nc=/^on/,Ic=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Rc=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Lc={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Dc={exclude:!0};jc={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Vc,Bc="<!--",Mc="-->",Wc=/^#\s*partial\s+/,Kc=/[-/\\^$*+?.()|[\]{}]/g,zc=/^<!--\s*/,$c=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Uc=/\s*-->/,qc=[Oe,xe,ye,de,fe,qt],Hc=[je],Qc=[xe,ye,fe],Zc=void 0,Yc=[De,He,Ue,Se],Gc=[Ye,Qe];Zc=cu.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],r=e.staticDelimiters||["[[","]]"],i=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:qc},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Hc},{isStatic:!0,isTriple:!1,open:r[0],close:r[1],readers:Qc},{isStatic:!0,isTriple:!0,open:i[0],close:i[1],readers:Hc}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),Ne(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:vs}},converters:[Ge],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var Jc,Xc,th=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],eh={fromId:en,isHashedId:nn,isParsed:rn,getParseOptions:on,createHelper:Xe,parse:tn},nh=function(t){function e(){fn(this,e),t.apply(this,arguments)}return dn(e,t),e.prototype.bind=function(){t.prototype.bind.call(this);var e=this.template.r?un(this.ractive,this.template.r,this.parentFragment)||null:null;e?(this.named=!0,this.setTemplate(this.template.r,e)):this.model&&"string"==typeof this.model.get()||!this.template.r?this.setTemplate(this.model.get()):this.setTemplate(this.template.r,e),this.fragment=new vp({owner:this,template:this.partialTemplate}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.forceResetTemplate=function(){this.partialTemplate=un(this.ractive,this.name,this.parentFragment),this.partialTemplate||(a("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]),this.fragment.resetTemplate(this.partialTemplate),this.bubble()},e.prototype.rebind=function(){t.prototype.unbind.call(this),t.prototype.bind.call(this),this.fragment.rebind()},e.prototype.render=function(t){this.fragment.render(t)},e.prototype.setTemplate=function(t,e){this.name=t,e||null===e||(e=un(this.ractive,t,this.parentFragment)),e||a("Could not find template for partial '"+t+"'"),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.fragment.unbind()},e.prototype.unrender=function(t){this.fragment.unrender(t)},e.prototype.update=function(){this.dirty&&(this.named||this.model&&"string"==typeof this.model.get()&&this.model.get()!==this.name&&(this.setTemplate(this.model.get()),this.fragment.resetTemplate(this.partialTemplate)),this.fragment.update(),this.dirty=!1)},e}(Bu),rh=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ih=function(){function t(e){mn(this,t),this.parent=e.owner.parentFragment,this.parentFragment=this,this.owner=e.owner,this.ractive=this.parent.ractive,this.template=e.template,this.indexRef=e.indexRef,this.keyRef=e.keyRef,this.pendingNewIndices=null,this.indexByKey=null}return t.prototype.bind=function(t){var e=this;this.context=t;var n=t.get();if(c(n)){this.iterations=[];for(var r=0;r<n.length;r+=1)this.iterations[r]=this.createIteration(r,r)}else if(p(n)){if(this.indexRef){var i=this.indexRef.split(","),o=rh(i,2),s=o[0],a=o[1];this.keyRef=s,this.indexRef=a}this.indexByKey={},this.iterations=Object.keys(n).map(function(t,n){return e.indexByKey[t]=n,e.createIteration(t,n)})}return this},t.prototype.bubble=function(){this.owner.bubble()},t.prototype.createIteration=function(t,e){var n=this.owner.parentFragment,r=vn(this.keyRef,t,n.keyRefs),i=vn(this.indexRef,e,n.indexRefs),o=new vp({owner:this,template:this.template,indexRefs:i,keyRefs:r});o.key=t,o.index=e,o.isIteration=!0;var s=this.context.joinKey(t);return o.bind(s)},t.prototype.detach=function(){var t=st();return this.iterations.forEach(function(e){return t.appendChild(e.detach())}),t},t.prototype.find=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var r=this.iterations[n].find(t);if(r)return r}},t.prototype.findAll=function(t,e){var n=this.iterations.length,r=void 0;for(r=0;n>r;r+=1)this.iterations[r].findAll(t,e)},t.prototype.findComponent=function(t){var e=this.iterations.length,n=void 0;for(n=0;e>n;n+=1){var r=this.iterations[n].findComponent(t);if(r)return r}},t.prototype.findAllComponents=function(t,e){var n=this.iterations.length,r=void 0;for(r=0;n>r;r+=1)this.iterations[r].findAllComponents(t,e)},t.prototype.findNextNode=function(t){return t.index<this.iterations.length-1?this.iterations[t.index+1].firstNode():this.owner.findNextNode()},t.prototype.firstNode=function(){return this.iterations[0]?this.iterations[0].firstNode():null},t.prototype.rebind=function(t){this.context=t,c(t.get())&&this.iterations.forEach(function(e,n){e.rebind(t.joinKey(n))})},t.prototype.render=function(t){this.iterations&&this.iterations.forEach(function(e){return e.render(t)}),this.rendered=!0},t.prototype.shuffle=function(t){var e=this;if(this.pendingNewIndices)throw new Error("Section was already shuffled!");this.pendingNewIndices=t,this.previousIterations=this.iterations.slice();var n=[];t.forEach(function(t,r){if(-1!==t){var i=e.iterations[r];n[t]=i,t!==r&&(i.dirty=!0)}}),this.iterations=n,this.bubble()},t.prototype.toString=function(t){return this.iterations?this.iterations.map(t?F:P).join(""):""},t.prototype.unbind=function(){return this.iterations.forEach(S),this},t.prototype.unrender=function(t){this.iterations.forEach(t?T:A),this.rendered=!1},t.prototype.update=function(){var t=this;if(this.pendingNewIndices)return void this.updatePostShuffle();var e=this.context.get(),n=void 0,r=void 0;if(c(e))this.iterations.length>e.length&&(n=this.iterations.splice(e.length));else if(p(e)){n=[],r={};for(var i=this.iterations.length;i--;){var o=this.iterations[i];o.key in e?r[o.key]=!0:(this.iterations.splice(i,1),n.push(o))}}else n=this.iterations,this.iterations=[];n&&n.forEach(function(t){t.unbind(),t.unrender(!0)}),this.iterations.forEach(C);var s=c(e)?e.length:p(e)?Object.keys(e).length:0;s>this.iterations.length&&!function(){var n=t.rendered?st():null,i=t.iterations.length;if(c(e))for(;i<e.length;){var o=t.createIteration(i,i);t.iterations.push(o),t.rendered&&o.render(n),i+=1}else p(e)&&Object.keys(e).forEach(function(e){if(!(e in r)){var o=t.createIteration(e,i);t.iterations.push(o),t.rendered&&o.render(n),i+=1}});if(t.rendered){var s=t.parent.findParentNode(),a=t.parent.findNextNode(t);s.insertBefore(n,a)}}()},t.prototype.updatePostShuffle=function(){var t=this,e=this.pendingNewIndices,n=-1,r=null;e.forEach(function(e,i){var o=t.previousIterations[i];-1===e?o.unbind().unrender(!0):(o.index=e,o.rebind(t.context.joinKey(e)),null===r&&e!==n+1&&(r=i)),n=e});var i=this.rendered?st():null,o=this.rendered?this.parent.findParentNode():null,s=this.context.get().length,a=void 0;for(a=0;s>a;a+=1){var u=this.iterations[a];this.rendered&&(u?null!==r&&a>=r?i.appendChild(u.detach()):i.childNodes.length&&o.insertBefore(i,u.firstNode()):(this.iterations[a]=this.createIteration(a,a),this.iterations[a].render(i))),this.rendered||u||(this.iterations[a]=this.createIteration(a,a))}this.rendered&&i.childNodes.length&&o.insertBefore(i,this.owner.findNextNode()),this.iterations.forEach(C),this.pendingNewIndices=null},t}(),oh=function(t){function e(n){gn(this,e),t.call(this,n),this.sectionType=n.template.n||null,this.fragment=null}return yn(e,t),e.prototype.bind=function(){if(t.prototype.bind.call(this),this.model){var e=this.model.value,n=void 0;if(this.sectionType||(this.sectionType=wn(e,this.template.i)),bn(e)&&this.sectionType!==Ha)return void(this.sectionType===Ua&&(this.fragment=new vp({owner:this,template:this.template.f}).bind()));if(this.sectionType===Ua)return;n=this.sectionType===$a?new vp({owner:this,template:this.template.f}).bind():this.sectionType===Ha||this.sectionType===Qa?new vp({owner:this,template:this.template.f}).bind(this.model):new ih({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model),this.fragment=n}else this.sectionType&&this.sectionType===Ua&&(this.fragment=new vp({owner:this,template:this.template.f}).bind())},e.prototype.detach=function(){return this.fragment?this.fragment.detach():st()},e.prototype.find=function(t){return this.fragment?this.fragment.find(t):void 0},e.prototype.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},e.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment&&this.fragment.firstNode()},e.prototype.rebind=function(){t.prototype.rebind.call(this),this.fragment&&this.fragment.rebind(this.sectionType===$a?null:this.model)},e.prototype.render=function(t){this.rendered=!0,this.fragment&&this.fragment.render(t)},e.prototype.shuffle=function(t){this.fragment&&this.sectionType===qa&&this.fragment.shuffle(t)},e.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},e.prototype.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},e.prototype.update=function(){if(this.dirty&&this.model){var t=this.model.value;null===this.sectionType&&(this.sectionType=wn(t,this.template.i));var e=void 0;if(this.sectionType===qa)this.fragment?this.fragment.update():e=new ih({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model);else if(this.sectionType===Ha)this.fragment?this.fragment.update():e=new vp({owner:this,template:this.template.f}).bind(this.model);else if(this.sectionType===Qa)this.fragment?bn(t)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update():bn(t)||(e=new vp({owner:this,template:this.template.f}).bind(this.model));else{var n=this.sectionType===Ua?bn(t):!!t;this.fragment?n?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):n&&(e=new vp({owner:this,template:this.template.f}).bind(null))}if(e){if(this.rendered){var r=this.parentFragment.findParentNode(),i=this.parentFragment.findNextNode(this);if(i){var o=st();e.render(o),i.parentNode.insertBefore(o,i)}else e.render(r)}this.fragment=e}this.dirty=!1}},e}(Bu),sh={};try{ia("table").innerHTML="foo"}catch(uu){Jc=!0,Xc={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var ah,uh=function(t){function e(n){xn(this,e),t.call(this,n)}return On(e,t),e.prototype.detach=function(){var t=st();return this.nodes.forEach(function(e){return t.appendChild(e)}),t},e.prototype.find=function(t){var e=this.nodes.length,n=void 0;for(n=0;e>n;n+=1){var r=this.nodes[n];if(1===r.nodeType){if(oa(r,t))return r;var i=r.querySelector(t);if(i)return i}}return null},e.prototype.findAll=function(t,e){var n=this.nodes.length,r=void 0;for(r=0;n>r;r+=1){var i=this.nodes[r];if(1===i.nodeType){e.test(i)&&e.add(i);var o=i.querySelectorAll(t);if(o){var s=o.length,a=void 0;for(a=0;s>a;a+=1)e.add(o[a])}}}},e.prototype.findComponent=function(){return null},e.prototype.firstNode=function(){return this.nodes[0]},e.prototype.render=function(t){var e=this.model?this.model.get():"";this.nodes=En(e,this.parentFragment.findParentNode(),t),this.rendered=!0},e.prototype.toString=function(){return this.model&&null!=this.model.get()?Wt(""+this.model.get()):""},e.prototype.unrender=function(){this.nodes&&this.nodes.forEach(function(t){return t.parentNode.removeChild(t)}),this.rendered=!1},e.prototype.update=function(){if(this.rendered&&this.dirty){this.unrender();var t=st();this.render(t);var e=this.parentFragment.findParentNode(),n=this.parentFragment.findNextNode(this);e.insertBefore(t,n),this.dirty=!1}},e}(Bu),ch=function(t){function e(n){jn(this,e),t.call(this,n),this.container=n.parentFragment.ractive,this.component=this.container.component,this.containerFragment=n.parentFragment,this.parentFragment=this.component.parentFragment,this.name=n.template.n||""}return kn(e,t),e.prototype.bind=function(){var t=this.name;(this.component.yielders[t]||(this.component.yielders[t]=[])).push(this);var e=this.container._inlinePartials[t||"content"];"string"==typeof e&&(e=Je(e).t),e||(s('Could not find template for partial "'+t+'"',{ractive:this.ractive}),e=[]),this.fragment=new vp({owner:this,ractive:this.container.parent,template:e}).bind()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.find(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.fragment.firstNode()},e.prototype.rebind=function(){throw new Error("Yielder$rebind is not yet implemented!")},e.prototype.render=function(t){return this.fragment.render(t)},e.prototype.setTemplate=function(t){var e=this.parentFragment.ractive.partials[t];"string"==typeof e&&(e=Je(e).t),this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){this.fragment.unbind(),y(this.component.yielders[this.name],this)},e.prototype.unrender=function(t){this.fragment.unrender(t)},e}(ku);ys?(ah={},Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in i)t.call(i,s)&&o.push(s);if(e)for(var a=0;r>a;a++)t.call(i,n[a])&&o.push(n[a]);return o}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i,o=this,s=[];for(o instanceof String&&(o=o.toString(),i=!0),n=0,r=o.length;r>n;n+=1)(o.hasOwnProperty(n)||i)&&(s[n]=t.call(e,o[n],n,o));return s}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,r,i,o;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=this.length,o=!1,arguments.length>1&&(r=e,o=!0),n=0;i>n;n+=1)this.hasOwnProperty(n)?o&&(r=t(r,this[n],n,this)):(r=this[n],o=!0);if(!o)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(t,e){var n,r,i=[];for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(i[i.length]=this[n]);return i}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,r,i;if(null==this)throw new TypeError;if(n=Object(this),r=n.length>>>0,"function"!=typeof t)throw new TypeError;for(i=0;r>i;i+=1)if(i in n&&!t.call(e,n[i],i,n))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e,n,r,i,o=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=o.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&t?this:t;return n.apply(i,e.concat(o.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),ys.addEventListener||!function(t,e){var n,r,i,o,s,a;t.appearsToBeIELessEqual8=!0,n=function(t,e){var n,r=this;for(n in t)r[n]=t[n];r.currentTarget=e,r.target=t.srcElement||e,r.timeStamp=+new Date,r.preventDefault=function(){t.returnValue=!1},r.stopPropagation=function(){t.cancelBubble=!0}},r=function(t,e){var r,i,o=this;r=o.listeners||(o.listeners=[]),i=r.length,r[i]=[e,function(t){e.call(o,new n(t,o))}],o.attachEvent("on"+t,r[i][1])},i=function(t,e){var n,r,i=this;if(i.listeners)for(n=i.listeners,r=n.length;r--;)n[r][0]===e&&i.detachEvent("on"+t,n[r][1])},t.addEventListener=e.addEventListener=r,t.removeEventListener=e.removeEventListener=i,"Element"in t?(t.Element.prototype.addEventListener=r,t.Element.prototype.removeEventListener=i):(a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=r,e.removeEventListener=i,e},o=e.getElementsByTagName("head")[0],s=e.createElement("style"),o.insertBefore(s,o.firstChild))}(ys,bs),ys.getComputedStyle||(ah.getComputedStyle=function(){function e(t,r,i,o){var s,a=r[i],u=parseFloat(a),c=a.split(/\d/)[0];return isNaN(u)&&/^thin|medium|thick$/.test(a)&&(u=n(a),c=""),o=null!=o?o:/%|em/.test(c)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==i?o:/width/i.test(i)?t.clientWidth:t.clientHeight,"em"==c?u*o:"in"==c?96*u:"pt"==c?96*u/72:"%"==c?u/100*s:u}function n(t){var e,n;return s[t]||(e=bs.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",bs.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),s[t]=n.right-n.left),s[t]}function r(t,e){var n="border"==e?"Width":"",r=e+"Top"+n,i=e+"Right"+n,o=e+"Bottom"+n,s=e+"Left"+n;t[e]=(t[r]==t[i]==t[o]==t[s]?[t[r]]:t[r]==t[o]&&t[s]==t[i]?[t[r],t[i]]:t[s]==t[i]?[t[r],t[i],t[o]]:[t[r],t[i],t[o],t[s]]).join(" ")}function i(t){var n,i,o,s;n=t.currentStyle,i=this,o=e(t,n,"fontSize",null);for(s in n)"normal"===n[s]&&a.hasOwnProperty(s)?i[s]=a[s]:/width|height|margin.|padding.|border.+W/.test(s)?"auto"===n[s]?/^width|height/.test(s)?i[s]=("width"===s?t.clientWidth:t.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(s)&&(i[s]="0px"):i[s]=e(t,n,s,o)+"px":"styleFloat"===s?i["float"]=n[s]:i[s]=n[s];return r(i,"margin"),r(i,"padding"),r(i,"border"),i.fontSize=o+"px",i}function o(t){return new i(t)}var s={},a={fontWeight:400,lineHeight:1.2,letterSpacing:0};return i.prototype={constructor:i,getPropertyPriority:t,getPropertyValue:function(t){return this[t]||""},item:t,removeProperty:t,setProperty:t,getPropertyCSSValue:t},o}())):ah=null;var hh,lh,ph;ws?(lh={},ph=ia("div").style,hh=function(t){var e,n,r;if(t=An(t),!lh[t])if(void 0!==ph[t])lh[t]=t;else for(r=t.charAt(0).toUpperCase()+t.substring(1),e=As.length;e--;)if(n=As[e],void 0!==ph[n+r]){lh[t]=n+r;break}return lh[t]}):hh=null;var fh;ys?(!function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,o;return n=Date.now(),r=Math.max(0,16-(n-e)),o=i(function(){t(n+r)},r),e=n+r,o})}}(As,0,ys),fh=ys.requestAnimationFrame):fh=null;var dh=ys&&ys.performance&&"function"==typeof ys.performance.now?function(){return ys.performance.now()}:function(){return Date.now()},mh=[],vh={tick:function(){var t,e,n;for(n=dh(),zs.start(),t=0;t<mh.length;t+=1)e=mh[t],e.tick(n)||mh.splice(t--,1);zs.end(),mh.length?fh(vh.tick):vh.running=!1},add:function(t){mh.push(t),vh.running||(vh.running=!0,fh(vh.tick))},abort:function(t,e){for(var n,r=mh.length;r--;)n=mh[r],n.root===e&&n.model===t&&n.stop()}},gh=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(a(Gs(t.easing,"easing")),e=Tn)):e="function"==typeof t.easing?t.easing:Tn,this.easing=e,this.start=dh(),this.end=this.start+this.duration,this.running=!0,vh.add(this)};gh.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var yh,bh,wh,Eh,_h,xh,Oh,jh,kh={number:function(t,e){var n;return l(t)&&l(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,r,i,o;if(!c(t)||!c(e))return null;for(n=[],r=[],o=i=Math.min(t.length,e.length);o--;)r[o]=Sh(t[o],e[o]);for(o=i;o<t.length;o+=1)n[o]=t[o];for(o=i;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=i;e--;)n[e]=r[e](t);return n}},object:function(t,e){var n,r,i,o,s;if(!p(t)||!p(e))return null;n=[],o={},i={};for(s in t)lu.call(t,s)&&(lu.call(e,s)?(n.push(s),i[s]=Sh(t[s],e[s])):o[s]=t[s]);for(s in e)lu.call(e,s)&&!lu.call(t,s)&&(o[s]=e[s]);return r=n.length,function(t){for(var e,s=r;s--;)e=n[s],o[e]=i[e](t);return o}}},Sh=function(t,e,r,i){if(t===e)return Cn(e);if(i){var o=sn("interpolators",r,i);if(o)return o(t,e)||Cn(e);n(Gs(i,"interpolator"))}return kh.number(t,e)||kh.array(t,e)||kh.object(t,e)||Cn(e)},Ah=new RegExp("^-(?:"+As.join("|")+")-"),Th=new RegExp("^(?:"+As.join("|")+")([A-Z])"),Ch={},Ph={};ws?(bh=ia("div").style,function(){void 0!==bh.transition?(wh="transition",Eh="transitionend",_h=!0):void 0!==bh.webkitTransition?(wh="webkitTransition",Eh="webkitTransitionEnd",_h=!0):_h=!1}(),wh&&(xh=wh+"Duration",Oh=wh+"Property",jh=wh+"TimingFunction"),yh=function(t,e,n,r,i){setTimeout(function(){var o,a,u,c,h;c=function(){a&&u&&(t.root.fire(t.name+":end",t.node,t.isIntro),i())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Oh]=r.map(hh).map(Fn).join(","),t.node.style[jh]=Fn(n.easing||"linear"),t.node.style[xh]=n.duration/1e3+"s",h=function(e){var n;n=r.indexOf(An(Pn(e.propertyName))),-1!==n&&r.splice(n,1),r.length||(t.node.removeEventListener(Eh,h,!1),u=!0,c())},t.node.addEventListener(Eh,h,!1),setTimeout(function(){for(var i,l,p,f,d,m=r.length,v=[];m--;)f=r[m],i=o+f,_h&&!Ph[i]&&(t.node.style[hh(f)]=e[f],Ch[i]||(l=t.getStyle(f),Ch[i]=t.getStyle(f)!=e[f],Ph[i]=!Ch[i],Ph[i]&&(t.node.style[hh(f)]=l))),(!_h||Ph[i])&&(void 0===l&&(l=t.getStyle(f)),p=r.indexOf(f),-1===p?s("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):r.splice(p,1),d=/[^\d]*$/.exec(e[f])[0],v.push({name:hh(f),interpolator:Sh(parseFloat(l),parseFloat(e[f])),suffix:d}));v.length?new gh({root:t.root,duration:n.duration,easing:An(n.easing||""),step:function(e){var n,r;for(r=v.length;r--;)n=v[r],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){a=!0,c()}}):a=!0,r.length||(t.node.removeEventListener(Eh,h,!1),u=!0,c())},0)},n.delay||0)}):yh=null;var Fh=void 0,Nh="hidden";if(bs){var Ih=void 0;if(Nh in bs)Ih="";else for(var Rh=As.length;Rh--;){var Lh=As[Rh];if(Nh=Lh+"Hidden",Nh in bs){Ih=Lh,bs.addEventListener(Ih+"visibilitychange",Nn),Nn();break}}void 0===Ih&&("onfocusout"in bs?(bs.addEventListener("focusout",In),bs.addEventListener("focusin",Rn)):(ys.addEventListener("pagehide",In),ys.addEventListener("blur",In),ys.addEventListener("pageshow",Rn),ys.addEventListener("focus",Rn)),Fh=!0)}var Dh,Vh,Bh,Mh,Wh,Kh,zh=ys&&(ys.getComputedStyle||ah.getComputedStyle),$h=Cs.resolve(),Uh=function(){function t(e,n,r){Ln(this,t),this.owner=e,this.isIntro=r,this.ractive=e.ractive;var i=e.ractive,o=n.n||n;if("string"!=typeof o){var s=new vp({owner:e,template:o}).bind();if(o=s.toString(),s.unbind(),""===o)return}if(this.name=o,n.a)this.params=n.a;else if(n.d){var s=new vp({owner:e,template:n.d}).bind();this.params=s.getArgsList(),s.unbind()}this._fn=sn("transitions",i,o),this._fn||a(Gs(o,"transition"),{ractive:i})}return t.prototype.animateStyle=function(t,e,n){var r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!Fh)return this.setStyle(t,e),$h;var i=void 0;"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(a('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new Cs(function(t){var e,o,s,a,u,c,h;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),o=[],s=zh(r.node),u={},c=e.length;c--;)h=e[c],a=s[hh(h)],"0px"===a&&(a=0),a!=i[h]&&(o.push(h),r.node.style[hh(h)]=a);return o.length?void yh(r,i,n,o,t):void t()});return o},t.prototype.getStyle=function(t){var e,n,r,i,o;if(e=zh(this.node),"string"==typeof t)return o=e[hh(t)],"0px"===o&&(o=0),o;if(!c(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},r=t.length;r--;)i=t[r],o=e[hh(i)],"0px"===o&&(o=0),n[i]=o;return n},t.prototype.processParams=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),ct({},e,t)},t.prototype.setStyle=function(t,e){var n;if("string"==typeof t)this.node.style[hh(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[hh(n)]=t[n]);return this},t.prototype.start=function(){var t,e,n,r=this;return t=this.node=this.owner.node,e=t.getAttribute("style"),this.complete=function(i){n||(!i&&r.isIntro&&Sn(t,e),r._manager.remove(r),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()},t}(),qh=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?"value":arguments[1];Vn(this,t),this.element=e,this.ractive=e.ractive,this.attribute=e.attributeByName[n];var r=this.attribute.interpolator;r.twowayBinding=this;
var i=r.model;if(i){if(i.isUnresolved)i.forceResolution(),Mn("expression",this.ractive);else if(i.isReadonly){var o=i.getKeypath().replace(/^@/,"");return a("Cannot use two-way binding on <"+e.name+"> element: "+o+" is read-only. To suppress this warning use <"+e.name+" twoway='false'...>",{ractive:this.ractive}),!1}}else r.resolver.forceResolution(),i=r.model,Mn("'"+r.template.r+"' reference",this.ractive);this.attribute.isTwoway=!0,this.model=i;var s=i.get();void 0===s&&this.getInitialValue&&(s=this.getInitialValue(),i.set(s));var u=Bn(e);u&&(this.resetValue=s,u.formBindings.push(this))}return t.prototype.bind=function(){this.model.registerTwowayBinding(this)},t.prototype.handleChange=function(){var t=this;zs.start(this.root),this.attribute.locked=!0,this.model.set(this.getValue()),zs.scheduleTask(function(){return t.attribute.locked=!1}),zs.end()},t.prototype.rebind=function(){this.unbind(),this.model=this.attribute.interpolator.model,this.bind()},t.prototype.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)},t.prototype.unrender=function(){},t}(),Hh=function(t){function e(){Kn(this,e),t.apply(this,arguments)}return zn(e,t),e.prototype.getInitialValue=function(){return""},e.prototype.getValue=function(){return this.node.value},e.prototype.render=function(){t.prototype.render.call(this);var e=this.ractive.lazy,n=!1;this.element.template.a&&"lazy"in this.element.template.a&&(e=this.element.template.a.lazy,0===e&&(e=!0)),"false"===e&&(e=!1),l(e)&&(n=+e,e=!1),this.handler=n?Un(n):Wn;var r=this.node;r.addEventListener("change",Wn,!1),e||(r.addEventListener("input",this.handler,!1),r.attachEvent&&r.addEventListener("keyup",this.handler,!1)),r.addEventListener("blur",$n,!1)},e.prototype.unrender=function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Wn,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",$n,!1)},e}(qh),Qh=function(t){function e(){qn(this,e),t.apply(this,arguments)}return Hn(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,zs.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n=void 0,r=void 0,i=e;i--;){var o=t[i];if(o.getAttribute("selected")){o.getAttribute("disabled")||(n=o.getAttribute("value")),r=!0;break}}if(!r)for(;++i<e;)if(!t[i].getAttribute("disabled")){n=t[i].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},e.prototype.getValue=function(){var t,e,n,r,i;for(t=this.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected&&!t[e].disabled)return i=r._ractive?r._ractive.value:r.value},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Wn,!1)},e.prototype.setValue=function(t){this.model.set(t)},e.prototype.unrender=function(){this.node.removeEventListener("change",Wn,!1)},e}(qh),Zh=function(t){function e(){Qn(this,e),t.apply(this,arguments)}return Zn(e,t),e.prototype.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,zs.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},e.prototype.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.prototype.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],r=0;e>r;r+=1){var i=t[r];if(i.selected){var o=i._ractive?i._ractive.value:i.value;n.push(o)}}return n},e.prototype.handleChange=function(){var e=this.attribute,n=e.getValue(),r=this.getValue();return void 0!==n&&m(r,n)||t.prototype.handleChange.call(this),this},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Wn,!1),void 0===this.model.get()&&this.handleChange()},e.prototype.setValue=function(){throw new Error("TODO not implemented yet")},e.prototype.unrender=function(){this.node.removeEventListener("change",Wn,!1)},e.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)},e}(qh),Yh=function(t){function e(){Yn(this,e),t.apply(this,arguments)}return Gn(e,t),e.prototype.getInitialValue=function(){return void 0},e.prototype.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},e}(Hh),Gh=function(t){function e(){Jn(this,e),t.apply(this,arguments)}return Xn(e,t),e}(qh),Jh=function(t){function e(n){tr(this,e),t.call(this,n,"checked")}return er(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Wn,!1),this.node.attachEvent&&this.node.addEventListener("click",Wn,!1)},e.prototype.unrender=function(){this.node.removeEventListener("change",Wn,!1),this.node.removeEventListener("click",Wn,!1)},e.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")},e.prototype.getValue=function(){return this.node.checked},e}(qh),Xh={},tl=function(t){function e(n){nr(this,e),t.call(this,n,"checked"),this.siblings=ir(this.ractive._guid+this.element.getAttribute("name")),this.siblings.push(this)}return rr(e,t),e.prototype.getValue=function(){return this.node.checked},e.prototype.handleChange=function(){zs.start(this.root),this.siblings.forEach(function(t){t.model.set(t.getValue())}),zs.end()},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",Wn,!1),this.node.attachEvent&&this.node.addEventListener("click",Wn,!1)},e.prototype.unbind=function(){y(this.siblings,this)},e.prototype.unrender=function(){this.node.removeEventListener("change",Wn,!1),this.node.removeEventListener("click",Wn,!1)},e}(qh),el={},nl=function(){function t(e,n){or(this,t),this.model=e,this.getValue=n,this.bindings=[]}return t.prototype.add=function(t){this.bindings.push(t)},t.prototype.bind=function(){this.model.registerTwowayBinding(this),this.bound=!0},t.prototype.remove=function(t){y(this.bindings,t),this.bindings.length||this.unbind()},t.prototype.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1},t}(),rl=[].push,il=function(t){function e(n){ar(this,e),t.call(this,n,"name");var r,i;this.checkboxName=!0,this.group=sr(this.ractive._guid,"checkboxes",this.model,lr),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")&&(r=this.model.get(),i=this.element.getAttribute("value"),rl.call(r,i))}return ur(e,t),e.prototype.bind=function(){this.group.bound||this.group.bind()},e.prototype.changed=function(){var t=!!this.isChecked;return this.isChecked=this.node.checked,this.isChecked===t},e.prototype.getInitialValue=function(){return this.noInitialValue=!0,[]},e.prototype.getValue=function(){return this.group.getValue()},e.prototype.handleChange=function(){this.isChecked=this.element.node.checked,t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node,n=this.model.get(),r=this.element.getAttribute("value");c(n)?this.isChecked=d(n,r):this.isChecked=n==r,e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.isChecked,e.addEventListener("change",Wn,!1),e.attachEvent&&e.addEventListener("click",Wn,!1)},e.prototype.unbind=function(){this.group.remove(this)},e.prototype.unrender=function(){var t=this.element.node;t.removeEventListener("change",Wn,!1),t.removeEventListener("click",Wn,!1)},e}(qh),ol=function(t){function e(n){pr(this,e),t.call(this,n,"name"),this.group=sr(this.ractive._guid,"radioname",this.model,dr),this.group.add(this)}return fr(e,t),e.prototype.bind=function(){var t=this;this.group.bound||this.group.bind(),this.nameAttributeBinding={handleChange:function(){return t.node.name="{{"+t.model.getKeypath()+"}}"}},this.model.getKeypathModel().register(this.nameAttributeBinding)},e.prototype.getInitialValue=function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},e.prototype.getValue=function(){return this.element.getAttribute("value")},e.prototype.handleChange=function(){this.node.checked&&t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.model.get()==this.element.getAttribute("value"),e.addEventListener("change",Wn,!1),e.attachEvent&&e.addEventListener("click",Wn,!1)},e.prototype.unbind=function(){this.group.remove(this),this.model.getKeypathModel().unregister(this.nameAttributeBinding)},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("change",Wn,!1),t.removeEventListener("click",Wn,!1)},e}(qh),sl=function(t){function e(){mr(this,e),t.apply(this,arguments)}return vr(e,t),e.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;e.addEventListener("change",Wn,!1),e.addEventListener("blur",Wn,!1),this.ractive.lazy||(e.addEventListener("input",Wn,!1),e.attachEvent&&e.addEventListener("keyup",Wn,!1))},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("blur",Wn,!1),t.removeEventListener("change",Wn,!1),t.removeEventListener("input",Wn,!1),t.removeEventListener("keyup",Wn,!1)},e.prototype.getValue=function(){return this.element.node.innerHTML},e}(qh),al={},ul={},cl=function(){function e(t,r,i){Sr(this,e),-1!==r.indexOf("*")&&n('Only component proxy-events may contain "*" wildcards, <'+t.name+" on-"+r+'="..."/> is not valid'),this.owner=t,this.name=r,this.template=i,this.ractive=t.parentFragment.ractive,this.parentFragment=t.parentFragment,this.node=null}return e.prototype.bind=function(){for(var e=this,n=this.parentFragment;!n.context;)n=n.parent;this.context=n.context;var r=this.template;r.m?(this.method=r.m,this.resolvers=[],this.models=r.a.r.map(function(n,r){if(/^event(?:\.(.+))?$/.test(n))return{event:!0,keys:n.length>5?n.slice(6).split("."):[],unbind:t};var i=Pt(e.parentFragment,n);return i||!function(){var t=e.parentFragment.resolve(n,function(n){e.models[r]=n,y(e.resolvers,t)});e.resolvers.push(t)}(),i}),this.argsFn=Ft(r.a.s,r.a.r.length)):(this.action="string"==typeof r?r:"string"==typeof r.n?r.n:new vp({owner:this,template:r.n}),this.args=r.a?"string"==typeof r.a?[r.a]:r.a:r.d?new vp({owner:this,template:r.d}):[]),this.template.n&&"string"!=typeof this.template.n&&this.action.bind(),this.template.d&&this.args.bind()},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},e.prototype.fire=function(t){if(t.keypath=this.context.getKeypath(),t.context=this.context.get(),t.index=this.parentFragment.indexRefs,this.method){if("function"!=typeof this.ractive[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');var e=this.models.map(function(e){if(!e)return void 0;if(e.event){for(var n=t,r=e.keys.slice();r.length;)n=n[r.shift()];return n}return e.wrapper?e.wrapper.value:e.get()}),n=this.ractive.event;this.ractive.event=t;var r=this.argsFn.apply(null,e);this.ractive[this.method].apply(this.ractive,r),this.ractive.event=n}else{var i=this.action.toString(),r=this.template.d?this.args.getArgsList():this.args;t.name=i,xr(this.ractive,i,{event:t,args:r})}},e.prototype.rebind=function(){throw new Error("EventHandler$rebind not yet implemented!")},e.prototype.render=function(){var t=this;this.node=this.owner.node;var e=sn("events",this.ractive,this.name);if(e){var n=function(e){return t.fire(e)};this.customHandler=e(this.node,n)}else"on"+this.name in this.node||Gs(this.name,"events"),this.node._ractive.events[this.name]=this,this.node.addEventListener(this.name,Ar,!1)},e.prototype.unbind=function(){var t=this.template;t.m?(this.resolvers.forEach(S),this.resolvers=[],this.models.forEach(function(t){t&&t.unbind()})):(this.action.unbind&&this.action.unbind(),this.args.unbind&&this.args.unbind())},e.prototype.unrender=function(){this.customHandler?this.customHandler.teardown():(this.node.removeEventListener(this.name,Ar,!1),this.node._ractive.events[this.name]=null)},e.prototype.update=function(){this.method||(this.action.update&&this.action.update(),this.template.d&&this.args.update())},e}(),hl={update:t,teardown:t},ll=function(){function t(e,n){Tr(this,t),this.owner=e,this.template=n,this.parentFragment=e.parentFragment,this.ractive=e.ractive,this.dynamicName="object"==typeof n.n,this.dynamicArgs=!!n.d,this.dynamicName?this.nameFragment=new vp({owner:this,template:n.n}):this.name=n.n||n,this.dynamicArgs?this.argsFragment=new vp({owner:this,template:n.d}):this.args=n.a||[],this.node=null,this.intermediary=null}return t.prototype.bind=function(){this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString()),this.dynamicArgs&&this.argsFragment.bind()},t.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},t.prototype.rebind=function(){this.dynamicName&&this.nameFragment.rebind(),this.dynamicArgs&&this.argsFragment.rebind()},t.prototype.render=function(){var t=sn("decorators",this.ractive,this.name);if(!t)return Gs(this.name,"decorators"),void(this.intermediary=hl);this.node=this.owner.node;var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;if(this.intermediary=t.apply(this.ractive,[this.node].concat(e)),!this.intermediary||!this.intermediary.teardown)throw new Error("The '"+this.name+"' decorator must return an object with a teardown method")},t.prototype.unbind=function(){this.dynamicName&&this.nameFragment.unbind(),this.dynamicArgs&&this.argsFragment.unbind()},t.prototype.unrender=function(){this.intermediary.teardown()},t.prototype.update=function(){if(this.dynamicName){var t=this.nameFragment.toString();t!==this.name&&(this.name=t,this.unrender(),this.render())}else if(this.intermediary.update){var e=this.dynamicArgs?this.argsFragment.getArgsList():this.args;this.intermediary.update.apply(this.ractive,e)}else this.unrender(),this.render()},t}(),pl=bs?ia("div"):null,fl=function(t){function e(n){Cr(this,e),t.call(this,n),this.attributes=[],this.owner=n.owner,this.fragment=new vp({ractive:this.ractive,owner:this,template:[this.template]}),this.dirty=!1}return Pr(e,t),e.prototype.bind=function(){this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},e.prototype.rebind=function(){throw new Error("ConditionalAttribute$rebind is not yet implemented")},e.prototype.render=function(){this.node=this.owner.node,this.isSvg=this.node.namespaceURI===eu,this.rendered=!0,this.dirty=!0,this.update()},e.prototype.toString=function(){return this.fragment.toString()},e.prototype.unbind=function(){this.fragment.unbind()},e.prototype.unrender=function(){this.rendered=!1},e.prototype.update=function(){var t=this;this.dirty&&(this.fragment.update(),this.rendered&&!function(){var e=t.fragment.toString(),n=Fr(e,t.isSvg);t.attributes.filter(function(t){return Nr(n,t)}).forEach(function(e){t.node.removeAttribute(e.name)}),n.forEach(function(e){t.node.setAttribute(e.name,e.value)}),t.attributes=n}(),this.dirty=!1)},e}(ku),dl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},ml=function(t){function e(n){Zr(this,e),t.call(this,n),Qr(this,n.name),this.element=n.element,this.parentFragment=n.element.parentFragment,this.ractive=this.parentFragment.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.value=null,c(n.template)?this.fragment=new vp({owner:this,template:n.template}):(this.value=n.template,0===this.value&&(this.value="")),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===da&&this.fragment.items[0]}return Yr(e,t),e.prototype.bind=function(){this.fragment&&this.fragment.bind()},e.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)},e.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""},e.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():Mu.test(this.name)?!0:this.value},e.prototype.rebind=function(){this.unbind(),this.bind()},e.prototype.render=function(){var t=this.element.node;if(this.node=t,!t.namespaceURI||t.namespaceURI===Xa){var e=dl[this.name]||this.name;void 0!==t[e]&&(this.propertyName=e),(Mu.test(this.name)||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)}this.rendered=!0,this.updateDelegate=Ir(this),this.updateDelegate()},e.prototype.toString=function(){var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator)return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(Mu.test(this.name))return t?this.name:"";if(null==t)return"";var e=ut(this.getString()).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return e?this.name+'="'+e+'"':this.name}},e.prototype.unbind=function(){this.fragment&&this.fragment.unbind()},e.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.dirty=!1)},e}(ku),vl=function(t){function e(n){var r=this;Gr(this,e),t.call(this,n),this.liveQueries=[],this.name=n.template.e.toLowerCase(),this.isVoid=Wu.test(this.name);for(var i=this.parentFragment;i;){if(i.owner.type===ba){this.parent=i.owner;break}i=i.parent}this.attributeByName={},this.attributes=[],this.template.a&&(Object.keys(this.template.a).forEach(function(t){if("twoway"!==t&&"lazy"!==t){var e=new ml({name:t,element:r,parentFragment:r.parentFragment,template:r.template.a[t]});r.attributeByName[t]=e,"value"!==t&&"type"!==t&&r.attributes.push(e)}}),this.attributeByName.type&&this.attributes.unshift(this.attributeByName.type),this.attributeByName.value&&this.attributes.push(this.attributeByName.value)),this.conditionalAttributes=(this.template.m||[]).map(function(t){return new fl({owner:r,parentFragment:r.parentFragment,template:t})}),this.template.o&&(this.decorator=new ll(this,this.template.o)),this.eventHandlers=[],this.template.v&&Object.keys(this.template.v).forEach(function(t){var e=t.split("-"),n=r.template.v[t];e.forEach(function(t){r.eventHandlers.push(new cl(r,t,n))})}),n.template.f&&(this.fragment=new vp({template:n.template.f,owner:this,cssIds:null})),this.binding=null}return Jr(e,t),e.prototype.bind=function(){this.attributes.forEach(w),this.conditionalAttributes.forEach(w),this.eventHandlers.forEach(w),this.decorator&&this.decorator.bind(),this.fragment&&this.fragment.bind(),(this.binding=this.createTwowayBinding())&&this.binding.bind()},e.prototype.createTwowayBinding=function(){var t=this.template.a;if(!t)return null;var e="twoway"in t?0===t.twoway||"true"===t.twoway:this.ractive.twoway;if(!e)return null;var n=yr(this);if(!n)return null;var r=new n(this);return r&&r.model?r:null},e.prototype.detach=function(){this.decorator&&this.decorator.unrender();var t=this.node.parentNode;return t&&t.removeChild(this.node),this.node},e.prototype.find=function(t){return oa(this.node,t)?this.node:this.fragment?this.fragment.find(t):void 0},e.prototype.findAll=function(t,e){var n=e.test(this.node);n&&(e.add(this.node),e.live&&this.liveQueries.push(e)),this.fragment&&this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},e.prototype.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},e.prototype.findNextNode=function(){return null},e.prototype.firstNode=function(){return this.node},e.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():void 0},e.prototype.rebind=function(){this.attributes.forEach(j),this.conditionalAttributes.forEach(j),this.decorator&&this.decorator.rebind(),this.fragment&&this.fragment.rebind(),this.binding&&this.binding.rebind(),this.liveQueries.forEach(Xr)},e.prototype.render=function(t){var e=this;this.namespace=ri(this);var n=ia(this.template.e,this.namespace,this.getAttribute("is"));this.node=n;var r=this.parentFragment.findContext();su(n,"_ractive",{value:{proxy:this,ractive:this.ractive,fragment:this.parentFragment,events:{},context:r,keypath:r.getKeypath()}}),this.parentFragment.cssIds&&n.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.fragment&&this.fragment.render(n),this.attributes.forEach(O),this.conditionalAttributes.forEach(O),this.decorator&&zs.scheduleTask(function(){return e.decorator.render()},!0),this.binding&&this.binding.render(),this.eventHandlers.forEach(O),Dn(this);var i=this.template.t0||this.template.t1;if(i&&this.ractive.transitionsEnabled){var o=new Uh(this,i,!0);zs.registerTransition(o),this._introTransition=o}t.appendChild(n),this.rendered=!0},e.prototype.toString=function(){var t=this.template.e,e=this.attributes.map(ei).join("")+this.conditionalAttributes.map(ei).join("");"option"===this.name&&this.isSelected()&&(e+=" selected"),"input"===this.name&&ti(this)&&(e+=" checked");var n="<"+t+e+">";return this.isVoid?n:("textarea"===this.name&&void 0!==this.getAttribute("value")?n+=Kt(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(n+=this.getAttribute("value")||""),this.fragment&&(n+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),n+="</"+t+">")},e.prototype.unbind=function(){this.attributes.forEach(S),this.conditionalAttributes.forEach(S),this.decorator&&this.decorator.unbind(),this.fragment&&this.fragment.unbind()},e.prototype.unrender=function(t){if(this.rendered){this.rendered=!1;var e=this._introTransition;e&&e.complete(),"option"===this.name?this.detach():t&&zs.detachWhenReady(this),this.fragment&&this.fragment.unrender(),this.eventHandlers.forEach(A),this.binding&&this.binding.unrender(),!t&&this.decorator&&this.decorator.unrender();var n=this.template.t0||this.template.t2;if(n&&this.ractive.transitionsEnabled){var r=new Uh(this,n,!1);zs.registerTransition(r)}var i=this.attributeByName.id;i&&delete this.ractive.nodes[i.getValue()],ni(this)}},e.prototype.update=function(){this.dirty&&(this.attributes.forEach(C),this.conditionalAttributes.forEach(C),this.eventHandlers.forEach(C),this.decorator&&this.decorator.update(),this.fragment&&this.fragment.update(),this.dirty=!1)},e}(ku),gl=function(t){function e(){ii(this,e),t.apply(this,arguments)}return oi(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.defaultValue=this.node.value},e}(vl),yl=function(t){function e(n){si(this,e),t.call(this,n),this.options=[]}return ai(e,t),e.prototype.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&zs.scheduleTask(function(){t.sync(),t.dirty=!1}),this.parentFragment.bubble())},e.prototype.render=function(e){t.prototype.render.call(this,e),this.sync();for(var n=this.node,r=n.options.length;r--;)n.options[r].defaultSelected=n.options[r].selected;this.rendered=!0},e.prototype.sync=function(){var t=this.node;if(t){var e=b(t.options),n=this.getAttribute("value"),r=this.getAttribute("multiple");if(void 0!==n){var i=void 0;e.forEach(function(t){var e=t._ractive?t._ractive.value:t.value,o=r?ui(n,e):n==e;o&&(i=!0),t.selected=o}),i||r||(e[0]&&(e[0].selected=!0),this.binding&&this.binding.forceUpdate())}else this.binding&&this.binding.forceUpdate()}},e.prototype.update=function(){t.prototype.update.call(this),this.sync()},e}(vl),bl=function(t){function e(n){ci(this,e);var r=n.template;r.a||(r.a={}),void 0!==r.a.value||"disabled"in r||(r.a.value=r.f),t.call(this,n),this.select=li(this.parent)}return hi(e,t),e.prototype.bind=function(){if(!this.select)return void t.prototype.bind.call(this);var e=this.attributeByName.selected;if(e&&void 0!==this.select.getAttribute("value")){var n=this.attributes.indexOf(e);this.attributes.splice(n,1),delete this.attributeByName.selected}t.prototype.bind.call(this),this.select.options.push(this)},e.prototype.isSelected=function(){var t=this.getAttribute("value");if(void 0===t||!this.select)return!1;var e=this.select.getAttribute("value");if(e==t)return!0;if(this.select.getAttribute("multiple")&&c(e))for(var n=e.length;n--;)if(e[n]==t)return!0},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.select&&y(this.select.options,this)},e}(vl),wl=function(t){function e(n){pi(this,e),t.call(this,n),this.formBindings=[]}return fi(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this.node.addEventListener("reset",di,!1)},e.prototype.unrender=function(){this.node.removeEventListener("reset",di,!1)},e}(vl),El="/* Ractive.js component styles */\n",_l=[],xl=!1;bs?(Bh=bs.createElement("style"),Bh.type="text/css",Mh=bs.getElementsByTagName("head")[0],Kh=!1,Wh=Bh.styleSheet,Vh=function(){var t=El+_l.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");Wh?Wh.cssText=t:Bh.innerHTML=t,Kh||(Mh.appendChild(Bh),Kh=!0)},Dh={add:function(t){_l.push(t),xl=!0},apply:function(){xl&&(Vh(),xl=!1)}}):Dh={add:t,apply:t};var Ol,jl,kl,Sl=new Fs("render"),Al=new Fs("complete"),Tl=function(){function t(e){yi(this,t),this.hook=new Fs(e),this.inProcess={},this.queue={}}return t.prototype.begin=function(t){this.inProcess[t._guid]=!0},t.prototype.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?bi(this.queue,e).push(t):wi(this,t),delete this.inProcess[t._guid]},t}(),Cl={name:"template",extend:function(t,e,n){var r;"template"in n&&(r=n.template,"function"==typeof r?e.template=r:e.template=Oi(r,e))},init:function(t,e,n){var r,i;r="template"in n?n.template:t.prototype.template,"function"==typeof r&&(i=r,r=_i(e,i),e._config.template={fn:i,result:r}),r=Oi(r,e),e.template=r.t,r.p&&ji(e.partials,r.p)},reset:function(t){var e,n=Ei(t);return n?(e=Oi(n,t),t.template=e.t,ji(t.partials,e.p,!0),!0):void 0}},Pl={name:"data",extend:function(t,e,n){var r=void 0,i=void 0;if(n.data&&p(n.data))for(r in n.data)i=n.data[r],i&&"object"==typeof i&&(p(i)||c(i))&&s("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Si(e.data,n.data)},init:function(t,e,n){var r=Si(t.prototype.data,n.data);return"function"==typeof r&&(r=r.call(e)),r||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},Fl=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Nl=/\/\*.*?\*\//g,Il=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Rl=/^@media/,Ll=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Dl=1,Vl={name:"css",extend:function(t,e,n){if(n.css){var r=Dl++,i=n.noCssTransform?n.css:Ci(n.css,r);e.cssId=r,Dh.add({id:r,styles:i})}},init:function(){}},Bl={extend:function(t,e,n){e.adapt=Ni(e.adapt,v(n.adapt))},init:function(){}};Ol=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],jl=function(t,e){this.name=t,this.useDefaults=e},jl.prototype={constructor:jl,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var r,i=this.name,o=n[i];r=ou(t[i]);for(var s in o)r[s]=o[s];e[i]=r},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var r=e[t];r._fn&&(r._fn.isOwner?e[t]=r._fn:delete e[t],n=!0)}),n}},kl=Ol.map(function(t){return new jl(t,"computed"===t)});var Ml,Wl,Kl,zl,$l,Ul;zl={adapt:Bl,css:Vl,data:Pl,template:Cl},Kl=Object.keys(gs),Ul=Wi(Kl.filter(function(t){return!zl[t]})),$l=Wi(Kl.concat(kl.map(function(t){return t.name}))),Wl=[].concat(Kl.filter(function(t){return!kl[t]&&!zl[t]}),kl,zl.template,zl.css),Ml={extend:function(t,e,n){return Bi("extend",t,e,n)},init:function(t,e,n){return Bi("init",t,e,n)},reset:function(t){return Wl.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Wl};var ql=new Fs("config"),Hl=new Tl("init"),Ql=/\$\{([^\}]+)\}/g,Zl=function(t){function e(n,r,i){qi(this,e),t.call(this,null,null),this.root=this.parent=n,this.signature=r,this.key=i,this.isReadonly=!this.signature.setter,this.context=n.computationContext,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.boundsSensitive=!0,this.dirty=!0}return Hi(e,t),e.prototype.get=function(t){return t&&jt(this),this.dirty&&(this.value=this.getValue(),this.adapt(),this.dirty=!1),this.value},e.prototype.getValue=function(){xt();var t=void 0;try{t=this.signature.getter.call(this.context)}catch(e){s("Failed to compute "+this.getKeypath()+": "+(e.message||e)),console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var n=Qi(this.signature.getterString),r=this.signature.getterUseStack?"\n\n"+Zi(e.stack):"";console.error(e.name+": "+e.message+"\n\n"+n+r),console.groupCollapsed&&console.groupEnd()}var i=Ot();return this.setDependencies(i),t},e.prototype.handleChange=function(){this.dirty=!0,this.deps.forEach(_),this.children.forEach(x),this.clearUnresolveds()},e.prototype.init=function(){},e.prototype.mark=function(){this.handleChange()},e.prototype.register=function(t){this.deps.push(t)},e.prototype.set=function(t){if(!this.signature.setter)throw new Error("Cannot set read-only computed property '"+this.key+"'");this.signature.setter(t)},e.prototype.setDependencies=function(t){for(var e=this.dependencies.length;e--;){var n=this.dependencies[e];~t.indexOf(n)||n.unregister(this)}for(e=t.length;e--;){var n=t[e];~this.dependencies.indexOf(n)||n.register(this)}this.dependencies=t},e.prototype.unregister=function(t){y(this.deps,t)},e}(Ru),Yl=function(t){function e(n){Yi(this,e),t.call(this,null,null),this.changes={},this.isRoot=!0,this.root=this,this.ractive=n.ractive,this.value=n.data,this.adaptors=n.adapt,this.adapt(),this.mappings={},this.computationContext=n.ractive,this.computations={}}return Gi(e,t),e.prototype.applyChanges=function(){return this._changeHash={},this.flush(),this._changeHash},e.prototype.compute=function(t,e){var n=new Zl(this,e,t);return this.computations[t]=n,n},e.prototype.get=function(t){var e=this;t&&jt(this);var n=ct({},this.value);return Object.keys(this.mappings).forEach(function(t){n[t]=e.mappings[t].value}),Object.keys(this.computations).forEach(function(t){"@"!==t[0]&&(n[t]=e.computations[t].value)}),n},e.prototype.getKeypath=function(){return""},e.prototype.has=function(e){return e in this.mappings||e in this.computations||t.prototype.has.call(this,e)},e.prototype.joinKey=function(e){return this.mappings.hasOwnProperty(e)?this.mappings[e]:this.computations.hasOwnProperty(e)?this.computations[e]:t.prototype.joinKey.call(this,e)},e.prototype.map=function(t,e){this.mappings[t]=e},e.prototype.set=function(t){var e=this.wrapper;if(e){var n=!e.reset||e.reset(t)===!1;n&&(e.teardown(),this.wrapper=null,this.value=t,this.adapt())}else this.value=t,this.adapt();this.deps.forEach(_),this.children.forEach(x),this.clearUnresolveds()},e.prototype.retrieve=function(){return this.value},e.prototype.update=function(){},e.prototype.updateFromBindings=function(e){var n=this;t.prototype.updateFromBindings.call(this,e),e&&Object.keys(this.mappings).forEach(function(t){var r=n.mappings[t];r.updateFromBindings(e)})},e}(Ru),Gl=["pop","push","reverse","shift","sort","splice","unshift"],Jl=[];
Gl.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=q(this.length,t,n),o=Array.prototype[t].apply(this,arguments);zs.start(),this._ractive.setting=!0;for(var s=this._ractive.wrappers.length;s--;)Ji(this._ractive.wrappers[s],this,t,i);return zs.end(),this._ractive.setting=!1,o};su(Jl,t,{value:e})});var Xl=void 0,tp=void 0;({}).__proto__?(Xl=function(t){return t.__proto__=Jl},tp=function(t){return t.__proto__=Array.prototype}):(Xl=function(t){for(var e=Gl.length;e--;){var n=Gl[e];su(t,n,{value:Jl[n],configurable:!0})}},tp=function(t){for(var e=Gl.length;e--;)delete t[Gl[e]]}),Xl.unpatch=tp;var ep="Something went wrong in a rather interesting way",np={filter:function(t){return c(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new rp(t,e,n)}},rp=function(){function t(e,n){Xi(this,t),this.root=e,this.value=n,this.__model=null,n._ractive||(su(n,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Xl(n)),n._ractive.instances[e._guid]||(n._ractive.instances[e._guid]=0,n._ractive.instances.push(e)),n._ractive.instances[e._guid]+=1,n._ractive.wrappers.push(this)}return t.prototype.get=function(){return this.value},t.prototype.teardown=function(){var t,e,n,r,i;if(t=this.value,e=t._ractive,n=e.wrappers,r=e.instances,e.setting)return!1;if(i=n.indexOf(this),-1===i)throw new Error(ep);if(n.splice(i,1),n.length){if(r[this.root._guid]-=1,!r[this.root._guid]){if(i=r.indexOf(this.root),-1===i)throw new Error(ep);r.splice(i,1)}}else delete t._ractive,Xl.unpatch(this.value)},t}(),ip=void 0;try{Object.defineProperty({},"test",{value:0}),ip={filter:function(t){return t&&"object"==typeof t},wrap:function(t,e,n){return new ap(t,e,n)}}}catch(uu){ip=!1}var op,sp,ap=function(){function t(e,n,r){var i=this;to(this,t),this.ractive=e,this.value=n,this.keypath=r,this.originalDescriptors={},Object.keys(n).forEach(function(t){var n=Object.getOwnPropertyDescriptor(i.value,t);i.originalDescriptors[t]=n;var o=r?r+"."+t:t,s=eo(n,e,o);Object.defineProperty(i.value,t,s)})}return t.prototype.get=function(){return this.value},t.prototype.reset=function(){throw new Error("TODO magic adaptor reset")},t.prototype.set=function(t,e){this.value[t]=e},t.prototype.teardown=function(){var t=this;Object.keys(this.value).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t.value,e);n.set&&n.set.__magic&&(no(n),1===n.set.__magic.dependants.length&&Object.defineProperty(t.value,e,n.set.__magic.originalDescriptor))})},t}();ip&&(op={filter:function(t,e,n){return ip.filter(t,e,n)&&np.filter(t)},wrap:function(t,e,n){return new sp(t,e,n)}},sp=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=ip.wrap(t,e,n),this.arrayWrapper=np.wrap(t,e,n),Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(t){this.arrayWrapper.__model=t}})},sp.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var up=new Fs("construct"),cp=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],hp=0,lp=new Fs("teardown"),pp=function(t){function e(n,r){uo(this,e),t.call(this,n),this.type=Oa;var i=ou(r.prototype);this.instance=i,this.name=n.template.e,this.parentFragment=n.parentFragment,this.complexMappings=[],this.liveQueries=[],i.el&&s("The <"+this.name+"> component has a default 'el' property; it has been disregarded");var o=n.template.p||{};"content"in o||(o.content=n.template.f||[]),this._partials=o,this.yielders={},ro(this.instance,{partials:o});for(var a=n.parentFragment,u=void 0;a;){if(a.owner.type===ja){u=a.owner.container;break}a=a.parent}i.parent=this.parentFragment.ractive,i.container=u||null,i.root=i.parent.root,i.component=this,i._inlinePartials=o,this.template.v&&this.setupEvents()}return co(e,t),e.prototype.bind=function(){var t=this,e=this.instance.viewmodel,n=e.value;this.template.a&&Object.keys(this.template.a).forEach(function(r){var i=t.template.a[r];if(0===i)e.joinKey(r).set(!0);else if("string"==typeof i){var o=ft(i);e.joinKey(r).set(o?o.value:i)}else if(c(i))if(1===i.length&&i[0].t===da){var s=Vt(t.parentFragment,i[0]);s||(a("The "+r+"='{{"+i[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(r),s=t.parentFragment.findContext().joinKey(r)),e.map(r,s),void 0===s.get()&&r in n&&s.set(n[r])}else!function(){var n=new vp({owner:t,template:i}).bind(),o=e.joinKey(r);o.set(n.valueOf()),n.bubble=function(){vp.prototype.bubble.call(n),o.set(n.valueOf())},t.complexMappings.push(n)}()}),Ki(this.instance,{partials:this._partials},{indexRefs:this.instance.isolated?{}:this.parentFragment.indexRefs,keyRefs:this.instance.isolated?{}:this.parentFragment.keyRefs,cssIds:this.parentFragment.cssIds})},e.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())},e.prototype.checkYielders=function(){var t=this;Object.keys(this.yielders).forEach(function(e){if(t.yielders[e].length>1)throw zs.end(),new Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time")})},e.prototype.detach=function(){return this.instance.fragment.detach()},e.prototype.find=function(t){return this.instance.fragment.find(t)},e.prototype.findAll=function(t,e){this.instance.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t):void 0:this.instance},e.prototype.findAllComponents=function(t,e){e.test(this)&&(e.add(this.instance),e.live&&this.liveQueries.push(e)),this.instance.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(){return this.instance.fragment.firstNode()},e.prototype.rebind=function(){var t=this;this.complexMappings.forEach(j),this.liveQueries.forEach(lo),this.template.a&&!function(){var e=t.instance.viewmodel;Object.keys(t.template.a).forEach(function(n){var r=t.template.a[n];if(c(r)&&1===r.length&&r[0].t===da){var i=Vt(t.parentFragment,r[0]);i||(a("The "+n+"='{{"+r[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.instance}),t.parentFragment.ractive.get(n),i=t.parentFragment.findContext().joinKey(n)),e.map(n,i)}})}(),this.instance.fragment.rebind(this.instance.viewmodel)},e.prototype.render=function(t){gi(this.instance,t,null),this.checkYielders(),vi(this),this.rendered=!0},e.prototype.setupEvents=function(){var t=this;Object.keys(this.template.v).forEach(function(e){var r=t.template.v[e];"string"!=typeof r&&n("Components currently only support simple events - you cannot include arguments. Sorry!");var i=t.ractive;t.instance.on(e,function(){var t=void 0;arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments));var e=Array.prototype.slice.call(arguments);return xr(i,r,{event:t,args:e}),!1})})},e.prototype.toString=function(){return this.instance.toHTML()},e.prototype.unbind=function(){this.complexMappings.forEach(S);var t=this.instance;t.viewmodel.teardown(),t.fragment.unbind(),t._observers.forEach(E),ho(this),t.fragment.rendered&&t.el.__ractive_instances__&&y(t.el.__ractive_instances__,t),lp.fire(t)},e.prototype.unrender=function(t){var e=this;this.shouldDestroy=t,this.instance.unrender(),this.liveQueries.forEach(function(t){return t.remove(e.instance)})},e.prototype.update=function(){this.instance.fragment.update(),this.checkYielders(),this.dirty=!1},e}(ku),fp=function(t){function e(n){fo(this,e),t.call(this,n),this.type=fa}return mo(e,t),e.prototype.bind=function(){},e.prototype.detach=function(){if(!this.node.parentNode)throw new Error("TODO an unexpected situation arose");return this.node.parentNode.removeChild(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.rebind=function(){},e.prototype.render=function(t){this.node=bs.createTextNode(this.template),t.appendChild(this.node),this.rendered=!0},e.prototype.toString=function(t){return t?Kt(this.template):this.template},e.prototype.unbind=function(){},e.prototype.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},e.prototype.update=function(){},e.prototype.valueOf=function(){return this.template},e}(ku),dp={};dp[Sa]=Su,dp[da]=Qu,dp[wa]=nh,dp[va]=oh,dp[ma]=uh,dp[ja]=ch;var mp={doctype:Su,form:wl,input:gl,option:bl,select:yl,textarea:gl},vp=function(){function t(e){go(this,t),this.owner=e.owner,this.isRoot=!e.owner.parentFragment,this.parent=this.isRoot?null:this.owner.parentFragment,this.ractive=e.ractive||(this.isRoot?e.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null,this.context=null,this.rendered=!1,this.indexRefs=e.indexRefs||(this.parent?this.parent.indexRefs:[]),this.keyRefs=e.keyRefs||(this.parent?this.parent.keyRefs:{}),this.cssIds="cssIds"in e?e.cssIds:this.parent?this.parent.cssIds:null,this.resolvers=[],this.dirty=!1,this.dirtyArgs=this.dirtyValue=!0,this.template=e.template||[],this.createItems()}return t.prototype.bind=function(t){return this.context=t,this.items.forEach(w),this.bound=!0,this.dirty&&this.update(),this},t.prototype.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&zs.addFragment(this):this.owner.bubble())},t.prototype.createItems=function(){var t=this;this.items=this.template.map(function(e,n){return vo({parentFragment:t,template:e,index:n})})},t.prototype.detach=function(){var t=st();return this.items.forEach(function(e){return t.appendChild(e.detach())}),t},t.prototype.find=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var r=this.items[n].find(t);if(r)return r}},t.prototype.findAll=function(t,e){if(this.items){var n=this.items.length,r=void 0;for(r=0;n>r;r+=1){var i=this.items[r];i.findAll&&i.findAll(t,e)}}return e},t.prototype.findComponent=function(t){var e=this.items.length,n=void 0;for(n=0;e>n;n+=1){var r=this.items[n].findComponent(t);if(r)return r}},t.prototype.findAllComponents=function(t,e){if(this.items){var n=this.items.length,r=void 0;for(r=0;n>r;r+=1){var i=this.items[r];i.findAllComponents&&i.findAllComponents(t,e)}}return e},t.prototype.findContext=function(){for(var t=this;!t.context;)t=t.parent;return t.context},t.prototype.findNextNode=function(t){var e=this.items[t.index+1];return e?e.firstNode():this.isRoot?this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null:this.owner.findNextNode(this)},t.prototype.findParentNode=function(){var t=this;do{if(t.owner.type===ba)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el;t=t.componentParent||t.parent}while(t);throw new Error("Could not find parent node")},t.prototype.findRepeatingFragment=function(){for(var t=this;t.parent&&!t.isIteration;)t=t.parent||t.componentParent;return t},t.prototype.firstNode=function(){return this.items[0]?this.items[0].firstNode():this.parent.findNextNode(this.owner)},t.prototype.getArgsList=function(){if(this.dirtyArgs){var t={},e=dt(this.items,t,this.ractive._guid),n=ft("["+e+"]",t);this.argsList=n?n.value:[this.toString()],this.dirtyArgs=!1}return this.argsList},t.prototype.rebind=function(t){this.context=t,this.items.forEach(j)},t.prototype.render=function(t){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0,this.items.forEach(function(e){return e.render(t)})},t.prototype.resetTemplate=function(t){var e=this.bound,n=this.rendered;if(e&&(n&&this.unrender(!0),this.unbind()),this.template=t,this.createItems(),e&&(this.bind(this.context),n)){var r=this.findParentNode(),i=this.parent?this.parent.findNextNode(this.owner):null;if(i){var o=st();this.render(o),r.insertBefore(o,i)}else this.render(r)}},t.prototype.resolve=function(t,e){if(!this.context)return this.parent.resolve(t,e);var n=new ju(this,t,e);return this.resolvers.push(n),n},t.prototype.toHtml=function(){return this.toString()},t.prototype.toString=function(t){return this.items.map(t?F:P).join("")},t.prototype.unbind=function(){return this.items.forEach(S),this.bound=!1,this},t.prototype.unrender=function(t){this.items.forEach(t?yo:A),this.rendered=!1},t.prototype.update=function(){this.dirty&&(this.items.forEach(C),this.dirty=!1)},t.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var t={},e=dt(this.items,t,this.ractive._guid),n=ft(e,t);this.value=n?n.value:this.toString(),this.dirtyValue=!1}return this.value},t}(),gp=["template","partials","components","decorators","events"],yp=new Fs("complete"),bp=new Fs("reset"),wp=new Fs("render"),Ep=new Fs("unrender"),_p=Q("push"),xp=Q("pop"),Op={init:!1,once:!0},jp=function(){function t(e,n,r,i){Fo(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=r,this.pending=null,n.register(this),i.init!==!1?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()}return t.prototype.handleChange=function(){this.pending?(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(Io)),this.handleChange())},t.prototype.shuffle=function(t){var e=this,n=this.slice(),r=[],i=[],o=void 0,s={};t.forEach(function(t,n){s[t]=!0,t!==n&&void 0===o&&(o=n),-1===t&&i.push(e.sliced[n])}),void 0===o&&(o=t.length);for(var a=n.length,u=0;a>u;u+=1)s[u]||r.push(n[u]);this.pending={inserted:r,deleted:i,start:o},this.sliced=n},t.prototype.slice=function(){var t=this.model.get();return c(t)?t.slice():[]},t}(),kp=function(){function t(e,n,r,i){Ro(this,t),this.context=e,this.model=n,this.keypath=n.getKeypath(),this.callback=r,this.oldValue=void 0,this.newValue=n.get(),this.defer=i.defer,this.once=i.once,this.strict=i.strict,this.dirty=!1,i.init!==!1?this.dispatch():this.oldValue=this.newValue,n.register(this)}return t.prototype.cancel=function(){this.model.unregister(this)},t.prototype.dispatch=function(){this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.newValue,this.dirty=!1},t.prototype.handleChange=function(){if(!this.dirty){if(this.newValue=this.model.get(),this.strict&&this.newValue===this.oldValue)return;zs.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel()}},t}(),Sp=function(){function t(e,n,r,i,o){var s=this;Ro(this,t),this.context=e,this.baseModel=n,this.keys=r,this.callback=i;var a=r.join("\\.").replace(/\*/g,"(.+)"),u=n.getKeypath();this.pattern=new RegExp("^"+(u?u+".":"")+a+"$"),this.oldValues={},this.newValues={},this.defer=o.defer,this.once=o.once,this.strict=o.strict,this.dirty=!1,this.baseModel.findMatches(this.keys).forEach(function(t){s.newValues[t.getKeypath()]=t.get()}),o.init!==!1?this.dispatch():this.oldValues=this.newValues,n.register(this)}return t.prototype.cancel=function(){this.baseModel.unregister(this)},t.prototype.dispatch=function(){var t=this;Object.keys(this.newValues).forEach(function(e){var n=t.newValues[e],r=t.oldValues[e];if(!(t.strict&&n===r||h(n,r))){var i=t.pattern.exec(e).slice(1),o=[n,r,e].concat(i);t.callback.apply(t.context,o)}}),this.oldValues=this.newValues,this.dirty=!1},t.prototype.handleChange=function(){var t=this;this.dirty||(this.newValues={},this.baseModel.findMatches(this.keys).forEach(function(e){var n=e.getKeypath();t.newValues[n]=e.get()}),zs.addObserver(this,this.defer),this.dirty=!0,this.once&&this.cancel())},t}(),Ap={},Tp=new Fs("insert"),Cp=function(){function t(e,n,r,i){Ho(this,t),this.ractive=e,this.selector=n,this.live=r,this.isComponentQuery=i,this.result=[],this.dirty=!0}return t.prototype.add=function(t){this.result.push(t),this.makeDirty()},t.prototype.cancel=function(){var t,e,n;t=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},t.prototype.init=function(){this.dirty=!1},t.prototype.makeDirty=function(){var t=this;this.dirty||(this.dirty=!0,zs.scheduleTask(function(){return t.update()}))},t.prototype.remove=function(t){var e=this.result.indexOf(this.isComponentQuery?t.instance:t);-1!==e&&this.result.splice(e,1)},t.prototype.update=function(){this.result.sort(this.isComponentQuery?Zo:Qo),this.dirty=!1},t.prototype.test=function(t){return this.isComponentQuery?!this.selector||t.name===this.selector:t?oa(t,this.selector):null},t}(),Pp=new Fs("detach"),Fp=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Sh(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};Fp.prototype={tick:function(){var t,e,n,r,i,o;return o=this.keypath,this.running?(r=Date.now(),t=r-this.startTime,t>=this.duration?(null!==o&&(zs.start(this.root),this.model&&this.model.set(this.to),zs.end()),this.step&&this.step(1,this.to),this.complete(this.to),i=this.root._animations.indexOf(this),-1===i&&s("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(n=this.interpolator(e),zs.start(this.root),this.model&&this.model.set(n),zs.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&s("Animation was not found"),this.root._animations.splice(t,1)}};var Np={stop:t},Ip={add:is,animate:ns,detach:es,find:ts,findAll:Xo,findAllComponents:Jo,findComponent:qo,findContainer:Uo,findParent:$o,fire:zo,get:Ko,insert:Mo,merge:Bo,observe:Lo,observeList:No,observeOnce:Po,off:Co,on:To,once:ko,pop:xp,push:_p,render:Oo,reset:xo,resetPartial:_o,resetTemplate:bo,reverse:ra,set:nt,shift:na,sort:ea,splice:ta,subtract:et,teardown:J,toggle:G,toHTML:Y,toHtml:Y,unrender:Z,unshift:Hs,update:U,updateModel:$},Rp={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},Lp="function";if(typeof Date.now!==Lp||typeof String.prototype.trim!==Lp||typeof Object.keys!==Lp||typeof Array.prototype.indexOf!==Lp||typeof Array.prototype.forEach!==Lp||typeof Array.prototype.map!==Lp||typeof Array.prototype.filter!==Lp||ys&&typeof ys.addEventListener!==Lp)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return ct(ds.prototype,Ip,gs),ds.prototype.constructor=ds,ds.defaults=ds.prototype,au(ds,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:ps},getNodeInfo:{value:os},parse:{value:Je},Promise:{value:Cs},svg:{value:Ss},magic:{value:_s},VERSION:{value:"<@version@>"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Rp},events:{writable:!0,value:{}},interpolators:{writable:!0,value:kh},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),ds});
//# sourceMappingURL=ractive.runtime.min.js.map
